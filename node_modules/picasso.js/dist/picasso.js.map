{"version":3,"file":"picasso.js","sources":["../src/core/dock-layout/dock-settings-resolver.js","../src/core/utils/is-number.js","../src/core/geometry/util.js","../src/core/dock-layout/dock-layout.js","../src/core/dock-layout/dock-config.js","../src/core/utils/event-type.js","../node_modules/d3-path/src/path.js","../node_modules/d3-shape/src/math.js","../node_modules/d3-shape/src/arc.js","../node_modules/d3-shape/src/curve/linear.js","../node_modules/d3-shape/src/point.js","../node_modules/d3-shape/src/curve/basis.js","../node_modules/d3-shape/src/curve/cardinal.js","../node_modules/d3-shape/src/curve/catmullRom.js","../node_modules/d3-shape/src/curve/monotone.js","../node_modules/d3-shape/src/curve/natural.js","../node_modules/d3-shape/src/curve/step.js","../node_modules/d3-shape/src/stack.js","../node_modules/d3-shape/src/order/ascending.js","../src/core/utils/registry.js","../node_modules/d3-format/src/formatSpecifier.js","../node_modules/d3-time/src/interval.js","../node_modules/d3-time/src/week.js","../node_modules/d3-time/src/utcWeek.js","../node_modules/d3-time-format/src/locale.js","../src/core/data/field.js","../src/core/data/extractor.js","../src/core/data/stack.js","../src/core/charts/formatter/index.js","../node_modules/d3-array/src/ticks.js","../node_modules/d3-collection/src/map.js","../node_modules/d3-collection/src/set.js","../node_modules/d3-scale/src/ordinal.js","../node_modules/d3-scale/src/band.js","../node_modules/d3-color/src/define.js","../node_modules/d3-color/src/color.js","../node_modules/d3-color/src/lab.js","../node_modules/d3-color/src/cubehelix.js","../node_modules/d3-interpolate/src/color.js","../node_modules/d3-interpolate/src/cubehelix.js","../node_modules/d3-scale/src/continuous.js","../node_modules/d3-scale/src/linear.js","../node_modules/d3-scale/src/threshold.js","../src/core/scales/ticks/tick-generators.js","../src/core/scales/settings-resolver.js","../src/core/scales/linear.js","../src/core/scales/band.js","../src/core/scales/h-band.js","../src/core/utils/min-max.js","../src/core/scales/color/sequential.js","../src/core/charts/scales/index.js","../node_modules/node-event-emitter/index.js","../src/core/scroll-api/index.js","../src/core/charts/scroll-api/index.js","../src/core/brush/range-collection.js","../src/core/brush/value-collection.js","../src/core/brush/brush.js","../node_modules/d3-ease/src/cubic.js","../src/core/chart-components/property-resolver.js","../src/core/scales/index.js","../src/core/component/brushing.js","../src/core/component/component-factory.js","../src/core/component/component-mixins.js","../src/core/component/tween.js","../src/core/math/vector.js","../src/core/math/intersection.js","../src/core/math/narrow-phase-collision.js","../src/core/style/resolver.js","../src/core/theme/index.js","../src/core/charts/chart.js","../src/core/charts/chart-mixins.js","../src/core/mediator/index.js","../src/core/data/data.js","../src/core/data/collections.js","../src/core/data/json-path-resolver.js","../src/core/data/util.js","../src/core/data/extractor-matrix.js","../src/core/data/dataset.js","../../path2d-polyfill/src/parse-path.js","../../path2d-polyfill/src/path2d-polyfill.js","../src/core/chart-components/box/box-math.js","../src/core/chart-components/box/box-shapes.js","../src/core/utils/points-to-path.js","../src/core/symbols/cross.js","../src/core/math/angles.js","../src/core/symbols/index.js","../src/core/chart-components/point/point.js","../src/core/chart-components/pie/pie.js","../src/core/transposer/transposer.js","../src/core/chart-components/grid/line.js","../src/core/chart-components/ref-line/lines-and-labels.js","../src/core/chart-components/ref-line/refline.js","../src/core/chart-components/axis/axis-line-node.js","../src/core/chart-components/axis/axis-label-node.js","../src/core/chart-components/axis/axis-tick-node.js","../src/core/chart-components/axis/axis-label-size.js","../src/core/chart-components/axis/axis-node-builder.js","../src/core/chart-components/text/text.js","../src/core/chart-components/scrollbar.js","../src/web/components/brush-range/brush-range-node-builder.js","../src/web/components/brush-range/brush-range-interaction.js","../src/web/components/brush-range/brush-range.js","../src/web/components/brush-range/brush-area-dir.js","../src/core/chart-components/range/range.js","../src/core/chart-components/brush-lasso/brush-lasso.js","../src/core/chart-components/labels/strategies.js","../src/core/chart-components/legend-cat/item-renderer.js","../src/core/chart-components/legend-cat/navigation-renderer.js","../src/core/chart-components/legend-cat/legend-layout.js","../src/core/chart-components/legend-cat/legend-cat.js","../src/core/chart-components/legend-cat/legend-resolver.js","../src/core/chart-components/legend-seq/node-builder.js","../src/core/chart-components/legend-seq/legend-seq.js","../src/core/chart-components/line/line.js","../src/web/components/brush-area/brush-area.js","../src/core/geometry/polygon.js","../src/core/geometry/polyline.js","../src/core/geometry/index.js","../src/core/scene-graph/transform-resolver.js","../src/core/scene-graph/scene-node.js","../src/core/scene-graph/collision.js","../src/core/scene-graph/collision-resolver.js","../src/core/scene-graph/display-objects/container.js","../src/core/scene-graph/display-objects/gradient-item.js","../src/core/math/cubic-bezier-curve-interpolation.js","../src/core/math/curve-flattness.js","../src/core/math/quad-bezier-curve-interpolation.js","../src/core/scene-graph/parse-path-d.js","../src/core/math/arc-to-center.js","../src/core/scene-graph/display-objects/index.js","../src/core/scene-graph/scene.js","../src/web/text-manipulation/string-tokenizer.js","../src/web/text-manipulation/word-break.js","../src/web/text-manipulation/line-break-resolver.js","../src/web/text-manipulation/text-ellipsis.js","../src/web/text-manipulation/baseline-heuristic.js","../src/web/text-manipulation/text-metrics.js","../src/web/renderer/canvas-renderer/canvas-gradient.js","../src/web/renderer/renderer-box.js","../src/web/renderer/index.js","../src/web/renderer/canvas-renderer/canvas-renderer.js","../src/core/utils/rtl-util.js","../src/web/renderer/node-tree.js","../src/web/renderer/svg-renderer/svg-tree.js","../src/web/renderer/svg-renderer/svg-gradient.js","../src/core/utils/crypto.js","../src/web/renderer/svg-renderer/svg-renderer.js","../node_modules/snabbdom/snabbdom.js","../node_modules/snabbdom/modules/attributes.js","../node_modules/snabbdom/modules/class.js","../node_modules/snabbdom/modules/style.js","../node_modules/snabbdom/modules/eventlisteners.js","../node_modules/snabbdom/h.js","../src/web/renderer/dom-renderer/dom-renderer.js","../src/index.js","../node_modules/extend/index.js","../src/about.js","../node_modules/d3-shape/src/constant.js","../node_modules/d3-shape/src/line.js","../node_modules/d3-shape/src/area.js","../node_modules/d3-shape/src/descending.js","../node_modules/d3-shape/src/identity.js","../node_modules/d3-shape/src/array.js","../node_modules/d3-format/src/formatPrefixAuto.js","../node_modules/d3-shape/src/offset/none.js","../node_modules/d3-shape/src/order/none.js","../node_modules/d3-format/src/formatDecimal.js","../node_modules/d3-format/src/exponent.js","../node_modules/d3-format/src/formatRounded.js","../node_modules/d3-format/src/formatTypes.js","../node_modules/d3-format/src/formatDefault.js","../node_modules/d3-format/src/identity.js","../node_modules/d3-format/src/defaultLocale.js","../node_modules/d3-format/src/locale.js","../node_modules/d3-format/src/formatGroup.js","../node_modules/d3-format/src/formatNumerals.js","../node_modules/d3-format/src/precisionFixed.js","../node_modules/d3-time/src/millisecond.js","../node_modules/d3-time/src/duration.js","../node_modules/d3-time/src/day.js","../node_modules/d3-time/src/second.js","../node_modules/d3-time/src/minute.js","../node_modules/d3-time/src/hour.js","../node_modules/d3-time/src/year.js","../node_modules/d3-time/src/month.js","../node_modules/d3-time/src/utcMinute.js","../node_modules/d3-time/src/utcHour.js","../node_modules/d3-time/src/utcDay.js","../node_modules/d3-time/src/utcYear.js","../node_modules/d3-time/src/utcMonth.js","../node_modules/d3-time-format/src/defaultLocale.js","../node_modules/d3-time-format/src/isoFormat.js","../src/core/formatter/index.js","../node_modules/d3-time-format/src/isoParse.js","../src/core/formatter/d3/numberFormat.js","../src/core/formatter/d3/timeFormat.js","../node_modules/d3-shape/src/offset/diverging.js","../node_modules/d3-shape/src/offset/silhouette.js","../node_modules/d3-shape/src/offset/expand.js","../node_modules/d3-shape/src/offset/wiggle.js","../node_modules/d3-shape/src/order/insideOut.js","../node_modules/d3-shape/src/order/reverse.js","../node_modules/d3-array/src/ascending.js","../node_modules/d3-array/src/bisect.js","../node_modules/d3-array/src/bisector.js","../node_modules/d3-array/src/range.js","../node_modules/d3-scale/src/array.js","../node_modules/d3-color/src/math.js","../node_modules/d3-interpolate/src/constant.js","../node_modules/d3-interpolate/src/rgb.js","../node_modules/d3-interpolate/src/number.js","../node_modules/d3-interpolate/src/object.js","../node_modules/d3-interpolate/src/string.js","../node_modules/d3-interpolate/src/value.js","../node_modules/d3-interpolate/src/date.js","../node_modules/d3-interpolate/src/array.js","../node_modules/d3-interpolate/src/round.js","../node_modules/d3-scale/src/constant.js","../node_modules/d3-scale/src/number.js","../node_modules/d3-scale/src/tickFormat.js","../node_modules/d3-format/src/precisionPrefix.js","../node_modules/d3-format/src/precisionRound.js","../node_modules/d3-scale/src/colors.js","../node_modules/d3-scale/src/category10.js","../node_modules/d3-scale/src/category20b.js","../node_modules/d3-scale/src/category20c.js","../node_modules/d3-scale/src/category20.js","../node_modules/d3-scale/src/cubehelix.js","../node_modules/d3-scale/src/rainbow.js","../src/core/scales/color/threshold.js","../src/core/scales/ordinal.js","../src/core/scales/color/categorical.js","../src/core/utils/event-emitter.js","../src/core/brush/index.js","../node_modules/d3-ease/src/elastic.js","../node_modules/d3-ease/src/poly.js","../node_modules/d3-ease/src/back.js","../src/core/component/settings-resolver.js","../src/core/renderer/index.js","../src/core/component/index.js","../src/core/data/index.js","../src/core/interaction/index.js","../src/web/interactions/native/index.js","../src/web/index.js","../src/core/chart-components/box/box.js","../src/core/chart-components/box/box-resolver.js","../src/core/scene-graph/attributes.js","../src/core/symbols/triangle.js","../src/core/symbols/circle.js","../src/core/symbols/diamond.js","../src/core/symbols/saltire.js","../src/core/symbols/square.js","../src/core/symbols/line.js","../src/core/symbols/star.js","../src/core/symbols/n-polygon.js","../src/core/symbols/bar.js","../src/core/chart-components/point/index.js","../node_modules/d3-shape/src/pie.js","../src/core/transposer/crispifier.js","../src/core/chart-components/ref-line/oob.js","../src/core/chart-components/axis/axis-default-settings.js","../src/core/chart-components/axis/axis.js","../src/core/chart-components/axis/axis-size-calculator.js","../src/core/chart-components/axis/index.js","../src/web/components/brush-range/brush-range-const.js","../src/core/chart-components/labels/labels.js","../src/core/chart-components/legend-cat/title-renderer.js","../src/core/chart-components/legend-cat/index.js","../src/core/chart-components/line/index.js","../src/core/chart-components/box/index.js","../src/core/chart-components/pie/index.js","../src/core/chart-components/grid/index.js","../src/core/chart-components/ref-line/index.js","../src/core/chart-components/text/index.js","../src/web/components/brush-range/index.js","../src/core/chart-components/range/index.js","../src/core/chart-components/brush-lasso/index.js","../src/core/chart-components/labels/index.js","../src/core/chart-components/legend-seq/index.js","../src/web/components/brush-area/index.js","../src/core/scene-graph/node.js","../src/core/geometry/rect.js","../src/core/geometry/circle.js","../src/core/geometry/line.js","../src/core/geometry/geometry-collection.js","../src/core/math/matrix.js","../src/core/scene-graph/node-selector.js","../src/core/scene-graph/display-objects/display-object.js","../src/core/scene-graph/node-container.js","../src/core/scene-graph/display-objects/stage.js","../src/core/scene-graph/display-objects/rect.js","../src/core/scene-graph/display-objects/circle.js","../src/core/scene-graph/display-objects/line.js","../src/core/scene-graph/display-objects/path.js","../src/core/utils/flatten-array.js","../src/core/scene-graph/display-objects/text.js","../src/core/scene-graph/context.js","../src/web/text-manipulation/text-const.js","../src/web/renderer/canvas-renderer/index.js","../src/web/renderer/canvas-renderer/shapes/rect.js","../src/web/renderer/canvas-renderer/shapes/circle.js","../src/web/renderer/canvas-renderer/shapes/line.js","../src/web/renderer/canvas-renderer/shapes/path.js","../src/web/renderer/canvas-renderer/shapes/text.js","../src/web/renderer/svg-renderer/svg-nodes.js","../node_modules/snabbdom/vnode.js","../node_modules/snabbdom/is.js","../node_modules/snabbdom/htmldomapi.js","../src/web/renderer/dom-renderer/vdom.js","../src/web/renderer/dom-renderer/index.js","../src/core/utils/logger.js","../src/core/theme/light/index.js"],"sourcesContent":["import extend from 'extend';\n\nfunction roundRect(rect) {\n  rect.x = Math.ceil(rect.x);\n  rect.y = Math.ceil(rect.y);\n  rect.width = Math.ceil(rect.width);\n  rect.height = Math.ceil(rect.height);\n}\n\nfunction getRect(container, settings) {\n  const containerRect = { x: 0, y: 0, width: 0, height: 0 };\n  const logicalContainerRect = { x: 0, y: 0, width: 0, height: 0 };\n\n  // Check input object for size\n  if (typeof container.getBoundingClientRect === 'function') {\n    const boundingRect = container.getBoundingClientRect();\n    containerRect.width = boundingRect.width;\n    containerRect.height = boundingRect.height;\n  } else {\n    containerRect.width = container.width || 0;\n    containerRect.height = container.height || 0;\n  }\n\n  // Check settings defintion for size\n  if (typeof settings.size !== 'undefined') {\n    containerRect.width = isNaN(settings.size.width) ? containerRect.width : settings.size.width;\n    containerRect.height = isNaN(settings.size.height) ? containerRect.height : settings.size.height;\n  }\n\n  if (typeof settings.logicalSize !== 'undefined') {\n    logicalContainerRect.width = isNaN(settings.logicalSize.width) ? containerRect.width : settings.logicalSize.width;\n    logicalContainerRect.height = isNaN(settings.logicalSize.height) ? containerRect.height : settings.logicalSize.height;\n    logicalContainerRect.align = isNaN(settings.logicalSize.align) ? 0.5 : Math.min(Math.max(settings.logicalSize.align, 0), 1);\n    logicalContainerRect.preserveAspectRatio = settings.logicalSize.preserveAspectRatio;\n  } else {\n    logicalContainerRect.width = containerRect.width;\n    logicalContainerRect.height = containerRect.height;\n    logicalContainerRect.preserveAspectRatio = false;\n  }\n\n  roundRect(logicalContainerRect);\n  roundRect(containerRect);\n\n  return [logicalContainerRect, containerRect];\n}\n\nexport default function resolveLayout(container, settings) {\n  return getRect(container, settings);\n}\n\nexport function resolveSettings(s) {\n  const settings = {\n    logicalSize: {\n      preserveAspectRatio: false\n    },\n    center: {\n      minWidthRatio: 0.5,\n      minHeightRatio: 0.5,\n      minWidth: 0,\n      minHeight: 0\n    }\n  };\n\n  extend(true, settings, s);\n\n  settings.center.minWidthRatio = Math.min(Math.max(settings.center.minWidthRatio, 0), 1); // Only accept value between 0-1\n  settings.center.minHeightRatio = Math.min(Math.max(settings.center.minHeightRatio, 0), 1); // Only accept value between 0-1\n  settings.center.minWidth = Math.max(settings.center.minWidth, 0); // Consider <= 0 to be falsy and fallback to ratio\n  settings.center.minHeight = Math.max(settings.center.minHeight, 0); // Consider <= 0 to be falsy and fallback to ratio\n\n  return settings;\n}\n","export function isNumber(v) {\n  return typeof v === 'number' && !isNaN(v);\n}\n\nexport function notNumber(value) {\n  return typeof value !== 'number' || isNaN(value);\n}\n","import { isNumber } from '../utils/is-number';\n\nexport function getMinMax(points) {\n  const num = points.length;\n  let xMin = NaN;\n  let xMax = NaN;\n  let yMin = NaN;\n  let yMax = NaN;\n\n  for (let i = 0; i < num; i++) {\n    xMin = isNaN(xMin) ? points[i].x : Math.min(xMin, points[i].x);\n    xMax = isNaN(xMax) ? points[i].x : Math.max(xMax, points[i].x);\n    yMin = isNaN(yMin) ? points[i].y : Math.min(yMin, points[i].y);\n    yMax = isNaN(yMax) ? points[i].y : Math.max(yMax, points[i].y);\n  }\n  return [xMin, yMin, xMax, yMax];\n}\n\n/**\n * @ignore\n * @param {oject} line\n * @returns {point[]} Array of points\n */\nexport function lineToPoints(line) {\n  const x1 = line.x1 || 0;\n  const y1 = line.y1 || 0;\n  const x2 = line.x2 || 0;\n  const y2 = line.y2 || 0;\n  return [{ x: x1, y: y1 }, { x: x2, y: y2 }];\n}\n\n/**\n * @ignore\n * @param {oject} rect\n * @returns {point[]} Array of points\n */\nexport function rectToPoints(rect) {\n  return [\n    { x: rect.x, y: rect.y },\n    { x: rect.x + rect.width, y: rect.y },\n    { x: rect.x + rect.width, y: rect.y + rect.height },\n    { x: rect.x, y: rect.y + rect.height }\n  ];\n}\n\nexport function pointsToRect(points) {\n  const [xMin, yMin, xMax, yMax] = getMinMax(points);\n\n  return {\n    x: xMin,\n    y: yMin,\n    width: xMax - xMin,\n    height: yMax - yMin\n  };\n}\n\nexport function pointsToCircle(points, r) {\n  return {\n    cx: points[0].x,\n    cy: points[0].y,\n    r\n  };\n}\n\nexport function pointsToLine(points) {\n  return {\n    x1: points[0].x,\n    y1: points[0].y,\n    x2: points[1].x,\n    y2: points[1].y\n  };\n}\n\nexport function pointToArray(p) {\n  return [p.x, p.y];\n}\n\nexport function arrayToPoint(ary) {\n  return { x: ary[0], y: ary[1] };\n}\n\n/**\n * @ignore\n * @param {oject}\n * @returns {string} Type of geometry\n */\nexport function getShapeType(shape) {\n  const {\n    x, y, // Point\n    width, height, // Rect\n    x1, x2, y1, y2, // Line\n    cx, cy, r, // Circle\n    vertices // Polygon\n  } = shape || {};\n\n  if (isNumber(cx) && isNumber(cy) && isNumber(r)) {\n    return 'circle';\n  } else if (isNumber(x1) && isNumber(x2) && isNumber(y1) && isNumber(y2)) {\n    return 'line';\n  } else if (isNumber(x) && isNumber(y) && isNumber(width) && isNumber(height)) {\n    return 'rect';\n  } else if (isNumber(x) && isNumber(y)) {\n    return 'point';\n  } else if (Array.isArray(vertices)) {\n    return 'polygon';\n  }\n  return null;\n}\n","import extend from 'extend';\nimport dockConfig from './dock-config';\nimport resolveLayout, { resolveSettings } from './dock-settings-resolver';\nimport { rectToPoints, pointsToRect } from '../geometry/util';\n\nfunction validateComponent(component) {\n  const expectedProperties = ['resize'];\n\n  expectedProperties.forEach((p) => {\n    if (typeof component[p] !== 'function') {\n      throw new Error(`Component is missing required function \"${p}\"`);\n    }\n  });\n}\n\nfunction cacheSize(c, reducedRect, containerRect) {\n  if (typeof c.cachedSize === 'undefined') {\n    const size = c.config.requiredSize()(reducedRect, containerRect);\n    if (typeof size === 'object') {\n      c.cachedSize = Math.ceil(size.size);\n      c.edgeBleed = size.edgeBleed;\n    } else {\n      c.cachedSize = Math.ceil(size);\n    }\n  }\n  return c.cachedSize;\n}\n\nfunction validateReduceRect(logicalContainerRect, reducedRect, settings) {\n  // Absolute value for width/height should have predence over relative value\n  const minReduceWidth = Math.min(settings.center.minWidth, logicalContainerRect.width) || Math.max(logicalContainerRect.width * settings.center.minWidthRatio, 1);\n  const minReduceHeight = Math.min(settings.center.minHeight, logicalContainerRect.height) || Math.max(logicalContainerRect.height * settings.center.minHeightRatio, 1);\n  return reducedRect.width >= minReduceWidth && reducedRect.height >= minReduceHeight;\n}\n\nfunction reduceDocRect(reducedRect, c) {\n  switch (c.config.dock()) {\n    case 'top':\n      reducedRect.y += c.cachedSize;\n      reducedRect.height -= c.cachedSize;\n      break;\n    case 'bottom':\n      reducedRect.height -= c.cachedSize;\n      break;\n    case 'left':\n      reducedRect.x += c.cachedSize;\n      reducedRect.width -= c.cachedSize;\n      break;\n    case 'right':\n      reducedRect.width -= c.cachedSize;\n      break;\n    default:\n  }\n}\nfunction addEdgeBleed(currentEdgeBleed, c) {\n  const edgeBleed = c.edgeBleed;\n  if (!edgeBleed) { return; }\n  currentEdgeBleed.left = Math.max(currentEdgeBleed.left, edgeBleed.left || 0);\n  currentEdgeBleed.right = Math.max(currentEdgeBleed.right, edgeBleed.right || 0);\n  currentEdgeBleed.top = Math.max(currentEdgeBleed.top, edgeBleed.top || 0);\n  currentEdgeBleed.bottom = Math.max(currentEdgeBleed.bottom, edgeBleed.bottom || 0);\n}\nfunction reduceEdgeBleed(logicalContainerRect, reducedRect, edgeBleed) {\n  if (reducedRect.x < edgeBleed.left) {\n    reducedRect.width -= edgeBleed.left - reducedRect.x;\n    reducedRect.x = edgeBleed.left;\n  }\n  const reducedRectRightBoundary = logicalContainerRect.width - (reducedRect.x + reducedRect.width);\n  if (reducedRectRightBoundary < edgeBleed.right) {\n    reducedRect.width -= edgeBleed.right - reducedRectRightBoundary;\n  }\n  if (reducedRect.y < edgeBleed.top) {\n    reducedRect.height -= edgeBleed.top - reducedRect.y;\n    reducedRect.y = edgeBleed.top;\n  }\n  const reducedRectBottomBoundary = logicalContainerRect.height - (reducedRect.y + reducedRect.height);\n  if (reducedRectBottomBoundary < edgeBleed.bottom) {\n    reducedRect.height -= edgeBleed.bottom - reducedRectBottomBoundary;\n  }\n}\n\nfunction reduceSingleLayoutRect(logicalContainerRect, reducedRect, edgeBleed, c, settings) {\n  const newReduceRect = extend({}, reducedRect);\n  const newEdgeBeed = extend({}, edgeBleed);\n  reduceDocRect(newReduceRect, c);\n  addEdgeBleed(newEdgeBeed, c);\n  reduceEdgeBleed(logicalContainerRect, newReduceRect, newEdgeBeed);\n\n  const isValid = validateReduceRect(logicalContainerRect, newReduceRect, settings);\n  if (!isValid) {\n    return false;\n  }\n\n  reduceDocRect(reducedRect, c);\n  addEdgeBleed(edgeBleed, c);\n  return true;\n}\n\nfunction reduceLayoutRect(logicalContainerRect, components, hiddenComponents, settings) {\n  const reducedRect = {\n    x: logicalContainerRect.x,\n    y: logicalContainerRect.y,\n    width: logicalContainerRect.width,\n    height: logicalContainerRect.height\n  };\n  const edgeBleed = { left: 0, right: 0, top: 0, bottom: 0 };\n\n  const sortedComponents = components.slice();\n  sortedComponents.sort((a, b) => a.config.prioOrder() - b.config.prioOrder()); // lower prioOrder will have higher prio\n\n  for (let i = 0; i < sortedComponents.length; ++i) {\n    const c = sortedComponents[i];\n    cacheSize(c, reducedRect, logicalContainerRect);\n\n    if (!reduceSingleLayoutRect(logicalContainerRect, reducedRect, edgeBleed, c, settings)) {\n      sortedComponents.splice(i, 1);\n      hiddenComponents.push(c.instance);\n      --i;\n    }\n  }\n\n  const filteredUnsortedComps = components.filter(c => sortedComponents.indexOf(c) !== -1);\n  components.length = 0;\n  components.push(...filteredUnsortedComps);\n  reduceEdgeBleed(logicalContainerRect, reducedRect, edgeBleed);\n  return reducedRect;\n}\n\nfunction appendScaleRatio(rect, outerRect, logicalContainerRect, containerRect) {\n  const scaleRatio = {\n    x: containerRect.width / logicalContainerRect.width,\n    y: containerRect.height / logicalContainerRect.height\n  };\n  const margin = {\n    left: 0,\n    top: 0\n  };\n\n  if (logicalContainerRect.preserveAspectRatio) {\n    const xLessThenY = scaleRatio.x < scaleRatio.y;\n    // To preserve the aspect ratio, take the smallest ratio and apply in both directions to \"meet\" the size of the container\n    const minRatio = Math.min(scaleRatio.x, scaleRatio.y);\n    scaleRatio.x = minRatio;\n    scaleRatio.y = minRatio;\n    const area = xLessThenY ? 'height' : 'width';\n    const spread = (containerRect[area] - (logicalContainerRect[area] * scaleRatio.x)) * logicalContainerRect.align;\n    margin.left = xLessThenY ? 0 : spread;\n    margin.top = xLessThenY ? spread : 0;\n  }\n\n  rect.scaleRatio = scaleRatio;\n  rect.margin = margin;\n  outerRect.scaleRatio = scaleRatio;\n  outerRect.margin = margin;\n  logicalContainerRect.scaleRatio = scaleRatio;\n  logicalContainerRect.margin = margin;\n}\n\nfunction boundingBox(rects) {\n  const points = [].concat(...rects.map(rectToPoints));\n  return pointsToRect(points);\n}\n\nfunction positionComponents(components, logicalContainerRect, reducedRect, containerRect) {\n  const vRect = { x: reducedRect.x, y: reducedRect.y, width: reducedRect.width, height: reducedRect.height };\n  const hRect = { x: reducedRect.x, y: reducedRect.y, width: reducedRect.width, height: reducedRect.height };\n\n  const referencedComponents = {};\n\n  components.sort((a, b) => {\n    if (/^@/.test(b.config.dock())) {\n      return -1;\n    } else if (/^@/.test(a.config.dock())) {\n      return 1;\n    }\n    return a.config.displayOrder() - b.config.displayOrder();\n  }).forEach((c) => {\n    let outerRect = {};\n    let rect = {};\n    const d = c.config.dock();\n    switch (d) {\n      case 'top':\n        outerRect.height = rect.height = c.cachedSize;\n        outerRect.width = logicalContainerRect.width;\n        rect.width = vRect.width;\n        outerRect.x = logicalContainerRect.x;\n        rect.x = vRect.x;\n        outerRect.y = rect.y = vRect.y - c.cachedSize;\n\n        vRect.y -= c.cachedSize;\n        vRect.height += c.cachedSize;\n        break;\n      case 'bottom':\n        outerRect.x = logicalContainerRect.x;\n        rect.x = vRect.x;\n        outerRect.y = rect.y = vRect.y + vRect.height;\n        outerRect.width = logicalContainerRect.width;\n        rect.width = vRect.width;\n        outerRect.height = rect.height = c.cachedSize;\n\n        vRect.height += c.cachedSize;\n        break;\n      case 'left':\n        outerRect.x = rect.x = hRect.x - c.cachedSize;\n        outerRect.y = logicalContainerRect.y;\n        rect.y = hRect.y;\n        outerRect.width = rect.width = c.cachedSize;\n        outerRect.height = logicalContainerRect.height;\n        rect.height = hRect.height;\n\n        hRect.x -= c.cachedSize;\n        hRect.width += c.cachedSize;\n        break;\n      case 'right':\n        outerRect.x = rect.x = hRect.x + hRect.width;\n        outerRect.y = logicalContainerRect.y;\n        rect.y = hRect.y;\n        outerRect.width = rect.width = c.cachedSize;\n        outerRect.height = logicalContainerRect.height;\n        rect.height = hRect.height;\n\n        hRect.width += c.cachedSize;\n        break;\n      default:\n        outerRect.x = rect.x = reducedRect.x;\n        outerRect.y = rect.y = reducedRect.y;\n        outerRect.width = rect.width = reducedRect.width;\n        outerRect.height = rect.height = reducedRect.height;\n    }\n    if (/^@/.test(d)) {\n      const refs = d.split(',').map(r => referencedComponents[r.replace('@', '')]).filter(r => !!r);\n      if (refs.length > 0) {\n        outerRect = boundingBox(refs.map(r => r.outerRect));\n        rect = boundingBox(refs.map(r => r.rect));\n      }\n    } else if (c.key) {\n      referencedComponents[c.key] = { // store the size of this component\n        rect,\n        outerRect\n      };\n    }\n    appendScaleRatio(rect, outerRect, logicalContainerRect, containerRect);\n    c.instance.resize(rect, outerRect, logicalContainerRect);\n    c.cachedSize = undefined;\n  });\n}\n\nfunction checkShowSettings(components, hiddenComponents, settings, logicalContainerRect) {\n  const layoutModes = settings.layoutModes || {};\n  for (let i = 0; i < components.length; ++i) {\n    const c = components[i];\n    const minimumLayoutMode = c.config.minimumLayoutMode();\n    let show = c.config.show();\n    if (show && typeof minimumLayoutMode === 'object') {\n      show = layoutModes[minimumLayoutMode.width] &&\n        layoutModes[minimumLayoutMode.height] &&\n        logicalContainerRect.width >= layoutModes[minimumLayoutMode.width].width &&\n        logicalContainerRect.height >= layoutModes[minimumLayoutMode.height].height;\n    } else if (show && minimumLayoutMode !== undefined) {\n      show = layoutModes[minimumLayoutMode] &&\n        logicalContainerRect.width >= layoutModes[minimumLayoutMode].width &&\n        logicalContainerRect.height >= layoutModes[minimumLayoutMode].height;\n    }\n    if (!show) {\n      components.splice(i, 1);\n      hiddenComponents.push(c.instance);\n      --i;\n    }\n  }\n}\n\n/**\n * @typedef {object} dock-layout-settings\n * @property {object} [size] - Physical size. Defaults to the container element.\n * @property {number} [size.width] - Width in pixels\n * @property {number} [size.height]- Height in pixels\n * @property {object} [logicalSize] - Logical size\n * @property {number} [logicalSize.width] - Width in pixels\n * @property {number} [logicalSize.height] - Height in pixels\n * @property {boolean} [logicalSize.preserveAspectRatio=false] - If true, takes the smallest ratio of width/height between logical and physical size ( physical / logical )\n * @property {number} [logicalSize.align=0.5] - Normalized value between 0-1. Defines how the space around the scaled axis is spread in the container, with 0.5 meaning the spread is equal on both sides. Only applicable if preserveAspectRatio is set to true\n * @property {object} [center] - Define how much space the center dock area requires\n * @property {number} [center.minWidthRatio=0.5] - Value between 0 and 1\n * @property {number} [center.minHeightRatio=0.5] - Value between 0 and 1\n * @property {number} [center.minWidth] - Width in pixels\n * @property {number} [center.minHeight] - Height in pixels\n * @property {object<string, {width: number, height: number}>} [layoutModes] Dictionary with named sizes\n */\n\nexport default function dockLayout(initialSettings) {\n  const components = [];\n  const hiddenComponents = [];\n  let settings = resolveSettings(initialSettings);\n\n  const docker = function docker() {};\n\n  docker.addComponent = function addComponent(component, key) {\n    validateComponent(component);\n    docker.removeComponent(component);\n\n    // component.dockConfig can be undefined, a function or an object:\n    // if undefined: use default values from dockConfig()\n    // if function: use the function\n    // if object: wrap in dockConfig() function\n    components.push({\n      instance: component,\n      key,\n      config: typeof component.dockConfig === 'function' ? component.dockConfig : dockConfig(component.dockConfig)\n    });\n  };\n\n  docker.removeComponent = function removeComponent(component) {\n    const idx = components.map(c => c.instance).indexOf(component);\n    if (idx > -1) {\n      components.splice(idx, 1);\n    }\n  };\n\n  docker.layout = function layout(container) {\n    const [logicalContainerRect, containerRect] = resolveLayout(container, settings);\n    checkShowSettings(components, hiddenComponents, settings, logicalContainerRect);\n    const reduced = reduceLayoutRect(logicalContainerRect, components, hiddenComponents, settings);\n    positionComponents(components, logicalContainerRect, reduced, containerRect);\n    return {\n      visible: components.map(c => c.instance),\n      hidden: hiddenComponents\n    };\n  };\n\n  docker.settings = function settingsFn(s) {\n    settings = resolveSettings(s);\n  };\n\n  return docker;\n}\n","/**\n * Initilize a new dock configuration\n * @private\n * @param {object} [settings] - Settings object\n * @returns {object} A dock configuration instance\n * @example\n * let instance = dockConfig({\n *  dock: 'left',\n *  displayOrder: 2,\n *  prioOrder: 1,\n *  requiredSize: () => 33,\n *  minimumLayoutMode: 'L',\n *  show: true\n * });\n */\nfunction dockConfig(settings = {}) {\n  let {\n    dock = '',\n    displayOrder = 0,\n    prioOrder = 0,\n    requiredSize = () => 0,\n    minimumLayoutMode,\n    show = true\n  } = settings;\n\n  /**\n   * @private\n   */\n  const fn = function fn() {};\n\n  /**\n   * Takes a function that returns the required size of a component.\n   * The return value of the function can either be a number representing the required size in the dock direction\n   * or an object with a `size` and `edgeBleed` property.\n   * @param {function} [calcFn] - Function to calculate the required size of a component\n   * @returns {function|this} If no parameter is passed, the current requiredSize function is return. Else the current context is returns to allow chaining.\n   * @example\n   * dockConfig.requireSize(() => 150); // Require a size of 150 in the dock direction\n   *\n   * dockConfig.requireSize(() => ({\n   *  size: 150,\n   *  edgeBleed: {\n   *    left: 50,\n   *    right: 50\n   *  }\n   * })); // Require a size of 150 in the dock direction and a bleed size of 50 to the left and right dock direction\n   */\n  fn.requiredSize = function requiredSizeFn(calcFn) {\n    if (typeof calcFn === 'function') {\n      requiredSize = calcFn;\n      return this;\n    }\n    return requiredSize;\n  };\n\n  /**\n   * Set the dock direction, supported values are left | right | top | bottom. Any other value will be interpreted as center dock.\n   * @param {string} [d=''] - Dock direction\n   * @returns {this} The current context\n   * @example\n   * dockConfig.dock('left');\n   */\n  fn.dock = function dockFn(d) {\n    if (typeof d === 'undefined') {\n      return dock;\n    }\n    dock = d;\n    return this;\n  };\n\n  /**\n   * The `displayOrder` property is used by the layout engine to lay out components.\n   * Components are interpreted in the ascending order of the `displayOrder` value. The layout engine apply the value in two ways,\n   * the first is the order in which components are rendererd. The second is the area components are laid out in\n   * when they have a direction, i.e. docked to either top, bottom, left or right.\n   *\n   * If docked at the same area, the component with a higher `displayOrder` will be rendered\n   * on top of the component with a lower `displayOrder`. It can be seen as defining a z-index.\n   * A lower `displayOrder` also means that a component will be laid out first in a given direction,\n   * i.e. laid out closer to the central area (non-directional area) then a component with a higher `displayOrder`.\n   * It can in this case be seen as the x-index or y-index.\n   * @param {number} [order=0] - The display order\n   * @returns {this} The current context\n   * @example\n   * dockConfig.displayOrder(99);\n   */\n  fn.displayOrder = function displayOrderFn(order) {\n    if (typeof order === 'undefined') {\n      return displayOrder;\n    }\n    displayOrder = order;\n    return this;\n  };\n\n  /**\n   * The `prioOrder` property is used to define the order in which components are added to the layout engine,\n   * this is done before any components are laid out. When there is not enough space to add any more components\n   * to a given area, all components not all ready added, are then discarded. The `prioOrder` is interpreted\n   * in the ascending order. Such that a lower value is added to the layout engine first.\n   * @param {number} [order=0] - The prio order\n   * @returns {this} The current context\n   * @example\n   * dockConfig.prioOrder(-1);\n   */\n  fn.prioOrder = function prioOrderFn(order) {\n    if (typeof order === 'undefined') {\n      return prioOrder;\n    }\n    prioOrder = order;\n    return this;\n  };\n\n  /**\n   * Ger or set the minimumLayoutMode\n   * @param {string|object} [s] - The minimum layout mode\n   * @returns {string|object|this} If no parameter is passed the current context is returned, else the current layout mode.\n   * @example\n   * dockConfig.minimumLayoutMode('L');\n   * dockConfig.minimumLayoutMode({ width: 'S', height: 'L' });\n   */\n  fn.minimumLayoutMode = function minimumLayoutModeFn(s) {\n    if (typeof s === 'undefined') {\n      return minimumLayoutMode;\n    }\n    minimumLayoutMode = s;\n    return this;\n  };\n\n  /**\n   * Set the component visibility. If false the component is not added to the layout engine.\n   * @param {boolean} [s=true] - Toggle visibility\n   * @returns {this} The current context\n   */\n  fn.show = function showFn(s) {\n    if (typeof s === 'undefined') {\n      return show;\n    }\n    show = !!s;\n    return this;\n  };\n\n  return fn;\n}\n\nexport {\n  dockConfig as default\n};\n","export function detectPointerSupport(e) {\n  if ('onpointerdown' in e && 'onpointerup' in e) {\n    return true;\n  }\n  return false;\n}\n\nexport function detectTouchSupport(e) {\n  if ('ontouchstart' in e && 'ontouchend' in e) {\n    return true;\n  }\n  return false;\n}\n\nexport function isTouchEvent(e) {\n  return !!e.changedTouches;\n}\n\nexport function isValidTapEvent(e, eventInfo) {\n  const isTouch = isTouchEvent(e);\n  const ee = isTouch ? e.changedTouches[0] : e;\n  const dt = Date.now() - eventInfo.time;\n  const dx = isNaN(eventInfo.x) ? 0 : Math.abs(ee.clientX - eventInfo.x);\n  const dy = isNaN(eventInfo.y) ? 0 : Math.abs(ee.clientY - eventInfo.y);\n\n  return (e.button === 0 || isTouch) &&\n    !eventInfo.multiTouch &&\n    dx <= 12 &&\n    dy <= 12 &&\n    dt <= 300;\n}\n","var pi = Math.PI,\n    tau = 2 * pi,\n    epsilon = 1e-6,\n    tauEpsilon = tau - epsilon;\n\nfunction Path() {\n  this._x0 = this._y0 = // start of current subpath\n  this._x1 = this._y1 = null; // end of current subpath\n  this._ = \"\";\n}\n\nfunction path() {\n  return new Path;\n}\n\nPath.prototype = path.prototype = {\n  constructor: Path,\n  moveTo: function(x, y) {\n    this._ += \"M\" + (this._x0 = this._x1 = +x) + \",\" + (this._y0 = this._y1 = +y);\n  },\n  closePath: function() {\n    if (this._x1 !== null) {\n      this._x1 = this._x0, this._y1 = this._y0;\n      this._ += \"Z\";\n    }\n  },\n  lineTo: function(x, y) {\n    this._ += \"L\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  quadraticCurveTo: function(x1, y1, x, y) {\n    this._ += \"Q\" + (+x1) + \",\" + (+y1) + \",\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  bezierCurveTo: function(x1, y1, x2, y2, x, y) {\n    this._ += \"C\" + (+x1) + \",\" + (+y1) + \",\" + (+x2) + \",\" + (+y2) + \",\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  arcTo: function(x1, y1, x2, y2, r) {\n    x1 = +x1, y1 = +y1, x2 = +x2, y2 = +y2, r = +r;\n    var x0 = this._x1,\n        y0 = this._y1,\n        x21 = x2 - x1,\n        y21 = y2 - y1,\n        x01 = x0 - x1,\n        y01 = y0 - y1,\n        l01_2 = x01 * x01 + y01 * y01;\n\n    // Is the radius negative? Error.\n    if (r < 0) throw new Error(\"negative radius: \" + r);\n\n    // Is this path empty? Move to (x1,y1).\n    if (this._x1 === null) {\n      this._ += \"M\" + (this._x1 = x1) + \",\" + (this._y1 = y1);\n    }\n\n    // Or, is (x1,y1) coincident with (x0,y0)? Do nothing.\n    else if (!(l01_2 > epsilon)) {}\n\n    // Or, are (x0,y0), (x1,y1) and (x2,y2) collinear?\n    // Equivalently, is (x1,y1) coincident with (x2,y2)?\n    // Or, is the radius zero? Line to (x1,y1).\n    else if (!(Math.abs(y01 * x21 - y21 * x01) > epsilon) || !r) {\n      this._ += \"L\" + (this._x1 = x1) + \",\" + (this._y1 = y1);\n    }\n\n    // Otherwise, draw an arc!\n    else {\n      var x20 = x2 - x0,\n          y20 = y2 - y0,\n          l21_2 = x21 * x21 + y21 * y21,\n          l20_2 = x20 * x20 + y20 * y20,\n          l21 = Math.sqrt(l21_2),\n          l01 = Math.sqrt(l01_2),\n          l = r * Math.tan((pi - Math.acos((l21_2 + l01_2 - l20_2) / (2 * l21 * l01))) / 2),\n          t01 = l / l01,\n          t21 = l / l21;\n\n      // If the start tangent is not coincident with (x0,y0), line to.\n      if (Math.abs(t01 - 1) > epsilon) {\n        this._ += \"L\" + (x1 + t01 * x01) + \",\" + (y1 + t01 * y01);\n      }\n\n      this._ += \"A\" + r + \",\" + r + \",0,0,\" + (+(y01 * x20 > x01 * y20)) + \",\" + (this._x1 = x1 + t21 * x21) + \",\" + (this._y1 = y1 + t21 * y21);\n    }\n  },\n  arc: function(x, y, r, a0, a1, ccw) {\n    x = +x, y = +y, r = +r;\n    var dx = r * Math.cos(a0),\n        dy = r * Math.sin(a0),\n        x0 = x + dx,\n        y0 = y + dy,\n        cw = 1 ^ ccw,\n        da = ccw ? a0 - a1 : a1 - a0;\n\n    // Is the radius negative? Error.\n    if (r < 0) throw new Error(\"negative radius: \" + r);\n\n    // Is this path empty? Move to (x0,y0).\n    if (this._x1 === null) {\n      this._ += \"M\" + x0 + \",\" + y0;\n    }\n\n    // Or, is (x0,y0) not coincident with the previous point? Line to (x0,y0).\n    else if (Math.abs(this._x1 - x0) > epsilon || Math.abs(this._y1 - y0) > epsilon) {\n      this._ += \"L\" + x0 + \",\" + y0;\n    }\n\n    // Is this arc empty? We’re done.\n    if (!r) return;\n\n    // Does the angle go the wrong way? Flip the direction.\n    if (da < 0) da = da % tau + tau;\n\n    // Is this a complete circle? Draw two arcs to complete the circle.\n    if (da > tauEpsilon) {\n      this._ += \"A\" + r + \",\" + r + \",0,1,\" + cw + \",\" + (x - dx) + \",\" + (y - dy) + \"A\" + r + \",\" + r + \",0,1,\" + cw + \",\" + (this._x1 = x0) + \",\" + (this._y1 = y0);\n    }\n\n    // Is this arc non-empty? Draw an arc!\n    else if (da > epsilon) {\n      this._ += \"A\" + r + \",\" + r + \",0,\" + (+(da >= pi)) + \",\" + cw + \",\" + (this._x1 = x + r * Math.cos(a1)) + \",\" + (this._y1 = y + r * Math.sin(a1));\n    }\n  },\n  rect: function(x, y, w, h) {\n    this._ += \"M\" + (this._x0 = this._x1 = +x) + \",\" + (this._y0 = this._y1 = +y) + \"h\" + (+w) + \"v\" + (+h) + \"h\" + (-w) + \"Z\";\n  },\n  toString: function() {\n    return this._;\n  }\n};\n\nexport default path;\n","export var abs = Math.abs;\nexport var atan2 = Math.atan2;\nexport var cos = Math.cos;\nexport var max = Math.max;\nexport var min = Math.min;\nexport var sin = Math.sin;\nexport var sqrt = Math.sqrt;\n\nexport var epsilon = 1e-12;\nexport var pi = Math.PI;\nexport var halfPi = pi / 2;\nexport var tau = 2 * pi;\n\nexport function acos(x) {\n  return x > 1 ? 0 : x < -1 ? pi : Math.acos(x);\n}\n\nexport function asin(x) {\n  return x >= 1 ? halfPi : x <= -1 ? -halfPi : Math.asin(x);\n}\n","import {path} from \"d3-path\";\nimport constant from \"./constant\";\nimport {abs, acos, asin, atan2, cos, epsilon, halfPi, max, min, pi, sin, sqrt, tau} from \"./math\";\n\nfunction arcInnerRadius(d) {\n  return d.innerRadius;\n}\n\nfunction arcOuterRadius(d) {\n  return d.outerRadius;\n}\n\nfunction arcStartAngle(d) {\n  return d.startAngle;\n}\n\nfunction arcEndAngle(d) {\n  return d.endAngle;\n}\n\nfunction arcPadAngle(d) {\n  return d && d.padAngle; // Note: optional!\n}\n\nfunction intersect(x0, y0, x1, y1, x2, y2, x3, y3) {\n  var x10 = x1 - x0, y10 = y1 - y0,\n      x32 = x3 - x2, y32 = y3 - y2,\n      t = (x32 * (y0 - y2) - y32 * (x0 - x2)) / (y32 * x10 - x32 * y10);\n  return [x0 + t * x10, y0 + t * y10];\n}\n\n// Compute perpendicular offset line of length rc.\n// http://mathworld.wolfram.com/Circle-LineIntersection.html\nfunction cornerTangents(x0, y0, x1, y1, r1, rc, cw) {\n  var x01 = x0 - x1,\n      y01 = y0 - y1,\n      lo = (cw ? rc : -rc) / sqrt(x01 * x01 + y01 * y01),\n      ox = lo * y01,\n      oy = -lo * x01,\n      x11 = x0 + ox,\n      y11 = y0 + oy,\n      x10 = x1 + ox,\n      y10 = y1 + oy,\n      x00 = (x11 + x10) / 2,\n      y00 = (y11 + y10) / 2,\n      dx = x10 - x11,\n      dy = y10 - y11,\n      d2 = dx * dx + dy * dy,\n      r = r1 - rc,\n      D = x11 * y10 - x10 * y11,\n      d = (dy < 0 ? -1 : 1) * sqrt(max(0, r * r * d2 - D * D)),\n      cx0 = (D * dy - dx * d) / d2,\n      cy0 = (-D * dx - dy * d) / d2,\n      cx1 = (D * dy + dx * d) / d2,\n      cy1 = (-D * dx + dy * d) / d2,\n      dx0 = cx0 - x00,\n      dy0 = cy0 - y00,\n      dx1 = cx1 - x00,\n      dy1 = cy1 - y00;\n\n  // Pick the closer of the two intersection points.\n  // TODO Is there a faster way to determine which intersection to use?\n  if (dx0 * dx0 + dy0 * dy0 > dx1 * dx1 + dy1 * dy1) cx0 = cx1, cy0 = cy1;\n\n  return {\n    cx: cx0,\n    cy: cy0,\n    x01: -ox,\n    y01: -oy,\n    x11: cx0 * (r1 / r - 1),\n    y11: cy0 * (r1 / r - 1)\n  };\n}\n\nexport default function() {\n  var innerRadius = arcInnerRadius,\n      outerRadius = arcOuterRadius,\n      cornerRadius = constant(0),\n      padRadius = null,\n      startAngle = arcStartAngle,\n      endAngle = arcEndAngle,\n      padAngle = arcPadAngle,\n      context = null;\n\n  function arc() {\n    var buffer,\n        r,\n        r0 = +innerRadius.apply(this, arguments),\n        r1 = +outerRadius.apply(this, arguments),\n        a0 = startAngle.apply(this, arguments) - halfPi,\n        a1 = endAngle.apply(this, arguments) - halfPi,\n        da = abs(a1 - a0),\n        cw = a1 > a0;\n\n    if (!context) context = buffer = path();\n\n    // Ensure that the outer radius is always larger than the inner radius.\n    if (r1 < r0) r = r1, r1 = r0, r0 = r;\n\n    // Is it a point?\n    if (!(r1 > epsilon)) context.moveTo(0, 0);\n\n    // Or is it a circle or annulus?\n    else if (da > tau - epsilon) {\n      context.moveTo(r1 * cos(a0), r1 * sin(a0));\n      context.arc(0, 0, r1, a0, a1, !cw);\n      if (r0 > epsilon) {\n        context.moveTo(r0 * cos(a1), r0 * sin(a1));\n        context.arc(0, 0, r0, a1, a0, cw);\n      }\n    }\n\n    // Or is it a circular or annular sector?\n    else {\n      var a01 = a0,\n          a11 = a1,\n          a00 = a0,\n          a10 = a1,\n          da0 = da,\n          da1 = da,\n          ap = padAngle.apply(this, arguments) / 2,\n          rp = (ap > epsilon) && (padRadius ? +padRadius.apply(this, arguments) : sqrt(r0 * r0 + r1 * r1)),\n          rc = min(abs(r1 - r0) / 2, +cornerRadius.apply(this, arguments)),\n          rc0 = rc,\n          rc1 = rc,\n          t0,\n          t1;\n\n      // Apply padding? Note that since r1 ≥ r0, da1 ≥ da0.\n      if (rp > epsilon) {\n        var p0 = asin(rp / r0 * sin(ap)),\n            p1 = asin(rp / r1 * sin(ap));\n        if ((da0 -= p0 * 2) > epsilon) p0 *= (cw ? 1 : -1), a00 += p0, a10 -= p0;\n        else da0 = 0, a00 = a10 = (a0 + a1) / 2;\n        if ((da1 -= p1 * 2) > epsilon) p1 *= (cw ? 1 : -1), a01 += p1, a11 -= p1;\n        else da1 = 0, a01 = a11 = (a0 + a1) / 2;\n      }\n\n      var x01 = r1 * cos(a01),\n          y01 = r1 * sin(a01),\n          x10 = r0 * cos(a10),\n          y10 = r0 * sin(a10);\n\n      // Apply rounded corners?\n      if (rc > epsilon) {\n        var x11 = r1 * cos(a11),\n            y11 = r1 * sin(a11),\n            x00 = r0 * cos(a00),\n            y00 = r0 * sin(a00);\n\n        // Restrict the corner radius according to the sector angle.\n        if (da < pi) {\n          var oc = da0 > epsilon ? intersect(x01, y01, x00, y00, x11, y11, x10, y10) : [x10, y10],\n              ax = x01 - oc[0],\n              ay = y01 - oc[1],\n              bx = x11 - oc[0],\n              by = y11 - oc[1],\n              kc = 1 / sin(acos((ax * bx + ay * by) / (sqrt(ax * ax + ay * ay) * sqrt(bx * bx + by * by))) / 2),\n              lc = sqrt(oc[0] * oc[0] + oc[1] * oc[1]);\n          rc0 = min(rc, (r0 - lc) / (kc - 1));\n          rc1 = min(rc, (r1 - lc) / (kc + 1));\n        }\n      }\n\n      // Is the sector collapsed to a line?\n      if (!(da1 > epsilon)) context.moveTo(x01, y01);\n\n      // Does the sector’s outer ring have rounded corners?\n      else if (rc1 > epsilon) {\n        t0 = cornerTangents(x00, y00, x01, y01, r1, rc1, cw);\n        t1 = cornerTangents(x11, y11, x10, y10, r1, rc1, cw);\n\n        context.moveTo(t0.cx + t0.x01, t0.cy + t0.y01);\n\n        // Have the corners merged?\n        if (rc1 < rc) context.arc(t0.cx, t0.cy, rc1, atan2(t0.y01, t0.x01), atan2(t1.y01, t1.x01), !cw);\n\n        // Otherwise, draw the two corners and the ring.\n        else {\n          context.arc(t0.cx, t0.cy, rc1, atan2(t0.y01, t0.x01), atan2(t0.y11, t0.x11), !cw);\n          context.arc(0, 0, r1, atan2(t0.cy + t0.y11, t0.cx + t0.x11), atan2(t1.cy + t1.y11, t1.cx + t1.x11), !cw);\n          context.arc(t1.cx, t1.cy, rc1, atan2(t1.y11, t1.x11), atan2(t1.y01, t1.x01), !cw);\n        }\n      }\n\n      // Or is the outer ring just a circular arc?\n      else context.moveTo(x01, y01), context.arc(0, 0, r1, a01, a11, !cw);\n\n      // Is there no inner ring, and it’s a circular sector?\n      // Or perhaps it’s an annular sector collapsed due to padding?\n      if (!(r0 > epsilon) || !(da0 > epsilon)) context.lineTo(x10, y10);\n\n      // Does the sector’s inner ring (or point) have rounded corners?\n      else if (rc0 > epsilon) {\n        t0 = cornerTangents(x10, y10, x11, y11, r0, -rc0, cw);\n        t1 = cornerTangents(x01, y01, x00, y00, r0, -rc0, cw);\n\n        context.lineTo(t0.cx + t0.x01, t0.cy + t0.y01);\n\n        // Have the corners merged?\n        if (rc0 < rc) context.arc(t0.cx, t0.cy, rc0, atan2(t0.y01, t0.x01), atan2(t1.y01, t1.x01), !cw);\n\n        // Otherwise, draw the two corners and the ring.\n        else {\n          context.arc(t0.cx, t0.cy, rc0, atan2(t0.y01, t0.x01), atan2(t0.y11, t0.x11), !cw);\n          context.arc(0, 0, r0, atan2(t0.cy + t0.y11, t0.cx + t0.x11), atan2(t1.cy + t1.y11, t1.cx + t1.x11), cw);\n          context.arc(t1.cx, t1.cy, rc0, atan2(t1.y11, t1.x11), atan2(t1.y01, t1.x01), !cw);\n        }\n      }\n\n      // Or is the inner ring just a circular arc?\n      else context.arc(0, 0, r0, a10, a00, cw);\n    }\n\n    context.closePath();\n\n    if (buffer) return context = null, buffer + \"\" || null;\n  }\n\n  arc.centroid = function() {\n    var r = (+innerRadius.apply(this, arguments) + +outerRadius.apply(this, arguments)) / 2,\n        a = (+startAngle.apply(this, arguments) + +endAngle.apply(this, arguments)) / 2 - pi / 2;\n    return [cos(a) * r, sin(a) * r];\n  };\n\n  arc.innerRadius = function(_) {\n    return arguments.length ? (innerRadius = typeof _ === \"function\" ? _ : constant(+_), arc) : innerRadius;\n  };\n\n  arc.outerRadius = function(_) {\n    return arguments.length ? (outerRadius = typeof _ === \"function\" ? _ : constant(+_), arc) : outerRadius;\n  };\n\n  arc.cornerRadius = function(_) {\n    return arguments.length ? (cornerRadius = typeof _ === \"function\" ? _ : constant(+_), arc) : cornerRadius;\n  };\n\n  arc.padRadius = function(_) {\n    return arguments.length ? (padRadius = _ == null ? null : typeof _ === \"function\" ? _ : constant(+_), arc) : padRadius;\n  };\n\n  arc.startAngle = function(_) {\n    return arguments.length ? (startAngle = typeof _ === \"function\" ? _ : constant(+_), arc) : startAngle;\n  };\n\n  arc.endAngle = function(_) {\n    return arguments.length ? (endAngle = typeof _ === \"function\" ? _ : constant(+_), arc) : endAngle;\n  };\n\n  arc.padAngle = function(_) {\n    return arguments.length ? (padAngle = typeof _ === \"function\" ? _ : constant(+_), arc) : padAngle;\n  };\n\n  arc.context = function(_) {\n    return arguments.length ? ((context = _ == null ? null : _), arc) : context;\n  };\n\n  return arc;\n}\n","function Linear(context) {\n  this._context = context;\n}\n\nLinear.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; // proceed\n      default: this._context.lineTo(x, y); break;\n    }\n  }\n};\n\nexport default function(context) {\n  return new Linear(context);\n}\n","export function x(p) {\n  return p[0];\n}\n\nexport function y(p) {\n  return p[1];\n}\n","export function point(that, x, y) {\n  that._context.bezierCurveTo(\n    (2 * that._x0 + that._x1) / 3,\n    (2 * that._y0 + that._y1) / 3,\n    (that._x0 + 2 * that._x1) / 3,\n    (that._y0 + 2 * that._y1) / 3,\n    (that._x0 + 4 * that._x1 + x) / 6,\n    (that._y0 + 4 * that._y1 + y) / 6\n  );\n}\n\nexport function Basis(context) {\n  this._context = context;\n}\n\nBasis.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 =\n    this._y0 = this._y1 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 3: point(this, this._x1, this._y1); // proceed\n      case 2: this._context.lineTo(this._x1, this._y1); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; this._context.lineTo((5 * this._x0 + this._x1) / 6, (5 * this._y0 + this._y1) / 6); // proceed\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = x;\n    this._y0 = this._y1, this._y1 = y;\n  }\n};\n\nexport default function(context) {\n  return new Basis(context);\n}\n","export function point(that, x, y) {\n  that._context.bezierCurveTo(\n    that._x1 + that._k * (that._x2 - that._x0),\n    that._y1 + that._k * (that._y2 - that._y0),\n    that._x2 + that._k * (that._x1 - x),\n    that._y2 + that._k * (that._y1 - y),\n    that._x2,\n    that._y2\n  );\n}\n\nexport function Cardinal(context, tension) {\n  this._context = context;\n  this._k = (1 - tension) / 6;\n}\n\nCardinal.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 =\n    this._y0 = this._y1 = this._y2 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 2: this._context.lineTo(this._x2, this._y2); break;\n      case 3: point(this, this._x1, this._y1); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; this._x1 = x, this._y1 = y; break;\n      case 2: this._point = 3; // proceed\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(tension) {\n\n  function cardinal(context) {\n    return new Cardinal(context, tension);\n  }\n\n  cardinal.tension = function(tension) {\n    return custom(+tension);\n  };\n\n  return cardinal;\n})(0);\n","import {epsilon} from \"../math\";\nimport {Cardinal} from \"./cardinal\";\n\nexport function point(that, x, y) {\n  var x1 = that._x1,\n      y1 = that._y1,\n      x2 = that._x2,\n      y2 = that._y2;\n\n  if (that._l01_a > epsilon) {\n    var a = 2 * that._l01_2a + 3 * that._l01_a * that._l12_a + that._l12_2a,\n        n = 3 * that._l01_a * (that._l01_a + that._l12_a);\n    x1 = (x1 * a - that._x0 * that._l12_2a + that._x2 * that._l01_2a) / n;\n    y1 = (y1 * a - that._y0 * that._l12_2a + that._y2 * that._l01_2a) / n;\n  }\n\n  if (that._l23_a > epsilon) {\n    var b = 2 * that._l23_2a + 3 * that._l23_a * that._l12_a + that._l12_2a,\n        m = 3 * that._l23_a * (that._l23_a + that._l12_a);\n    x2 = (x2 * b + that._x1 * that._l23_2a - x * that._l12_2a) / m;\n    y2 = (y2 * b + that._y1 * that._l23_2a - y * that._l12_2a) / m;\n  }\n\n  that._context.bezierCurveTo(x1, y1, x2, y2, that._x2, that._y2);\n}\n\nfunction CatmullRom(context, alpha) {\n  this._context = context;\n  this._alpha = alpha;\n}\n\nCatmullRom.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 =\n    this._y0 = this._y1 = this._y2 = NaN;\n    this._l01_a = this._l12_a = this._l23_a =\n    this._l01_2a = this._l12_2a = this._l23_2a =\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 2: this._context.lineTo(this._x2, this._y2); break;\n      case 3: this.point(this._x2, this._y2); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n\n    if (this._point) {\n      var x23 = this._x2 - x,\n          y23 = this._y2 - y;\n      this._l23_a = Math.sqrt(this._l23_2a = Math.pow(x23 * x23 + y23 * y23, this._alpha));\n    }\n\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; // proceed\n      default: point(this, x, y); break;\n    }\n\n    this._l01_a = this._l12_a, this._l12_a = this._l23_a;\n    this._l01_2a = this._l12_2a, this._l12_2a = this._l23_2a;\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(alpha) {\n\n  function catmullRom(context) {\n    return alpha ? new CatmullRom(context, alpha) : new Cardinal(context, 0);\n  }\n\n  catmullRom.alpha = function(alpha) {\n    return custom(+alpha);\n  };\n\n  return catmullRom;\n})(0.5);\n","function sign(x) {\n  return x < 0 ? -1 : 1;\n}\n\n// Calculate the slopes of the tangents (Hermite-type interpolation) based on\n// the following paper: Steffen, M. 1990. A Simple Method for Monotonic\n// Interpolation in One Dimension. Astronomy and Astrophysics, Vol. 239, NO.\n// NOV(II), P. 443, 1990.\nfunction slope3(that, x2, y2) {\n  var h0 = that._x1 - that._x0,\n      h1 = x2 - that._x1,\n      s0 = (that._y1 - that._y0) / (h0 || h1 < 0 && -0),\n      s1 = (y2 - that._y1) / (h1 || h0 < 0 && -0),\n      p = (s0 * h1 + s1 * h0) / (h0 + h1);\n  return (sign(s0) + sign(s1)) * Math.min(Math.abs(s0), Math.abs(s1), 0.5 * Math.abs(p)) || 0;\n}\n\n// Calculate a one-sided slope.\nfunction slope2(that, t) {\n  var h = that._x1 - that._x0;\n  return h ? (3 * (that._y1 - that._y0) / h - t) / 2 : t;\n}\n\n// According to https://en.wikipedia.org/wiki/Cubic_Hermite_spline#Representations\n// \"you can express cubic Hermite interpolation in terms of cubic Bézier curves\n// with respect to the four values p0, p0 + m0 / 3, p1 - m1 / 3, p1\".\nfunction point(that, t0, t1) {\n  var x0 = that._x0,\n      y0 = that._y0,\n      x1 = that._x1,\n      y1 = that._y1,\n      dx = (x1 - x0) / 3;\n  that._context.bezierCurveTo(x0 + dx, y0 + dx * t0, x1 - dx, y1 - dx * t1, x1, y1);\n}\n\nfunction MonotoneX(context) {\n  this._context = context;\n}\n\nMonotoneX.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 =\n    this._y0 = this._y1 =\n    this._t0 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 2: this._context.lineTo(this._x1, this._y1); break;\n      case 3: point(this, this._t0, slope2(this, this._t0)); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    var t1 = NaN;\n\n    x = +x, y = +y;\n    if (x === this._x1 && y === this._y1) return; // Ignore coincident points.\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; point(this, slope2(this, t1 = slope3(this, x, y)), t1); break;\n      default: point(this, this._t0, t1 = slope3(this, x, y)); break;\n    }\n\n    this._x0 = this._x1, this._x1 = x;\n    this._y0 = this._y1, this._y1 = y;\n    this._t0 = t1;\n  }\n}\n\nfunction MonotoneY(context) {\n  this._context = new ReflectContext(context);\n}\n\n(MonotoneY.prototype = Object.create(MonotoneX.prototype)).point = function(x, y) {\n  MonotoneX.prototype.point.call(this, y, x);\n};\n\nfunction ReflectContext(context) {\n  this._context = context;\n}\n\nReflectContext.prototype = {\n  moveTo: function(x, y) { this._context.moveTo(y, x); },\n  closePath: function() { this._context.closePath(); },\n  lineTo: function(x, y) { this._context.lineTo(y, x); },\n  bezierCurveTo: function(x1, y1, x2, y2, x, y) { this._context.bezierCurveTo(y1, x1, y2, x2, y, x); }\n};\n\nexport function monotoneX(context) {\n  return new MonotoneX(context);\n}\n\nexport function monotoneY(context) {\n  return new MonotoneY(context);\n}\n","function Natural(context) {\n  this._context = context;\n}\n\nNatural.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x = [];\n    this._y = [];\n  },\n  lineEnd: function() {\n    var x = this._x,\n        y = this._y,\n        n = x.length;\n\n    if (n) {\n      this._line ? this._context.lineTo(x[0], y[0]) : this._context.moveTo(x[0], y[0]);\n      if (n === 2) {\n        this._context.lineTo(x[1], y[1]);\n      } else {\n        var px = controlPoints(x),\n            py = controlPoints(y);\n        for (var i0 = 0, i1 = 1; i1 < n; ++i0, ++i1) {\n          this._context.bezierCurveTo(px[0][i0], py[0][i0], px[1][i0], py[1][i0], x[i1], y[i1]);\n        }\n      }\n    }\n\n    if (this._line || (this._line !== 0 && n === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n    this._x = this._y = null;\n  },\n  point: function(x, y) {\n    this._x.push(+x);\n    this._y.push(+y);\n  }\n};\n\n// See https://www.particleincell.com/2012/bezier-splines/ for derivation.\nfunction controlPoints(x) {\n  var i,\n      n = x.length - 1,\n      m,\n      a = new Array(n),\n      b = new Array(n),\n      r = new Array(n);\n  a[0] = 0, b[0] = 2, r[0] = x[0] + 2 * x[1];\n  for (i = 1; i < n - 1; ++i) a[i] = 1, b[i] = 4, r[i] = 4 * x[i] + 2 * x[i + 1];\n  a[n - 1] = 2, b[n - 1] = 7, r[n - 1] = 8 * x[n - 1] + x[n];\n  for (i = 1; i < n; ++i) m = a[i] / b[i - 1], b[i] -= m, r[i] -= m * r[i - 1];\n  a[n - 1] = r[n - 1] / b[n - 1];\n  for (i = n - 2; i >= 0; --i) a[i] = (r[i] - a[i + 1]) / b[i];\n  b[n - 1] = (x[n] + a[n - 1]) / 2;\n  for (i = 0; i < n - 1; ++i) b[i] = 2 * x[i + 1] - a[i + 1];\n  return [a, b];\n}\n\nexport default function(context) {\n  return new Natural(context);\n}\n","function Step(context, t) {\n  this._context = context;\n  this._t = t;\n}\n\nStep.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x = this._y = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (0 < this._t && this._t < 1 && this._point === 2) this._context.lineTo(this._x, this._y);\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    if (this._line >= 0) this._t = 1 - this._t, this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; // proceed\n      default: {\n        if (this._t <= 0) {\n          this._context.lineTo(this._x, y);\n          this._context.lineTo(x, y);\n        } else {\n          var x1 = this._x * (1 - this._t) + x * this._t;\n          this._context.lineTo(x1, this._y);\n          this._context.lineTo(x1, y);\n        }\n        break;\n      }\n    }\n    this._x = x, this._y = y;\n  }\n};\n\nexport default function(context) {\n  return new Step(context, 0.5);\n}\n\nexport function stepBefore(context) {\n  return new Step(context, 0);\n}\n\nexport function stepAfter(context) {\n  return new Step(context, 1);\n}\n","import {slice} from \"./array\";\nimport constant from \"./constant\";\nimport offsetNone from \"./offset/none\";\nimport orderNone from \"./order/none\";\n\nfunction stackValue(d, key) {\n  return d[key];\n}\n\nexport default function() {\n  var keys = constant([]),\n      order = orderNone,\n      offset = offsetNone,\n      value = stackValue;\n\n  function stack(data) {\n    var kz = keys.apply(this, arguments),\n        i,\n        m = data.length,\n        n = kz.length,\n        sz = new Array(n),\n        oz;\n\n    for (i = 0; i < n; ++i) {\n      for (var ki = kz[i], si = sz[i] = new Array(m), j = 0, sij; j < m; ++j) {\n        si[j] = sij = [0, +value(data[j], ki, j, data)];\n        sij.data = data[j];\n      }\n      si.key = ki;\n    }\n\n    for (i = 0, oz = order(sz); i < n; ++i) {\n      sz[oz[i]].index = i;\n    }\n\n    offset(sz, oz);\n    return sz;\n  }\n\n  stack.keys = function(_) {\n    return arguments.length ? (keys = typeof _ === \"function\" ? _ : constant(slice.call(_)), stack) : keys;\n  };\n\n  stack.value = function(_) {\n    return arguments.length ? (value = typeof _ === \"function\" ? _ : constant(+_), stack) : value;\n  };\n\n  stack.order = function(_) {\n    return arguments.length ? (order = _ == null ? orderNone : typeof _ === \"function\" ? _ : constant(slice.call(_)), stack) : order;\n  };\n\n  stack.offset = function(_) {\n    return arguments.length ? (offset = _ == null ? offsetNone : _, stack) : offset;\n  };\n\n  return stack;\n}\n","import none from \"./none\";\n\nexport default function(series) {\n  var sums = series.map(sum);\n  return none(series).sort(function(a, b) { return sums[a] - sums[b]; });\n}\n\nexport function sum(series) {\n  var s = 0, i = -1, n = series.length, v;\n  while (++i < n) if (v = +series[i][1]) s += v;\n  return s;\n}\n","export default function registryFactory(parentRegistry) {\n  let defaultValue;\n  const reg = {};\n  const parent = parentRegistry || {\n    get: () => undefined,\n    has: () => false,\n    default: () => undefined\n  };\n\n  defaultValue = parent.default();\n\n  /**\n   * @private\n   * @param {string} key\n   * @param {any} value\n   * @throws {TypeError} Key must be a non-empty string\n   * @returns {boolean} False if the given key already exists, true otherwise\n   * @example\n   * var r = registry();\n   * r.add( \"marker\", function(args) {\n   *   return new markers[args.type](args);\n   * });\n   *\n   */\n  function add(key, value) {\n    if (!key || typeof key !== 'string') {\n      throw new TypeError('Invalid argument: key must be a non-empty string');\n    }\n    if (key in reg) {\n      return false;\n    }\n    reg[key] = value;\n    return true;\n  }\n\n  function get(key) {\n    return reg[key] || parent.get(key);\n  }\n\n  function has(key) {\n    return !!reg[key] || parent.has(key);\n  }\n\n  function remove(key) {\n    const d = reg[key];\n    delete reg[key];\n    return d;\n  }\n\n  function getKeys() {\n    return Object.keys(reg);\n  }\n\n  function getValues() {\n    return Object.keys(reg).map(key => reg[key]);\n  }\n\n  function deflt(d) {\n    if (typeof d !== 'undefined') {\n      defaultValue = d;\n    }\n    return defaultValue;\n  }\n\n  /**\n   * @alias registry\n   * @interface\n   * @param {string} key\n   * @param {any} value\n   */\n  function registry(key, value) {\n    if (typeof value !== 'undefined') {\n      return add(key, value);\n    }\n    return get(key || defaultValue);\n  }\n\n  registry.add = add;\n  registry.get = get;\n  registry.has = has;\n  registry.remove = remove;\n  registry.getKeys = getKeys;\n  registry.getValues = getValues;\n  registry.default = deflt;\n  registry.register = add; // deprecated\n\n  return registry;\n}\n","import formatTypes from \"./formatTypes\";\n\n// [[fill]align][sign][symbol][0][width][,][.precision][type]\nvar re = /^(?:(.)?([<>=^]))?([+\\-\\( ])?([$#])?(0)?(\\d+)?(,)?(\\.\\d+)?([a-z%])?$/i;\n\nexport default function formatSpecifier(specifier) {\n  return new FormatSpecifier(specifier);\n}\n\nformatSpecifier.prototype = FormatSpecifier.prototype; // instanceof\n\nfunction FormatSpecifier(specifier) {\n  if (!(match = re.exec(specifier))) throw new Error(\"invalid format: \" + specifier);\n\n  var match,\n      fill = match[1] || \" \",\n      align = match[2] || \">\",\n      sign = match[3] || \"-\",\n      symbol = match[4] || \"\",\n      zero = !!match[5],\n      width = match[6] && +match[6],\n      comma = !!match[7],\n      precision = match[8] && +match[8].slice(1),\n      type = match[9] || \"\";\n\n  // The \"n\" type is an alias for \",g\".\n  if (type === \"n\") comma = true, type = \"g\";\n\n  // Map invalid types to the default format.\n  else if (!formatTypes[type]) type = \"\";\n\n  // If zero fill is specified, padding goes after sign and before digits.\n  if (zero || (fill === \"0\" && align === \"=\")) zero = true, fill = \"0\", align = \"=\";\n\n  this.fill = fill;\n  this.align = align;\n  this.sign = sign;\n  this.symbol = symbol;\n  this.zero = zero;\n  this.width = width;\n  this.comma = comma;\n  this.precision = precision;\n  this.type = type;\n}\n\nFormatSpecifier.prototype.toString = function() {\n  return this.fill\n      + this.align\n      + this.sign\n      + this.symbol\n      + (this.zero ? \"0\" : \"\")\n      + (this.width == null ? \"\" : Math.max(1, this.width | 0))\n      + (this.comma ? \",\" : \"\")\n      + (this.precision == null ? \"\" : \".\" + Math.max(0, this.precision | 0))\n      + this.type;\n};\n","var t0 = new Date,\n    t1 = new Date;\n\nexport default function newInterval(floori, offseti, count, field) {\n\n  function interval(date) {\n    return floori(date = new Date(+date)), date;\n  }\n\n  interval.floor = interval;\n\n  interval.ceil = function(date) {\n    return floori(date = new Date(date - 1)), offseti(date, 1), floori(date), date;\n  };\n\n  interval.round = function(date) {\n    var d0 = interval(date),\n        d1 = interval.ceil(date);\n    return date - d0 < d1 - date ? d0 : d1;\n  };\n\n  interval.offset = function(date, step) {\n    return offseti(date = new Date(+date), step == null ? 1 : Math.floor(step)), date;\n  };\n\n  interval.range = function(start, stop, step) {\n    var range = [], previous;\n    start = interval.ceil(start);\n    step = step == null ? 1 : Math.floor(step);\n    if (!(start < stop) || !(step > 0)) return range; // also handles Invalid Date\n    do range.push(previous = new Date(+start)), offseti(start, step), floori(start);\n    while (previous < start && start < stop);\n    return range;\n  };\n\n  interval.filter = function(test) {\n    return newInterval(function(date) {\n      if (date >= date) while (floori(date), !test(date)) date.setTime(date - 1);\n    }, function(date, step) {\n      if (date >= date) {\n        if (step < 0) while (++step <= 0) {\n          while (offseti(date, -1), !test(date)) {} // eslint-disable-line no-empty\n        } else while (--step >= 0) {\n          while (offseti(date, +1), !test(date)) {} // eslint-disable-line no-empty\n        }\n      }\n    });\n  };\n\n  if (count) {\n    interval.count = function(start, end) {\n      t0.setTime(+start), t1.setTime(+end);\n      floori(t0), floori(t1);\n      return Math.floor(count(t0, t1));\n    };\n\n    interval.every = function(step) {\n      step = Math.floor(step);\n      return !isFinite(step) || !(step > 0) ? null\n          : !(step > 1) ? interval\n          : interval.filter(field\n              ? function(d) { return field(d) % step === 0; }\n              : function(d) { return interval.count(0, d) % step === 0; });\n    };\n  }\n\n  return interval;\n}\n","import interval from \"./interval\";\nimport {durationMinute, durationWeek} from \"./duration\";\n\nfunction weekday(i) {\n  return interval(function(date) {\n    date.setDate(date.getDate() - (date.getDay() + 7 - i) % 7);\n    date.setHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setDate(date.getDate() + step * 7);\n  }, function(start, end) {\n    return (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationWeek;\n  });\n}\n\nexport var sunday = weekday(0);\nexport var monday = weekday(1);\nexport var tuesday = weekday(2);\nexport var wednesday = weekday(3);\nexport var thursday = weekday(4);\nexport var friday = weekday(5);\nexport var saturday = weekday(6);\n\nexport var sundays = sunday.range;\nexport var mondays = monday.range;\nexport var tuesdays = tuesday.range;\nexport var wednesdays = wednesday.range;\nexport var thursdays = thursday.range;\nexport var fridays = friday.range;\nexport var saturdays = saturday.range;\n","import interval from \"./interval\";\nimport {durationWeek} from \"./duration\";\n\nfunction utcWeekday(i) {\n  return interval(function(date) {\n    date.setUTCDate(date.getUTCDate() - (date.getUTCDay() + 7 - i) % 7);\n    date.setUTCHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setUTCDate(date.getUTCDate() + step * 7);\n  }, function(start, end) {\n    return (end - start) / durationWeek;\n  });\n}\n\nexport var utcSunday = utcWeekday(0);\nexport var utcMonday = utcWeekday(1);\nexport var utcTuesday = utcWeekday(2);\nexport var utcWednesday = utcWeekday(3);\nexport var utcThursday = utcWeekday(4);\nexport var utcFriday = utcWeekday(5);\nexport var utcSaturday = utcWeekday(6);\n\nexport var utcSundays = utcSunday.range;\nexport var utcMondays = utcMonday.range;\nexport var utcTuesdays = utcTuesday.range;\nexport var utcWednesdays = utcWednesday.range;\nexport var utcThursdays = utcThursday.range;\nexport var utcFridays = utcFriday.range;\nexport var utcSaturdays = utcSaturday.range;\n","import {\n  timeDay,\n  timeSunday,\n  timeMonday,\n  timeThursday,\n  timeYear,\n  utcDay,\n  utcSunday,\n  utcMonday,\n  utcThursday,\n  utcYear\n} from \"d3-time\";\n\nfunction localDate(d) {\n  if (0 <= d.y && d.y < 100) {\n    var date = new Date(-1, d.m, d.d, d.H, d.M, d.S, d.L);\n    date.setFullYear(d.y);\n    return date;\n  }\n  return new Date(d.y, d.m, d.d, d.H, d.M, d.S, d.L);\n}\n\nfunction utcDate(d) {\n  if (0 <= d.y && d.y < 100) {\n    var date = new Date(Date.UTC(-1, d.m, d.d, d.H, d.M, d.S, d.L));\n    date.setUTCFullYear(d.y);\n    return date;\n  }\n  return new Date(Date.UTC(d.y, d.m, d.d, d.H, d.M, d.S, d.L));\n}\n\nfunction newYear(y) {\n  return {y: y, m: 0, d: 1, H: 0, M: 0, S: 0, L: 0};\n}\n\nexport default function formatLocale(locale) {\n  var locale_dateTime = locale.dateTime,\n      locale_date = locale.date,\n      locale_time = locale.time,\n      locale_periods = locale.periods,\n      locale_weekdays = locale.days,\n      locale_shortWeekdays = locale.shortDays,\n      locale_months = locale.months,\n      locale_shortMonths = locale.shortMonths;\n\n  var periodRe = formatRe(locale_periods),\n      periodLookup = formatLookup(locale_periods),\n      weekdayRe = formatRe(locale_weekdays),\n      weekdayLookup = formatLookup(locale_weekdays),\n      shortWeekdayRe = formatRe(locale_shortWeekdays),\n      shortWeekdayLookup = formatLookup(locale_shortWeekdays),\n      monthRe = formatRe(locale_months),\n      monthLookup = formatLookup(locale_months),\n      shortMonthRe = formatRe(locale_shortMonths),\n      shortMonthLookup = formatLookup(locale_shortMonths);\n\n  var formats = {\n    \"a\": formatShortWeekday,\n    \"A\": formatWeekday,\n    \"b\": formatShortMonth,\n    \"B\": formatMonth,\n    \"c\": null,\n    \"d\": formatDayOfMonth,\n    \"e\": formatDayOfMonth,\n    \"f\": formatMicroseconds,\n    \"H\": formatHour24,\n    \"I\": formatHour12,\n    \"j\": formatDayOfYear,\n    \"L\": formatMilliseconds,\n    \"m\": formatMonthNumber,\n    \"M\": formatMinutes,\n    \"p\": formatPeriod,\n    \"Q\": formatUnixTimestamp,\n    \"s\": formatUnixTimestampSeconds,\n    \"S\": formatSeconds,\n    \"u\": formatWeekdayNumberMonday,\n    \"U\": formatWeekNumberSunday,\n    \"V\": formatWeekNumberISO,\n    \"w\": formatWeekdayNumberSunday,\n    \"W\": formatWeekNumberMonday,\n    \"x\": null,\n    \"X\": null,\n    \"y\": formatYear,\n    \"Y\": formatFullYear,\n    \"Z\": formatZone,\n    \"%\": formatLiteralPercent\n  };\n\n  var utcFormats = {\n    \"a\": formatUTCShortWeekday,\n    \"A\": formatUTCWeekday,\n    \"b\": formatUTCShortMonth,\n    \"B\": formatUTCMonth,\n    \"c\": null,\n    \"d\": formatUTCDayOfMonth,\n    \"e\": formatUTCDayOfMonth,\n    \"f\": formatUTCMicroseconds,\n    \"H\": formatUTCHour24,\n    \"I\": formatUTCHour12,\n    \"j\": formatUTCDayOfYear,\n    \"L\": formatUTCMilliseconds,\n    \"m\": formatUTCMonthNumber,\n    \"M\": formatUTCMinutes,\n    \"p\": formatUTCPeriod,\n    \"Q\": formatUnixTimestamp,\n    \"s\": formatUnixTimestampSeconds,\n    \"S\": formatUTCSeconds,\n    \"u\": formatUTCWeekdayNumberMonday,\n    \"U\": formatUTCWeekNumberSunday,\n    \"V\": formatUTCWeekNumberISO,\n    \"w\": formatUTCWeekdayNumberSunday,\n    \"W\": formatUTCWeekNumberMonday,\n    \"x\": null,\n    \"X\": null,\n    \"y\": formatUTCYear,\n    \"Y\": formatUTCFullYear,\n    \"Z\": formatUTCZone,\n    \"%\": formatLiteralPercent\n  };\n\n  var parses = {\n    \"a\": parseShortWeekday,\n    \"A\": parseWeekday,\n    \"b\": parseShortMonth,\n    \"B\": parseMonth,\n    \"c\": parseLocaleDateTime,\n    \"d\": parseDayOfMonth,\n    \"e\": parseDayOfMonth,\n    \"f\": parseMicroseconds,\n    \"H\": parseHour24,\n    \"I\": parseHour24,\n    \"j\": parseDayOfYear,\n    \"L\": parseMilliseconds,\n    \"m\": parseMonthNumber,\n    \"M\": parseMinutes,\n    \"p\": parsePeriod,\n    \"Q\": parseUnixTimestamp,\n    \"s\": parseUnixTimestampSeconds,\n    \"S\": parseSeconds,\n    \"u\": parseWeekdayNumberMonday,\n    \"U\": parseWeekNumberSunday,\n    \"V\": parseWeekNumberISO,\n    \"w\": parseWeekdayNumberSunday,\n    \"W\": parseWeekNumberMonday,\n    \"x\": parseLocaleDate,\n    \"X\": parseLocaleTime,\n    \"y\": parseYear,\n    \"Y\": parseFullYear,\n    \"Z\": parseZone,\n    \"%\": parseLiteralPercent\n  };\n\n  // These recursive directive definitions must be deferred.\n  formats.x = newFormat(locale_date, formats);\n  formats.X = newFormat(locale_time, formats);\n  formats.c = newFormat(locale_dateTime, formats);\n  utcFormats.x = newFormat(locale_date, utcFormats);\n  utcFormats.X = newFormat(locale_time, utcFormats);\n  utcFormats.c = newFormat(locale_dateTime, utcFormats);\n\n  function newFormat(specifier, formats) {\n    return function(date) {\n      var string = [],\n          i = -1,\n          j = 0,\n          n = specifier.length,\n          c,\n          pad,\n          format;\n\n      if (!(date instanceof Date)) date = new Date(+date);\n\n      while (++i < n) {\n        if (specifier.charCodeAt(i) === 37) {\n          string.push(specifier.slice(j, i));\n          if ((pad = pads[c = specifier.charAt(++i)]) != null) c = specifier.charAt(++i);\n          else pad = c === \"e\" ? \" \" : \"0\";\n          if (format = formats[c]) c = format(date, pad);\n          string.push(c);\n          j = i + 1;\n        }\n      }\n\n      string.push(specifier.slice(j, i));\n      return string.join(\"\");\n    };\n  }\n\n  function newParse(specifier, newDate) {\n    return function(string) {\n      var d = newYear(1900),\n          i = parseSpecifier(d, specifier, string += \"\", 0),\n          week, day;\n      if (i != string.length) return null;\n\n      // If a UNIX timestamp is specified, return it.\n      if (\"Q\" in d) return new Date(d.Q);\n\n      // The am-pm flag is 0 for AM, and 1 for PM.\n      if (\"p\" in d) d.H = d.H % 12 + d.p * 12;\n\n      // Convert day-of-week and week-of-year to day-of-year.\n      if (\"V\" in d) {\n        if (d.V < 1 || d.V > 53) return null;\n        if (!(\"w\" in d)) d.w = 1;\n        if (\"Z\" in d) {\n          week = utcDate(newYear(d.y)), day = week.getUTCDay();\n          week = day > 4 || day === 0 ? utcMonday.ceil(week) : utcMonday(week);\n          week = utcDay.offset(week, (d.V - 1) * 7);\n          d.y = week.getUTCFullYear();\n          d.m = week.getUTCMonth();\n          d.d = week.getUTCDate() + (d.w + 6) % 7;\n        } else {\n          week = newDate(newYear(d.y)), day = week.getDay();\n          week = day > 4 || day === 0 ? timeMonday.ceil(week) : timeMonday(week);\n          week = timeDay.offset(week, (d.V - 1) * 7);\n          d.y = week.getFullYear();\n          d.m = week.getMonth();\n          d.d = week.getDate() + (d.w + 6) % 7;\n        }\n      } else if (\"W\" in d || \"U\" in d) {\n        if (!(\"w\" in d)) d.w = \"u\" in d ? d.u % 7 : \"W\" in d ? 1 : 0;\n        day = \"Z\" in d ? utcDate(newYear(d.y)).getUTCDay() : newDate(newYear(d.y)).getDay();\n        d.m = 0;\n        d.d = \"W\" in d ? (d.w + 6) % 7 + d.W * 7 - (day + 5) % 7 : d.w + d.U * 7 - (day + 6) % 7;\n      }\n\n      // If a time zone is specified, all fields are interpreted as UTC and then\n      // offset according to the specified time zone.\n      if (\"Z\" in d) {\n        d.H += d.Z / 100 | 0;\n        d.M += d.Z % 100;\n        return utcDate(d);\n      }\n\n      // Otherwise, all fields are in local time.\n      return newDate(d);\n    };\n  }\n\n  function parseSpecifier(d, specifier, string, j) {\n    var i = 0,\n        n = specifier.length,\n        m = string.length,\n        c,\n        parse;\n\n    while (i < n) {\n      if (j >= m) return -1;\n      c = specifier.charCodeAt(i++);\n      if (c === 37) {\n        c = specifier.charAt(i++);\n        parse = parses[c in pads ? specifier.charAt(i++) : c];\n        if (!parse || ((j = parse(d, string, j)) < 0)) return -1;\n      } else if (c != string.charCodeAt(j++)) {\n        return -1;\n      }\n    }\n\n    return j;\n  }\n\n  function parsePeriod(d, string, i) {\n    var n = periodRe.exec(string.slice(i));\n    return n ? (d.p = periodLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseShortWeekday(d, string, i) {\n    var n = shortWeekdayRe.exec(string.slice(i));\n    return n ? (d.w = shortWeekdayLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseWeekday(d, string, i) {\n    var n = weekdayRe.exec(string.slice(i));\n    return n ? (d.w = weekdayLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseShortMonth(d, string, i) {\n    var n = shortMonthRe.exec(string.slice(i));\n    return n ? (d.m = shortMonthLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseMonth(d, string, i) {\n    var n = monthRe.exec(string.slice(i));\n    return n ? (d.m = monthLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseLocaleDateTime(d, string, i) {\n    return parseSpecifier(d, locale_dateTime, string, i);\n  }\n\n  function parseLocaleDate(d, string, i) {\n    return parseSpecifier(d, locale_date, string, i);\n  }\n\n  function parseLocaleTime(d, string, i) {\n    return parseSpecifier(d, locale_time, string, i);\n  }\n\n  function formatShortWeekday(d) {\n    return locale_shortWeekdays[d.getDay()];\n  }\n\n  function formatWeekday(d) {\n    return locale_weekdays[d.getDay()];\n  }\n\n  function formatShortMonth(d) {\n    return locale_shortMonths[d.getMonth()];\n  }\n\n  function formatMonth(d) {\n    return locale_months[d.getMonth()];\n  }\n\n  function formatPeriod(d) {\n    return locale_periods[+(d.getHours() >= 12)];\n  }\n\n  function formatUTCShortWeekday(d) {\n    return locale_shortWeekdays[d.getUTCDay()];\n  }\n\n  function formatUTCWeekday(d) {\n    return locale_weekdays[d.getUTCDay()];\n  }\n\n  function formatUTCShortMonth(d) {\n    return locale_shortMonths[d.getUTCMonth()];\n  }\n\n  function formatUTCMonth(d) {\n    return locale_months[d.getUTCMonth()];\n  }\n\n  function formatUTCPeriod(d) {\n    return locale_periods[+(d.getUTCHours() >= 12)];\n  }\n\n  return {\n    format: function(specifier) {\n      var f = newFormat(specifier += \"\", formats);\n      f.toString = function() { return specifier; };\n      return f;\n    },\n    parse: function(specifier) {\n      var p = newParse(specifier += \"\", localDate);\n      p.toString = function() { return specifier; };\n      return p;\n    },\n    utcFormat: function(specifier) {\n      var f = newFormat(specifier += \"\", utcFormats);\n      f.toString = function() { return specifier; };\n      return f;\n    },\n    utcParse: function(specifier) {\n      var p = newParse(specifier, utcDate);\n      p.toString = function() { return specifier; };\n      return p;\n    }\n  };\n}\n\nvar pads = {\"-\": \"\", \"_\": \" \", \"0\": \"0\"},\n    numberRe = /^\\s*\\d+/, // note: ignores next directive\n    percentRe = /^%/,\n    requoteRe = /[\\\\^$*+?|[\\]().{}]/g;\n\nfunction pad(value, fill, width) {\n  var sign = value < 0 ? \"-\" : \"\",\n      string = (sign ? -value : value) + \"\",\n      length = string.length;\n  return sign + (length < width ? new Array(width - length + 1).join(fill) + string : string);\n}\n\nfunction requote(s) {\n  return s.replace(requoteRe, \"\\\\$&\");\n}\n\nfunction formatRe(names) {\n  return new RegExp(\"^(?:\" + names.map(requote).join(\"|\") + \")\", \"i\");\n}\n\nfunction formatLookup(names) {\n  var map = {}, i = -1, n = names.length;\n  while (++i < n) map[names[i].toLowerCase()] = i;\n  return map;\n}\n\nfunction parseWeekdayNumberSunday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.w = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekdayNumberMonday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.u = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberSunday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.U = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberISO(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.V = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberMonday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.W = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseFullYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 4));\n  return n ? (d.y = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.y = +n[0] + (+n[0] > 68 ? 1900 : 2000), i + n[0].length) : -1;\n}\n\nfunction parseZone(d, string, i) {\n  var n = /^(Z)|([+-]\\d\\d)(?::?(\\d\\d))?/.exec(string.slice(i, i + 6));\n  return n ? (d.Z = n[1] ? 0 : -(n[2] + (n[3] || \"00\")), i + n[0].length) : -1;\n}\n\nfunction parseMonthNumber(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.m = n[0] - 1, i + n[0].length) : -1;\n}\n\nfunction parseDayOfMonth(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.d = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseDayOfYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 3));\n  return n ? (d.m = 0, d.d = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseHour24(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.H = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMinutes(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.M = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseSeconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.S = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMilliseconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 3));\n  return n ? (d.L = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMicroseconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 6));\n  return n ? (d.L = Math.floor(n[0] / 1000), i + n[0].length) : -1;\n}\n\nfunction parseLiteralPercent(d, string, i) {\n  var n = percentRe.exec(string.slice(i, i + 1));\n  return n ? i + n[0].length : -1;\n}\n\nfunction parseUnixTimestamp(d, string, i) {\n  var n = numberRe.exec(string.slice(i));\n  return n ? (d.Q = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseUnixTimestampSeconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i));\n  return n ? (d.Q = (+n[0]) * 1000, i + n[0].length) : -1;\n}\n\nfunction formatDayOfMonth(d, p) {\n  return pad(d.getDate(), p, 2);\n}\n\nfunction formatHour24(d, p) {\n  return pad(d.getHours(), p, 2);\n}\n\nfunction formatHour12(d, p) {\n  return pad(d.getHours() % 12 || 12, p, 2);\n}\n\nfunction formatDayOfYear(d, p) {\n  return pad(1 + timeDay.count(timeYear(d), d), p, 3);\n}\n\nfunction formatMilliseconds(d, p) {\n  return pad(d.getMilliseconds(), p, 3);\n}\n\nfunction formatMicroseconds(d, p) {\n  return formatMilliseconds(d, p) + \"000\";\n}\n\nfunction formatMonthNumber(d, p) {\n  return pad(d.getMonth() + 1, p, 2);\n}\n\nfunction formatMinutes(d, p) {\n  return pad(d.getMinutes(), p, 2);\n}\n\nfunction formatSeconds(d, p) {\n  return pad(d.getSeconds(), p, 2);\n}\n\nfunction formatWeekdayNumberMonday(d) {\n  var day = d.getDay();\n  return day === 0 ? 7 : day;\n}\n\nfunction formatWeekNumberSunday(d, p) {\n  return pad(timeSunday.count(timeYear(d), d), p, 2);\n}\n\nfunction formatWeekNumberISO(d, p) {\n  var day = d.getDay();\n  d = (day >= 4 || day === 0) ? timeThursday(d) : timeThursday.ceil(d);\n  return pad(timeThursday.count(timeYear(d), d) + (timeYear(d).getDay() === 4), p, 2);\n}\n\nfunction formatWeekdayNumberSunday(d) {\n  return d.getDay();\n}\n\nfunction formatWeekNumberMonday(d, p) {\n  return pad(timeMonday.count(timeYear(d), d), p, 2);\n}\n\nfunction formatYear(d, p) {\n  return pad(d.getFullYear() % 100, p, 2);\n}\n\nfunction formatFullYear(d, p) {\n  return pad(d.getFullYear() % 10000, p, 4);\n}\n\nfunction formatZone(d) {\n  var z = d.getTimezoneOffset();\n  return (z > 0 ? \"-\" : (z *= -1, \"+\"))\n      + pad(z / 60 | 0, \"0\", 2)\n      + pad(z % 60, \"0\", 2);\n}\n\nfunction formatUTCDayOfMonth(d, p) {\n  return pad(d.getUTCDate(), p, 2);\n}\n\nfunction formatUTCHour24(d, p) {\n  return pad(d.getUTCHours(), p, 2);\n}\n\nfunction formatUTCHour12(d, p) {\n  return pad(d.getUTCHours() % 12 || 12, p, 2);\n}\n\nfunction formatUTCDayOfYear(d, p) {\n  return pad(1 + utcDay.count(utcYear(d), d), p, 3);\n}\n\nfunction formatUTCMilliseconds(d, p) {\n  return pad(d.getUTCMilliseconds(), p, 3);\n}\n\nfunction formatUTCMicroseconds(d, p) {\n  return formatUTCMilliseconds(d, p) + \"000\";\n}\n\nfunction formatUTCMonthNumber(d, p) {\n  return pad(d.getUTCMonth() + 1, p, 2);\n}\n\nfunction formatUTCMinutes(d, p) {\n  return pad(d.getUTCMinutes(), p, 2);\n}\n\nfunction formatUTCSeconds(d, p) {\n  return pad(d.getUTCSeconds(), p, 2);\n}\n\nfunction formatUTCWeekdayNumberMonday(d) {\n  var dow = d.getUTCDay();\n  return dow === 0 ? 7 : dow;\n}\n\nfunction formatUTCWeekNumberSunday(d, p) {\n  return pad(utcSunday.count(utcYear(d), d), p, 2);\n}\n\nfunction formatUTCWeekNumberISO(d, p) {\n  var day = d.getUTCDay();\n  d = (day >= 4 || day === 0) ? utcThursday(d) : utcThursday.ceil(d);\n  return pad(utcThursday.count(utcYear(d), d) + (utcYear(d).getUTCDay() === 4), p, 2);\n}\n\nfunction formatUTCWeekdayNumberSunday(d) {\n  return d.getUTCDay();\n}\n\nfunction formatUTCWeekNumberMonday(d, p) {\n  return pad(utcMonday.count(utcYear(d), d), p, 2);\n}\n\nfunction formatUTCYear(d, p) {\n  return pad(d.getUTCFullYear() % 100, p, 2);\n}\n\nfunction formatUTCFullYear(d, p) {\n  return pad(d.getUTCFullYear() % 10000, p, 4);\n}\n\nfunction formatUTCZone() {\n  return \"+0000\";\n}\n\nfunction formatLiteralPercent() {\n  return \"%\";\n}\n\nfunction formatUnixTimestamp(d) {\n  return +d;\n}\n\nfunction formatUnixTimestampSeconds(d) {\n  return Math.floor(+d / 1000);\n}\n","/* eslint no-return-assign: 0*/\nimport formatterFn from '../formatter';\n\n// TODO - decide whether usage of .call() is appropriate when invoking accessors, if yes then arrow functions are not allowed!\n\nconst accessors = {\n  id: data => `${data.source}/${data.title}`,\n  key: data => data.title,\n  tags: data => data.tags,\n  min: data => data.min,\n  max: data => data.max,\n  type: data => data.type,\n  title: data => data.title,\n  values: data => data.values,\n  value: v => v,\n  label: v => v,\n  formatter: data => ((data.formatter && data.formatter()) || formatterFn('d3-number')(''))\n};\n\n/**\n * Create a new field with default settings\n * @ignore\n * @return {field} Data field\n */\nexport default function field(data, {\n  id = accessors.id,\n  key = accessors.key,\n  min = accessors.min,\n  max = accessors.max,\n  type = accessors.type,\n  tags = accessors.tags,\n  title = accessors.title,\n  values = accessors.values,\n  value = accessors.value,\n  label = accessors.label,\n  formatter = accessors.formatter\n} = {}) {\n  /**\n   * @alias field\n   */\n  const f = {\n\n    /**\n     * Returns this field's id\n     * @returns {string}\n     */\n    id: () => id(data),\n\n    /**\n     * Returns this field's key\n     * @returns {string}\n     */\n    key: () => key(data),\n\n    /**\n     * Returns the input data\n     * @returns {any}\n     */\n    raw: () => data,\n    /**\n     * Returns the tags.\n     * @return {Array<string>}\n     */\n    tags: () => tags(data),\n\n    /**\n     * Returns this field's type: 'dimension' or 'measure'.\n     * @return {string}\n     */\n    type: () => type(data),\n\n    /**\n     * Returns the min value of this field.\n     * @return {number}\n     */\n    min: () => min(data),\n\n    /**\n     * Returns the max value of this field.\n     * @return {number}\n     */\n    max: () => max(data),\n\n    /**\n     * Returns this field's title.\n     * @return {string}\n     */\n    title: () => title(data),\n\n    /**\n     * Returns the values of this field.\n     * @return {Array<datum-extract>}\n     */\n    items: () => values(data),\n\n    /**\n     * Returns a formatter adapted to the content of this field.\n     */\n    formatter: () => formatter(data),\n\n    value,\n    label\n  };\n\n  return f;\n}\n","import stack from './stack';\n\nexport default function extract(dataConfig, data = {}, opts = {}) {\n  const extracted = {\n    // items: [],\n    // fields: [],\n    // source: null,\n    // value: null,\n    // label: null,\n    // children: null,\n    // root: null,\n    // graph: null\n  };\n\n  const logger = opts.logger;\n\n  if (Array.isArray(dataConfig)) { // if data is an array, assume it's manual data input -> normalize\n    extracted.items = dataConfig.map(v => ({ value: v, label: String(v) }));\n  } else if (dataConfig) {\n    if ('collection' in dataConfig) {\n      return data.collection(dataConfig.collection);\n    }\n    const source = data.dataset ? data.dataset(dataConfig.source) : null;\n    let valueFn = dataConfig.value || (d => d);\n    let labelFn = dataConfig.label || (d => d);\n    if (dataConfig.groupBy || dataConfig.mapTo) { // DEPRECATION\n      logger.warn('Deprecated \"data\" configuration', dataConfig);\n      extracted.items = [];\n    } else if (dataConfig.hierarchy) {\n      extracted.root = source.hierarchy ? source.hierarchy(dataConfig.hierarchy) : null;\n    } else if (dataConfig.items) {\n      extracted.items = dataConfig.items.map(v => ({ value: valueFn(v), label: String(labelFn(v)) }));\n    } else if (dataConfig.extract) {\n      const extractionsConfigs = Array.isArray(dataConfig.extract) ? dataConfig.extract : [dataConfig.extract];\n      extracted.items = [];\n      const sourceFields = [];\n      extractionsConfigs.forEach((cfg) => {\n        const s = cfg.source ? data.dataset(cfg.source) : source;\n        if (!s) {\n          return;\n        }\n        extracted.items.push(...s.extract(cfg));\n        if (typeof cfg.field !== 'undefined') {\n          sourceFields.push(s.field(cfg.field));\n        }\n      });\n      if (sourceFields.length) {\n        extracted.fields = sourceFields;\n      }\n      if (dataConfig.amend && Array.isArray(dataConfig.amend)) {\n        extracted.items.push(...dataConfig.amend);\n      }\n    } else if (typeof dataConfig.field !== 'undefined' && source) {\n      const f = source.field(dataConfig.field);\n      if (f) {\n        if (!extracted.fields) {\n          extracted.fields = [];\n        }\n        extracted.fields.push(f);\n        if (!('value' in dataConfig)) {\n          valueFn = f.value || (v => v);\n          labelFn = f.label || (v => v);\n          extracted.value = valueFn;\n        }\n        extracted.items = f.items().map(v => ({ value: valueFn(v), label: String(labelFn(v)), source: { field: dataConfig.field } }));\n        // TODO - add source: { key: dataConfig.source, field: dataConfig.field, data: v }\n      }\n    } else if (dataConfig.fields) {\n      dataConfig.fields.forEach((obj) => {\n        const s = typeof obj === 'object' && obj.source ? data.dataset(obj.source) : source;\n        if (!s) {\n          return;\n        }\n        let f;\n        if (typeof obj === 'object' && typeof obj.field !== 'undefined') {\n          f = s.field(obj.field);\n        } else {\n          f = s.field(obj);\n        }\n        if (f) {\n          if (!extracted.fields) {\n            extracted.fields = [];\n          }\n          extracted.fields.push(f);\n        }\n      });\n    }\n\n    if (extracted.items && dataConfig.map) {\n      extracted.items = extracted.items.map(dataConfig.map);\n    }\n  }\n\n  if (dataConfig && dataConfig.stack) {\n    stack(extracted, dataConfig.stack, data.dataset);\n  }\n  if (dataConfig && !Array.isArray(dataConfig) && typeof dataConfig.sort === 'function' && extracted.items) {\n    extracted.items = extracted.items.sort(dataConfig.sort);\n  }\n  return extracted;\n}\n","import {\n  stack,\n  stackOrderAscending,\n  stackOrderInsideOut,\n  stackOrderNone,\n  stackOrderReverse,\n  stackOffsetDiverging,\n  stackOffsetNone,\n  stackOffsetSilhouette,\n  stackOffsetExpand,\n  stackOffsetWiggle\n} from 'd3-shape';\nimport fieldFn from './field';\n\nconst OFFSETS = {\n  diverging: stackOffsetDiverging,\n  none: stackOffsetNone,\n  silhouette: stackOffsetSilhouette,\n  expand: stackOffsetExpand,\n  wiggle: stackOffsetWiggle\n};\n\nconst ORDERS = {\n  ascending: stackOrderAscending,\n  insideout: stackOrderInsideOut,\n  none: stackOrderNone,\n  reverse: stackOrderReverse\n};\n\nfunction stacked(data, config, ds) {\n  const stackIds = {};\n  const stackFn = config.stackKey;\n  const valueFn = config.value;\n  const startProp = config.startProp || 'start';\n  const endProp = config.endProp || 'end';\n  const offset = config.offset || 'none';\n  const order = config.order || 'none';\n  const valueRef = config.valueRef || '';\n\n  let maxStackCount = 0;\n\n  let valueFields = {};\n\n  for (let i = 0; i < data.items.length; i++) {\n    let p = data.items[i];\n    let sourceField = valueRef ? p[valueRef] : null;\n    if (sourceField && sourceField.source) {\n      let ff = `${sourceField.source.key || ''}/${sourceField.source.field}`;\n      if (!valueFields[ff]) {\n        valueFields[ff] = sourceField.source;\n      }\n    }\n    let sid = stackFn(p);\n    stackIds[sid] = stackIds[sid] || { items: [] };\n    stackIds[sid].items.push(p);\n\n    maxStackCount = Math.max(maxStackCount, stackIds[sid].items.length);\n  }\n\n  const keys = Array.apply(null, { length: maxStackCount }).map(Number.call, Number); // eslint-disable-line\n  const matrix = Object.keys(stackIds).map(sid => stackIds[sid].items);\n\n  const d3Stack = stack()\n    .keys(keys)\n    .value((s, key) => (s[key] ? valueFn(s[key]) : 0))\n    .order(ORDERS[order])\n    .offset(OFFSETS[offset]);\n\n  let series = d3Stack(matrix);\n  let values = [];\n\n  for (let i = 0; i < series.length; i++) {\n    let serie = series[i];\n    for (let s = 0; s < serie.length; s++) {\n      let range = serie[s];\n      let item = serie[s].data[serie.key];\n      if (!item) {\n        continue;\n      }\n      item[startProp] = { value: range[0] };\n      item[endProp] = { value: range[1] };\n      values.push(range[0], range[1]);\n    }\n  }\n\n  let stackedFields = Object.keys(valueFields).map((f) => {\n    let dSource = ds(valueFields[f].key);\n    return dSource ? dSource.field(valueFields[f].field) : null;\n  }).filter(f => !!f);\n\n  const field = fieldFn({\n    title: stackedFields.map(f => f.title()).join(', '),\n    min: Math.min(...values),\n    max: Math.max(...values),\n    type: 'measure',\n    formatter: stackedFields[0] ? stackedFields[0].formatter : undefined\n  });\n  data.fields.push(field);\n}\n\nexport {\n  stacked as default\n};\n","import extractData from '../../data/extractor';\n\nexport function create(options, data, deps, extractor = extractData) {\n  if (options.data) {\n    const d = extractor(options.data, data, deps);\n    if (d && d.fields && d.fields[0]) {\n      // TODO Have some magic to handle and merge formatters from multiple sources\n      return d.fields[0].formatter();\n    }\n  }\n\n  let formatterType;\n  if (options.formatter) {\n    formatterType = `${options.formatter}-${options.type || 'number'}`;\n  } else {\n    formatterType = options.type || 'd3-number';\n  }\n\n  if (deps.formatter.has(formatterType)) {\n    const f = deps.formatter.get(formatterType)(options.format || '');\n    return f;\n  }\n\n  throw new Error(`Formatter of type '${formatterType}' was not found`);\n}\n\nexport default function builder(obj, data, deps) {\n  const formatters = {};\n  for (const f in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, f)) {\n      formatters[f] = create(obj[f], data, deps);\n    }\n  }\n  return formatters;\n}\n\nexport function getOrCreateFormatter(v, formatters, data, deps) {\n  let f;\n  if (typeof v === 'string' && formatters[v]) { // return by name\n    f = formatters[v];\n  } else if (typeof v === 'object' && 'formatter' in v && formatters[v.formatter]) { // return by { formatter: \"name\" }\n    f = formatters[v.formatter];\n  } else if (typeof v === 'object' && 'type' in v && formatters[v.type]) { // return by { formatter: \"name\" }\n    f = formatters[v.type];\n  }\n\n  return f || create(v, data, deps);\n}\n","var e10 = Math.sqrt(50),\n    e5 = Math.sqrt(10),\n    e2 = Math.sqrt(2);\n\nexport default function(start, stop, count) {\n  var reverse,\n      i = -1,\n      n,\n      ticks,\n      step;\n\n  stop = +stop, start = +start, count = +count;\n  if (start === stop && count > 0) return [start];\n  if (reverse = stop < start) n = start, start = stop, stop = n;\n  if ((step = tickIncrement(start, stop, count)) === 0 || !isFinite(step)) return [];\n\n  if (step > 0) {\n    start = Math.ceil(start / step);\n    stop = Math.floor(stop / step);\n    ticks = new Array(n = Math.ceil(stop - start + 1));\n    while (++i < n) ticks[i] = (start + i) * step;\n  } else {\n    start = Math.floor(start * step);\n    stop = Math.ceil(stop * step);\n    ticks = new Array(n = Math.ceil(start - stop + 1));\n    while (++i < n) ticks[i] = (start - i) / step;\n  }\n\n  if (reverse) ticks.reverse();\n\n  return ticks;\n}\n\nexport function tickIncrement(start, stop, count) {\n  var step = (stop - start) / Math.max(0, count),\n      power = Math.floor(Math.log(step) / Math.LN10),\n      error = step / Math.pow(10, power);\n  return power >= 0\n      ? (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1) * Math.pow(10, power)\n      : -Math.pow(10, -power) / (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1);\n}\n\nexport function tickStep(start, stop, count) {\n  var step0 = Math.abs(stop - start) / Math.max(0, count),\n      step1 = Math.pow(10, Math.floor(Math.log(step0) / Math.LN10)),\n      error = step0 / step1;\n  if (error >= e10) step1 *= 10;\n  else if (error >= e5) step1 *= 5;\n  else if (error >= e2) step1 *= 2;\n  return stop < start ? -step1 : step1;\n}\n","export var prefix = \"$\";\n\nfunction Map() {}\n\nMap.prototype = map.prototype = {\n  constructor: Map,\n  has: function(key) {\n    return (prefix + key) in this;\n  },\n  get: function(key) {\n    return this[prefix + key];\n  },\n  set: function(key, value) {\n    this[prefix + key] = value;\n    return this;\n  },\n  remove: function(key) {\n    var property = prefix + key;\n    return property in this && delete this[property];\n  },\n  clear: function() {\n    for (var property in this) if (property[0] === prefix) delete this[property];\n  },\n  keys: function() {\n    var keys = [];\n    for (var property in this) if (property[0] === prefix) keys.push(property.slice(1));\n    return keys;\n  },\n  values: function() {\n    var values = [];\n    for (var property in this) if (property[0] === prefix) values.push(this[property]);\n    return values;\n  },\n  entries: function() {\n    var entries = [];\n    for (var property in this) if (property[0] === prefix) entries.push({key: property.slice(1), value: this[property]});\n    return entries;\n  },\n  size: function() {\n    var size = 0;\n    for (var property in this) if (property[0] === prefix) ++size;\n    return size;\n  },\n  empty: function() {\n    for (var property in this) if (property[0] === prefix) return false;\n    return true;\n  },\n  each: function(f) {\n    for (var property in this) if (property[0] === prefix) f(this[property], property.slice(1), this);\n  }\n};\n\nfunction map(object, f) {\n  var map = new Map;\n\n  // Copy constructor.\n  if (object instanceof Map) object.each(function(value, key) { map.set(key, value); });\n\n  // Index array by numeric index or specified key function.\n  else if (Array.isArray(object)) {\n    var i = -1,\n        n = object.length,\n        o;\n\n    if (f == null) while (++i < n) map.set(i, object[i]);\n    else while (++i < n) map.set(f(o = object[i], i, object), o);\n  }\n\n  // Convert object to map.\n  else if (object) for (var key in object) map.set(key, object[key]);\n\n  return map;\n}\n\nexport default map;\n","import {default as map, prefix} from \"./map\";\n\nfunction Set() {}\n\nvar proto = map.prototype;\n\nSet.prototype = set.prototype = {\n  constructor: Set,\n  has: proto.has,\n  add: function(value) {\n    value += \"\";\n    this[prefix + value] = value;\n    return this;\n  },\n  remove: proto.remove,\n  clear: proto.clear,\n  values: proto.keys,\n  size: proto.size,\n  empty: proto.empty,\n  each: proto.each\n};\n\nfunction set(object, f) {\n  var set = new Set;\n\n  // Copy constructor.\n  if (object instanceof Set) object.each(function(value) { set.add(value); });\n\n  // Otherwise, assume it’s an array.\n  else if (object) {\n    var i = -1, n = object.length;\n    if (f == null) while (++i < n) set.add(object[i]);\n    else while (++i < n) set.add(f(object[i], i, object));\n  }\n\n  return set;\n}\n\nexport default set;\n","import {map} from \"d3-collection\";\nimport {slice} from \"./array\";\n\nexport var implicit = {name: \"implicit\"};\n\nexport default function ordinal(range) {\n  var index = map(),\n      domain = [],\n      unknown = implicit;\n\n  range = range == null ? [] : slice.call(range);\n\n  function scale(d) {\n    var key = d + \"\", i = index.get(key);\n    if (!i) {\n      if (unknown !== implicit) return unknown;\n      index.set(key, i = domain.push(d));\n    }\n    return range[(i - 1) % range.length];\n  }\n\n  scale.domain = function(_) {\n    if (!arguments.length) return domain.slice();\n    domain = [], index = map();\n    var i = -1, n = _.length, d, key;\n    while (++i < n) if (!index.has(key = (d = _[i]) + \"\")) index.set(key, domain.push(d));\n    return scale;\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = slice.call(_), scale) : range.slice();\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  scale.copy = function() {\n    return ordinal()\n        .domain(domain)\n        .range(range)\n        .unknown(unknown);\n  };\n\n  return scale;\n}\n","import {range as sequence} from \"d3-array\";\nimport ordinal from \"./ordinal\";\n\nexport default function band() {\n  var scale = ordinal().unknown(undefined),\n      domain = scale.domain,\n      ordinalRange = scale.range,\n      range = [0, 1],\n      step,\n      bandwidth,\n      round = false,\n      paddingInner = 0,\n      paddingOuter = 0,\n      align = 0.5;\n\n  delete scale.unknown;\n\n  function rescale() {\n    var n = domain().length,\n        reverse = range[1] < range[0],\n        start = range[reverse - 0],\n        stop = range[1 - reverse];\n    step = (stop - start) / Math.max(1, n - paddingInner + paddingOuter * 2);\n    if (round) step = Math.floor(step);\n    start += (stop - start - step * (n - paddingInner)) * align;\n    bandwidth = step * (1 - paddingInner);\n    if (round) start = Math.round(start), bandwidth = Math.round(bandwidth);\n    var values = sequence(n).map(function(i) { return start + step * i; });\n    return ordinalRange(reverse ? values.reverse() : values);\n  }\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain(_), rescale()) : domain();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = [+_[0], +_[1]], rescale()) : range.slice();\n  };\n\n  scale.rangeRound = function(_) {\n    return range = [+_[0], +_[1]], round = true, rescale();\n  };\n\n  scale.bandwidth = function() {\n    return bandwidth;\n  };\n\n  scale.step = function() {\n    return step;\n  };\n\n  scale.round = function(_) {\n    return arguments.length ? (round = !!_, rescale()) : round;\n  };\n\n  scale.padding = function(_) {\n    return arguments.length ? (paddingInner = paddingOuter = Math.max(0, Math.min(1, _)), rescale()) : paddingInner;\n  };\n\n  scale.paddingInner = function(_) {\n    return arguments.length ? (paddingInner = Math.max(0, Math.min(1, _)), rescale()) : paddingInner;\n  };\n\n  scale.paddingOuter = function(_) {\n    return arguments.length ? (paddingOuter = Math.max(0, Math.min(1, _)), rescale()) : paddingOuter;\n  };\n\n  scale.align = function(_) {\n    return arguments.length ? (align = Math.max(0, Math.min(1, _)), rescale()) : align;\n  };\n\n  scale.copy = function() {\n    return band()\n        .domain(domain())\n        .range(range)\n        .round(round)\n        .paddingInner(paddingInner)\n        .paddingOuter(paddingOuter)\n        .align(align);\n  };\n\n  return rescale();\n}\n\nfunction pointish(scale) {\n  var copy = scale.copy;\n\n  scale.padding = scale.paddingOuter;\n  delete scale.paddingInner;\n  delete scale.paddingOuter;\n\n  scale.copy = function() {\n    return pointish(copy());\n  };\n\n  return scale;\n}\n\nexport function point() {\n  return pointish(band().paddingInner(1));\n}\n","export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n","import define, {extend} from \"./define\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex3 = /^#([0-9a-f]{3})$/,\n    reHex6 = /^#([0-9a-f]{6})$/,\n    reRgbInteger = new RegExp(\"^rgb\\\\(\" + [reI, reI, reI] + \"\\\\)$\"),\n    reRgbPercent = new RegExp(\"^rgb\\\\(\" + [reP, reP, reP] + \"\\\\)$\"),\n    reRgbaInteger = new RegExp(\"^rgba\\\\(\" + [reI, reI, reI, reN] + \"\\\\)$\"),\n    reRgbaPercent = new RegExp(\"^rgba\\\\(\" + [reP, reP, reP, reN] + \"\\\\)$\"),\n    reHslPercent = new RegExp(\"^hsl\\\\(\" + [reN, reP, reP] + \"\\\\)$\"),\n    reHslaPercent = new RegExp(\"^hsla\\\\(\" + [reN, reP, reP, reN] + \"\\\\)$\");\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  displayable: function() {\n    return this.rgb().displayable();\n  },\n  toString: function() {\n    return this.rgb() + \"\";\n  }\n});\n\nexport default function color(format) {\n  var m;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex3.exec(format)) ? (m = parseInt(m[1], 16), new Rgb((m >> 8 & 0xf) | (m >> 4 & 0x0f0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1)) // #f00\n      : (m = reHex6.exec(format)) ? rgbn(parseInt(m[1], 16)) // #ff0000\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format])\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb: function() {\n    return this;\n  },\n  displayable: function() {\n    return (0 <= this.r && this.r <= 255)\n        && (0 <= this.g && this.g <= 255)\n        && (0 <= this.b && this.b <= 255)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  toString: function() {\n    var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n    return (a === 1 ? \"rgb(\" : \"rgba(\")\n        + Math.max(0, Math.min(255, Math.round(this.r) || 0)) + \", \"\n        + Math.max(0, Math.min(255, Math.round(this.g) || 0)) + \", \"\n        + Math.max(0, Math.min(255, Math.round(this.b) || 0))\n        + (a === 1 ? \")\" : \", \" + a + \")\");\n  }\n}));\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  displayable: function() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  }\n}));\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n","import define, {extend} from \"./define\";\nimport {Color, rgbConvert, Rgb} from \"./color\";\nimport {deg2rad, rad2deg} from \"./math\";\n\nvar Kn = 18,\n    Xn = 0.950470, // D65 standard referent\n    Yn = 1,\n    Zn = 1.088830,\n    t0 = 4 / 29,\n    t1 = 6 / 29,\n    t2 = 3 * t1 * t1,\n    t3 = t1 * t1 * t1;\n\nfunction labConvert(o) {\n  if (o instanceof Lab) return new Lab(o.l, o.a, o.b, o.opacity);\n  if (o instanceof Hcl) {\n    var h = o.h * deg2rad;\n    return new Lab(o.l, Math.cos(h) * o.c, Math.sin(h) * o.c, o.opacity);\n  }\n  if (!(o instanceof Rgb)) o = rgbConvert(o);\n  var b = rgb2xyz(o.r),\n      a = rgb2xyz(o.g),\n      l = rgb2xyz(o.b),\n      x = xyz2lab((0.4124564 * b + 0.3575761 * a + 0.1804375 * l) / Xn),\n      y = xyz2lab((0.2126729 * b + 0.7151522 * a + 0.0721750 * l) / Yn),\n      z = xyz2lab((0.0193339 * b + 0.1191920 * a + 0.9503041 * l) / Zn);\n  return new Lab(116 * y - 16, 500 * (x - y), 200 * (y - z), o.opacity);\n}\n\nexport default function lab(l, a, b, opacity) {\n  return arguments.length === 1 ? labConvert(l) : new Lab(l, a, b, opacity == null ? 1 : opacity);\n}\n\nexport function Lab(l, a, b, opacity) {\n  this.l = +l;\n  this.a = +a;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Lab, lab, extend(Color, {\n  brighter: function(k) {\n    return new Lab(this.l + Kn * (k == null ? 1 : k), this.a, this.b, this.opacity);\n  },\n  darker: function(k) {\n    return new Lab(this.l - Kn * (k == null ? 1 : k), this.a, this.b, this.opacity);\n  },\n  rgb: function() {\n    var y = (this.l + 16) / 116,\n        x = isNaN(this.a) ? y : y + this.a / 500,\n        z = isNaN(this.b) ? y : y - this.b / 200;\n    y = Yn * lab2xyz(y);\n    x = Xn * lab2xyz(x);\n    z = Zn * lab2xyz(z);\n    return new Rgb(\n      xyz2rgb( 3.2404542 * x - 1.5371385 * y - 0.4985314 * z), // D65 -> sRGB\n      xyz2rgb(-0.9692660 * x + 1.8760108 * y + 0.0415560 * z),\n      xyz2rgb( 0.0556434 * x - 0.2040259 * y + 1.0572252 * z),\n      this.opacity\n    );\n  }\n}));\n\nfunction xyz2lab(t) {\n  return t > t3 ? Math.pow(t, 1 / 3) : t / t2 + t0;\n}\n\nfunction lab2xyz(t) {\n  return t > t1 ? t * t * t : t2 * (t - t0);\n}\n\nfunction xyz2rgb(x) {\n  return 255 * (x <= 0.0031308 ? 12.92 * x : 1.055 * Math.pow(x, 1 / 2.4) - 0.055);\n}\n\nfunction rgb2xyz(x) {\n  return (x /= 255) <= 0.04045 ? x / 12.92 : Math.pow((x + 0.055) / 1.055, 2.4);\n}\n\nfunction hclConvert(o) {\n  if (o instanceof Hcl) return new Hcl(o.h, o.c, o.l, o.opacity);\n  if (!(o instanceof Lab)) o = labConvert(o);\n  var h = Math.atan2(o.b, o.a) * rad2deg;\n  return new Hcl(h < 0 ? h + 360 : h, Math.sqrt(o.a * o.a + o.b * o.b), o.l, o.opacity);\n}\n\nexport function hcl(h, c, l, opacity) {\n  return arguments.length === 1 ? hclConvert(h) : new Hcl(h, c, l, opacity == null ? 1 : opacity);\n}\n\nexport function Hcl(h, c, l, opacity) {\n  this.h = +h;\n  this.c = +c;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hcl, hcl, extend(Color, {\n  brighter: function(k) {\n    return new Hcl(this.h, this.c, this.l + Kn * (k == null ? 1 : k), this.opacity);\n  },\n  darker: function(k) {\n    return new Hcl(this.h, this.c, this.l - Kn * (k == null ? 1 : k), this.opacity);\n  },\n  rgb: function() {\n    return labConvert(this).rgb();\n  }\n}));\n","import define, {extend} from \"./define\";\nimport {Color, rgbConvert, Rgb, darker, brighter} from \"./color\";\nimport {deg2rad, rad2deg} from \"./math\";\n\nvar A = -0.14861,\n    B = +1.78277,\n    C = -0.29227,\n    D = -0.90649,\n    E = +1.97294,\n    ED = E * D,\n    EB = E * B,\n    BC_DA = B * C - D * A;\n\nfunction cubehelixConvert(o) {\n  if (o instanceof Cubehelix) return new Cubehelix(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Rgb)) o = rgbConvert(o);\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      l = (BC_DA * b + ED * r - EB * g) / (BC_DA + ED - EB),\n      bl = b - l,\n      k = (E * (g - l) - C * bl) / D,\n      s = Math.sqrt(k * k + bl * bl) / (E * l * (1 - l)), // NaN if l=0 or l=1\n      h = s ? Math.atan2(k, bl) * rad2deg - 120 : NaN;\n  return new Cubehelix(h < 0 ? h + 360 : h, s, l, o.opacity);\n}\n\nexport default function cubehelix(h, s, l, opacity) {\n  return arguments.length === 1 ? cubehelixConvert(h) : new Cubehelix(h, s, l, opacity == null ? 1 : opacity);\n}\n\nexport function Cubehelix(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Cubehelix, cubehelix, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Cubehelix(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Cubehelix(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function() {\n    var h = isNaN(this.h) ? 0 : (this.h + 120) * deg2rad,\n        l = +this.l,\n        a = isNaN(this.s) ? 0 : this.s * l * (1 - l),\n        cosh = Math.cos(h),\n        sinh = Math.sin(h);\n    return new Rgb(\n      255 * (l + a * (A * cosh + B * sinh)),\n      255 * (l + a * (C * cosh + D * sinh)),\n      255 * (l + a * (E * cosh)),\n      this.opacity\n    );\n  }\n}));\n","import constant from \"./constant\";\n\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nexport function hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n}\n\nexport function gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\n\nexport default function nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}\n","import {cubehelix as colorCubehelix} from \"d3-color\";\nimport color, {hue} from \"./color\";\n\nfunction cubehelix(hue) {\n  return (function cubehelixGamma(y) {\n    y = +y;\n\n    function cubehelix(start, end) {\n      var h = hue((start = colorCubehelix(start)).h, (end = colorCubehelix(end)).h),\n          s = color(start.s, end.s),\n          l = color(start.l, end.l),\n          opacity = color(start.opacity, end.opacity);\n      return function(t) {\n        start.h = h(t);\n        start.s = s(t);\n        start.l = l(Math.pow(t, y));\n        start.opacity = opacity(t);\n        return start + \"\";\n      };\n    }\n\n    cubehelix.gamma = cubehelixGamma;\n\n    return cubehelix;\n  })(1);\n}\n\nexport default cubehelix(hue);\nexport var cubehelixLong = cubehelix(color);\n","import {bisect} from \"d3-array\";\nimport {interpolate as interpolateValue, interpolateRound} from \"d3-interpolate\";\nimport {map, slice} from \"./array\";\nimport constant from \"./constant\";\nimport number from \"./number\";\n\nvar unit = [0, 1];\n\nexport function deinterpolateLinear(a, b) {\n  return (b -= (a = +a))\n      ? function(x) { return (x - a) / b; }\n      : constant(b);\n}\n\nfunction deinterpolateClamp(deinterpolate) {\n  return function(a, b) {\n    var d = deinterpolate(a = +a, b = +b);\n    return function(x) { return x <= a ? 0 : x >= b ? 1 : d(x); };\n  };\n}\n\nfunction reinterpolateClamp(reinterpolate) {\n  return function(a, b) {\n    var r = reinterpolate(a = +a, b = +b);\n    return function(t) { return t <= 0 ? a : t >= 1 ? b : r(t); };\n  };\n}\n\nfunction bimap(domain, range, deinterpolate, reinterpolate) {\n  var d0 = domain[0], d1 = domain[1], r0 = range[0], r1 = range[1];\n  if (d1 < d0) d0 = deinterpolate(d1, d0), r0 = reinterpolate(r1, r0);\n  else d0 = deinterpolate(d0, d1), r0 = reinterpolate(r0, r1);\n  return function(x) { return r0(d0(x)); };\n}\n\nfunction polymap(domain, range, deinterpolate, reinterpolate) {\n  var j = Math.min(domain.length, range.length) - 1,\n      d = new Array(j),\n      r = new Array(j),\n      i = -1;\n\n  // Reverse descending domains.\n  if (domain[j] < domain[0]) {\n    domain = domain.slice().reverse();\n    range = range.slice().reverse();\n  }\n\n  while (++i < j) {\n    d[i] = deinterpolate(domain[i], domain[i + 1]);\n    r[i] = reinterpolate(range[i], range[i + 1]);\n  }\n\n  return function(x) {\n    var i = bisect(domain, x, 1, j) - 1;\n    return r[i](d[i](x));\n  };\n}\n\nexport function copy(source, target) {\n  return target\n      .domain(source.domain())\n      .range(source.range())\n      .interpolate(source.interpolate())\n      .clamp(source.clamp());\n}\n\n// deinterpolate(a, b)(x) takes a domain value x in [a,b] and returns the corresponding parameter t in [0,1].\n// reinterpolate(a, b)(t) takes a parameter t in [0,1] and returns the corresponding domain value x in [a,b].\nexport default function continuous(deinterpolate, reinterpolate) {\n  var domain = unit,\n      range = unit,\n      interpolate = interpolateValue,\n      clamp = false,\n      piecewise,\n      output,\n      input;\n\n  function rescale() {\n    piecewise = Math.min(domain.length, range.length) > 2 ? polymap : bimap;\n    output = input = null;\n    return scale;\n  }\n\n  function scale(x) {\n    return (output || (output = piecewise(domain, range, clamp ? deinterpolateClamp(deinterpolate) : deinterpolate, interpolate)))(+x);\n  }\n\n  scale.invert = function(y) {\n    return (input || (input = piecewise(range, domain, deinterpolateLinear, clamp ? reinterpolateClamp(reinterpolate) : reinterpolate)))(+y);\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain = map.call(_, number), rescale()) : domain.slice();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = slice.call(_), rescale()) : range.slice();\n  };\n\n  scale.rangeRound = function(_) {\n    return range = slice.call(_), interpolate = interpolateRound, rescale();\n  };\n\n  scale.clamp = function(_) {\n    return arguments.length ? (clamp = !!_, rescale()) : clamp;\n  };\n\n  scale.interpolate = function(_) {\n    return arguments.length ? (interpolate = _, rescale()) : interpolate;\n  };\n\n  return rescale();\n}\n","import {ticks, tickIncrement} from \"d3-array\";\nimport {interpolateNumber as reinterpolate} from \"d3-interpolate\";\nimport {default as continuous, copy, deinterpolateLinear as deinterpolate} from \"./continuous\";\nimport tickFormat from \"./tickFormat\";\n\nexport function linearish(scale) {\n  var domain = scale.domain;\n\n  scale.ticks = function(count) {\n    var d = domain();\n    return ticks(d[0], d[d.length - 1], count == null ? 10 : count);\n  };\n\n  scale.tickFormat = function(count, specifier) {\n    return tickFormat(domain(), count, specifier);\n  };\n\n  scale.nice = function(count) {\n    if (count == null) count = 10;\n\n    var d = domain(),\n        i0 = 0,\n        i1 = d.length - 1,\n        start = d[i0],\n        stop = d[i1],\n        step;\n\n    if (stop < start) {\n      step = start, start = stop, stop = step;\n      step = i0, i0 = i1, i1 = step;\n    }\n\n    step = tickIncrement(start, stop, count);\n\n    if (step > 0) {\n      start = Math.floor(start / step) * step;\n      stop = Math.ceil(stop / step) * step;\n      step = tickIncrement(start, stop, count);\n    } else if (step < 0) {\n      start = Math.ceil(start * step) / step;\n      stop = Math.floor(stop * step) / step;\n      step = tickIncrement(start, stop, count);\n    }\n\n    if (step > 0) {\n      d[i0] = Math.floor(start / step) * step;\n      d[i1] = Math.ceil(stop / step) * step;\n      domain(d);\n    } else if (step < 0) {\n      d[i0] = Math.ceil(start * step) / step;\n      d[i1] = Math.floor(stop * step) / step;\n      domain(d);\n    }\n\n    return scale;\n  };\n\n  return scale;\n}\n\nexport default function linear() {\n  var scale = continuous(deinterpolate, reinterpolate);\n\n  scale.copy = function() {\n    return copy(scale, linear());\n  };\n\n  return linearish(scale);\n}\n","import {bisect} from \"d3-array\";\nimport {slice} from \"./array\";\n\nexport default function threshold() {\n  var domain = [0.5],\n      range = [0, 1],\n      n = 1;\n\n  function scale(x) {\n    if (x <= x) return range[bisect(domain, x, 0, n)];\n  }\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain = slice.call(_), n = Math.min(domain.length, range.length - 1), scale) : domain.slice();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = slice.call(_), n = Math.min(domain.length, range.length - 1), scale) : range.slice();\n  };\n\n  scale.invertExtent = function(y) {\n    var i = range.indexOf(y);\n    return [domain[i - 1], domain[i]];\n  };\n\n  scale.copy = function() {\n    return threshold()\n        .domain(domain)\n        .range(range);\n  };\n\n  return scale;\n}\n","import { notNumber } from '../../utils/is-number';\n\nfunction applyFormat(formatter) {\n  return typeof formatter === 'undefined' ? t => t : t => formatter(t);\n}\n\nfunction clamp(val) {\n  return Math.max(0, Math.min(1, val));\n}\n\nfunction isObject(obj) {\n  return typeof obj === 'object';\n}\n\nfunction minorTicksGenerator(count, start, end) {\n  const r = Math.abs(start - end);\n  const interval = r / (count + 1);\n  const ticks = [];\n  for (let i = 1; i <= count; i++) {\n    const v = i * interval;\n    ticks.push(start < end ? start + v : start - v);\n  }\n  return ticks;\n}\n\nfunction appendMinorTicks(majorTicks, minorCount, scale) {\n  if (majorTicks.length === 1) { return majorTicks; }\n\n  const ticks = majorTicks.concat([]);\n\n  for (let i = 0; i < majorTicks.length; i++) {\n    let start = majorTicks[i];\n    let end = majorTicks[i + 1];\n\n    if (i === 0 && start !== scale.start()) { // Before and after first major tick\n      ticks.push(...minorTicksGenerator(minorCount, start, end));\n      start -= end - start;\n      end = majorTicks[i];\n      ticks.push(...minorTicksGenerator(minorCount, start, end));\n    } else if (i === majorTicks.length - 1 && end !== scale.end()) { // After last major tick\n      end = start + (start - majorTicks[i - 1]);\n      ticks.push(...minorTicksGenerator(minorCount, start, end));\n    } else {\n      ticks.push(...minorTicksGenerator(minorCount, start, end));\n    }\n  }\n\n  return ticks.filter(t => t >= scale.min() && t <= scale.max());\n}\n\n/**\n* Generate ticks based on a distance, for each 100th unit, one additional tick may be added\n* @private\n* @param  {Number} distance       Distance between each tick\n* @param  {Number} scale         The scale instance\n* @param  {Number} [minorCount=0]     Number of tick added between each distance\n* @param  {Number} [unitDivider=100]   Number to divide distance with\n* @return {Array}               Array of ticks\n*/\nexport function looseDistanceBasedGenerator({ distance, scale, minorCount = 0, unitDivider = 100, formatter = undefined }) {\n  const step = !notNumber(unitDivider) && !notNumber(distance) ? Math.max(distance / unitDivider, 2) : 2;\n  const count = Math.min(1000, Math.round(step)); // safe guard against huge numbers\n  let majorTicks = scale.ticks(count);\n  if (majorTicks.length <= 1) {\n    majorTicks = scale.ticks(count + 1);\n  }\n\n  const ticks = minorCount > 0 ? appendMinorTicks(majorTicks, minorCount, scale) : majorTicks;\n  ticks.sort((a, b) => a - b);\n\n  const ticksFormatted = ticks.map(applyFormat(formatter));\n\n  return ticks.map((tick, i) => {\n    const position = scale(tick);\n    return {\n      position,\n      start: position,\n      end: position,\n      label: ticksFormatted[i],\n      value: tick,\n      isMinor: majorTicks.indexOf(tick) === -1\n    };\n  });\n}\n\n/**\n* Generate ticks based on a distance, for each 100th unit, one additional tick may be added.\n* Will attempt to round the bounds of domain to even values and generate ticks hitting the domain bounds.\n* @private\n* @param  {Number} distance       Distance between each tick\n* @param  {Number} scale         The scale instance\n* @param  {Number} [minorCount=0]     Number of tick added between each distance\n* @param  {Number} [unitDivider=100]   Number to divide distance with\n* @return {Array}               Array of ticks\n*/\nexport function tightDistanceBasedGenerator({ distance, scale, minorCount = 0, unitDivider = 100, formatter = undefined }) {\n  const step = !notNumber(unitDivider) && !notNumber(distance) ? Math.max(distance / unitDivider, 2) : 2;\n  const count = Math.min(1000, Math.round(step)); // safe guard against huge numbers\n  const n = count > 10 ? 10 : count;\n  scale.nice(n);\n\n  const majorTicks = scale.ticks(count);\n  const ticks = minorCount > 0 ? appendMinorTicks(majorTicks, minorCount, scale) : majorTicks;\n  ticks.sort((a, b) => a - b);\n\n  const ticksFormatted = ticks.map(applyFormat(formatter));\n\n  return ticks.map((tick, i) => {\n    const position = scale(tick);\n    return {\n      position,\n      start: position,\n      end: position,\n      label: ticksFormatted[i],\n      value: tick,\n      isMinor: majorTicks.indexOf(tick) === -1\n    };\n  });\n}\n\nfunction ticksByCount({ count, minorCount, scale, formatter }) {\n  return scale\n    .ticks(((count - 1) * minorCount) + count)\n    .map((tick, i) => {\n      const position = scale(tick);\n      return {\n        position,\n        start: position,\n        end: position,\n        label: formatter(tick),\n        isMinor: i % (minorCount + 1) !== 0,\n        value: tick\n      };\n    });\n}\n\nfunction ticksByValue({ values, scale, formatter = v => v }) {\n  return values\n    .sort((a, b) => (isObject(a) ? a.value : a) - (isObject(b) ? b.value : b))\n    .filter((v, i, ary) => {\n      const val = isObject(v) ? v.value : v;\n      return val <= scale.max() && val >= scale.min() && ary.indexOf(v) === i;\n    })\n    .map((v) => {\n      const value = isObject(v) ? v.value : v;\n      const position = scale(value);\n      return {\n        position,\n        value,\n        label: isObject(v) && typeof v.label !== 'undefined' ? v.label : formatter(value),\n        isMinor: false,\n        start: isObject(v) && !isNaN(v.start) ? clamp(scale(v.start)) : position, // TODOHandle end < start?\n        end: isObject(v) && !isNaN(v.end) ? clamp(scale(v.end)) : position // TODO Handle start > end?\n      };\n    });\n}\n\nfunction forceTicksAtBounds(ticks, scale, formatter) {\n  const ticksP = ticks.map(t => t.position);\n  const range = scale.range();\n\n  if (ticksP.indexOf(range[0]) === -1) {\n    ticks.splice(0, 0, {\n      position: range[0],\n      start: range[0],\n      end: range[0],\n      label: formatter(scale.start()),\n      isMinor: false,\n      value: scale.start()\n    });\n  } else if (ticks[0] && ticks[0].isMinor) {\n    ticks[0].isMinor = false; // Convert to major tick\n  }\n\n  const lastTick = ticks[ticks.length - 1];\n  if (ticksP.indexOf(range[1]) === -1) {\n    ticks.push({\n      position: range[1],\n      start: range[1],\n      end: range[1],\n      label: formatter(scale.end()),\n      isMinor: false,\n      value: scale.end()\n    });\n  } else if (lastTick && lastTick.isMinor) {\n    lastTick.isMinor = false; // Convert to major tick\n  }\n}\n\nexport function generateContinuousTicks({ settings, scale, distance, formatter }) {\n  let ticks;\n  const minorCount = settings.minorTicks && !notNumber(settings.minorTicks.count) ? Math.min(100, settings.minorTicks.count) : 0;\n\n  if (Array.isArray(settings.ticks.values)) {\n    const values = settings.ticks.values.filter(v => (typeof v === 'object' ? !notNumber(v.value) : !notNumber(v)));\n    ticks = ticksByValue({ values, scale: scale.copy(), formatter });\n  } else if (!notNumber(settings.ticks.count)) {\n    const count = Math.min(1000, settings.ticks.count);\n    ticks = ticksByCount({ count, minorCount, scale: scale.copy(), formatter });\n  } else {\n    const tickGen = settings.ticks.tight ? tightDistanceBasedGenerator : looseDistanceBasedGenerator;\n    ticks = tickGen({\n      distance,\n      minorCount,\n      unitDivider: settings.ticks.distance,\n      scale,\n      formatter\n    });\n\n    if (settings.ticks.forceBounds) {\n      forceTicksAtBounds(ticks, scale, formatter);\n    }\n  }\n\n  return ticks;\n}\n\nexport function generateDiscreteTicks({ scale }) {\n  const domain = scale.domain();\n  const values = domain;\n  const dataItems = scale.data().items;\n  const labels = scale.labels ? scale.labels() : values;\n  const bandwidth = scale.bandwidth();\n\n  return values.map((d, i) => {\n    const start = scale(d);\n    return {\n      position: start + (bandwidth / 2),\n      label: `${labels[i]}`,\n      data: dataItems ? dataItems[i] : undefined,\n      start,\n      end: start + bandwidth\n    };\n  });\n}\n","export default function resolveSettings(settings = {}, defaultSettings = {}, context = {}) {\n  const stngs = {};\n\n  Object.keys(defaultSettings).forEach((key) => {\n    const type = typeof settings[key];\n\n    if (type === 'function') {\n      stngs[key] = settings[key](context);\n    } else if (type === 'undefined') {\n      stngs[key] = defaultSettings[key];\n    } else {\n      stngs[key] = settings[key];\n    }\n  });\n\n  return stngs;\n}\n","import { scaleLinear as d3ScaleLinear } from 'd3-scale';\nimport extend from 'extend';\n\nimport { notNumber } from '../utils/is-number';\nimport { generateContinuousTicks } from './ticks/tick-generators';\nimport resolveSettings from './settings-resolver';\n\nexport const DEFAULT_SETTINGS = {\n  min: NaN,\n  max: NaN,\n  expand: NaN,\n  include: [],\n  invert: false\n};\n\nexport const DEFAULT_TICKS_SETTINGS = {\n  tight: false,\n  forceBounds: false,\n  values: undefined,\n  count: NaN,\n  distance: 100\n};\n\nexport const DEFAULT_MINORTICKS_SETTINGS = {\n  count: NaN\n};\n\n/**\n * @typedef {object} scale--linear\n * @property {string} [type='linear']\n * @property {number} [expand] - Expand the output range\n * @property {boolean} [invert=false] - Invert the output range\n * @property {number[]} [include] - Include specified numbers in the output range\n * @property {object} [ticks]\n * @property {boolean} [ticks.tight = false]\n * @property {boolean} [ticks.forceBounds = false]\n * @property {number} [ticks.distance = 100]  - Approximate distance between each tick\n * @property {number[]|object[]} [ticks.values] - If set, ticks are no longer generated but instead equal to this set\n * @property {number} [ticks.count]\n * @property {object} [minorTicks]\n * @property {number} [minorTicks.count = 3]\n * @property {number} [min] - Set an explicit minimum value\n * @property {number} [max] - Set an explicit maximum value\n */\n\nfunction getMinMax(settings, fields) {\n  const min = +settings.min;\n  const max = +settings.max;\n  let fieldMin = 0;\n  let fieldMax = 1;\n  if (fields && fields[0]) {\n    const minValues = fields.map(m => m.min()).filter(v => !isNaN(v));\n    const maxValues = fields.map(m => m.max()).filter(v => !isNaN(v));\n    fieldMin = minValues.length ? Math.min(...minValues) : Number.NaN;\n    fieldMax = maxValues.length ? Math.max(...maxValues) : Number.NaN;\n\n    if (isNaN(fieldMin) || isNaN(fieldMax)) {\n      fieldMin = -1;\n      fieldMax = 1;\n    } else if (fieldMin === fieldMax && fieldMin === 0) {\n      fieldMin = -1;\n      fieldMax = 1;\n    } else if (fieldMin === fieldMax && fieldMin) {\n      fieldMin -= Math.abs(fieldMin * 0.1);\n      fieldMax += Math.abs(fieldMax * 0.1);\n    } else if (!isNaN(settings.expand)) {\n      const range = fieldMax - fieldMin;\n      fieldMin -= range * settings.expand;\n      fieldMax += range * settings.expand;\n    }\n\n    if (Array.isArray(settings.include)) {\n      const i = settings.include.filter(n => !isNaN(n));\n      fieldMin = Math.min(...i, fieldMin);\n      fieldMax = Math.max(...i, fieldMax);\n    }\n  }\n\n  return {\n    mini: !isNaN(min) ? min : fieldMin,\n    maxi: !isNaN(max) ? max : fieldMax\n  };\n}\n\nfunction initNormScale(normScale, scale) {\n  if (normScale.instance) {\n    return;\n  }\n  normScale.instance = scale.copy();\n  normScale.instance.domain([scale.start(), scale.end()]);\n  normScale.instance.clamp(true);\n  normScale.instance.range(normScale.invert ? [1, 0] : [0, 1]);\n}\n /**\n * @alias scaleLinear\n * @private\n * @param { object } settings\n * @param { field[] } [fields]\n * @return { linear }\n */\n\nexport default function scaleLinear(settings = {}, data = {}, resources = {}) {\n  const d3Scale = d3ScaleLinear();\n  const normScale = { instance: null, invert: false };\n  const ctx = { data, resources };\n  const stgns = resolveSettings(settings, DEFAULT_SETTINGS, ctx);\n  stgns.ticks = resolveSettings(settings.ticks, DEFAULT_TICKS_SETTINGS, ctx);\n  stgns.minorTicks = resolveSettings(settings.minorTicks, DEFAULT_MINORTICKS_SETTINGS, ctx);\n  let tickCache;\n\n  /**\n   * @alias linear\n   * @private\n   * @param { Object } value\n   * @return { number }\n   */\n  function fn(v) {\n    if (notNumber(v)) {\n      return NaN;\n    }\n    return d3Scale(v);\n  }\n\n  fn.data = () => data;\n\n  /**\n   * {@link https://github.com/d3/d3-scale#continuous_invert }\n   * @param { number } value The inverted value\n   * @return { number } The inverted scaled value\n   */\n  fn.invert = function invert(value) {\n    return d3Scale.invert(value);\n  };\n\n  /**\n   * {@link https://github.com/d3/d3-scale#continuous_rangeRound }\n   * @param { number[] } values Range values\n   * @return { linear } The instance this method was called on\n   */\n  fn.rangeRound = function rangeRound(values) {\n    d3Scale.rangeRound(values);\n    return fn;\n  };\n\n  /**\n   * {@link https://github.com/d3/d3-scale#continuous_clamp }\n   * @param { boolean } [ value=true ] TRUE if clamping should be enabled\n   * @return { linear } The instance this method was called on\n   */\n  fn.clamp = function clamp(value = true) {\n    d3Scale.clamp(value);\n    return fn;\n  };\n\n  /**\n   * Get cached ticks (if any)\n   * @return { number | undefined }\n   */\n  fn.cachedTicks = function fnCachedTicks() {\n    return tickCache;\n  };\n\n  /**\n   * Clear the tick cache\n   * @return {number | undefined}\n   */\n  fn.clearTicksCache = function fnClearTicks() {\n    tickCache = undefined;\n    return this;\n  };\n\n  /**\n   * {@link https://github.com/d3/d3-scale#continuous_ticks }\n   * @param { Object } input Number of ticks to generate or an object passed to tick generator\n   * @return { number[] | Object } Array of ticks or any type the custom tick generator returns\n   */\n  fn.ticks = function ticks(input) {\n    if (input !== null && typeof input === 'object') {\n      input.settings = input.settings || {};\n      // TODO Discontinue support for custom ticks settings as argument\n      input.settings = extend(true, {}, stgns, input.settings);\n      input.scale = fn;\n      tickCache = generateContinuousTicks(input);\n      return tickCache;\n    }\n\n    tickCache = d3Scale.ticks(input);\n    return tickCache;\n  };\n\n  /**\n   * {@link https://github.com/d3/d3-scale#continuous_nice }\n   * @param { number } count\n   * @return { linear } The instance this method was called on\n   */\n  fn.nice = function nice(count) {\n    d3Scale.nice(count);\n\n    return fn;\n  };\n\n  // TODO Support this?\n  fn.tickFormat = function tickFormat(count, format) {\n    return d3Scale.tickFormat(count, format);\n  };\n\n  // TODO Support this?\n  fn.interpolate = function interpolate(func) {\n    d3Scale.interpolate(func);\n    return fn;\n  };\n\n  /**\n   * @param { number[] } [values] Set or Get domain values\n   * @return { linear | Number[] } The instance this method was called on if a parameter is provided, otherwise the current domain is returned\n   */\n  fn.domain = function domain(values) {\n    if (arguments.length) {\n      d3Scale.domain(values);\n      if (normScale.instance) {\n        normScale.instance.domain([fn.start(), fn.end()]);\n      }\n      return fn;\n    }\n    return d3Scale.domain();\n  };\n\n  /**\n   * @param { number[] } [values] Set or Get range values\n   * @return { linear | number[] } The instance this method was called on if a parameter is provided, otherwise the current range is returned\n   */\n  fn.range = function range(values) {\n    if (arguments.length) {\n      d3Scale.range(values);\n\n      return fn;\n    }\n    return d3Scale.range();\n  };\n\n  /**\n   * Get the first value of the domain\n   * @return { number }\n   */\n  fn.start = function start() {\n    return fn.domain()[0];\n  };\n\n  /**\n   * Get the last value of the domain\n   * @return { number }\n   */\n  fn.end = function end() {\n    return fn.domain()[this.domain().length - 1];\n  };\n\n  /**\n   * Get the minimum value of the domain\n   * @return { number }\n   */\n  fn.min = function min() {\n    return Math.min(this.start(), this.end());\n  };\n\n  /**\n   * Get the maximum value of the domain\n   * @return { number }\n   */\n  fn.max = function max() {\n    return Math.max(this.start(), this.end());\n  };\n\n  /**\n   * Divides the domain and range into uniform segments, based on start and end value\n   * @param  { number } segments The number of segments\n   * @return { function } The instance this method was called on\n   * @example\n   * let s = linear();\n   * s.domain([0, 10]);\n   * s.range([0, 1]);\n   * s.classify( 2 );\n   * s.domain(); // [10, 5, 5, 0]\n   * s.range(); // [0.75, 0.75, 0.25, 0.25]\n   */\n  fn.classify = function classify(segments) {\n    let valueRange = (fn.start() - fn.end()) / segments,\n      domain = [fn.end()],\n      range = [],\n      samplePos = valueRange / 2;\n\n    for (let i = 0; i < segments; i++) {\n      let lastVal = domain[domain.length - 1] || 0,\n        calIntervalPos = lastVal + valueRange,\n        calSamplePos = lastVal + samplePos,\n        sampleColValue = fn(calSamplePos);\n\n      domain.push(...[calIntervalPos, calIntervalPos]);\n      range.push(...[sampleColValue, sampleColValue]);\n    }\n    domain.pop();\n    fn.domain(domain);\n    fn.range(range);\n\n    return fn;\n  };\n\n  fn.copy = function copy() {\n    const cop = scaleLinear(settings, data, resources);\n    cop.domain(fn.domain());\n    cop.range(fn.range());\n    cop.clamp(d3Scale.clamp());\n    return cop;\n  };\n\n  /**\n   * @param {number} d - A domain value\n   * @return {number} A normalized range output given in range 0-1\n   * @example\n   * const scale = scaleLinear().domain([0, 10]).range([0, 10000]);\n   * scale.norm(5); // Returns 0.5\n   * scale(5); // Returns 5000\n   *\n   * scale.domain([0, 2, 10]);\n   * scale.norm(5); // Returns 0.5\n   */\n  fn.norm = function norm(d) {\n    initNormScale(normScale, fn);\n\n    return normScale.instance(d);\n  };\n\n  /**\n   * @param {number} d - A normalized value in range 0-1\n   * @return {number} A corresponding domain value\n   * @example\n   * const scale = scaleLinear().domain([0, 10]).range([0, 10000]);\n   * scale.normInvert(0.5); // Returns 5\n   * scale.invert(5000); // Returns 5\n   */\n  fn.normInvert = function norm(t) {\n    initNormScale(normScale, fn);\n\n    return normScale.instance.invert(t);\n  };\n\n  const { mini, maxi } = getMinMax(stgns, data ? data.fields : []);\n\n  fn.domain([mini, maxi]);\n  fn.range(stgns.invert ? [1, 0] : [0, 1]);\n  normScale.invert = stgns.invert;\n\n  return fn;\n}\n","import extend from 'extend';\nimport { scaleBand as d3ScaleBand } from 'd3-scale';\nimport { generateDiscreteTicks } from './ticks/tick-generators';\nimport resolveSettings from './settings-resolver';\n\nexport const DEFAULT_SETTINGS = {\n  padding: 0,\n  paddingInner: NaN,\n  paddingOuter: NaN,\n  align: 0.5,\n  invert: false,\n  maxPxStep: NaN\n};\n\n/**\n * @typedef {object} scale--band\n * @property {string} [type='band']\n * @property {number} [padding] - {@link https://github.com/d3/d3-scale#band_padding}\n * @property {number} [paddingInner] - {@link https://github.com/d3/d3-scale#band_paddingInner}\n * @property {number} [paddingOuter] - {@link https://github.com/d3/d3-scale#band_paddingOuter}\n * @property {number} [align] - {@link https://github.com/d3/d3-scale#band_align}\n * @property {boolean} [invert=false] - Invert the output range\n * @property {number} [maxPxStep] - Explicitly limit the bandwidth to a pixel value\n * @property {function} [label] - Callback label function, applied on each datum\n * @property {function} [value] - Callback value function, applied on each datum\n */\n\n /**\n * @alias scaleBand\n * @memberof picasso\n * @private\n * @param { Object } settings\n * @param { fields[] } [fields]\n * @param { dataset } [dataset]\n * @return { band }\n */\n\nexport default function scaleBand(settings = {}, data = {}, resources = {}) {\n  /**\n   * An augmented {@link https://github.com/d3/d3-scale#_band|d3 band scale}\n   * @alias band\n   * @private\n   * @kind function\n   * @param { Object } value\n   * @return { number }\n   */\n  const band = d3ScaleBand();\n  const ctx = { data, resources };\n  const stgns = resolveSettings(settings, DEFAULT_SETTINGS, ctx);\n  const items = data.items || [];\n  const domainToDataMapping = {};\n  const values = [];\n  const labels = [];\n\n  // I would like to define this outside of scaleBand but it cause the documentation to be in the wrong order\n  function augmentScaleBand(band, settings) { // eslint-disable-line no-shadow\n    band.data = () => data;\n\n    band.datum = domainValue => items[domainToDataMapping[domainValue]];\n\n    /**\n     * Get the first value of the domain\n     * @return { number }\n     */\n    band.start = function start() {\n      return band.domain()[0];\n    };\n\n    /**\n     * Get the last value of the domain\n     * @return { number }\n     */\n    band.end = function end() {\n      return band.domain()[band.domain().length - 1];\n    };\n\n    band.labels = () => labels;\n\n    /**\n     * Generate discrete ticks\n     * @return {Object[]} Array of ticks\n     */\n    band.ticks = function ticks(input = {}) {\n      input.scale = band;\n      return generateDiscreteTicks(input, settings.trackBy || 'label');\n    };\n  }\n  augmentScaleBand(band, settings);\n\n  /**\n   * if required creates a new scale with a restricted range\n   * so that step size is at most maxPxStep\n   * otherwise it returns itself\n   * @param { number } size\n   * @return { band }\n   */\n  band.pxScale = function pxScale(size) {\n    const max = stgns.maxPxStep;\n    if (isNaN(max)) {\n      return band;\n    }\n    const n = band.domain().length;\n    const sizeRelativeToStep = Math.max(1, (n - band.paddingInner()) + (2 * band.paddingOuter()));\n\n    if (sizeRelativeToStep * max >= size) {\n      return band;\n    }\n\n    const newBand = band.copy();\n    newBand.type = band.type;\n    augmentScaleBand(newBand, settings);\n    const t = (sizeRelativeToStep * max) / size;\n    const offset = (1 - t) * band.align();\n    newBand.range(stgns.invert ? [t + offset, offset] : [offset, t + offset]);\n\n    return newBand;\n  };\n\n  const valueFn = typeof settings.value === 'function' ? settings.value : d => d.datum.value;\n  const labelFn = typeof settings.label === 'function' ? settings.label : d => d.datum.label;\n\n  for (let i = 0; i < items.length; i++) {\n    const arg = extend({ datum: items[i] }, ctx);\n    const v = valueFn(arg, i);\n    if (values.indexOf(v) === -1) {\n      values.push(v);\n      labels.push(labelFn(arg, i));\n      domainToDataMapping[v] = i;\n    }\n  }\n\n  band.domain(values);\n  band.range(stgns.invert ? [1, 0] : [0, 1]);\n\n  band.padding(isNaN(stgns.padding) ? 0 : stgns.padding);\n  if (!isNaN(stgns.paddingInner)) { band.paddingInner(stgns.paddingInner); }\n  if (!isNaN(stgns.paddingOuter)) { band.paddingOuter(stgns.paddingOuter); }\n  band.align(isNaN(stgns.align) ? 0.5 : stgns.align);\n\n  return band;\n}\n","import extend from 'extend';\nimport bandScale, { DEFAULT_SETTINGS } from './band';\nimport resolveSettings from './settings-resolver';\n\nconst DEFAULT_TICKS_SETTINGS = {\n  depth: 0\n};\n\nfunction keyGen(node, valueFn, ctx) {\n  return node.ancestors()\n    .map(a => valueFn(extend({ datum: a.data }, ctx)))\n    .reverse()\n    .slice(1) // Delete root node\n    .toString();\n}\n\nfunction flattenTree(rootNode, settings, ctx) {\n  const ticksDepth = settings.ticks.depth;\n  const valueFn = settings.value;\n  const labelFn = settings.label;\n  const values = [];\n  const labels = [];\n  const items = {};\n  const ticks = [];\n  let expando = 0;\n  if (!rootNode) {\n    return { values, labels, items, ticks };\n  }\n\n  rootNode.eachAfter((node) => {\n    if (node.depth > 0) {\n      const key = keyGen(node, valueFn, ctx);\n      const leaves = node.leaves() || [node]; // If leaf node returns itself\n      const value = valueFn(extend({ datum: node.data }, ctx));\n      const label = labelFn(extend({ datum: node.data }, ctx));\n      const isBranch = Array.isArray(node.children);\n\n      const item = {\n        key,\n        count: leaves.length,\n        value,\n        label,\n        leftEdge: keyGen(leaves[0], valueFn, ctx),\n        rightEdge: keyGen(leaves[Math.max(leaves.length - 1, 0)], valueFn, ctx),\n        node\n        // isTick: ticksDepth === null ? !isBranch : node.depth === ticksDepth\n      };\n\n      if (isBranch) {\n        values.push(`SPACER_${expando}_SPACER`);\n        expando++;\n      } else {\n        values.push(key);\n        labels.push(label);\n      }\n\n      if ((ticksDepth <= 0 && !isBranch) || node.depth === ticksDepth) {\n        ticks.push(item);\n      }\n\n      items[key] = item;\n    }\n  });\n\n  const spill = rootNode.height - 1;\n  if (spill > 0) {\n    values.splice(-spill);\n  }\n\n  return { values, labels, items, ticks };\n}\n\n/**\n * @typedef {object} scale-hBand.settings\n * @private\n * @property {number} [padding=0] - Exposes {@link https://github.com/d3/d3-scale#band_padding}\n * @property {boolean} [paddingOuter=0] - Exposes {@link https://github.com/d3/d3-scale#band_paddingOuter}\n * @property {number[]} [paddingInner=0] - Exposes {@link https://github.com/d3/d3-scale#band_paddingInner}\n * @property {object} [align=0.5] - Exposes {@link https://github.com/d3/d3-scale#band_align}\n * @property {boolean} [invert=false] - Invert the output range\n */\n\n /**\n  * Hierarchical band scale, that is an augmented band scale, that takes hierarchical data as input\n * @alias scaleHierarchicalBand\n * @private\n * @param { Object } settings\n * @param { fields[] } [fields]\n * @param { dataset } [dataset] - With a root property that is an instance of D3.js Hierarchy\n * @return { h-band }\n */\n\nexport default function scaleHierarchicalBand(settings = {}, data = {}, resources = {}) {\n  const ctx = { data, resources };\n  const stgns = resolveSettings(settings, DEFAULT_SETTINGS, ctx);\n  stgns.ticks = resolveSettings(settings.ticks, DEFAULT_TICKS_SETTINGS, ctx);\n  stgns.value = typeof settings.value === 'function' ? settings.value : d => d.datum.value;\n  stgns.label = typeof settings.label === 'function' ? settings.label : d => d.datum.value;\n\n  let bandInstance = bandScale(stgns);\n\n  const { values, labels, items, ticks } = flattenTree(data.root, stgns, ctx);\n\n  /**\n   * @alias h-band\n   * @private\n   * @kind function\n   * @param { Object[] } value - Array where each value is a reference to a node, going from depth 1 to n.\n   * @return { number }\n   */\n  const hBand = function fn(val) {\n    const strVal = String(val);\n    const item = items[strVal];\n    if (item) {\n      return bandInstance(stgns.invert ? item.rightEdge : item.leftEdge);\n    }\n\n    return bandInstance(strVal);\n  };\n\n  extend(true, hBand, bandInstance);\n\n  /**\n   * Wrapped {@link https://github.com/d3/d3-scale#band_bandwidth}\n   * @param { Object[] } [val] - Array where each value is a reference to a node, going from depth 1 to n. If omitted, bandwidth for the leaf nodes is return.\n   * @return { number }\n   */\n\n  hBand.bandwidth = function bandwidth(val) {\n    const item = items[String(val)];\n    const bw = bandInstance.bandwidth();\n    if (item && !item.isLeaf) {\n      const left = hBand(item.leftEdge);\n      const right = hBand(item.rightEdge);\n      return Math.abs(left - right) + bw;\n    }\n    return bw;\n  };\n\n  /**\n   * Wrapped {@link https://github.com/d3/d3-scale#band_step}\n   * @param { Object[] } [val] - Array where each value is a reference to a node, going from depth 1 to n. If omitted, step size for the leaf nodes is return.\n   * @return { number }\n   */\n  hBand.step = function step(val) {\n    const item = items[String(val)];\n    const leafCount = item ? item.count : 1;\n    let stepSize = bandInstance.step();\n    stepSize *= leafCount;\n    return stepSize;\n  };\n\n  /**\n   * @return { dataset }\n   */\n  hBand.data = () => data;\n\n  /**\n   * Return datum for a given node\n   * @param { Object[] } val - Array where each value is a reference to a node, going from depth 1 to n.\n   * @return { Object } The datum\n   */\n  hBand.datum = (val) => {\n    const item = items[String(val)];\n    if (item) {\n      return item.node.data;\n    }\n    return null;\n  };\n\n  hBand.copy = () => scaleHierarchicalBand(settings, data, resources);\n\n  /**\n   * @return { Object[] } Labels for each leaf node\n   */\n  hBand.labels = () => labels;\n\n  /**\n   * Generate discrete ticks\n   * @return { Object[] } Ticks for each leaf node\n   */\n  hBand.ticks = () => { // eslint-disable-line arrow-body-style\n    return ticks.map((item) => {\n      const start = hBand(item.key);\n      const bandwidth = hBand.bandwidth(item.key);\n      return {\n        position: start + (bandwidth / 2),\n        label: item.label,\n        data: item.node.data,\n        start,\n        end: start + bandwidth\n      };\n    });\n  };\n\n  const orgPxScale = bandInstance.pxScale;\n  hBand.pxScale = function pxScale(size) {\n    bandInstance = orgPxScale(size);\n    return hBand;\n  };\n\n  hBand.domain(values);\n\n  return hBand;\n}\n\n","import { isNumber as numericFilter } from './is-number';\n\nconst minAccessor = v => v.min();\nconst maxAccessor = v => v.max();\n\n/**\n * Calculate the min/max value based on various inputs.\n *\n * Provided min/max setting takes presedence over all other inputs. If not provided, the respective values are calculated\n * from the given arr input, where each item in the array is expected to have a min/max accessor.\n *\n * @private\n * @param {object} [settings]\n * @param {number} [settings.min] The minimum value. Defaults to 0 if not provided.\n * @param {number} [settings.max] The maximum value. Defaults to 1 if not provided.\n * @param {object} [arr]\n * @returns { object[] } An array containing the min and max values.\n *\n * @example\n * minmax(); // [0, 1]\n *\n * minmax({}, [\n * { min: () => 13, max: () => 15 },\n * { min: () => NaN, max: () => 17 },\n * ]); // [13, 17]\n *\n * minmax({ min: -5, max: 4 }, [\n * { min: () => -20, max: () => 15 },\n * ]); // [-5, 4]\n */\nexport default function minmax(settings, arr) {\n  // const definedMin = settings && typeof settings.min !== 'undefined';\n  // const definedMax = settings && typeof settings.max !== 'undefined';\n  const definedMin = settings && !isNaN(settings.min);\n  const definedMax = settings && !isNaN(settings.max);\n\n  let min = definedMin ? +settings.min : 0;\n  let max = definedMax ? +settings.max : 1;\n\n  if (arr && arr.length) {\n    if (!definedMin) {\n      const arrMin = arr.map(minAccessor).filter(numericFilter);\n      min = arrMin.length ? Math.min(...arrMin) : min;\n    }\n\n    if (!definedMax) {\n      const arrMax = arr.map(maxAccessor).filter(numericFilter);\n      max = arrMax.length ? Math.max(...arrMax) : max;\n    }\n  }\n\n  return [min, max];\n}\n","import { interpolateRgb } from 'd3-interpolate';\nimport extend from 'extend';\nimport minmax from '../../utils/min-max';\nimport linear from '../linear';\nimport resolveSettings from '../settings-resolver';\n\nconst DEFAULT_SETTINGS = {\n  domain: [],\n  range: [],\n  invert: false,\n  min: NaN,\n  max: NaN\n};\n\nfunction generateDomain(range, min, max) {\n  const len = range.length;\n  if (len === 2) {\n    return [min, max];\n  }\n  const domain = [];\n  const part = (max - min) / (len - 1);\n\n  domain.push(min);\n  for (let i = 1; i < len - 1; i++) {\n    domain.push(min + (part * i));\n  }\n  domain.push(max);\n\n  return domain;\n}\n\n/**\n * @typedef {object} scale--sequential-color\n * @property {string} [type='sequential-color']\n * @property {string[]} [range] - CSS color values of the output range\n * @property {boolean} [invert=false] - Invert range\n * @property {number} [min] - Set an explicit minimum value\n * @property {number} [max] - Set an explicit maximum value\n */\n\n/**\n * @alias scaleSequentialColor\n * @private\n * @param { Object } [settings] Settings for this scale. If both range and domain are specified, they have to fulfill range.length === domain.length, otherwise they will be overriden.\n * @param { number[] } [settings.domain] Numeric values indicating stop limits between start and end values.\n * @param { color[] } [settings.range] CSS color values indicating stop colors between start and end values.\n * @param { field[] } [fields] Fields to dynamically calculate the domain extent.\n * @return { sequentialColor }\n *\n * @example\n * picasso.scaleSequentialColor({\n *  range: ['red', '#fc6', 'green'],\n *  domain: [-40, 0, 100]\n * });\n */\n\nexport default function scaleSequentialColor(settings = {}, data = {}, resources = {}) {\n  const s = linear(settings, data, resources).clamp(true).interpolate(interpolateRgb);\n  const stgns = resolveSettings(settings, DEFAULT_SETTINGS, { data, resources });\n  const isDomain = Array.isArray(stgns.domain) && stgns.domain.length;\n  const isRange = Array.isArray(stgns.range) && stgns.range.length;\n\n  /**\n   * @alias sequentialColor\n   * @private\n   * @kind function\n   * @param { Object } v Object containing a 'value' property\n   * @return { string } The blended color\n   */\n  const fn = s;\n\n  extend(true, fn, s);\n  const [min, max] = minmax(stgns, data ? data.fields : []);\n  const num = isDomain ? stgns.domain.length : -1;\n  const DEFAULT_COLORS = resources.theme ? resources.theme.palette('sequential', num > 0 ? num : 2) : [];\n\n  const range = isRange ? stgns.range : DEFAULT_COLORS;\n  fn.range(stgns.invert ? range.slice().reverse() : range.slice());\n  fn.domain(isDomain ? stgns.domain : generateDomain(fn.range(), min, max));\n\n  return fn;\n}\n","import registry from '../../utils/registry';\nimport linear from '../../scales/linear';\nimport band from '../../scales/band';\nimport hBand from '../../scales/h-band';\nimport sequential from '../../scales/color/sequential';\nimport threshold from '../../scales/color/threshold';\nimport categorical from '../../scales/color/categorical';\nimport extractData from '../../data/extractor';\n\nconst scaleRegistry = registry();\n\nscaleRegistry('linear', linear);\nscaleRegistry('band', band);\nscaleRegistry('h-band', hBand);\nscaleRegistry('sequential-color', sequential);\nscaleRegistry('threshold-color', threshold);\nscaleRegistry('categorical-color', categorical);\n\nexport {\n  scaleRegistry as default\n};\n\nfunction getTypeFromMeta(fields) {\n  const types = fields.map(field => (field.type() === 'dimension' ? 'band' : 'linear'));\n  return types.indexOf('linear') !== -1 ? 'linear' : 'band';\n}\n\nfunction deduceScaleTypeFromData(data) {\n  if (data.root) {\n    return 'h-band';\n  }\n\n  if (data.fields && data.fields[0]) {\n    return getTypeFromMeta(data.fields);\n  }\n  return 'linear';\n}\n\nexport function create(options, d, deps) {\n  let dataSourceConfig = options.data;\n  if (options.source) { // DEPRECATION\n    deps.logger.warn('Deprecated: Scale data source configuration');\n    dataSourceConfig = {\n      extract: []\n    };\n    (Array.isArray(options.source) ? options.source : [options.source]).forEach((source) => {\n      dataSourceConfig.extract.push({\n        field: source\n      });\n    });\n  }\n\n  const data = extractData(dataSourceConfig, d, deps);\n  let type = options.type || deduceScaleTypeFromData(data);\n  let s;\n\n  if (type === 'color') {\n    if (data.fields && data.fields[0] && data.fields[0].type() === 'dimension') {\n      type = 'categorical-color';\n    } else {\n      type = 'sequential-color';\n    }\n  }\n\n  if (deps.scale.has(type)) {\n    s = deps.scale.get(type);\n    s = s(options, data, { theme: deps.theme, logger: deps.logger });\n    s.type = type;\n  }\n  return s;\n}\n\nexport function getOrCreateScale(v, scales, d, deps) {\n  let s;\n  if (typeof v === 'string' && scales[v]) { // return by name\n    s = scales[v];\n  } else if (typeof v === 'object' && 'scale' in v && scales[v.scale]) { // return by { scale: \"name\" }\n    s = scales[v.scale];\n  }\n\n  return s || create(v, d, deps);\n}\n\nexport function builder(obj, d, deps) {\n  const scales = {};\n  for (const s in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, s)) {\n      scales[s] = create(obj[s], d, deps);\n    }\n  }\n  return scales;\n}\n","/**\n * Utility functions\n */\n\nvar util = {};\n\nutil.isObject = function isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nutil.isNumber = function isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nutil.isUndefined = function isUndefined(arg) {\n  return arg === void 0;\n}\n\nutil.isFunction = function isFunction(arg){\n  return typeof arg === 'function';\n}\n\n\n/**\n * EventEmitter class\n */\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\nEventEmitter.init = function() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!util.isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error' && !this._events.error) {\n    er = arguments[1];\n    if (er instanceof Error) {\n      throw er; // Unhandled 'error' event\n    } else {\n      throw Error('Uncaught, unspecified \"error\" event.');\n    }\n    return false;\n  }\n\n  handler = this._events[type];\n\n  if (util.isUndefined(handler))\n    return false;\n\n  if (util.isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        len = arguments.length;\n        args = new Array(len - 1);\n        for (i = 1; i < len; i++)\n          args[i - 1] = arguments[i];\n        handler.apply(this, args);\n    }\n  } else if (util.isObject(handler)) {\n    len = arguments.length;\n    args = new Array(len - 1);\n    for (i = 1; i < len; i++)\n      args[i - 1] = arguments[i];\n\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!util.isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              util.isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (util.isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (util.isObject(this._events[type]) && !this._events[type].warned) {\n    var m;\n    if (!util.isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n\n      if (util.isFunction(console.error)) {\n        console.error('(node) warning: possible EventEmitter memory ' +\n                      'leak detected. %d listeners added. ' +\n                      'Use emitter.setMaxListeners() to increase limit.',\n                      this._events[type].length);\n      }\n      if (util.isFunction(console.trace))\n        console.trace();\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!util.isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!util.isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (util.isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (util.isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (util.isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (Array.isArray(listeners)) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (util.isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  var ret;\n  if (!emitter._events || !emitter._events[type])\n    ret = 0;\n  else if (util.isFunction(emitter._events[type]))\n    ret = 1;\n  else\n    ret = emitter._events[type].length;\n  return ret;\n};\n","import EventEmitter from '../utils/event-emitter';\n\nexport default function scrollApi() {\n  let min = 0;\n  let max = 0;\n  let start = 0;\n  let viewSize = 0;\n  start = start || min;\n\n  /**\n   * The scroll api\n   * @private\n   * @alias scroll\n   */\n  const s = {\n    /**\n     * Move the current scroll\n     * @param {number} value\n     * @emits update\n     */\n    move(value) {\n      this.moveTo(start + value);\n    },\n\n    /**\n     * Change the current scroll to a specific value\n     * @param {number} value\n     * @emits update\n     */\n    moveTo(value) {\n      const newStart = Math.max(min, Math.min(max - viewSize, value));\n      if (start !== newStart) {\n        start = newStart;\n        s.emit('update');\n      }\n    },\n\n    /**\n     * Update scroll settings\n     * @param {number} [settings.min]\n     * @param {number} [settings.max]\n     * @param {number} [settings.viewSize]\n     * @emits update\n     */\n    update(settings) {\n      let triggerUpdate = false;\n      ({ min = min, max = max } = settings);\n      if (settings.viewSize !== undefined && settings.viewSize !== viewSize) {\n        viewSize = settings.viewSize;\n        triggerUpdate = true;\n      }\n\n      // update scroll to be within the new bounds\n      const newStart = Math.max(min, Math.min(max - viewSize, start));\n      if (start !== newStart) {\n        start = newStart;\n        triggerUpdate = true;\n      }\n\n      if (triggerUpdate) {\n        s.emit('update');\n      }\n    },\n\n    /**\n     * Get the current scroll state\n     * @return {object} with min, max, start & viewSize\n     */\n    getState() {\n      return { min, max, start, viewSize };\n    }\n  };\n\n  EventEmitter.mixin(s);\n\n  return s;\n}\n","import scrollApi from '../../scroll-api';\n\nexport function createOrUpdate(options, oldApi) {\n  const min = options.min || 0;\n  const max = options.max || 0;\n  const viewSize = options.viewSize || 0;\n\n  const s = oldApi || scrollApi();\n  s.update({ min, max, viewSize });\n\n  return s;\n}\n\nexport default function builder(obj, oldScrollApis) {\n  const scrollApis = {};\n  for (const n in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, n)) {\n      scrollApis[n] = createOrUpdate(obj[n], oldScrollApis ? oldScrollApis[n] : null);\n    }\n  }\n  return scrollApis;\n}\n\nexport function getOrCreateScrollApi(v, scrollApis) {\n  if (!scrollApis[v]) {\n    scrollApis[v] = scrollApi();\n  }\n  return scrollApis[v];\n}\n","function index(boundaries, point, after) {\n  let i = 0;\n  while (i < boundaries.length && point > boundaries[i]) {\n    ++i;\n  }\n  if (boundaries[i] === point && after) {\n    ++i;\n  }\n  return i;\n}\n\nfunction contains(boundaries, point) {\n  const len = boundaries.length;\n\n  for (let i = 1; i < len; i += 2) {\n    if (boundaries[i - 1] <= point && point <= boundaries[i]) {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport default function rangeCollection() {\n  let boundaries = [];\n\n  function fn() {}\n\n  fn.add = (range) => {\n    const min = range.min;\n    const max = range.max;\n\n    const i0 = index(boundaries, min);\n    const i1 = index(boundaries, max, true);\n\n    const args = [i0, i1 - i0];\n    if (i0 % 2 === 0) {\n      args.push(min);\n    }\n    if (i1 % 2 === 0) {\n      args.push(max);\n    }\n\n    const before = boundaries.join(',');\n    boundaries.splice(...args);\n    const after = boundaries.join(',');\n    return before !== after;\n  };\n\n  fn.remove = (range) => {\n    const min = range.min;\n    const max = range.max;\n\n    const i0 = index(boundaries, min);\n    const i1 = index(boundaries, max, true);\n\n    const args = [i0, i1 - i0];\n    if (i0 % 2 === 1) {\n      args.push(min);\n    }\n    if (i1 % 2 === 1) {\n      args.push(max);\n    }\n    const before = boundaries.join(',');\n    boundaries.splice(...args);\n    const after = boundaries.join(',');\n    return before !== after;\n  };\n\n  fn.set = (range) => {\n    const before = boundaries.join(',');\n    boundaries = [];\n    if (Array.isArray(range)) {\n      range.forEach(fn.add);\n    } else {\n      fn.add(range);\n    }\n    const after = boundaries.join(',');\n    return before !== after;\n  };\n\n  fn.clear = () => {\n    const before = boundaries.length > 0;\n    boundaries = [];\n    return before;\n  };\n\n  fn.containsValue = value => contains(boundaries, value);\n\n  fn.containsRange = (range) => {\n    const min = range.min;\n    const max = range.max;\n\n    const i0 = index(boundaries, min, true);\n    const i1 = index(boundaries, max);\n\n    return i0 === i1 && i1 % 2 === 1;\n  };\n\n  fn.toggle = (range) => {\n    if (fn.containsRange(range)) {\n      return fn.remove(range);\n    }\n    return fn.add(range);\n  };\n\n  fn.ranges = () => {\n    const collection = [];\n    for (let i = 1; i < boundaries.length; i += 2) {\n      collection.push({\n        min: boundaries[i - 1],\n        max: boundaries[i]\n      });\n    }\n    return collection;\n  };\n\n  return fn;\n}\n","export default function valueCollection() {\n  let values = [];\n  function vc() {}\n\n  vc.add = (value) => {\n    if (values.indexOf(value) === -1) {\n      values.push(value);\n      return true;\n    }\n    return false;\n  };\n\n  vc.remove = (value) => {\n    const idx = values.indexOf(value);\n    if (idx !== -1) {\n      values.splice(idx, 1);\n      return true;\n    }\n    return false;\n  };\n\n  vc.contains = value => values.indexOf(value) !== -1;\n\n  vc.values = () => values.slice();\n\n  vc.clear = () => (values = []);\n\n  return vc;\n}\n","import extend from 'extend';\n\nimport EventEmitter from '../utils/event-emitter';\n\nimport rangeCollection from './range-collection';\nimport valueCollection from './value-collection';\n\nfunction add({\n  items,\n  values,\n  vc\n}) {\n  const changedMap = {};\n  const changed = [];\n  let key;\n  let value;\n\n  for (let i = 0, num = items.length; i < num; i++) {\n    key = items[i].key;\n    value = items[i].value;\n    if (!values[key]) {\n      values[key] = vc();\n    }\n\n    if (values[key].add(value)) {\n      changedMap[key] = changedMap[key] || [];\n      changedMap[key].push(value);\n    }\n  }\n\n  const keys = Object.keys(changedMap);\n  for (let i = 0, num = keys.length; i < num; i++) {\n    key = keys[i];\n    changed.push({ id: key, values: changedMap[key] });\n  }\n\n  return changed;\n}\n\nfunction remove({\n  items,\n  values\n}) {\n  const changedMap = {};\n  const changed = [];\n  let key;\n  let value;\n\n  for (let i = 0, num = items.length; i < num; i++) {\n    key = items[i].key;\n    value = items[i].value;\n    if (values[key] && values[key].remove(value)) {\n      changedMap[key] = changedMap[key] || [];\n      changedMap[key].push(value);\n    }\n  }\n\n  const keys = Object.keys(changedMap);\n  for (let i = 0, num = keys.length; i < num; i++) {\n    key = keys[i];\n    changed.push({ id: key, values: changedMap[key] });\n  }\n\n  return changed;\n}\n\nfunction collectUnique(items) {\n  const filteredSet = {};\n  let key;\n  let value;\n\n  for (let i = 0, num = items.length; i < num; i++) {\n    key = items[i].key;\n    value = items[i].value;\n    if (!filteredSet[key]) {\n      filteredSet[key] = [];\n    }\n    const idx = filteredSet[key].indexOf(value);\n\n    if (idx === -1) {\n      filteredSet[key].push(value);\n    }\n  }\n\n  return filteredSet;\n}\n\nfunction createValueCollection({\n  key,\n  collection,\n  obj,\n  fn,\n  value\n}) {\n  if (!collection[key]) {\n    collection[key] = fn();\n  }\n  obj[key] = obj[key] || [];\n  obj[key].push(value);\n  collection[key].add(value);\n}\n\nexport function toggle({\n  items,\n  values,\n  vc\n}) {\n  const addedMap = {};\n  const removedMap = {};\n  const added = [];\n  const removed = [];\n  const filteredSet = collectUnique(items);\n  let key;\n  let value;\n  let fs;\n\n  const setKeys = Object.keys(filteredSet);\n  for (let i = 0, num = setKeys.length; i < num; i++) {\n    key = setKeys[i];\n    fs = filteredSet[key];\n\n    for (let k = 0, len = fs.length; k < len; k++) {\n      value = fs[k];\n      if (!values[key] || !values[key].contains(value)) {\n        createValueCollection({\n          key,\n          value,\n          collection: values,\n          obj: addedMap,\n          fn: vc\n        });\n      } else if (values[key] && values[key].contains(value)) {\n        removedMap[key] = removedMap[key] || [];\n        removedMap[key].push(value);\n        values[key].remove(value);\n      }\n    }\n  }\n\n  const addedKeys = Object.keys(addedMap);\n  for (let i = 0, num = addedKeys.length; i < num; i++) {\n    key = addedKeys[i];\n    added.push({ id: key, values: addedMap[key] });\n  }\n\n  const removedKeys = Object.keys(removedMap);\n  for (let i = 0, num = removedKeys.length; i < num; i++) {\n    key = removedKeys[i];\n    removed.push({ id: key, values: removedMap[key] });\n  }\n\n  return [added, removed];\n}\n\nfunction diff(old, current) {\n  const changed = [];\n  const keys = Object.keys(old);\n  let key;\n  let changedValues;\n  const filterFn = v => current[key].indexOf(v) === -1;\n\n  for (let i = 0, num = keys.length; i < num; i++) {\n    key = keys[i];\n    if (!current[key]) {\n      changed.push({ id: key, values: old[key] });\n    } else {\n      changedValues = old[key].filter(filterFn);\n      if (changedValues.length) {\n        changed.push({ id: key, values: changedValues });\n      }\n    }\n  }\n\n  return changed;\n}\n\nexport function set({\n  items,\n  vCollection,\n  vc\n}) {\n  const addedMap = {};\n  const filteredSet = collectUnique(items);\n  let added = [];\n  let removed = [];\n  let key;\n\n  const oldMap = {};\n  const vcKeys = Object.keys(vCollection);\n  for (let i = 0, num = vcKeys.length; i < num; i++) {\n    key = vcKeys[i];\n    oldMap[key] = vCollection[key].values().slice();\n    delete vCollection[key];\n  }\n\n  const createValueCollectionFn = (value) => {\n    if (!vCollection[key] || !vCollection[key].contains(value)) {\n      createValueCollection({\n        key,\n        value,\n        collection: vCollection,\n        obj: addedMap,\n        fn: vc\n      });\n    }\n  };\n\n  const fsKeys = Object.keys(filteredSet);\n  for (let i = 0, num = fsKeys.length; i < num; i++) {\n    key = fsKeys[i];\n    filteredSet[key].forEach(createValueCollectionFn);\n  }\n\n  removed = diff(oldMap, addedMap);\n  added = diff(addedMap, oldMap);\n\n  return [added, removed];\n}\n\n\nfunction applyAliases(items, aliases) {\n  if (!Object.keys(aliases).length) {\n    return items;\n  }\n  const len = items.length;\n  const its = Array(len);\n  for (let i = 0; i < len; i++) {\n    its[i] = items[i].key in aliases ? extend({}, items[i], { key: aliases[items[i].key] }) : items[i];\n  }\n  return its;\n}\n\nfunction intercept(handlers, items, aliases) {\n  const its = applyAliases(items, aliases);\n  return handlers && handlers.length ? handlers.reduce((value, interceptor) => interceptor(value), its) : its;\n}\n\nfunction toCamelCase(s) {\n  return s.replace(/(-[a-z])/g, $1 => $1.toUpperCase().replace('-', ''));\n}\n\nfunction toSnakeCase(s) {\n  return s.replace(/([A-Z])/g, $1 => `-${$1.toLowerCase()}`);\n}\n\nfunction updateRange(items, action, {\n  ranges,\n  interceptors,\n  rc,\n  aliases\n}) {\n  const inter = `${action}Ranges`;\n  const its = intercept(interceptors[inter], items, aliases);\n  let changed = false;\n  its.forEach((item) => {\n    const key = item.key;\n    if (!ranges[key]) {\n      ranges[key] = rc();\n    }\n    changed = ranges[key][action](item.range) || changed;\n  });\n\n  return changed;\n}\n\nexport default function brush({\n  vc = valueCollection,\n  rc = rangeCollection\n} = {}) {\n  let activated = false;\n  let ranges = {};\n  let values = {};\n  let aliases = {};\n  const interceptors = {\n    addValues: [],\n    removeValues: [],\n    toggleValues: [],\n    setValues: [],\n    addRanges: [],\n    setRanges: [],\n    removeRanges: [],\n    toggleRanges: []\n  };\n\n  /**\n   * A brush context\n   * @alias brush\n   * @interface\n   */\n  const fn = {};\n\n  /**\n   * Starts this brush context\n   *\n   * Starts this brush context and emits a 'start' event if it is not already started.\n   * @emits brush#start\n   */\n  fn.start = () => {\n    if (!activated) {\n      activated = true;\n      fn.emit('start');\n    }\n  };\n\n  /**\n   * Ends this brush context\n   *\n   * Ends this brush context and emits an 'end' event if it is not already ended.\n   * @emits brush#start\n   */\n  fn.end = () => {\n    if (!activated) {\n      return;\n    }\n    activated = false;\n    ranges = {};\n    values = {};\n    fn.emit('end');\n  };\n\n  /**\n   * Checks if this brush is activated\n   *\n   * Returns true if started, false otherwise\n   * @return {boolean}\n   */\n  fn.isActive = () => activated;\n\n  /**\n   * Clears this brush context\n   */\n  fn.clear = () => {\n    const removed = fn.brushes().filter(b => b.type === 'value' && b.brush.values().length).map(b => ({ id: b.id, values: b.brush.values() }));\n    const hasChanged = Object.keys(ranges).length > 0 || removed.length;\n    ranges = {};\n    values = {};\n    if (hasChanged) {\n      fn.emit('update', [], removed); // TODO - do not emit update if state hasn't changed\n    }\n  };\n\n  /**\n   * Returns all brushes within this context\n   * @return {object}\n   */\n  fn.brushes = () => {\n    let result = [];\n    result = result.concat(Object.keys(ranges).map(key => ({\n      type: 'range',\n      id: key,\n      brush: ranges[key]\n    })));\n\n    result = result.concat(Object.keys(values).map(key => ({\n      type: 'value',\n      id: key,\n      brush: values[key]\n    })));\n\n    return result;\n  };\n\n  /**\n   * Adds a primitive value to this brush context\n   *\n   * If this brush context is not started, a 'start' event is emitted.\n   * If the state of the brush changes, ie. if the added value does not already exist, an 'update' event is emitted.\n   *\n   * @param {string} key  An identifier that represents the data source of the value\n   * @param {string|number} value The value to add\n   * @emits brush#start\n   * @emits brush#update\n   * @example\n   * brush.addValue('countries', 'Sweden');\n   * brush.addValue('/qHyperCube/qDimensionInfo/0', 3);\n   */\n  fn.addValue = (key, value) => {\n    fn.addValues([{ key, value }]);\n  };\n\n  /**\n   * @param {object[]} items Items to add\n   */\n  fn.addValues = (items) => {\n    const its = intercept(interceptors.addValues, items, aliases);\n    const added = add({\n      vc,\n      values,\n      items: its\n    });\n\n    fn.emit('add-values', its);\n\n    if (added.length) {\n      if (!activated) {\n        activated = true;\n        fn.emit('start');\n      }\n      fn.emit('update', added, []);\n    }\n  };\n\n  /**\n   * @param {object[]} items Items to set\n   */\n  fn.setValues = (items) => {\n    const its = intercept(interceptors.setValues, items, aliases);\n    const changed = set({\n      items: its,\n      vCollection: values,\n      vc\n    });\n\n    fn.emit('set-values', its);\n\n    if (changed[0].length > 0 || changed[1].length > 0) {\n      if (!activated) {\n        activated = true;\n        fn.emit('start');\n      }\n      fn.emit('update', changed[0], changed[1]);\n    }\n  };\n\n  /**\n   * Removes a primitive values from this brush context\n   *\n   * If the state of the brush changes, ie. if the removed value does exist, an 'update' event is emitted.\n   *\n   * @param  {string} key  An identifier that represents the data source of the value\n   * @param  {string|number} value The value to remove\n   * @example\n   * brush.removeValue('countries', 'Sweden');\n   */\n  fn.removeValue = (key, value) => {\n    fn.removeValues([{ key, value }]);\n  };\n\n  /**\n   * @param {object[]} items Items to remove\n   */\n  fn.removeValues = (items) => {\n    const its = intercept(interceptors.removeValues, items, aliases);\n    const removed = remove({\n      values,\n      items: its\n    });\n\n    fn.emit('remove-values', its);\n\n    if (removed.length) {\n      fn.emit('update', [], removed);\n      // TODO - emit 'end' event if there are no remaining active brushes\n    }\n  };\n\n  /**\n   * Add and remove values in a single operation\n   * almost the same as calling addValues and removeValues but only triggers one 'update' event\n   *\n   * If the state of the brush changes, an 'update' event is emitted.\n   *\n   * @param {object[]} addItems Items to add\n   * @param {object[]} removeItems Items to remove\n   */\n  fn.addAndRemoveValues = (addItems, removeItems) => {\n    const addIts = intercept(interceptors.addValues, addItems, aliases);\n    const removeIts = intercept(interceptors.removeValues, removeItems, aliases);\n    const added = add({\n      vc,\n      values,\n      items: addIts\n    });\n    const removed = remove({\n      values,\n      items: removeIts\n    });\n\n    fn.emit('add-values', addIts);\n    fn.emit('remove-values', removeIts);\n\n    if (added.length || removed.length) {\n      if (!activated) {\n        activated = true;\n        fn.emit('start');\n      }\n      fn.emit('update', added, removed);\n    }\n  };\n\n  /**\n   * Toggles a primitive value in this brush context\n   *\n   * If the given value exist in this brush context, it will be removed. If it does not exist it will be added.\n   *\n   * @param  {string} key  An identifier that represents the data source of the value\n   * @param  {string|number} value The value to toggle\n   * @example\n   * brush.toggleValue('countries', 'Sweden');\n   */\n  fn.toggleValue = (key, value) => {\n    fn.toggleValues([{ key, value }]);\n  };\n\n  /**\n   * @param {object[]} items Items to toggle\n   */\n  fn.toggleValues = (items) => {\n    const its = intercept(interceptors.toggleValues, items, aliases);\n    const toggled = toggle({\n      items: its,\n      values,\n      vc\n    });\n\n    fn.emit('toggle-values', its);\n\n    if (toggled[0].length > 0 || toggled[1].length > 0) {\n      if (!activated) {\n        activated = true;\n        fn.emit('start');\n      }\n      fn.emit('update', toggled[0], toggled[1]);\n    }\n  };\n\n  /**\n   * Checks if a certain value exists in this brush context\n   *\n   * Returns true if the values exists for the provided key, returns false otherwise.\n   *\n   * @param  {string} key  An identifier that represents the data source of the value\n   * @param  {string|number} value The value to check for\n   * @return {boolean}\n   * @example\n   * brush.addValue('countries', 'Sweden');\n   * brush.containsValue('countries', 'Sweden'); // true\n   * brush.toggleValue('countries', 'Sweden'); // remove 'Sweden'\n   * brush.containsValue('countries', 'Sweden'); // false\n   */\n  fn.containsValue = (key, value) => {\n    let k = aliases[key] || key;\n    if (!values[k]) {\n      return false;\n    }\n    return values[k].contains(value);\n  };\n\n  /**\n   * Adds a numeric range to this brush context\n   *\n   * @param {string} key - An identifier that represents the data source of the range\n   * @param {object} range - The range to add to this brush\n   * @param {number} range.min - Min value of the range\n   * @param {number} range.max - Max value of the range\n   * @example\n   * brush.addRange('Sales', { min: 20, max: 50 });\n   */\n  fn.addRange = (key, range) => {\n    fn.addRanges([{ key, range }]);\n  };\n\n  /**\n   * @see {brush.addRange}\n   * @param {object[]} items - Items containing the ranges to remove\n   * @param {string} items[].key\n   * @param {object} items[].range\n   */\n  fn.addRanges = (items) => {\n    const changed = updateRange(items, 'add', {\n      ranges,\n      rc,\n      interceptors,\n      aliases\n    });\n\n    if (!changed) {\n      return;\n    }\n\n    if (!activated) {\n      activated = true;\n      fn.emit('start');\n    }\n    fn.emit('update', [], []);\n  };\n\n  /**\n   * Removes a numeric range from this brush context\n   *\n   * @param {string} key - An identifier that represents the data source of the range\n   * @param {object} range - The range to remove from this brush\n   * @param {number} range.min - Min value of the range\n   * @param {number} range.max - Max value of the range\n   */\n  fn.removeRange = (key, range) => {\n    fn.removeRanges([{ key, range }]);\n  };\n\n  /**\n   * @see {brush.removeRange}\n   * @param {object[]} items - Items containing the ranges to remove\n   */\n  fn.removeRanges = (items) => {\n    const changed = updateRange(items, 'remove', {\n      ranges,\n      rc,\n      interceptors,\n      aliases\n    });\n\n    if (!changed) {\n      return;\n    }\n\n    if (!activated) {\n      activated = true;\n      fn.emit('start');\n    }\n    fn.emit('update', [], []);\n  };\n\n  /**\n   * Sets a numeric range to this brush context\n   *\n   * Overwrites any active ranges identified by `key`\n   *\n   * @param {string} key - An identifier that represents the data source of the range\n   * @param {object} range - The range to set on this brush\n   * @param {number} range.min - Min value of the range\n   * @param {number} range.max - Max value of the range\n   */\n  fn.setRange = (key, range) => {\n    fn.setRanges([{ key, range }]);\n  };\n\n  /**\n   * @see {brush.setRange}\n   * @param {object[]} items - Items containing the ranges to set\n   */\n  fn.setRanges = (items) => {\n    const changed = updateRange(items, 'set', {\n      ranges,\n      rc,\n      interceptors,\n      aliases\n    });\n\n    if (!changed) {\n      return;\n    }\n\n    if (!activated) {\n      activated = true;\n      fn.emit('start');\n    }\n    fn.emit('update', [], []);\n  };\n\n  /**\n   * Toggles a numeric range in this brush context\n   *\n   * Removes the range if it's already contained within the given identifier,\n   * otherwise the given range is added to the brush.\n   *\n   * @param {string} key - An identifier that represents the data source of the range\n   * @param {object} range - The range to toggle in this brush\n   * @param {number} range.min - Min value of the range\n   * @param {number} range.max - Max value of the range\n   */\n  fn.toggleRange = (key, range) => {\n    fn.toggleRanges([{ key, range }]);\n  };\n\n  /**\n   * @see {brush.toggleRange}\n   * @param {object[]} items - Items containing the ranges to toggle\n   */\n  fn.toggleRanges = (items) => {\n    const changed = updateRange(items, 'toggle', {\n      ranges,\n      rc,\n      interceptors,\n      aliases\n    });\n\n    if (!changed) {\n      return;\n    }\n\n    if (!activated) {\n      activated = true;\n      fn.emit('start');\n    }\n    fn.emit('update', [], []);\n  };\n\n  /**\n   * Checks if a value is contained within a range in this brush context\n   *\n   * Returns true if the values exists for the provided key, returns false otherwise.\n   *\n   * @param  {string} key - An identifier that represents the data source of the value\n   * @param  {number} value - The value to check for\n   * @return {boolean}\n   * @example\n   * brush.addRange('Sales', { min: 10, max: 50 });\n   * brush.containsRangeValue('Sales', 30); // true\n   * brush.containsRangeValue('Sales', 5); // false\n   */\n  fn.containsRangeValue = (key, value) => {\n    let k = aliases[key] || key;\n    if (!ranges[k]) {\n      return false;\n    }\n    return ranges[k].containsValue(value);\n  };\n\n  /**\n   * Checks if a range segment is contained within this brush context\n   *\n   * Returns true if the range segment exists for the provided key, returns false otherwise.\n   *\n   * @param {string} key - An identifier that represents the data source of the value\n   * @param {object} range - The range to check for\n   * @param {number} range.min - Min value of the range\n   * @param {number} range.max - Max value of the range\n   * @return {boolean}\n   * @example\n   * brush.addRange('Sales', { min: 10, max: 50 });\n   * brush.containsRange('Sales', { min: 15, max: 20 }); // true - the range segment is fully contained within [10, 50]\n   * brush.containsRange('Sales', { min: 5, max: 20 }); // false - part of the range segment is outside [10, 50]\n   * brush.containsRange('Sales', { min: 30, max: 80 }); // false - part of the range segment is outside [10, 50]\n   */\n  fn.containsRange = (key, range) => {\n    let k = aliases[key] || key;\n    if (!ranges[k]) {\n      return false;\n    }\n    return ranges[k].containsRange(range);\n  };\n\n  fn.containsMappedData = (d, props, mode) => {\n    let status = [];\n    const keys = Object.keys(d);\n    let key;\n    let item;\n    let source;\n    let value;\n\n    for (let i = 0, num = keys.length; i < num; i++) {\n      key = keys[i];\n      if (key === 'value') {\n        item = d;\n        status[i] = { key: '', i, bool: false };\n      } else if (key === 'source') {\n        continue;\n      } else {\n        item = d[key];\n        status[i] = { key, i, bool: false };\n      }\n      source = item.source && item.source.field;\n      if (typeof source === 'undefined') {\n        continue;\n      }\n      if (typeof item.source.key !== 'undefined') {\n        source = `${item.source.key}/${source}`;\n      }\n\n      if (source in aliases) {\n        source = aliases[source];\n      }\n\n      value = item.value;\n      if (ranges[source]) {\n        status[i].bool = Array.isArray(value) ? ranges[source].containsRange({ min: value[0], max: value[1] }) : ranges[source].containsValue(value);\n      } else if (values[source] && values[source].contains(value)) {\n        status[i].bool = true;\n      }\n    }\n\n    if (props) {\n      status = status.filter(b => props.indexOf(b.key) !== -1);\n      if (mode === 'and') {\n        return !!status.length && !status.some(s => s.bool === false);\n      } else if (mode === 'xor') {\n        return !!status.length && status.some(s => s.bool) && status.some(s => s.bool === false);\n      }\n      // !mode || mode === 'or'\n      return status.some(s => s.bool);\n    }\n    return status.some(s => s.bool);\n  };\n\n  /**\n   * Adds an event interceptor\n   *\n   * @param {string} name Name of the event to intercept\n   * @param {function} ic Handler to call before event is triggered\n   * @example\n   * brush.intercept('add-values', items => {\n   *  console.log('about to add the following items', items);\n   *  return items;\n   * });\n   */\n  fn.intercept = (name, ic) => {\n    const s = toCamelCase(name);\n    if (!interceptors[s]) {\n      return;\n    }\n    interceptors[s].push(ic);\n  };\n\n  /**\n   * Removes an interceptor\n   *\n   * @param {string} name Name of the event to intercept\n   * @param {function} ic Handler to remove\n   */\n  fn.removeInterceptor = (name, ic) => {\n    const s = toCamelCase(name);\n    if (!interceptors[s]) {\n      return;\n    }\n    const idx = interceptors[s].indexOf(ic);\n    if (idx !== -1) {\n      interceptors[s].splice(idx, 1);\n    }\n  };\n\n  /**\n   * Removes all interceptors\n   *\n   * @param {string} [name] Name of the event to remove interceptors for. If not provided, removes all interceptors.\n   */\n  fn.removeAllInterceptors = (name) => {\n    const toRemove = [];\n    if (name) {\n      const s = toCamelCase(name);\n      if (interceptors[s] && interceptors[s].length) {\n        toRemove.push({ name, handlers: interceptors[s] });\n      }\n    } else {\n      Object.keys(interceptors).forEach((n) => {\n        if (interceptors[n].length) {\n          toRemove.push({ name: toSnakeCase(n), handlers: interceptors[n] });\n        }\n      });\n    }\n\n    toRemove.forEach((ic) => {\n      const interceptorHandlers = ic.handlers.slice();\n      interceptorHandlers.forEach(handler => fn.removeInterceptor(ic.name, handler));\n    });\n  };\n\n  /**\n   * Adds an alias to the given key\n   *\n   * @param {string} key - Value to be replaced\n   * @param {string} alias - Value to replace key with\n   * @example\n   * brush.addKeyAlias('BadFieldName', 'Region');\n   * brush.addValue('BadFieldName', 'Sweden'); // 'BadFieldName' will be stored as 'Region'\n   * brush.containsValue('Region', 'Sweden'); // true\n   * brush.containsValue('BadFieldName', 'Sweden'); // true\n   */\n  fn.addKeyAlias = (key, alias) => {\n    aliases[key] = alias;\n  };\n\n  /**\n   * Removes an alias\n   *\n   * This will only remove the key to alias mapping for new manipulations of the brush,\n   * no changes will be made to the current state of this brush.\n   *\n   * @param {string} key - Value to remove as alias\n   * @example\n   * brush.removeKeyAlias('BadFieldName');\n   */\n  fn.removeKeyAlias = (key) => {\n    delete aliases[key];\n  };\n\n  EventEmitter.mixin(fn);\n\n  return fn;\n}\n\n/**\n * Triggered when this brush is activated\n * @event brush#start\n * @type {string}\n */\n\n/**\n * Triggered when this brush is updated\n * @event brush#update\n * @type {string}\n * @param {Array<object>} added - The added items\n * @param {Array<object>} removed - The removed items\n */\n\n/**\n * Triggered when this brush is deactivated\n * @event brush#end\n * @type {string}\n */\n","export function cubicIn(t) {\n  return t * t * t;\n}\n\nexport function cubicOut(t) {\n  return --t * t * t + 1;\n}\n\nexport function cubicInOut(t) {\n  return ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2;\n}\n","import extend from 'extend';\n\nconst GLOBAL_DEFAULTS = {\n  fontFamily: 'Arial',\n  fontSize: '13px',\n  color: '#595959',\n  backgroundColor: '#ffffff',\n  stroke: '#000000',\n  strokeWidth: 0,\n  $fill: '#333333'\n};\n\nconst REF_RX = /^\\$/;\n\nfunction isPrimitive(x) {\n  const type = typeof x;\n  return type !== 'object' && type !== 'function' && type !== 'undefined';\n}\n\n/**\n * @callback datum-accessor\n * @param {datum-extract} d\n */\n\n/**\n * @typedef {object} datum-config\n * @property {string} [scale]\n * @property {datum-accessor} fn\n * @property {string} ref - A reference to a datum-extract property\n */\n\n/**\n * @typedef {string|datum-config|datum-accessor} datum-string\n */\n\n/**\n * @typedef {number|datum-config|datum-accessor} datum-number\n */\n\n/**\n * Normalizes property settings\n *\n * @ignore\n * @export\n * @param {any} settings\n * @param {any} defaults\n * @param {any} chart\n * @returns {any}\n */\nexport function normalizeSettings(settings, defaults, chart) {\n  const composition = extend({}, settings);\n  const defs = extend({}, defaults);\n  Object.keys(composition).forEach((key) => {\n    defs[key] = {};\n    const v = composition[key];\n    const vType = typeof v;\n    if (typeof v === 'function') {\n      defs[key].fn = v;\n    } else if (isPrimitive(v)) {\n      let defaultValue = defaults[key];\n      if (typeof defaultValue === 'string' && REF_RX.test(defaultValue)) {\n        defaultValue = GLOBAL_DEFAULTS[defaultValue];\n      }\n      const defaultType = typeof defaultValue;\n      if (defaultType === 'undefined') { // if property has no default, assign provided value\n        defs[key] = v;\n      } else { // assign provided value if it's of same type as default, otherwise use default\n        defs[key] = defaultType === vType ? v : defaultValue;\n      }\n    } else if (v && typeof v === 'object') {\n      if (typeof v.fn === 'function') {\n        defs[key].fn = v.fn;\n      }\n      if (typeof v.scale !== 'undefined') {\n        defs[key].scale = chart.scale(v.scale);\n      }\n      if (typeof v.ref === 'string') {\n        defs[key].ref = v.ref;\n      }\n    }\n  });\n\n  Object.keys(defaults).forEach((key) => {\n    if (key in composition) { // don't process same props again\n      return;\n    }\n    const v = defaults[key];\n    const defaultType = typeof v;\n    if (defaultType === 'string' && REF_RX.test(v)) {\n      defs[key] = GLOBAL_DEFAULTS[v];\n    } else {\n      defs[key] = v;\n    }\n  });\n\n  return defs;\n}\n\nexport function resolveForItem(context, normalized) {\n  const ret = {};\n  const keys = Object.keys(normalized);\n  const len = keys.length;\n  const fallbackData = context.datum;\n  const datum = context.datum;\n  const dataContext = context.data && context.data.items;\n  const idx = dataContext ? dataContext.indexOf(datum) : -1;\n  for (let i = 0; i < len; i++) {\n    const key = keys[i];\n    const normalizedProp = normalized[key];\n    const exists = typeof datum === 'object' && typeof normalizedProp !== 'undefined';\n    const hasExplicitDataProp = exists && typeof normalizedProp.ref === 'string';\n    const hasImplicitDataProp = exists && key in datum;\n    const propData = hasExplicitDataProp ? datum[normalizedProp.ref] : hasImplicitDataProp ? datum[key] : fallbackData; // eslint-disable-line\n    if (isPrimitive(normalizedProp)) {\n      ret[key] = normalizedProp;\n    } else if (exists && normalizedProp.fn) { // callback function\n      if (normalizedProp.scale) {\n        context.scale = normalizedProp.scale;\n      }\n      ret[key] = normalizedProp.fn.call(null, context, idx);\n    } else if (exists && normalizedProp.scale && propData) {\n      ret[key] = normalizedProp.scale(propData.value);\n      if (normalizedProp.scale.bandwidth) {\n        ret[key] += normalizedProp.scale.bandwidth() / 2;\n      }\n    } else if (hasExplicitDataProp && propData) {\n      ret[key] = propData.value;\n    } else if (normalizedProp.fn) {\n      ret[key] = normalizedProp.fn.call(null, context, idx);\n    } else {\n      ret[key] = normalizedProp;\n    }\n  }\n  return ret;\n}\n","\nexport function updateScaleSize(object, path, size) {\n  const o = object[path];\n  if (o && o.scale && o.scale.pxScale) {\n    o.scale = o.scale.pxScale(size);\n  } else if (o && o.pxScale) {\n    object[path] = o.pxScale(size);\n  }\n}\n\nexport function scaleWithSize(scale, size) {\n  return scale.pxScale ? scale.pxScale(size) : scale;\n}\n","import { isTouchEvent } from '../utils/event-type';\n\n/**\n * Flatten the array of nodes by removing any containers as they do not support styling, thus unable to brush them.\n * @param {array} nodes\n * @ignore\n */\nexport function reduceToLeafNodes(nodes = []) {\n  return nodes.reduce((ary, node) => {\n    if (Array.isArray(node.children)) {\n      return ary.concat(reduceToLeafNodes(node.children));\n    }\n    ary.push(node);\n    return ary;\n  }, []);\n}\n\nexport function styler(obj, { context, data, style }) {\n  const brusher = obj.chart.brush(context);\n  const dataProps = data;\n  const active = style.active || {};\n  const inactive = style.inactive || {};\n  const styleProps = [];\n  Object.keys(active).forEach((key) => {\n    styleProps.push(key);\n  });\n\n  Object.keys(inactive).forEach((key) => {\n    if (styleProps.indexOf(key) === -1) {\n      styleProps.push(key);\n    }\n  });\n\n  const activeNodes = [];\n  let globalActivation = false; // track when we need to loop through all nodes, not just the active ones\n\n  const update = () => {\n    // TODO - render nodes only once, i.e. don't render for each brush, update nodes for all brushes and then render\n    const nodes = reduceToLeafNodes(obj.nodes);\n    const len = nodes.length;\n    let nodeData;\n    let globalChanged = false;\n\n    for (let i = 0; i < len; i++) { // TODO - update only added and removed nodes\n      nodeData = nodes[i].data;\n      if (!nodeData) {\n        continue;\n      }\n\n      if (!nodes[i].__style) {\n        nodes[i].__style = {};\n        styleProps.forEach((s) => {\n          nodes[i].__style[s] = nodes[i][s]; // store original value\n        });\n      }\n\n      const isActive = brusher.containsMappedData(nodeData, dataProps);\n      const activeIdx = activeNodes.indexOf(nodes[i]);\n      let changed = false;\n      if (isActive && activeIdx === -1) { // activated\n        activeNodes.push(nodes[i]);\n        changed = true;\n      } else if (!isActive && activeIdx !== -1) { // was active\n        activeNodes.splice(activeIdx, 1);\n        changed = true;\n      }\n      if (changed || globalActivation) {\n        styleProps.forEach((s) => {\n          if (isActive && s in active) {\n            nodes[i][s] = active[s];\n          } else if (!isActive && s in inactive) {\n            nodes[i][s] = inactive[s];\n          } else {\n            if (!nodes[i].__style) {\n              nodes[i].__style = nodes[i].__style || {};\n              styleProps.forEach((ss) => {\n                nodes[i].__style[ss] = nodes[i][ss]; // store original value\n              });\n            }\n            nodes[i][s] = nodes[i].__style[s];\n          }\n        });\n        globalChanged = true;\n      }\n    }\n    globalActivation = false;\n    return globalChanged;\n  };\n\n  const onStart = () => {\n    const nodes = reduceToLeafNodes(obj.nodes);\n    const len = nodes.length;\n    for (let i = 0; i < len; i++) {\n      nodes[i].__style = nodes[i].__style || {};\n      styleProps.forEach((s) => {\n        nodes[i].__style[s] = nodes[i][s]; // store original value\n        if (s in inactive) {\n          nodes[i][s] = inactive[s];\n        }\n      });\n    }\n    globalActivation = true;\n    activeNodes.length = 0;\n    obj.renderer.render(obj.nodes);\n  };\n\n  const onEnd = () => {\n    const nodes = reduceToLeafNodes(obj.nodes);\n    const len = nodes.length;\n\n    for (let i = 0; i < len; i++) {\n      if (nodes[i].__style) {\n        Object.keys(nodes[i].__style).forEach((s) => {\n          nodes[i][s] = nodes[i].__style[s];\n        });\n        nodes[i].__style = undefined;\n      }\n    }\n    activeNodes.length = 0;\n    obj.renderer.render(obj.nodes);\n  };\n  const onUpdate = (/* added, removed */) => {\n    const changed = update();\n    if (changed) {\n      obj.renderer.render(obj.nodes);\n    }\n  };\n\n  const externalUpdate = () => {\n    activeNodes.length = 0;\n    globalActivation = true;\n    update();\n  };\n\n  brusher.on('start', onStart);\n  brusher.on('end', onEnd);\n  brusher.on('update', onUpdate);\n\n  function cleanUp() {\n    brusher.removeListener('start', onStart);\n    brusher.removeListener('end', onEnd);\n    brusher.removeListener('update', onUpdate);\n  }\n\n  return {\n    isActive() {\n      return brusher.isActive();\n    },\n    update: externalUpdate,\n    cleanUp\n  };\n}\n\nexport function brushDataPoints({\n  dataPoints,\n  action,\n  chart,\n  trigger\n}) {\n  if (!trigger) {\n    return;\n  }\n\n  const dataProps = trigger.data || [''];\n\n  let rangeBrush = {\n    items: [],\n    actionFn: 'toggleRanges'\n  };\n  let valueBrush = {\n    items: [],\n    actionFn: 'toggleValues'\n  };\n\n  if (['add', 'remove', 'set', 'toggle'].indexOf(action) !== -1) {\n    rangeBrush.actionFn = `${action}Ranges`;\n    valueBrush.actionFn = `${action}Values`;\n  }\n\n  for (let i = 0; i < dataPoints.length; i++) {\n    const dataPoint = dataPoints[i];\n    if (!dataPoint) {\n      continue;\n    }\n    dataProps.forEach((p) => {\n      let d = dataPoint && !p ? dataPoint : dataPoint[p];\n      if (d) {\n        let it = { key: d.source.field };\n        if (typeof d.source.key !== 'undefined') {\n          it.key = `${d.source.key}/${d.source.field}`;\n        }\n        if (Array.isArray(d.value)) {\n          it.range = { min: d.value[0], max: d.value[1] };\n          rangeBrush.items.push(it);\n        } else {\n          it.value = d.value;\n          valueBrush.items.push(it);\n        }\n      }\n    });\n  }\n\n  trigger.contexts.forEach((c) => {\n    if (rangeBrush.items.length) {\n      chart.brush(c)[rangeBrush.actionFn](rangeBrush.items);\n    } else {\n      chart.brush(c)[valueBrush.actionFn](valueBrush.items); // call action even if there are items to potentially clear what is currently in the brush\n    }\n  });\n}\n\nexport function brushFromSceneNodes({\n  nodes,\n  action,\n  chart,\n  trigger\n}) {\n  const dataPoints = [];\n  for (let i = 0; i < nodes.length; i++) {\n    const node = nodes[i];\n    let nodeData = node.data;\n    if (nodeData !== null) {\n      dataPoints.push(nodeData);\n    }\n  }\n\n  brushDataPoints({\n    dataPoints,\n    action,\n    chart,\n    trigger\n  });\n}\n\nexport function resolveEvent({ collisions, t, config, action }) {\n  let brushCollisions = [];\n  let resolved = false;\n\n  if (collisions.length > 0) {\n    brushCollisions = collisions;\n    resolved = true;\n\n    if (t.propagation === 'stop') {\n      brushCollisions = [collisions[collisions.length - 1]];\n    }\n  }\n\n  const nodes = brushCollisions.map(c => c.node);\n  brushFromSceneNodes({\n    nodes,\n    action,\n    chart: config.chart,\n    data: config.data,\n    trigger: t\n  });\n\n  return resolved;\n}\n\nfunction touchSingleContactPoint(e, rect) {\n  if (e.changedTouches.length !== 1) {\n    return null;\n  }\n\n  return {\n    x: e.changedTouches[0].clientX - rect.left,\n    y: e.changedTouches[0].clientY - rect.top\n  };\n}\n\nfunction singleContactPoint(e, rect) {\n  return {\n    x: e.clientX - rect.left,\n    y: e.clientY - rect.top\n  };\n}\n\nfunction resolveCollisions(e, t, renderer) {\n  const rect = renderer.element().getBoundingClientRect();\n  let p = isTouchEvent(e) ? touchSingleContactPoint(e, rect) : singleContactPoint(e, rect);\n\n  if (p === null || p.x < 0 || p.y < 0 || p.x > rect.width || p.y > rect.height) { // TODO include radius in this check?\n    return [];\n  }\n\n  if (t.touchRadius > 0 && isTouchEvent(e)) {\n    p = {\n      cx: p.x,\n      cy: p.y,\n      r: t.touchRadius // TODO Use touch event radius/width value (Need to handle dpi scaling as well)\n    };\n  }\n\n  return renderer.itemsAt(p);\n}\n\nfunction resolveAction(action, e, def) {\n  if (action) {\n    if (typeof action === 'function') {\n      return action(e);\n    }\n    return action;\n  }\n  return def;\n}\n\nexport function resolveTapEvent({ e, t, config }) {\n  const collisions = resolveCollisions(e, t, config.renderer);\n\n  return resolveEvent({ collisions, t, config, action: resolveAction(t.action, e, 'toggle') });\n}\n\nexport function resolveOverEvent({ e, t, config }) {\n  const collisions = resolveCollisions(e, t, config.renderer);\n\n  return resolveEvent({ collisions, t, config, action: resolveAction(t.action, e, 'set') });\n}\n","import extend from 'extend';\nimport EventEmitter from '../utils/event-emitter';\nimport { list as listMixins } from './component-mixins';\nimport extractData from '../data/extractor';\nimport tween from './tween';\nimport settingsResolver from './settings-resolver';\nimport {\n  styler as brushStyler,\n  resolveTapEvent,\n  resolveOverEvent,\n  brushFromSceneNodes\n} from './brushing';\n\nconst isReservedProperty = prop => [\n  'on', 'preferredSize', 'created', 'beforeMount', 'mounted', 'resize',\n  'beforeUpdate', 'updated', 'beforeRender', 'render', 'beforeUnmount', 'beforeDestroy',\n  'destroyed', 'defaultSettings', 'data', 'settings', 'formatter',\n  'scale', 'chart', 'dockConfig', 'mediator', 'style', 'resolver', 'registries'\n].some(name => name === prop);\n\nfunction prepareContext(ctx, definition, opts) {\n  const {\n    require = []\n  } = definition;\n  const mediatorSettings = definition.mediator || {};\n  const {\n    settings,\n    formatter,\n    scale,\n    data,\n    renderer,\n    chart,\n    dockConfig,\n    mediator,\n    instance,\n    style,\n    registries,\n    resolver,\n    update\n  } = opts;\n\n  // TODO add setters and log warnings / errors to console\n  Object.defineProperty(ctx, 'settings', {\n    get: settings\n  });\n  Object.defineProperty(ctx, 'data', {\n    get: data\n  });\n  Object.defineProperty(ctx, 'formatter', {\n    get: formatter\n  });\n  Object.defineProperty(ctx, 'scale', {\n    get: scale\n  });\n  Object.defineProperty(ctx, 'mediator', {\n    get: mediator\n  });\n  Object.defineProperty(ctx, 'style', {\n    get: style\n  });\n  Object.defineProperty(ctx, 'registries', {\n    get: registries\n  });\n\n  Object.keys(definition).forEach((key) => {\n    if (!isReservedProperty(key)) {\n      // Add non-lifecycle methods to the context\n      if (typeof definition[key] === 'function') {\n        ctx[key] = definition[key].bind(ctx);\n      } else {\n        ctx[key] = definition[key];\n      }\n    }\n  });\n\n  // Add properties to context\n  require.forEach((req) => {\n    if (req === 'renderer') {\n      Object.defineProperty(ctx, 'renderer', {\n        get: renderer\n      });\n    } else if (req === 'chart') {\n      Object.defineProperty(ctx, 'chart', {\n        get: chart\n      });\n    } else if (req === 'dockConfig') {\n      Object.defineProperty(ctx, 'dockConfig', {\n        get: dockConfig\n      });\n    } else if (req === 'instance') {\n      Object.defineProperty(ctx, 'instance', {\n        get: instance\n      });\n    } else if (req === 'update' && update) {\n      Object.defineProperty(ctx, 'update', {\n        get: update\n      });\n    } else if (req === 'resolver') {\n      Object.defineProperty(ctx, 'resolver', {\n        get: resolver\n      });\n    }\n  });\n\n  Object.keys(mediatorSettings).forEach((eventName) => {\n    ctx.mediator.on(eventName, mediatorSettings[eventName].bind(ctx));\n  });\n}\n\nfunction updateDockConfig(config, settings) {\n  config.displayOrder = settings.displayOrder;\n  config.dock = settings.dock;\n  config.prioOrder = settings.prioOrder;\n  config.minimumLayoutMode = settings.minimumLayoutMode;\n  config.show = settings.show;\n  return config;\n}\n\nfunction setUpEmitter(ctx, emitter, settings) {\n  // Object.defineProperty(ctx, 'emitter', )\n  Object.keys(settings.on || {}).forEach((event) => {\n    ctx.eventListeners = ctx.eventListeners || [];\n    const listener = settings.on[event].bind(ctx);\n    ctx.eventListeners.push({ event, listener });\n    emitter.on(event, listener);\n  });\n  ctx.emit = (name, ...event) => emitter.emit(name, ...event);\n}\n\n// First render\n// preferredSize -> resize -> beforeRender -> render -> mounted\n\n// Normal update\n// beforeUpdate -> preferredSize -> resize -> beforeRender -> render -> updated\n\n// Update without relayout\n// beforeUpdate -> beforeRender -> render -> updated\n\n// TODO support es6 classes\nfunction componentFactory(definition, options = {}) {\n  const {\n    defaultSettings = {}\n  } = definition;\n  const {\n    chart,\n    container,\n    mediator,\n    registries,\n    theme,\n    renderer // Used by tests\n  } = options;\n  const config = options.settings || {};\n  const emitter = EventEmitter.mixin({});\n  let settings = extend(true, {}, defaultSettings, config);\n  let data = [];\n  let scale;\n  let formatter;\n  let element;\n  let size;\n  let style;\n  let resolver = settingsResolver({\n    chart\n  });\n\n  const brushArgs = {\n    nodes: [],\n    chart,\n    config: settings.brush || {},\n    renderer: null\n  };\n  const brushTriggers = {\n    tap: [],\n    over: []\n  };\n  const brushStylers = [];\n  const componentMixins = listMixins(settings.type);\n  const definitionContext = {};\n  const instanceContext = extend({}, config, componentMixins.filter(mixinName => !isReservedProperty(mixinName)));\n\n  // Create a callback that calls lifecycle functions in the definition and config (if they exist).\n  function createCallback(method, defaultMethod = () => {}) {\n    return function cb(...args) {\n      const inDefinition = typeof definition[method] === 'function';\n      const inConfig = typeof config[method] === 'function';\n\n      let returnValue;\n      if (inDefinition) {\n        returnValue = definition[method].call(definitionContext, ...args);\n      }\n      if (typeof config[method] === 'function') {\n        returnValue = config[method].call(instanceContext, ...args);\n      }\n      if (!inDefinition && !inConfig) {\n        returnValue = defaultMethod.call(definitionContext, ...args);\n      }\n      componentMixins.forEach((mixin) => {\n        if (mixin[method]) {\n          mixin[method].call(instanceContext, ...args);\n        }\n      });\n      return returnValue;\n    };\n  }\n\n  const preferredSize = createCallback('preferredSize', () => 0);\n  const resize = createCallback('resize', ({ inner }) => inner);\n  const created = createCallback('created');\n  const beforeMount = createCallback('beforeMount');\n  const mounted = createCallback('mounted');\n  const beforeUnmount = createCallback('beforeUnmount');\n  const beforeUpdate = createCallback('beforeUpdate');\n  const updated = createCallback('updated');\n  const beforeRender = createCallback('beforeRender');\n  const beforeDestroy = createCallback('beforeDestroy');\n  const destroyed = createCallback('destroyed');\n  const render = definition.render; // Do not allow overriding of this function\n\n  const addBrushStylers = () => {\n    if (settings.brush) {\n      (settings.brush.consume || []).forEach((b) => {\n        if (b.context && b.style) {\n          brushStylers.push(brushStyler(brushArgs, b));\n        }\n      });\n    }\n  };\n\n  const addBrushTriggers = () => {\n    if (settings.brush) {\n      (settings.brush.trigger || []).forEach((t) => {\n        if (t.on === 'over') {\n          brushTriggers.over.push(t);\n        } else {\n          brushTriggers.tap.push(t);\n        }\n      });\n    }\n  };\n\n  Object.defineProperty(brushArgs, 'data', {\n    get: () => data\n  });\n\n  const rendString = settings.renderer || definition.renderer;\n  const rend = rendString ? renderer || registries.renderer(rendString)() : renderer || registries.renderer()();\n  brushArgs.renderer = rend;\n\n  const dockConfig = {\n    requiredSize: (inner, outer) => preferredSize({\n      inner,\n      outer,\n      dock: dockConfig.dock\n    })\n  };\n  updateDockConfig(dockConfig, settings);\n\n  const fn = () => {};\n\n  fn.dockConfig = dockConfig;\n\n  // Set new settings - will trigger mapping of data and creation of scale / formatter.\n  fn.set = (opts = {}) => {\n    if (opts.settings) {\n      settings = extend(true, {}, defaultSettings, opts.settings);\n      updateDockConfig(dockConfig, settings);\n    }\n\n    if (settings.scale) {\n      scale = chart.scale(settings.scale);\n    }\n\n    if (settings.data) {\n      data = extractData(settings.data, { dataset: chart.dataset, collection: chart.dataCollection }, { logger: chart.logger() }, chart.dataCollection);\n    } else if (scale) {\n      data = scale.data();\n    } else {\n      data = [];\n    }\n\n    if (typeof settings.formatter === 'string') {\n      formatter = chart.formatter(settings.formatter);\n    } else if (typeof settings.formatter === 'object') {\n      formatter = chart.formatter(settings.formatter);\n    } else if (scale && scale.data().fields) {\n      formatter = scale.data().fields[0].formatter();\n    }\n\n    style = theme.style(settings.style || {});\n  };\n\n  fn.resize = (inner, outer) => {\n    const newSize = resize({\n      inner,\n      outer\n    });\n    if (newSize) {\n      rend.size(newSize);\n      size = newSize;\n    } else {\n      rend.size(inner);\n      size = inner;\n    }\n    instanceContext.rect = inner;\n  };\n\n  fn.getRect = () => instanceContext.rect;\n\n  const getRenderArgs = () => {\n    const renderArgs = rend.renderArgs ? rend.renderArgs.slice(0) : [];\n    renderArgs.push({\n      data\n    });\n    return renderArgs;\n  };\n\n  fn.beforeMount = beforeMount;\n\n  fn.beforeRender = () => {\n    beforeRender({\n      size\n    });\n  };\n\n  let currentNodes;\n\n  fn.render = () => {\n    const nodes = brushArgs.nodes = render.call(definitionContext, ...getRenderArgs());\n    rend.render(nodes);\n    currentNodes = nodes;\n  };\n\n  fn.hide = () => {\n    fn.unmount();\n    rend.size({\n      x: 0,\n      y: 0,\n      width: 0,\n      height: 0\n    });\n    rend.clear();\n  };\n\n  fn.beforeUpdate = () => {\n    beforeUpdate({\n      settings,\n      data\n    });\n  };\n\n  let currentTween;\n  fn.update = () => {\n    if (currentTween) {\n      currentTween.stop();\n    }\n    const nodes = brushArgs.nodes = render.call(definitionContext, ...getRenderArgs());\n\n    // Reset brush stylers and triggers\n    brushStylers.forEach(b => b.cleanUp());\n    brushStylers.length = 0;\n    brushTriggers.tap = [];\n    brushTriggers.over = [];\n\n    if (settings.brush) {\n      addBrushStylers();\n      addBrushTriggers();\n    }\n\n    brushStylers.forEach((bs) => {\n      if (bs.isActive()) {\n        bs.update();\n      }\n    });\n\n    if (currentNodes && settings.animations && settings.animations.enabled) {\n      currentTween = tween({\n        old: currentNodes,\n        current: nodes\n      }, { renderer: rend }, settings.animations);\n      currentTween.start();\n    } else {\n      rend.render(nodes);\n    }\n    currentNodes = nodes;\n  };\n\n  fn.updated = updated;\n\n  fn.destroy = () => {\n    fn.unmount();\n    beforeDestroy(element);\n    rend.destroy();\n    destroyed();\n    element = null;\n  };\n\n  /**\n   * Update active nodes. For now this can be used as a way update and apply brushing on nodes.\n   * Ex: if a component have changed the nodes since its initial render.\n   * @param {Nodes[]} nodes\n   * @deprecated\n   * @ignore\n   */\n  const updateNodes = (nodes) => {\n    brushArgs.nodes = nodes;\n    brushStylers.forEach((bs) => {\n      if (bs.isActive()) {\n        bs.update();\n      }\n    });\n    rend.render(nodes);\n  };\n\n  // Set contexts, note that the definition and instance need different contexts (for example if they have different 'require' props)\n  prepareContext(definitionContext, definition, {\n    settings: () => settings,\n    data: () => data,\n    scale: () => scale,\n    formatter: () => formatter,\n    renderer: () => rend,\n    chart: () => chart,\n    dockConfig: () => dockConfig,\n    mediator: () => mediator,\n    instance: () => instanceContext,\n    style: () => style,\n    update: () => updateNodes,\n    registries: () => registries,\n    resolver: () => resolver\n  });\n\n  prepareContext(instanceContext, config, {\n    settings: () => settings,\n    data: () => data,\n    scale: () => scale,\n    formatter: () => formatter,\n    renderer: () => rend,\n    chart: () => chart,\n    dockConfig: () => dockConfig,\n    mediator: () => mediator,\n    style: () => style\n  });\n\n  fn.getBrushedShapes = function getBrushedShapes(context, mode, props) {\n    const shapes = [];\n    if (settings.brush && settings.brush.consume) {\n      const brusher = chart.brush(context);\n      const sceneNodes = rend.findShapes('*');\n      settings.brush.consume\n        .filter(t => t.context === context)\n        .forEach((consume) => {\n          for (let i = 0; i < sceneNodes.length; i++) {\n            const node = sceneNodes[i];\n            if (node.data && brusher.containsMappedData(node.data, props || consume.data, mode)) {\n              shapes.push(node);\n              sceneNodes.splice(i, 1);\n              i--;\n            }\n          }\n        });\n    }\n    return shapes;\n  };\n\n  fn.findShapes = (selector) => {\n    const shapes = rend.findShapes(selector);\n    for (let i = 0, num = shapes.length; i < num; i++) {\n      shapes[i].key = settings.key;\n    }\n\n    return shapes;\n  };\n\n  fn.shapesAt = (shape, opts = {}) => {\n    const items = rend.itemsAt(shape);\n    let shapes;\n\n    if (opts && opts.propagation === 'stop' && items.length > 0) {\n      shapes = [items.pop().node];\n    } else {\n      shapes = items.map(i => i.node);\n    }\n\n    for (let i = 0, num = shapes.length; i < num; i++) {\n      shapes[i].key = settings.key;\n    }\n\n    return shapes;\n  };\n\n  fn.brushFromShapes = (shapes, trigger = {}) => {\n    trigger.contexts = Array.isArray(trigger.contexts) ? trigger.contexts : [];\n    const action = trigger.action || 'toggle';\n\n    brushFromSceneNodes({\n      nodes: shapes,\n      action,\n      trigger,\n      chart,\n      data: brushArgs.data\n    });\n  };\n\n  fn.mount = () => {\n    element = rend.element && rend.element() ? element : rend.appendTo(container);\n\n    if (settings.brush) {\n      addBrushStylers();\n      addBrushTriggers();\n    }\n\n    setUpEmitter(instanceContext, emitter, config);\n    setUpEmitter(definitionContext, emitter, definition);\n  };\n\n  fn.mounted = () => mounted(element);\n\n  fn.unmount = () => {\n    [instanceContext, definitionContext].forEach((ctx) => {\n      (ctx.eventListeners || []).forEach(({ event, listener }) => {\n        emitter.removeListener(event, listener);\n      });\n    });\n    brushTriggers.tap = [];\n    brushTriggers.over = [];\n    brushStylers.forEach((bs) => {\n      bs.cleanUp();\n    });\n    brushStylers.length = 0;\n    beforeUnmount();\n  };\n\n  fn.onBrushTap = (e) => {\n    brushTriggers.tap.forEach((t) => {\n      if (resolveTapEvent({ e, t, config: brushArgs }) && t.globalPropagation === 'stop') {\n        chart.toggleBrushing(true);\n      }\n    });\n  };\n\n  fn.onBrushOver = (e) => {\n    brushTriggers.over.forEach((t) => {\n      if (resolveOverEvent({ e, t, config: brushArgs }) && t.globalPropagation === 'stop') {\n        chart.toggleBrushing(true);\n      }\n    });\n  };\n\n  /**\n   * Expose definition on instance\n   * @private\n   * @experimental\n   */\n  fn.def = definitionContext;\n\n  /**\n   * Expose instanceCtx on \"instance\"\n   * @private\n   * @experimental\n   */\n  fn.ctx = instanceContext;\n\n  fn.renderer = () => rend;\n\n  fn.set({ settings: config });\n  created();\n\n  return fn;\n}\n\nexport default componentFactory;\n","import registry from '../utils/registry';\n\nconst typeMixins = registry();\nconst mixins = [];\n\nexport function add(mixin, types = []) {\n  if (types.length) {\n    types.forEach(type => typeMixins.add(type, mixin));\n  } else {\n    mixins.push(mixin);\n  }\n}\n\nexport function list(type) {\n  return mixins.concat(typeMixins.get(type) || []);\n}\n","import extend from 'extend';\nimport { interpolateObject } from 'd3-interpolate';\nimport {\n  easeCubic,\n  easeElasticOut\n} from 'd3-ease';\n\n/* globals window */\n\nfunction nodeId(node, i) {\n  if (node.data) {\n    return node.data.value;\n  } else if (node.type === 'text') {\n    return node.text;\n  }\n  return i;\n}\n\nfunction tween({\n  old,\n  current\n}, {\n  renderer\n}, config) {\n  let ticker;\n  // let staticNodes = [];\n  let toBeUpdated = [];\n  let entered = { nodes: [], ips: [] };\n  let exited = { nodes: [], ips: [] };\n  let updated = { nodes: [], ips: [] };\n  let stages = [];\n  const trackBy = config.trackBy || nodeId;\n\n  const tweener = {\n    start() {\n      let ids = {};\n      old.forEach((node, i) => {\n        let id = trackBy(node, i);\n        ids[id] = node;\n      });\n      current.forEach((node, i) => {\n        let id = trackBy(node, i);\n        if (ids[id]) {\n          updated.ips.push(interpolateObject(ids[id], node));\n          updated.nodes.push(node);\n          toBeUpdated.push(ids[id]);\n          ids[id] = false;\n        } else {\n          entered.nodes.push(node);\n          entered.ips.push(interpolateObject({\n            r: 0.001,\n            opacity: 0\n          }, node));\n        }\n      });\n      Object.keys(ids).forEach((key) => {\n        if (ids[key]) {\n          exited.nodes.push(ids[key]);\n          exited.ips.push(interpolateObject(ids[key], extend({}, ids[key], { r: 0.0001, opacity: 0 })));\n        }\n      });\n      if (exited.ips.length) {\n        stages.push({\n          easing: easeCubic,\n          duration: 200,\n          tweens: exited.ips,\n          nodes: [...toBeUpdated]\n        });\n      }\n      if (updated.ips.length) {\n        stages.push({\n          easing: easeCubic,\n          duration: 400,\n          tweens: updated.ips,\n          nodes: []\n        });\n      }\n      if (entered.ips.length) {\n        stages.push({\n          easing: easeElasticOut,\n          duration: 1200,\n          tweens: entered.ips,\n          nodes: [...updated.nodes]\n        });\n      }\n      // console.log(stages);\n      if (stages.length) {\n        stages[0].started = Date.now();\n        if (typeof window !== 'undefined') {\n          ticker = window.requestAnimationFrame(tweener.tick);\n        }\n      }\n    },\n    tick() {\n      let currentStage = stages[0];\n      if (!currentStage) {\n        tweener.stop();\n      }\n      if (!currentStage.started) {\n        currentStage.started = Date.now();\n      }\n      let t = (Date.now() - currentStage.started) / currentStage.duration;\n      let currentNodes = [];\n      let tweenedNodes = currentStage.tweens.map(ip => ip(currentStage.easing(Math.min(1, t))));\n      currentNodes.push(...tweenedNodes);\n      currentNodes.push(...currentStage.nodes);\n      // currentNodes.push(...staticNodes);\n      // stages.slice(1).forEach(stage => currentNodes.push(...stage.nodes));\n      renderer.render(currentNodes);\n      if (t >= 1) {\n        // staticNodes.push(...currentStage.nodes);\n        stages.shift();\n        if (!stages.length) {\n          tweener.stop();\n        }\n      }\n      if (ticker) {\n        ticker = window.requestAnimationFrame(tweener.tick);\n      }\n    },\n    stop() {\n      if (ticker) {\n        window.cancelAnimationFrame(ticker);\n        ticker = false;\n      }\n    }\n  };\n\n  return tweener;\n}\n\nexport {\n  tween as default\n};\n","export function add(v1, v2) {\n  return {\n    x: v1.x + v2.x,\n    y: v1.y + v2.y\n  };\n}\n\nexport function sub(v1, v2) {\n  return {\n    x: v1.x - v2.x,\n    y: v1.y - v2.y\n  };\n}\n\nexport function scalarMultiply(v, s) {\n  return {\n    x: v.x * s,\n    y: v.y * s\n  };\n}\n\nexport function sqrMagnitude(v) {\n  return Math.pow(v.x, 2) + Math.pow(v.y, 2);\n}\n\nexport function magnitude(v) {\n  return Math.sqrt(sqrMagnitude(v));\n}\n\nexport function distanceX(v1, v2) {\n  return v1.x - v2.x;\n}\n\nexport function distanceY(v1, v2) {\n  return v1.y - v2.y;\n}\n\nexport function sqrDistance(v1, v2) {\n  return Math.pow(distanceX(v1, v2), 2) + Math.pow(distanceY(v1, v2), 2);\n}\n\nexport function distance(v1, v2) {\n  return Math.sqrt(sqrDistance(v1, v2));\n}\n\nexport function determinant(v1, v2) {\n  return (v1.x * v2.y) - (v2.x * v1.y);\n}\n\nexport function dot(v1, v2) {\n  return (v1.x * v2.x) + (v1.y * v2.y);\n}\n\nexport function projectOnto(v1, v2) {\n  const m = dot(v1, v2) / dot(v2, v2) || 1;\n  return {\n    x: v2.x * m,\n    y: v2.y * m\n  };\n}\n\nexport function rotate(v, radians, origin = { x: 0, y: 0 }) {\n  const cos = Math.cos(radians);\n  const sin = Math.sin(radians);\n\n  const t1 = sub(v, origin);\n\n  const t2 = {\n    x: (cos * t1.x) - (sin * t1.y),\n    y: (sin * t1.x) + (cos * t1.y)\n  };\n\n  return add(t2, origin);\n}\n\nexport function unit(v) {\n  const m = magnitude(v);\n  return { x: v.x / m, y: v.y / m };\n}\n\nexport function cross(u, v, a) {\n  return ((v.x - u.x) * (a.y - u.y)) - ((v.y - u.y) * (v.x - u.x));\n}\n","import { add, sub, projectOnto, distance } from './vector';\n\nconst EPSILON = 1e-12;\n\nexport function closestPointToLine(start, end, p) {\n  const startToPoint = sub(p, start);\n  const startToEnd = sub(end, start);\n  const pointOnLine = add(projectOnto(startToPoint, startToEnd), start);\n  return pointOnLine;\n}\n\nexport function isPointOnLine(start, end, p) {\n  return (distance(start, p) + distance(end, p)) - distance(start, end) < EPSILON;\n}\n\nexport function isCollinear(p1, p2, p3, e = EPSILON) {\n  const t = Math.abs((p1.x * (p2.y - p3.y)) + (p2.x * (p3.y - p1.y)) + (p3.x * (p1.y - p2.y)));\n  return t < e;\n}\n","import {\n  sqrDistance,\n  distanceX,\n  distanceY\n} from './vector';\nimport {\n  closestPointToLine,\n  isPointOnLine\n} from './intersection';\nimport {\n  lineToPoints,\n  rectToPoints,\n  pointsToLine\n} from '../geometry/util';\n\nfunction lineHasNoLength(line) {\n  return line.x1 === line.x2 && line.y1 === line.y2;\n}\n\nfunction rectHasNoSize(rect) {\n  return rect.width <= 0 || rect.height <= 0;\n}\n\nfunction circleHasNoSize(circle) {\n  return circle.r <= 0;\n}\n\nfunction toFewEdges(polygon) {\n  return polygon.edges.length <= 2;\n}\n\n/**\n * @private\n */\nclass NarrowPhaseCollision {\n  /**\n   * Test if a Circle contains a point. If so, returns true and false otherwise.\n   * Circle muse have a radius greater then 0.\n   * @param {object} circle\n   * @param {number} circle.cx - center x-coordinate\n   * @param {number} circle.cy - center y-coordinate\n   * @param {number} circle.r - circle radius\n   * @param {object} point\n   * @param {number} point.x - x-coordinate\n   * @param {number} point.y - y-coordinate\n   * @return {boolean} true if circle contains point\n   */\n  static testCirclePoint(circle, point) {\n    if (circleHasNoSize(circle)) {\n      return false;\n    }\n\n    const center = { x: circle.cx, y: circle.cy };\n    const sqrDist = sqrDistance(center, point);\n\n    if (sqrDist <= Math.pow(circle.r, 2)) {\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * Test if a Circle collide with a rectangle. If so, returns true and false otherwise.\n   * Circle muse have a radius greater then 0.\n   * Rectangle must have a width and height greather then 0.\n   * @param {object} circle\n   * @param {number} circle.cx - center x-coordinate\n   * @param {number} circle.cy - center y-coordinate\n   * @param {number} circle.r - circle radius\n   * @param {object} rect\n   * @param {number} rect.x - x-coordinate\n   * @param {number} rect.y - y-coordinate\n   * @param {number} rect.width - width\n   * @param {number} rect.height - height\n   * @return {boolean} true if circle collide with rectangle\n  */\n  static testCircleRect(circle, rect) {\n    if (rectHasNoSize(rect) || circleHasNoSize(circle)) {\n      return false;\n    }\n    const rX = rect.width / 2;\n    const rY = rect.height / 2;\n    const rcX = rect.x + rX;\n    const rcY = rect.y + rY;\n    const r = circle.r;\n    const cx = circle.cx;\n    const cy = circle.cy;\n    const dX = Math.abs(cx - rcX);\n    const dY = Math.abs(cy - rcY);\n\n    if (dX > rX + r || dY > rY + r) { return false; }\n\n    if (dX <= rX || dY <= rY) { return true; }\n\n    const sqrDist = Math.pow(dX - rX, 2) + Math.pow(dY - rY, 2);\n\n    return sqrDist <= Math.pow(r, 2);\n  }\n\n  /**\n   * Test if a Circle collide with a line segment. If so, returns true and false otherwise.\n   * Circle muse have a radius greater then 0.\n   * Line must have a length greater then 0.\n   * @param {object} circle\n   * @param {number} circle.cx - center x-coordinate\n   * @param {number} circle.cy - center y-coordinate\n   * @param {number} circle.r - circle radius\n   * @param {object} line\n   * @param {number} line.x1 - x-coordinate\n   * @param {number} line.y1 - y-coordinate\n   * @param {number} line.x1 - x-coordinate\n   * @param {number} line.y1 - y-coordinate\n   * @return {boolean} true if circle collide with line\n  */\n  static testCircleLine(circle, line) {\n    if (circleHasNoSize(circle) || lineHasNoLength(line)) {\n      return false;\n    }\n\n    const [p1, p2] = lineToPoints(line);\n    if (NarrowPhaseCollision.testCirclePoint(circle, p1) || NarrowPhaseCollision.testCirclePoint(circle, p2)) {\n      return true;\n    }\n\n    const center = { x: circle.cx, y: circle.cy };\n    const pointOnLine = closestPointToLine(p1, p2, center);\n    const dist = sqrDistance(pointOnLine, center);\n\n    return dist <= Math.pow(circle.r, 2) && isPointOnLine(p1, p2, pointOnLine);\n  }\n\n   /**\n   * Test if a Circle collide with another Circle. If so, returns true and false otherwise.\n   * Both circles muse have a radius greater then 0.\n   * @param {object} circle\n   * @param {number} circle.cx - center x-coordinate\n   * @param {number} circle.cy - center y-coordinate\n   * @param {number} circle.r - circle radius\n   * @param {object} circle\n   * @param {number} circle.cx - center x-coordinate\n   * @param {number} circle.cy - center y-coordinate\n   * @param {number} circle.r - circle radius\n   * @return {boolean} true if circle collide with circle\n  */\n  static testCircleCircle(circle1, circle2) {\n    if (circleHasNoSize(circle1) || circleHasNoSize(circle2)) { return false; }\n\n    const dx = circle1.cx - circle2.cx;\n    const dy = circle1.cy - circle2.cy;\n    const sqrDist = Math.pow(dx, 2) + Math.pow(dy, 2);\n\n    if (sqrDist <= Math.pow(circle1.r + circle2.r, 2)) {\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * Test if a Circle collide with Polygon. If so, returns true and false otherwise.\n   * Circle muse have a radius greater then 0.\n   * Polygon must contain at least 2 vertices\n   * @param {object} circle\n   * @param {number} circle.cx - center x-coordinate\n   * @param {number} circle.cy - center y-coordinate\n   * @param {number} circle.r - circle radius\n   * @param {object} polygon\n   * @param {Array} polygon.vertices - Array of vertices\n   * @param {object} polygon.vertices.vertex\n   * @param {number} polygon.vertices.vertex.x - x-coordinate\n   * @param {number} polygon.vertices.vertex.y - y-coordinate\n   * @param {Array} polygon.edges - Array of edges\n   * @param {Array} polygon.edges.edge - Array of points\n   * @param {object} polygon.edges.edge.point\n   * @param {number} polygon.edges.edge.point.x - x-coordinate\n   * @param {number} polygon.edges.edge.point.y - y-coordinate\n   * @return {boolean} true if circle collide with polygon\n  */\n  static testCirclePolygon(circle, polygon) {\n    // TODO handle polygon that is a straight line, current impl will interrept it is a true, if radius is extended onto any of the edges\n    if (toFewEdges(polygon) || circleHasNoSize(circle)) {\n      return false;\n    }\n\n    const center = { x: circle.cx, y: circle.cy };\n    if (NarrowPhaseCollision.testPolygonPoint(polygon, center)) {\n      return true;\n    }\n\n    const num = polygon.edges.length;\n\n    for (let i = 0; i < num; i++) {\n      const edge = pointsToLine(polygon.edges[i]);\n      if (NarrowPhaseCollision.testCircleLine(circle, edge)) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  /**\n   * Test if a Polygon contains a Point. If so, returns true and false otherwise.\n   * Polygon must contain at least 2 vertices\n   * @param {object} polygon\n   * @param {Array} polygon.vertices - Array of vertices\n   * @param {object} polygon.vertices.vertex\n   * @param {number} polygon.vertices.vertex.x - x-coordinate\n   * @param {number} polygon.vertices.vertex.y - y-coordinate\n   * @param {Array} polygon.edges - Array of edges\n   * @param {Array} polygon.edges.edge - Array of points\n   * @param {object} polygon.edges.edge.point\n   * @param {number} polygon.edges.edge.point.x - x-coordinate\n   * @param {number} polygon.edges.edge.point.y - y-coordinate\n   * @param {object} point\n   * @param {number} point.x - x-coordinate\n   * @param {number} point.y - y-coordinate\n   * @return {boolean} true if polygon conatins point\n  */\n  static testPolygonPoint(polygon, point) {\n    // TODO handle polygon that is a straight line, current impl gives a non-deterministic output, that is depending on number of vertices\n    if (toFewEdges(polygon) || !NarrowPhaseCollision.testRectPoint(polygon.boundingRect(), point)) {\n      return false;\n    }\n\n    let even = true;\n    const num = polygon.vertices.length;\n    const rayStart = { x: polygon.xMin - 1, y: point.y };\n\n    for (let i = 0; i < num - 1; i++) {\n      const edge = pointsToLine(polygon.edges[i]);\n      if (!(edge.y1 < point.y && edge.y2 < point.y) && !(edge.y1 > point.y && edge.y2 > point.y)) { // filterout any edges that does not cross the ray\n        even = NarrowPhaseCollision.testLineLine(edge, pointsToLine([rayStart, point])) ? !even : even;\n      }\n    }\n    return !even;\n  }\n\n  /**\n   * Test if a Polygon collider with a line. If so, returns true and false otherwise.\n   * Polygon must contain at least 3 edges.\n   * Line must have length greater then 0.\n   * @param {object} polygon\n   * @param {Array} polygon.vertices - Array of vertices\n   * @param {object} polygon.vertices.vertex\n   * @param {number} polygon.vertices.vertex.x - x-coordinate\n   * @param {number} polygon.vertices.vertex.y - y-coordinate\n   * @param {Array} polygon.edges - Array of edges\n   * @param {Array} polygon.edges.edge - Array of points\n   * @param {object} polygon.edges.edge.point\n   * @param {number} polygon.edges.edge.point.x - x-coordinate\n   * @param {number} polygon.edges.edge.point.y - y-coordinate\n   * @param {object} line\n   * @param {number} line.x1 - x-coordinate\n   * @param {number} line.y1 - y-coordinate\n   * @param {number} line.x1 - x-coordinate\n   * @param {number} line.y1 - y-coordinate\n   * @return {boolean} true if polygon collider with line\n  */\n  static testPolygonLine(polygon, line) {\n    // TODO handle polygon that is a straight line, current impl gives a non-deterministic output, that is depending on number of vertices\n    if (toFewEdges(polygon)) {\n      return false;\n    }\n\n    for (let i = 0, num = polygon.edges.length; i < num; i++) {\n      const edge = pointsToLine(polygon.edges[i]);\n      if (NarrowPhaseCollision.testLineLine(line, edge)) {\n        return true;\n      }\n    }\n\n    const [p1, p2] = lineToPoints(line);\n\n    return NarrowPhaseCollision.testPolygonPoint(polygon, p1) ||\n      NarrowPhaseCollision.testPolygonPoint(polygon, p2);\n  }\n\n  /**\n   * Test if a Polygon collider with a rectangle. If so, returns true and false otherwise.\n   * Polygon must contain at least 3 edges.\n   * Rectangle must width and height greater then 0.\n   * @param {object} polygon\n   * @param {Array} polygon.vertices - Array of vertices\n   * @param {object} polygon.vertices.vertex\n   * @param {number} polygon.vertices.vertex.x - x-coordinate\n   * @param {number} polygon.vertices.vertex.y - y-coordinate\n   * @param {Array} polygon.edges - Array of edges\n   * @param {Array} polygon.edges.edge - Array of points\n   * @param {object} polygon.edges.edge.point\n   * @param {number} polygon.edges.edge.point.x - x-coordinate\n   * @param {number} polygon.edges.edge.point.y - y-coordinate\n   * @param {object} rect\n   * @param {number} rect.x - x-coordinate\n   * @param {number} rect.y - y-coordinate\n   * @param {number} rect.width - width\n   * @param {number} rect.height - height\n   * @return {boolean} true if polygon collider with rect\n  */\n  static testPolygonRect(polygon, rect) {\n    // TODO handle polygon that is a straight line, current impl gives a non-deterministic output, that is depending on number of vertices\n    if (toFewEdges(polygon)) {\n      return false;\n    }\n\n    for (let i = 0, num = polygon.edges.length; i < num; i++) {\n      const edge = pointsToLine(polygon.edges[i]);\n      if (NarrowPhaseCollision.testRectLine(rect, edge)) {\n        return true;\n      }\n    }\n\n    const [p1, p2, p3, p4] = rectToPoints(rect);\n    return NarrowPhaseCollision.testPolygonPoint(polygon, p1) ||\n      NarrowPhaseCollision.testPolygonPoint(polygon, p2) ||\n      NarrowPhaseCollision.testPolygonPoint(polygon, p3) ||\n      NarrowPhaseCollision.testPolygonPoint(polygon, p4);\n  }\n\n  /**\n   * Test if a Rectangle collide with another rectangle. If so, returns true and false otherwise.\n   * Both rectangles must have a width and height greather then 0.\n   * @param {object} rect\n   * @param {number} rect.x - x-coordinate\n   * @param {number} rect.y - y-coordinate\n   * @param {number} rect.width - width\n   * @param {number} rect.height - height\n   * @param {object} rect\n   * @param {number} rect.x - x-coordinate\n   * @param {number} rect.y - y-coordinate\n   * @param {number} rect.width - width\n   * @param {number} rect.height - height\n   * @return {boolean} true if rectangle collide with rectangle\n  */\n  static testRectRect(rect1, rect2) {\n    if (rectHasNoSize(rect1) || rectHasNoSize(rect2)) {\n      return false;\n    }\n\n    return rect1.x <= rect2.x + rect2.width &&\n      rect2.x <= rect1.x + rect1.width &&\n      rect1.y <= rect2.y + rect2.height &&\n      rect2.y <= rect1.y + rect1.height;\n  }\n\n  /**\n   * Test if a Rectangle contains a Point. If so, returns true and false otherwise.\n   * Rectangle must have a width and height greather then 0.\n   * @param {object} rect\n   * @param {number} rect.x - x-coordinate\n   * @param {number} rect.y - y-coordinate\n   * @param {number} rect.width - width\n   * @param {number} rect.height - height\n   * @param {object} point\n   * @param {number} point.x - x-coordinate\n   * @param {number} point.y - y-coordinate\n   * @return {boolean} true if rectangle contains point\n  */\n  static testRectPoint(rect, point) {\n    if (rectHasNoSize(rect)) { return false; }\n\n    return point.x >= rect.x &&\n      point.x <= rect.x + rect.width &&\n      point.y >= rect.y &&\n      point.y <= rect.y + rect.height;\n  }\n\n  /**\n   * Test if a Rectangle collider with a line. If so, returns true and false otherwise.\n   * Rectangle must have a width and height greather then 0.\n   * Line must have length greater then 0.\n   * @param {object} rect\n   * @param {number} rect.x - x-coordinate\n   * @param {number} rect.y - y-coordinate\n   * @param {number} rect.width - width\n   * @param {number} rect.height - height\n   * @param {object} line\n   * @param {number} line.x1 - x-coordinate\n   * @param {number} line.y1 - y-coordinate\n   * @param {number} line.x1 - x-coordinate\n   * @param {number} line.y1 - y-coordinate\n   * @return {boolean} true if rectangle collide with line\n  */\n  static testRectLine(rect, line) {\n    if (lineHasNoLength(line) || rectHasNoSize(rect)) { return false; }\n\n    const [p1, p2] = lineToPoints(line);\n\n    if (NarrowPhaseCollision.testRectPoint(rect, p1) || NarrowPhaseCollision.testRectPoint(rect, p2)) {\n      return true;\n    }\n\n    const rectEdges = rectToPoints(rect);\n    let num = rectEdges.length;\n    for (let i = 0; i < num; i++) {\n      const edge = pointsToLine([rectEdges[i], rectEdges[i !== 3 ? i + 1 : 0]]);\n      if (NarrowPhaseCollision.testLineLine(edge, line)) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * Test if a Line collider with another line. If so, returns true and false otherwise.\n   * Both lines must have length greater then 0.\n   * @param {object} line\n   * @param {number} line.x1 - x-coordinate\n   * @param {number} line.y1 - y-coordinate\n   * @param {number} line.x1 - x-coordinate\n   * @param {number} line.y1 - y-coordinate\n   * @param {object} line\n   * @param {number} line.x1 - x-coordinate\n   * @param {number} line.y1 - y-coordinate\n   * @param {number} line.x1 - x-coordinate\n   * @param {number} line.y1 - y-coordinate\n   * @return {boolean} true if line collide with line\n  */\n  static testLineLine(line1, line2) {\n    const [p1, p2] = lineToPoints(line1);\n    const [p3, p4] = lineToPoints(line2);\n    const dx1 = distanceX(p2, p1);\n    const dy1 = distanceY(p2, p1);\n    const dx2 = distanceX(p4, p3);\n    const dy2 = distanceY(p4, p3);\n    const dx3 = distanceX(p1, p3);\n    const dy3 = distanceY(p1, p3);\n    let ub = (dy2 * dx1) - (dx2 * dy1);\n    const uat = (dx2 * dy3) - (dy2 * dx3);\n    const ubt = (dx1 * dy3) - (dy1 * dx3);\n    let t1;\n    let t2;\n\n    if (dx1 === 0 && dy1 === 0) { // Line segment has no length\n      return false;\n    }\n\n    if (dx2 === 0 && dy2 === 0) { // Line segment has no length\n      return false;\n    }\n\n    if (ub === 0) {\n      if (uat === 0 && ubt === 0) { // COINCIDENT;\n        if (dx1 === 0) {\n          if (dy1 === 0) { // p1 = p2\n            return p1.x === p2.x && p1.y === p2.y;\n          }\n          t1 = distanceY(p3, p1) / dy1;\n          t2 = distanceY(p4, p1) / dy1;\n        } else {\n          t1 = (p3.x - p1.x) / dx1;\n          t2 = (p4.x - p1.x) / dx1;\n        }\n        if ((t1 < 0 && t2 < 0) || (t1 > 1 && t2 > 1)) {\n          return false;\n        }\n        return true;\n      }\n      return false; // PARALLEL;\n    }\n    const ua = uat / ub;\n    ub = ubt / ub;\n    if (ua >= 0.0 && ua <= 1.0 && ub >= 0.0 && ub <= 1.0) {\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * Test if a Line contains a Point. If so, returns true and false otherwise.\n   * Line must have length greater then 0.\n   * @param {object} line\n   * @param {number} line.x1 - x-coordinate\n   * @param {number} line.y1 - y-coordinate\n   * @param {number} line.x1 - x-coordinate\n   * @param {number} line.y1 - y-coordinate\n   * @param {object} point\n   * @param {number} point.x - x-coordinate\n   * @param {number} point.y - y-coordinate\n   * @return {boolean} true if line contains point\n  */\n  static testLinePoint(line, point) {\n    if (lineHasNoLength(line)) {\n      return false;\n    }\n\n    const [p1, p2] = lineToPoints(line);\n    return isPointOnLine(p1, p2, point);\n  }\n}\n\n\nexport {\n  NarrowPhaseCollision as default\n};\n","import extend from 'extend';\n\nconst VARIABLE_RX = /^\\$/;\nconst EXTEND = '@extend';\n\nfunction throwCyclical(s) {\n  throw new Error(`Cyclical reference for \"${s}\"`);\n}\n\nfunction res(style, references, path) {\n  if (typeof style === 'string') {\n    let value = references[style];\n    if (path.indexOf(style) !== -1) {\n      throwCyclical(style);\n    }\n    if (VARIABLE_RX.test(value)) {\n      path.push(style);\n      return res(value, references, path);\n    }\n    return value;\n  }\n  let computed = style;\n  const refs = extend(true, {}, references, style);\n  const s = {};\n\n  if (style[EXTEND]) {\n    const extendFrom = style[EXTEND];\n    if (path.indexOf(extendFrom) !== -1) {\n      throwCyclical(extendFrom);\n    }\n    let pext = path.slice();\n    pext.push(extendFrom);\n    computed = extend(true, {}, res(refs[extendFrom], references, pext), style);\n  }\n\n  Object.keys(computed).forEach((key) => {\n    let p = path.slice();\n    if (key === EXTEND || VARIABLE_RX.test(key)) {\n      return;\n    }\n    s[key] = computed[key];\n    let value = s[key];\n    if (VARIABLE_RX.test(value) && value in refs) {\n      if (path.indexOf(value) !== -1) {\n        throwCyclical(value);\n      }\n      p.push(value);\n      value = refs[value];\n      if (typeof value === 'object') {\n        s[key] = res(value, refs, p);\n      } else if (VARIABLE_RX.test(value) && value in refs) {\n        s[key] = res(value, refs, p);\n      } else {\n        s[key] = value;\n      }\n    } else if (typeof value === 'object') {\n      s[key] = res(value, refs, p);\n    }\n  });\n  return s;\n}\n\n/**\n * Resolve style references\n * @private\n * @param {style-object} style\n * @param {style-object} references\n * @returns {object} The resolved style\n * @example\n * resolve({\n *   label: '$label--big'\n * }, {\n *   '$size--m': '12px',\n *   '$label--big': {\n *     fontFamily: 'Arial',\n *     fontSize: '$size--m'\n *   }\n * }); // { label: { fontFamily: 'Arial', fontSize: '12px' } }\n */\nfunction resolve(style, references) {\n  return res(style, references, []);\n}\n\nexport {\n  resolve as default\n};\n","import styleResolver from '../style/resolver';\n\nfunction themeFn(style = {}, palettes = []) {\n  const pals = {};\n  palettes.forEach((palette) => {\n    pals[palette.key] = {\n      colors: palette.colors,\n      sizes: palette.colors.map(colors => colors.length)\n    };\n  });\n\n  const getPalette = (key, num) => {\n    const palette = pals[key];\n    if (!palette) {\n      return [];\n    }\n    const sizes = palette.sizes;\n    // find the first color set containing at least 'num' colors\n    for (let i = 0; i < sizes.length; i++) {\n      if (num <= sizes[i]) {\n        return palette.colors[i];\n      }\n    }\n    return palette.colors[sizes.length - 1];\n  };\n\n  /**\n   * Theme API\n   * @private\n   * @experimental\n   */\n  const theme = {\n    /**\n     * Get an array of colors\n     * @param {string} name - Name of the color palette\n     * @param {number} [num] - The minimum number of colors to get from the palette\n     */\n    palette: (name, num) => getPalette(name, num),\n\n    /**\n     * Resolve style references\n     * @param {style-object} s - Object containing\n     */\n    style: s => styleResolver(s, style)\n  };\n\n  return theme;\n}\n\nexport {\n  themeFn as default\n};\n","import extend from 'extend';\n\nimport * as mixins from './chart-mixins';\nimport createDockLayout from '../dock-layout/dock-layout';\nimport {\n  detectTouchSupport,\n  isValidTapEvent\n} from '../utils/event-type';\nimport { getShapeType } from '../geometry/util';\nimport datasources from '../data/data';\nimport dataCollections from '../data/collections';\nimport buildFormatters, { getOrCreateFormatter } from './formatter';\nimport { builder as buildScales, getOrCreateScale } from './scales';\nimport buildScroll, { getOrCreateScrollApi } from './scroll-api';\nimport brush from '../brush';\nimport componentFactory from '../component/component-factory';\nimport mediatorFactory from '../mediator';\nimport NarrowPhaseCollision from '../math/narrow-phase-collision';\nimport themeFn from '../theme';\n\n/**\n * @typedef {object} component-settings\n * @property {string} type - Component type (ex: axis, point, ...)\n * @property {function} [preferredSize] - Function returning the preferred size\n * @property {function} [created]\n * @property {function} [beforeMount]\n * @property {function} [mounted]\n * @property {function} [beforeUpdate]\n * @property {function} [updated]\n * @property {function} [beforeRender]\n * @property {function} [beforeDestroy]\n * @property {function} [destroyed]\n * @property {brush-setting} [brush] see [brushing](./brushing.md)\n * @property {number} [displayOrder = 0]\n * @property {number} [prioOrder = 0]\n * @property {boolean} [show = true] If the component should be rendered\n * @property {string | {width: string, height: string}} [minimumLayoutMode] Refer to layout sizes defined by layoutModes in dockLayout\n * @property {string} [dock] left, right, top or bottom\n * @property {string} [scale] Named scale. Will be provided to the component if it ask for it.\n * @property {string} [formatter] Named formatter. Fallback to create formatter from scale. Will be provided to the component if it ask for it.\n */\n\nconst isReservedProperty = prop => [\n  'on', 'created', 'beforeMount', 'mounted', 'resize',\n  'beforeUpdate', 'updated', 'beforeRender', 'render', 'beforeDestroy',\n  'destroyed', 'data', 'settings'\n].some(name => name === prop);\n\nfunction addComponentDelta(shape, containerBounds, componentBounds) {\n  const dx = containerBounds.left - componentBounds.left;\n  const dy = containerBounds.top - componentBounds.top;\n  const type = getShapeType(shape);\n  const deltaShape = extend(true, {}, shape);\n\n  switch (type) {\n    case 'circle':\n      deltaShape.cx += dx;\n      deltaShape.cy += dy;\n      break;\n    case 'polygon':\n      for (let i = 0, num = deltaShape.vertices.length; i < num; i++) {\n        const v = deltaShape.vertices[i];\n        v.x += dx;\n        v.y += dy;\n      }\n      break;\n    case 'line':\n      deltaShape.x1 += dx;\n      deltaShape.y1 += dy;\n      deltaShape.x2 += dx;\n      deltaShape.y2 += dy;\n      break;\n    case 'point':\n    case 'rect':\n      deltaShape.x += dx;\n      deltaShape.y += dy;\n      break;\n    default:\n      break;\n  }\n\n  return deltaShape;\n}\n\nfunction chartFn(definition, context) {\n  /**\n   * @typedef {object} chart-definition\n   */\n  let {\n    /**\n     * @type {HTMLElement}\n     * @memberof chart-definition\n     */\n    element,\n    /**\n     * @type {Array<data-source>}\n     * @memberof chart-definition\n     */\n    data = [],\n    /**\n     * @type {chart-settings}\n     * @memberof chart-definition\n     */\n    settings = {},\n    on = {}\n  } = definition;\n\n  const registries = context.registries;\n  const logger = context.logger;\n  const theme = themeFn(context.style, context.palettes);\n\n  const chartMixins = mixins.list();\n  const listeners = [];\n  /**\n   * @alias chart\n   * @interface\n   */\n  const instance = extend({},\n    definition,\n    chartMixins.filter(mixinName => !isReservedProperty(mixinName))\n  );\n  const mediator = mediatorFactory();\n  let currentComponents = []; // Augmented components\n  let visibleComponents = [];\n\n  let currentScales = null; // Built scales\n  let currentFormatters = null; // Built formatters\n  let currentScrollApis = null; // Build scroll apis\n  let currentInteractions = [];\n\n  let dataset = () => {};\n  let dataCollection = () => {};\n  const brushes = {};\n  let stopBrushing = false;\n\n  const createComponent = (compSettings, container) => {\n    const componentDefinition = registries.component(compSettings.type);\n    const compInstance = componentFactory(componentDefinition, {\n      settings: compSettings,\n      chart: instance,\n      mediator,\n      registries,\n      theme,\n      container\n    });\n    return {\n      instance: compInstance,\n      settings: extend(true, {}, compSettings),\n      key: compSettings.key,\n      hasKey: typeof compSettings.key !== 'undefined'\n    };\n  };\n\n  // Create a callback that calls lifecycle functions in the definition and config (if they exist).\n  function createCallback(method, defaultMethod = () => {}) {\n    return function cb(...args) {\n      const inDefinition = typeof definition[method] === 'function';\n\n      let returnValue;\n      if (inDefinition) {\n        returnValue = definition[method].call(instance, ...args);\n      } else {\n        returnValue = defaultMethod.call(instance, ...args);\n      }\n      chartMixins.forEach((mixin) => {\n        if (mixin[method]) {\n          mixin[method].call(instance, ...args);\n        }\n      });\n      return returnValue;\n    };\n  }\n\n  const findComponent = (componentInstance) => {\n    for (let i = 0; i < currentComponents.length; i++) {\n      if (currentComponents[i].instance === componentInstance) {\n        return currentComponents[i];\n      }\n    }\n    return null;\n  };\n\n  const findComponentIndexByKey = (key) => {\n    for (let i = 0; i < currentComponents.length; i++) {\n      const currComp = currentComponents[i];\n      if (currComp.hasKey && currComp.key === key) {\n        return i;\n      }\n    }\n    return -1;\n  };\n\n  const layout = (components) => {\n    const dockLayout = createDockLayout(settings.dockLayout);\n    components.forEach((c) => { dockLayout.addComponent(c.instance, c.key); });\n\n    const { visible, hidden } = dockLayout.layout(element);\n    return {\n      visible: visible.map(v => findComponent(v)),\n      hidden: hidden.map(h => findComponent(h))\n    };\n  };\n\n  const moveToPosition = (comp, index) => {\n    const el = comp.instance.renderer().element();\n    if (isNaN(index) || !el || !element || !element.childNodes) { return; }\n    const nodes = element.childNodes;\n    const i = Math.min(nodes.length - 1, Math.max(index, 0));\n    const node = nodes[i];\n    if (element.insertBefore && typeof node !== 'undefined') {\n      element.insertBefore(el, nodes[i]);\n    }\n  };\n\n  const created = createCallback('created');\n  const beforeMount = createCallback('beforeMount');\n  const mounted = createCallback('mounted');\n  const beforeUpdate = createCallback('beforeUpdate');\n  const updated = createCallback('updated');\n  const beforeRender = createCallback('beforeRender');\n  const beforeDestroy = createCallback('beforeDestroy');\n  const destroyed = createCallback('destroyed');\n\n  const set = (_data, _settings, { partialData } = {}) => {\n    const {\n      formatters = {},\n      scales = {},\n      scroll = {}\n    } = _settings;\n\n    dataset = datasources(_data, { logger, types: registries.data });\n    if (!partialData) {\n      Object.keys(brushes).forEach(b => brushes[b].clear());\n    }\n    dataCollection = dataCollections(_settings.collections, { dataset }, { logger });\n    currentScales = buildScales(scales, { dataset, collection: dataCollection }, { scale: registries.scale, theme, logger });\n    currentFormatters = buildFormatters(formatters, { dataset, collection: dataCollection }, { formatter: registries.formatter, theme, logger });\n    currentScrollApis = buildScroll(scroll, currentScrollApis);\n  };\n\n  const render = () => {\n    const {\n      components = []\n    } = settings;\n\n    beforeRender();\n\n    set(data, settings);\n\n    currentComponents = components.map(compSettings => (\n      createComponent(compSettings, element)\n    ));\n\n    const { visible, hidden } = layout(currentComponents);\n    visibleComponents = visible;\n\n    hidden.forEach((comp) => {\n      comp.instance.hide();\n      comp.visible = false;\n    });\n\n    visible.forEach(comp => comp.instance.beforeMount());\n    visible.forEach(comp => comp.instance.mount());\n    visible.forEach(comp => comp.instance.beforeRender());\n\n    visible.forEach(comp => comp.instance.render());\n    visible.forEach(comp => comp.instance.mounted());\n    visible.forEach((comp) => { comp.visible = true; });\n  };\n\n  function setInteractions(interactions = []) {\n    const current = {};\n    const newKeys = interactions.filter(it => !!it.key).map(it => it.key);\n    currentInteractions.forEach((cit) => {\n      if (cit.key && newKeys.indexOf(cit.key) !== -1) { // keep old instance\n        current[cit.key] = cit;\n      } else {\n        cit.destroy();\n      }\n    });\n    currentInteractions = interactions.map((intSettings) => {\n      const intDefinition = intSettings.key && current[intSettings.key] ? current[intSettings.key] : registries.interaction(intSettings.type)(instance, mediator, element);\n      intDefinition.set(intSettings);\n      return intDefinition;\n    });\n  }\n\n  const componentsFromPoint = (p) => {\n    const br = element.getBoundingClientRect();\n    const x = 'clientX' in p ? p.clientX : p.x;\n    const y = 'clientY' in p ? p.clientY : p.y;\n    const tp = { x: x - br.left, y: y - br.top };\n    const ret = [];\n    visibleComponents.forEach((c) => {\n      const r = c.instance.getRect();\n      if (NarrowPhaseCollision.testRectPoint(r, tp)) {\n        ret.push(c);\n      }\n    });\n    return ret;\n  };\n\n  // Browser only\n  const mount = () => {\n    element.innerHTML = '';\n\n    render();\n\n    Object.keys(on).forEach((key) => {\n      const listener = on[key].bind(instance);\n      element.addEventListener(key, listener);\n      listeners.push({\n        key,\n        listener\n      });\n    });\n\n    const eventInfo = {};\n    const onTapDown = (e) => {\n      if (e.touches) {\n        eventInfo.x = e.touches[0].clientX;\n        eventInfo.y = e.touches[0].clientY;\n        eventInfo.multiTouch = e.touches.length > 1;\n      } else {\n        eventInfo.x = e.clientX;\n        eventInfo.y = e.clientY;\n        eventInfo.multiTouch = false;\n      }\n      eventInfo.time = Date.now();\n      eventInfo.comps = componentsFromPoint(eventInfo);\n    };\n\n    const onBrushTap = (e) => {\n      if (e.type === 'touchend') {\n        e.preventDefault();\n      }\n      if (!isValidTapEvent(e, eventInfo)) {\n        return;\n      }\n\n      const comps = eventInfo.comps || componentsFromPoint(e);\n\n      for (let i = comps.length - 1; i >= 0; i--) {\n        const comp = comps[i];\n        comp.instance.onBrushTap(e);\n        if (stopBrushing) {\n          stopBrushing = false;\n          break;\n        }\n      }\n    };\n\n    const onBrushOver = (e) => {\n      const comps = componentsFromPoint(e);\n      for (let i = comps.length - 1; i >= 0; i--) {\n        const comp = comps[i];\n        comp.instance.onBrushOver(e);\n        if (stopBrushing) {\n          stopBrushing = false;\n          break;\n        }\n      }\n    };\n\n    const brushEventList = [];\n\n    brushEventList.push({ key: 'mousedown', listener: onTapDown });\n    brushEventList.push({ key: 'mouseup', listener: onBrushTap });\n\n    if (detectTouchSupport(element)) {\n      brushEventList.push({ key: 'touchstart', listener: onTapDown });\n      brushEventList.push({ key: 'touchend', listener: onBrushTap });\n    }\n\n    brushEventList.push({ key: 'mousemove', listener: onBrushOver });\n\n    brushEventList.forEach((event) => {\n      element.addEventListener(event.key, event.listener);\n      listeners.push(event);\n    });\n    setInteractions(settings.interactions);\n  };\n\n  const unmount = () => {\n    listeners.forEach(({ key, listener }) => element.removeEventListener(key, listener));\n    setInteractions();\n  };\n\n  /**\n   * Update the chart with new settings and / or data\n   * @param {chart-definition} [chart] - Chart definition\n   */\n  instance.update = (newProps = {}) => {\n    const { partialData } = newProps;\n    if (newProps.data) {\n      data = newProps.data;\n    }\n    if (newProps.settings) {\n      settings = newProps.settings;\n      setInteractions(newProps.settings.interactions);\n    }\n\n    beforeUpdate();\n\n    set(data, settings, { partialData });\n\n    const {\n      formatters,\n      scales,\n      components = []\n    } = settings;\n\n    for (let i = currentComponents.length - 1; i >= 0; i--) {\n      const currComp = currentComponents[i];\n      // TODO warn when there is no key\n      if (!components.some(c => currComp.hasKey && currComp.key === c.key)) {\n        // Component is removed\n        currentComponents.splice(i, 1);\n        currComp.instance.destroy();\n      }\n    }\n\n    // Let the \"components\" array determine order of components\n    currentComponents = components.map((comp) => {\n      const idx = findComponentIndexByKey(comp.key);\n      if (idx === -1) {\n        // Component is added\n        return createComponent(comp, element);\n      }\n      // Component is (potentially) updated\n      currentComponents[idx].updateWith = {\n        formatters,\n        scales,\n        data,\n        settings: comp\n      };\n      return currentComponents[idx];\n    });\n\n    currentComponents.forEach((comp) => {\n      if (comp.updateWith) {\n        comp.instance.set(comp.updateWith);\n      }\n    });\n    currentComponents.forEach((comp) => {\n      if (comp.updateWith) {\n        comp.instance.beforeUpdate();\n      }\n    });\n\n    const toUpdate = [];\n    const toRender = [];\n    if (partialData) {\n      currentComponents.forEach((comp) => {\n        if (comp.updateWith && comp.visible) {\n          toUpdate.push(comp);\n        }\n      });\n    } else {\n      const { visible, hidden } = layout(currentComponents); // Relayout\n      visibleComponents = visible;\n\n      visible.forEach((comp) => {\n        if (comp.updateWith && comp.visible) {\n          toUpdate.push(comp);\n        } else {\n          toRender.push(comp);\n        }\n      });\n\n      hidden.forEach((comp) => {\n        comp.instance.hide();\n        comp.visible = false;\n        delete comp.updateWith;\n      });\n    }\n\n    toRender.forEach(comp => comp.instance.beforeMount());\n    toRender.forEach(comp => comp.instance.mount());\n\n    toRender.forEach(comp => comp.instance.beforeRender());\n    toUpdate.forEach(comp => comp.instance.beforeRender());\n\n    toRender.forEach(comp => comp.instance.render());\n    toUpdate.forEach(comp => comp.instance.update());\n\n    // Ensure that displayOrder is keept\n    visibleComponents.forEach((comp, i) => moveToPosition(comp, i));\n\n    toRender.forEach(comp => comp.instance.mounted());\n    toUpdate.forEach(comp => comp.instance.updated());\n\n    visibleComponents.forEach((comp) => {\n      delete comp.updateWith;\n      comp.visible = true;\n    });\n\n    updated();\n  };\n\n  /**\n   * Destroy the chart instance.\n   */\n  instance.destroy = () => {\n    beforeDestroy();\n    currentComponents.forEach(comp => comp.instance.destroy());\n    currentComponents = [];\n    unmount();\n    delete instance.update;\n    delete instance.destroy;\n    destroyed();\n  };\n\n  /**\n   * Get all shapes associated with the provided context\n   * @param {string} context The brush context\n   * @param {string} mode Property comparasion mode.\n   * @param {Array<string>} props Which specific data properties to compare\n   * @param {string} key Which component to get shapes from. Default gives shapes from all components.\n   * @return {Array<object>} Array of objects containing shape and parent element\n   */\n  instance.getAffectedShapes = (ctx, mode = 'and', props, key) => {\n    const shapes = [];\n    currentComponents.filter(comp => key === undefined || key === null || comp.key === key).forEach((comp) => {\n      shapes.push(...comp.instance.getBrushedShapes(ctx, mode, props));\n    });\n    return shapes;\n  };\n\n  /**\n   * Get all nodes matching the provided selector\n   * @param {string} selector CSS selector [type, attribute, universal, class]\n   * @returns {Array<SceneNode>} Array of objects containing matching nodes\n   *\n   * @example\n   * chart.findShapes('Circle') // [<CircleNode>, <CircleNode>]\n   * chart.findShapes('Circle[fill=\"red\"][stroke!=\"black\"]') // [CircleNode, CircleNode]\n   * chart.findShapes('Container Rect') // [Rect, Rect]\n   */\n  instance.findShapes = (selector) => {\n    const shapes = [];\n    visibleComponents.forEach((c) => {\n      shapes.push(...c.instance.findShapes(selector));\n    });\n    return shapes;\n  };\n\n  /**\n   * Get components overlapping a point.\n   * @param {point} p - Point with x- and y-cooridnate. The coordinate is relative to the browser viewport.\n   * @returns {Array<component-context>} Array of component contexts\n   */\n  instance.componentsFromPoint = p => componentsFromPoint(p).map(comp => comp.instance.ctx);\n\n  /**\n   * Get all nodes colliding with a geometrical shape (circle, line, rectangle, point, polygon).\n   *\n   * The input shape is identified based on the geometrical attributes in the following order: circle => line => rectangle => point => polygon.\n   * Note that not all nodes on a scene have collision detection enabled.\n   * @param {line|rect|point|circle} shape - A geometrical shape. Coordinates are relative to the top-left corner of the chart instance container.\n   * @param {object} opts - Options\n   * @param {object[]} [opts.components] - Array of components to include in the lookup. If no components are specified, all components will be included.\n   * @param {string} [opts.components[].component.key] - Component key\n   * @param {string} [opts.components[].component.propagation] - if set to `stop`, will start lookup on top visible shape and propagate downwards until a shape is found.\n   * @param {string} [opts.propagation] - if set to `stop`, will start lookup on top visible component and propagate downwards until a component has at least a match.\n   * @returns {Array<SceneNode>} Array of objects containing colliding nodes\n   *\n   * @example\n   * chart.shapesAt(\n   *  {\n   *    x: 0,\n   *    y: 0,\n   *    width: 100,\n   *    height: 100\n   *  },\n   *  {\n   *    components: [\n   *      { key: 'key1', propagation: 'stop' },\n   *      { key: 'key2' }\n   *    ],\n   *    propagation: 'stop'\n   *  }\n   * );\n   */\n  instance.shapesAt = (shape, opts = {}) => {\n    const result = [];\n    const containerBounds = element.getBoundingClientRect();\n    let comps = visibleComponents; // Assume that visibleComponents is ordererd according to displayOrder\n\n    if (Array.isArray(opts.components) && opts.components.length > 0) {\n      const compKeys = opts.components.map(c => c.key);\n      comps = visibleComponents\n        .filter(c => compKeys.indexOf(c.key) !== -1)\n        .map(c => ({\n          instance: c.instance,\n          opts: opts.components[compKeys.indexOf(c.key)]\n        }));\n    }\n\n    for (let i = comps.length - 1; i >= 0; i--) {\n      const c = comps[i];\n      const componentBounds = c.instance.renderer().element().getBoundingClientRect();\n      const deltaShape = addComponentDelta(shape, containerBounds, componentBounds);\n      const shapes = c.instance.shapesAt(deltaShape, c.opts);\n      const stopPropagation = shapes.length > 0 && opts.propagation === 'stop';\n\n      result.push(...shapes);\n\n      if (result.length > 0 && stopPropagation) {\n        return result;\n      }\n    }\n    return result;\n  };\n\n\n  /**\n   * Brush data by providing a collection of data bound shapes.\n   * @param {SceneNode[]} shapes - An array of data bound shapes.\n   * @param {object} config - Options\n   * @param {Array<object>} opts.components - Array of components to include in the lookup.\n   * @param {string} [opts.components.component.key] - Component key\n   * @param {Array<string>} [opts.components.component.contexts] - Name of the brushing contexts to affect\n   * @param {Array<string>} [opts.components.component.data] - The mapped data properties to add to the brush\n   * @param {string} [opts.components.component.action] - Type of action to respond with\n   *\n   * @example\n   * const shapes = chartInstance.shapesAt(...);\n   * const config = {\n   *  components:[\n   *    {\n   *      key: 'key1',\n   *      contexts: ['myContext'],\n   *      data: [''],\n   *      action: 'add'\n   *    }\n   *  ]\n   * };\n   * chartInstance.brushFromShapes(shapes, config);\n   */\n  instance.brushFromShapes = (shapes, config = { components: [] }) => {\n    const configKeys = config.components.map(conf => conf.key);\n    visibleComponents.forEach((c) => {\n      const configIndex = configKeys.indexOf(c.key);\n      if (configIndex !== -1) {\n        const compShapes = [];\n        for (let i = 0, num = shapes.length; i < num; i++) {\n          const shape = shapes[i];\n          if (shape.key === c.key) {\n            compShapes.push(shape);\n          }\n        }\n        c.instance.brushFromShapes(compShapes, config.components[configIndex]);\n      }\n    });\n  };\n\n  /**\n   * @param {string} name - Name of scroll api\n   * @returns {scroll}\n   */\n  instance.scroll = function scroll(name = 'default') {\n    return getOrCreateScrollApi(name, currentScrollApis);\n  };\n\n  /**\n   * Get\n   * @param {string} key - Get the dataset identified by `key`\n   * @returns {dataset}\n   */\n  instance.dataset = key => dataset(key);\n\n  instance.dataCollection = key => dataCollection(key);\n\n  /**\n   * Get the all registered scales\n   * @returns {Array<scale>} Array of scales\n   */\n  instance.scales = function scales() {\n    return currentScales;\n  };\n\n  /**\n   * Get the all registered formatters\n   * @returns {Array<formatter>} Array of formatters\n   */\n  instance.formatters = function formatters() {\n    return currentFormatters;\n  };\n\n  /**\n   * Get or create brush context for this chart\n   * @param {string} name - Name of the brush context. If no match is found, a new brush context is created and returned.\n   * @returns {brush}\n   */\n  instance.brush = function brushFn(name = 'default') {\n    if (!brushes[name]) {\n      brushes[name] = brush();\n    }\n    return brushes[name];\n  };\n\n  /**\n   * Get or create a scale for this chart\n   * @param {string|object} v - Scale reference or scale options\n   * @returns {scale}\n   * @example\n   * instance.scale('nameOfMyScale'); // Fetch an existing scale by name\n   * instance.scale({ scale: 'nameOfMyScale' }); // Fetch an existing scale by name\n   * instance.scale({ source: '0/1', type: 'linear' }); // Create a new scale\n   */\n  instance.scale = function scale(v) {\n    return getOrCreateScale(v, currentScales, { dataset, collection: dataCollection }, { scale: registries.scale, theme, logger });\n  };\n\n  /**\n   * Get or create a formatter for this chart\n   * @param {string|object} v - Formatter reference or formatter options\n   * @returns {formatter}\n   * @example\n   * instance.formatter('nameOfMyFormatter'); // Fetch an existing formatter by name\n   * instance.formatter({ formatter: 'nameOfMyFormatter' }); // Fetch an existing formatter by name\n   * instance.formatter({ type: 'q' }); // Fetch an existing formatter by type\n   * instance.formatter({\n   *  formatter: 'd3',\n   *  type: 'number',\n   *  format: '1.0.%'\n   * }); // Create a new formatter\n   */\n  instance.formatter = function formatter(v) {\n    return getOrCreateFormatter(v, currentFormatters, { dataset, collection: dataCollection }, { formatter: registries.formatter, theme, logger });\n  };\n\n  /**\n   * @param {boolean} [val] - Toggle brushing on or off. If value is omitted, a toggle action is applied to the current state.\n   */\n  instance.toggleBrushing = function toggleBrushing(val) {\n    if (typeof val !== 'undefined') {\n      stopBrushing = val;\n    } else {\n      stopBrushing = !stopBrushing;\n    }\n  };\n\n  /**\n   * Get a component context\n   * @param {string} key - Component key\n   * @returns {component-context} Component context\n   */\n  instance.component = (key) => {\n    const idx = findComponentIndexByKey(key);\n    if (idx !== -1) {\n      return currentComponents[idx].instance.ctx;\n    }\n    return undefined;\n  };\n\n  instance.logger = () => logger;\n\n  /**\n   * Get the all interactions instances\n   * @name chart.interactions\n   * @type {object}\n   * @example\n   * chart.interactions.instances; // Array of all interaction instances\n   * chart.interactions.on(); // Toggle on all interactions instances\n   * chart.interactions.off(); // Toggle off all interactions instances\n   */\n  Object.defineProperty(instance, 'interactions', {\n    get() {\n      return /** @lends chart.interactions */ {\n        /** @type Array<interaction> */\n        instances: currentInteractions,\n        /** Enable all interaction instances */\n        on() {\n          currentInteractions.forEach(i => i.on());\n        },\n        /** Disable all interaction instances */\n        off() {\n          currentInteractions.forEach(i => i.off());\n        }\n      };\n    }\n  });\n\n  created();\n\n  if (element) {\n    beforeMount();\n    mount(element);\n    mounted(element);\n    instance.element = element;\n  }\n\n  return instance;\n}\n\nchartFn.mixin = mixins.add; // Expose mixin registering function\n\nexport default chartFn;\n","const mixins = [];\n\nexport function add(mixin) {\n  mixins.push(mixin);\n}\n\nexport function list() {\n  return mixins;\n}\n","import EventEmitter from '../utils/event-emitter';\n\nexport default function mediator() {\n  const instance = {};\n  EventEmitter.mixin(instance);\n  return instance;\n}\n","// import types from './types';\n\n/**\n * @ignore\n * @param {Array<data-source>} dataSources\n * @param {any} { logger }\n * @returns {function}\n */\nexport default function datasets(dataSources, { types, logger }) {\n  const data = {};\n\n  const sets = [];\n  if (!Array.isArray(dataSources)) {\n    logger.warn('Deprecated: \"data-source\" configuration\"');\n    sets.push(dataSources);\n  } else {\n    sets.push(...dataSources);\n  }\n\n  sets.forEach((d, i) => {\n    let datasetFactory = types(d.type);\n    if (datasetFactory) {\n      let key = d.key || i;\n      let dataset = datasetFactory({\n        key,\n        data: d.data,\n        config: d.config\n      });\n      data[d.key || i] = dataset;\n    }\n  });\n\n  /**\n   * Returns the `dataset` which has `key` as identifier\n   * @ignore\n   * @param {string} key - The dataset identifier\n   * @returns {dataset}\n   */\n  const fn = (key) => {\n    if (key) {\n      return data[key];\n    }\n    return data[Object.keys(data)[0]];\n  };\n  return fn;\n}\n\n/**\n * @typedef {object} data-source\n * @property {string} key - Unique identifier for this data source\n * @property {string} type - The dataset type\n * @property {any} data\n */\n","import extend from 'extend';\nimport extract from './extractor';\n\nfunction create(config, d, opts, extractor = extract) {\n  const collections = {};\n\n  (config || []).forEach((cfg) => {\n    if (!cfg.key) {\n      throw new Error('Data collection is missing \"key\" property');\n    }\n    if (typeof cfg.data === 'object' && 'collection' in cfg.data) {\n      throw new Error('Data config for collections may not reference other collections');\n    }\n    collections[cfg.key] = extractor(cfg.data, d, opts);\n  });\n\n  const fn = (key) => {\n    let k;\n    let cfg;\n    if (typeof key === 'string') {\n      k = key;\n    } else if (typeof key === 'object') {\n      k = key.key;\n      cfg = key;\n    }\n    if (!(k in collections)) {\n      throw new Error(`Unknown data collection: ${k}`);\n    }\n    let coll = collections[k];\n    if (cfg) {\n      if (cfg.fields && cfg.fields.filter) {\n        let filtered = coll.fields.filter(cfg.fields.filter);\n        if (coll.fields.length !== filtered.length) {\n          coll = extend(coll, { fields: filtered });\n        }\n      }\n    }\n\n    return coll;\n  };\n\n  return fn;\n}\n\nexport {\n  create as default\n};\n","/**\n * Resolves the value at the given JSON path\n * @private\n * @param  {String} path [description]\n * @param  {Object} obj  [description]\n * @return {Object}      [description]\n *\n * @example\n * let path = \"/path/to/paradise\";\n * let obj = {\n *   path: {\n *     to: { paradise: \"heaven\"},\n *     from: {...}\n *   }\n * };\n * resolve( path, obj ); // \"heaven\"\n */\nfunction resolve(path, obj) {\n  if (path.charAt(0) === '/') {\n    path = path.substring(1);\n  }\n  const arr = path.split('/');\n  let subpath;\n  let container = obj;\n  for (let i = 0; i < arr.length; i++) {\n    if (arr[i] === '*' && Array.isArray(container)) {\n      const carr = [];\n      subpath = arr.slice(i + 1).join('/');\n      for (let c = 0; c < container.length; c++) {\n        carr.push(...resolve(subpath, container[c]));\n      }\n      return carr;\n      // return container.map(v => resolve(arr.slice(i + 1).join('/'), v));\n    } else if (!arr[i] && Array.isArray(container)) {\n      const carr = new Array(container.length);\n      subpath = arr.slice(i + 1).join('/');\n      for (let c = 0; c < container.length; c++) {\n        carr[c] = resolve(subpath, container[c]);\n      }\n      return carr;\n      // return container.map(v => resolve(arr.slice(i + 1).join('/'), v));\n    } else if (arr[i] in container) {\n    // } else {\n      container = container[arr[i]];\n    }\n  }\n\n  return container;\n}\n\nexport {\n  resolve as default\n};\n","export function findField(query, { cache }) {\n  if (typeof query === 'number') {\n    return cache.fields[query];\n  }\n\n  // Find by title\n  for (let i = 0; i < cache.fields.length; i++) {\n    if (cache.fields[i].title() === query) {\n      return cache.fields[i];\n    }\n  }\n  return null;\n}\n\nconst filters = {\n  numeric: values => values.filter(v => typeof v === 'number' && !isNaN(v))\n};\n\nconst unfilteredReducers = {\n  sum: values => values.reduce((a, b) => a + b, 0)\n};\n\n// function isPrimitive(x) {\n//   const type = typeof x;\n//   return (type !== 'object' && type !== 'function');\n// }\n\n/**\n * [reducers description]\n * @type {Object}\n * @private\n */\nexport const reducers = {\n  first: values => values[0],\n  last: values => values[values.length - 1],\n  min: (values) => {\n    const filtered = filters.numeric(values);\n    return !filtered.length ? NaN : Math.min.apply(null, filtered);\n  },\n  max: (values) => {\n    const filtered = filters.numeric(values);\n    return !filtered.length ? NaN : Math.max.apply(null, filtered);\n  },\n  sum: (values) => {\n    const filtered = filters.numeric(values);\n    return !filtered.length ? NaN : filtered.reduce((a, b) => a + b, 0);\n  },\n  avg: (values) => {\n    const filtered = filters.numeric(values);\n    const len = filtered.length;\n    return !len ? NaN : unfilteredReducers.sum(filtered) / len;\n  }\n};\n\nfunction normalizeProperties(cfg, dataset, dataProperties, main) {\n  // console.log('======', cfg, main, dataset);\n  const props = {};\n  const mainField = main.field || (typeof cfg.field !== 'undefined' ? dataset.field(cfg.field) : null);\n  Object.keys(dataProperties).forEach((key) => {\n    const pConfig = dataProperties[key];\n    const prop = props[key] = {};\n    if (['number', 'string', 'boolean'].indexOf(typeof pConfig) !== -1) {\n      prop.type = 'primitive';\n      prop.value = pConfig;\n    } else if (typeof pConfig === 'function') {\n      prop.type = 'function';\n      prop.value = pConfig;\n      prop.label = pConfig;\n      prop.field = mainField;\n    } else if (typeof pConfig === 'object') {\n      if (pConfig.fields) {\n        prop.fields = pConfig.fields.map(ff => normalizeProperties(cfg, dataset, { main: ff }, main).main);\n      } else if (typeof pConfig.field !== 'undefined') {\n        prop.type = 'field';\n        prop.field = dataset.field(pConfig.field);\n        prop.value = prop.field.value;\n        prop.label = prop.field.label;\n      } else if (mainField) {\n        prop.value = mainField.value;\n        prop.label = mainField.label;\n        prop.field = mainField;\n      }\n\n      if (typeof pConfig.filter === 'function') {\n        prop.filter = pConfig.filter;\n      }\n      if (typeof pConfig.value !== 'undefined') {\n        prop.value = pConfig.value;\n      }\n      if (typeof pConfig.label !== 'undefined') {\n        prop.label = pConfig.label;\n      }\n      if (typeof pConfig.reduce === 'function') {\n        prop.reduce = pConfig.reduce;\n      } else if (pConfig.reduce) {\n        prop.reduce = reducers[pConfig.reduce];\n      } else if (prop.field && prop.field.reduce) {\n        prop.reduce = typeof prop.field.reduce === 'string' ? reducers[prop.field.reduce] : prop.field.reduce;\n      }\n    }\n  });\n\n  return props;\n}\n\n/*\nexample of configuration input\ncfg = {\n  field: 'State', // the 'top level' values are extracted from field state\n  value: d => d.qText, // the value of the output\n  props: { // additional data properties ammended to each item\n    a: 3, // constant value\n    b: d => d.qElemNumber, // function will receive the original field value\n    c: {\n      field: 'Country', // reference to another field\n      value: d => d.qText // extract the qText value from the referenced field\n    },\n    d: {\n      value: d => d.qRow //  extract qRow from field 'State'\n    }\n  }\n}\n\n// output\n[{\n  value: 'CA', source: { field: 'State' },\n  a: { value: 3 },\n  b: { value: 26, source: 'State' },\n  c: { value: 'USA', source: 'Country' },\n  d: { value: 131, source: 'State' }\n},\n...]\n*/\nexport function getPropsInfo(cfg, dataset) {\n  // console.log('222', cfg);\n  const { main } = normalizeProperties(cfg, dataset, { main: { value: cfg.value, label: cfg.label, reduce: cfg.reduce, filter: cfg.filter } }, {});\n  const props = normalizeProperties(cfg, dataset, cfg.props || {}, main);\n  return { props, main };\n}\n\n// collect items that have been grouped and reduce per group and property\nexport function collect(trackedItems, {\n  main,\n  propsArr,\n  props\n}) {\n  let dataItems = [];\n  const mainFormatter = main.field.formatter() || (v => v);\n  const propsFormatters = {};\n  propsArr.forEach((prop) => {\n    propsFormatters[prop] = props[prop].field ? props[prop].field.formatter() : v => v;\n  });\n  dataItems.push(...trackedItems.map((t) => {\n    let mainValues = t.items.map(item => item.value);\n    const mainReduce = main.reduce;\n    const ret = {\n      value: mainReduce ? mainReduce(mainValues) : mainValues,\n      source: t.items[0].source\n    };\n    ret.label = mainFormatter(ret.value);\n    propsArr.forEach((prop) => {\n      let values = [];\n      values = t.items.map(item => item[prop].value);\n      const reduce = props[prop].reduce;\n      ret[prop] = {\n        value: reduce ? reduce(values) : values\n      };\n      ret[prop].label = String(propsFormatters[prop](ret[prop].value));\n      if (t.items[0][prop].source) {\n        ret[prop].source = t.items[0][prop].source;\n      }\n    });\n    return ret;\n  }));\n\n  return dataItems;\n}\n\nexport function track({\n  cfg,\n  itemData,\n  obj,\n  target,\n  tracker,\n  trackType\n}) {\n  const trackId = trackType === 'function' ? cfg.trackBy(itemData) : itemData[cfg.trackBy];\n  let trackedItem = tracker[trackId];\n  if (!trackedItem) {\n    trackedItem = tracker[trackId] = {\n      items: [],\n      id: trackId\n    };\n    target.push(trackedItem);\n  }\n  trackedItem.items.push(obj);\n}\n","import {\n  getPropsInfo,\n  collect,\n  track as storeTracked\n} from './util';\n\nfunction datumExtract(propCfg, cell, {\n  key\n}) {\n  const datum = {\n    value: typeof propCfg.value === 'function' ? propCfg.value(cell) : typeof propCfg.value !== 'undefined' ? propCfg.value : cell  // eslint-disable-line no-nested-ternary\n  };\n\n  datum.label = typeof propCfg.label === 'function' ? propCfg.label(cell) : typeof propCfg.label !== 'undefined' ? String(propCfg.label) : String(datum.value);  // eslint-disable-line no-nested-ternary\n\n  if (propCfg.field) {\n    datum.source = {\n      key,\n      field: propCfg.field.key()\n    };\n  }\n\n  return datum;\n}\n\nexport default function extract(config, dataset) {\n  const cfgs = Array.isArray(config) ? config : [config];\n  let dataItems = [];\n  cfgs.forEach((cfg) => {\n    if (typeof cfg.field !== 'undefined') {\n      const f = dataset.field(cfg.field);\n      const sourceKey = dataset.key();\n      if (!f) {\n        throw Error(`Field '${cfg.field}' not found`);\n      }\n      const { props, main } = getPropsInfo(cfg, dataset);\n      const propsArr = Object.keys(props);\n\n      const track = !!cfg.trackBy;\n      const trackType = typeof cfg.trackBy;\n      const tracker = {};\n      const trackedItems = [];\n\n      const items = f.items();\n      const mapped = [];\n      for (let idx = 0; idx < items.length; idx++) {\n        const mainCell = items[idx];\n        const exclude = main.filter && !main.filter(mainCell);\n        if (exclude) {\n          continue;\n        }\n        const ret = datumExtract(main, mainCell, { key: sourceKey });\n\n        // loop through all props that need to be mapped and\n        // assign 'value' and 'source' to each property\n        propsArr.forEach((prop) => {\n          const p = props[prop];\n          let propCell = p.field ? p.field.items()[idx] : mainCell;\n          ret[prop] = datumExtract(p, propCell, { key: sourceKey });\n        });\n\n        // collect items based on the trackBy value\n        // items with the same trackBy value are placed in an array and reduced later\n        if (track) {\n          storeTracked({\n            cfg,\n            itemData: mainCell,\n            obj: ret,\n            target: trackedItems,\n            tracker,\n            trackType\n          });\n        }\n\n        mapped.push(ret);\n      }\n\n      // reduce if items have been grouped\n      if (track) {\n        dataItems.push(...collect(trackedItems, {\n          main,\n          propsArr,\n          props\n        }));\n      } else {\n        dataItems.push(...mapped);\n      }\n    }\n  });\n  return dataItems;\n}\n","import resolve from './json-path-resolver';\nimport field from './field';\nimport extract from './extractor-matrix';\n\nimport {\n  findField,\n  getPropsInfo,\n  collect,\n  track\n} from './util';\n\nconst filters = {\n  numeric: values => values.filter(v => typeof v === 'number' && !isNaN(v))\n};\n\nfunction createFields(matrix, { cache, key }) {\n  if (!matrix) {\n    return;\n  }\n  const headers = matrix[0]; // assume headers are in first row TODO - add headers config\n\n  const content = matrix.slice(1);\n\n  headers.forEach((a, i) => {\n    const values = resolve(`//${i}`, content);\n    const numericValues = filters.numeric(values);\n    const isMeasure = numericValues.length > 0;\n    const type = isMeasure ? 'measure' : 'dimension';\n    const min = isMeasure ? Math.min(...numericValues) : NaN;\n    const max = isMeasure ? Math.max(...numericValues) : NaN;\n    // TODO Deal with tags\n\n    cache.fields.push(field({\n      source: key,\n      title: headers[i],\n      values,\n      min,\n      max,\n      type,\n      value: v => v,\n      label: v => v\n    }));\n  });\n}\n\n/**\n * Create a new dataset with default settings\n * @private\n * @return {dataset}\n */\nfunction ds({\n  key,\n  data\n} = {}) {\n  const cache = {\n    fields: []\n  };\n\n  /**\n   * @alias dataset\n   * @interface\n   */\n  const dataset = {\n    /**\n     * Get the key identifying this dataset\n     * @returns {string}\n     */\n    key: () => key,\n\n    /**\n     * Get the raw data\n     * @returns {any}\n     */\n    raw: () => data,\n\n    /**\n     * Find a field within this dataset\n     * @param {string} query - The field to find\n     * @returns {field}\n     */\n    field: query => findField(query, {\n      cache,\n      matrix: data\n    }),\n\n    /**\n     * Get all fields within this dataset\n     * @returns {Array<field>}\n     */\n    fields: () => cache.fields.slice(),\n\n    /**\n     * Extract data items from this dataset\n     * @param {data-extract-config} config\n     * @returns {Array<datum-extract>}\n     */\n    extract: config => extract(config, dataset, cache),\n\n    /**\n     * @returns {null}\n     */\n    hierarchy: () => null\n  };\n\n  createFields(data, {\n    cache,\n    key\n  });\n\n  return dataset;\n}\n\nds.util = {\n  normalizeConfig: getPropsInfo,\n  collect,\n  track\n};\n\nexport {\n  ds as default\n};\n\n/**\n * @typedef {object} data-extract-config\n * @property {string} field - The field to extract data from\n * @property {data-extract-config~valueFn} [value] - The field value accessor\n * @property {data-extract-config~labelFn} [label] - The field label accessor\n * @property {data-extract-config~trackByFn} [trackBy] - Track by value accessor\n * @property {data-extract-config~reduceFn} [reduce] - Reducer function\n * @property {data-extract-config~filterFn} [filter] - Filter function\n * @property {object} [props] - Additional properties to add to the extracted item\n */\n\n/**\n * @callback data-extract-config~valueFn\n * @param {any} cell The field cell\n * @returns {any}\n */\n\n/**\n * @callback data-extract-config~labelFn\n * @param {any} cell The field cell\n * @returns {string}\n */\n\n/**\n * @callback data-extract-config~filterFn\n * @param {any} cell The field cell\n * @returns {boolean}\n */\n\n/**\n * @callback data-extract-config~trackByFn\n * @param {any} cell The field cell\n * @returns {any}\n */\n\n/**\n * @callback data-extract-config~reduceFn\n * @param {any} cell The field cell\n * @returns {any}\n */\n\n/**\n * @typedef {object} datum-extract\n * @property {any} value - The extracted value\n * @property {string} label - The extracted value as a string\n * @property {object} source - The data source of the extracted data\n * @property {string} source.key - The data-source key\n * @property {string} source.field - The source field\n */\n","const ARG_LENGTH = {\n  a: 7,\n  c: 6,\n  h: 1,\n  l: 2,\n  m: 2,\n  q: 4,\n  s: 4,\n  t: 2,\n  v: 1,\n  z: 0\n};\n\nconst SEGMENT_PATTERN = /([astvzqmhlc])([^astvzqmhlc]*)/ig;\n\nconst NUMBER = /-?[0-9]*\\.?[0-9]+(?:e[-+]?\\d+)?/ig;\n\nfunction parseValues(args) {\n  const numbers = args.match(NUMBER);\n  return numbers ? numbers.map(Number) : [];\n}\n\n/**\n * parse an svg path data string. Generates an Array\n * of commands where each command is an Array of the\n * form `[command, arg1, arg2, ...]`\n *\n * https://www.w3.org/TR/SVG/paths.html#PathDataGeneralInformation\n * @ignore\n *\n * @param {string} path\n * @returns {array}\n */\nexport default function parse(path) {\n  const data = [];\n  const p = `${path}`.trim();\n\n  // A path data segment (if there is one) must begin with a \"moveto\" command\n  if (p[0] !== 'M' && p[0] !== 'm') {\n    return data;\n  }\n\n  p.replace(SEGMENT_PATTERN, (_, command, args) => {\n    let type = command.toLowerCase();\n    args = parseValues(args);\n\n    // overloaded moveTo\n    if (type === 'm' && args.length > 2) {\n      data.push([command].concat(args.splice(0, 2)));\n      type = 'l';\n      command = command === 'm' ? 'l' : 'L';\n    }\n\n    // Ignore invalid commands\n    if (args.length < ARG_LENGTH[type]) {\n      return '';\n    }\n\n    data.push([command].concat(args.splice(0, ARG_LENGTH[type])));\n\n    // The command letter can be eliminated on subsequent commands if the same command is used multiple times in a row (e.g., you can drop the second \"L\" in \"M 100 200 L 200 100 L -100 -200\" and use \"M 100 200 L 200 100 -100 -200\" instead).\n    while (args.length >= ARG_LENGTH[type] && args.length && ARG_LENGTH[type]) {\n      data.push([command].concat(args.splice(0, ARG_LENGTH[type])));\n    }\n\n    return '';\n  });\n  return data;\n}\n","import parsePath from './parse-path';\n\n/**\n * Work around for https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/8438884/\n * @ignore\n */\nfunction supportsSvgPathArgument(window) {\n  const canvas = window.document.createElement('canvas');\n  const g = canvas.getContext('2d');\n  const p = new window.Path2D('M0 0 L1 1');\n  g.strokeStyle = 'red';\n  g.lineWidth = 1;\n  g.stroke(p);\n  const imgData = g.getImageData(0, 0, 1, 1);\n  return imgData.data[0] === 255; // Check if pixel is red\n}\n\nfunction rotatePoint(point, angle) {\n  let nx = (point.x * Math.cos(angle)) - (point.y * Math.sin(angle));\n  let ny = (point.y * Math.cos(angle)) + (point.x * Math.sin(angle));\n  point.x = nx;\n  point.y = ny;\n}\n\nfunction translatePoint(point, dx, dy) {\n  point.x += dx;\n  point.y += dy;\n}\n\nfunction polyFillPath2D(window) {\n  if (!window) {\n    return;\n  }\n  if (window.Path2D && supportsSvgPathArgument(window)) {\n    return;\n  }\n\n  /**\n   * Crates a Path2D polyfill object\n   * @constructor\n   * @ignore\n   * @param {String} path\n   */\n  function Path2D(path) {\n    this.segments = [];\n    if (path) {\n      this.segments = parsePath(path);\n    }\n  }\n\n  Path2D.prototype.moveTo = function moveTo(x, y) {\n    this.segments.push(['M', x, y]);\n  };\n\n  Path2D.prototype.lineTo = function lineTo(x, y) {\n    this.segments.push(['L', x, y]);\n  };\n\n  Path2D.prototype.arc = function arc(x, y, r, start, end, ccw) {\n    this.segments.push(['AC', x, y, r, start, end, !!ccw]);\n  };\n\n  Path2D.prototype.closePath = function closePath() {\n    this.segments.push(['Z']);\n  };\n\n  Path2D.prototype.bezierCurveTo = function bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y) {\n    this.segments.push(['C', cp1x, cp1y, cp2x, cp2y, x, y]);\n  };\n\n  Path2D.prototype.quadraticCurveTo = function bezierCurveTo(cpx, cpy, x, y) {\n    this.segments.push(['Q', cpx, cpy, x, y]);\n  };\n\n  let _fill = window.CanvasRenderingContext2D.prototype.fill;\n  let _stroke = window.CanvasRenderingContext2D.prototype.stroke;\n\n  function buildPath(canvas, segments) {\n    let endAngle;\n    let startAngle;\n    let largeArcFlag;\n    let sweepFlag;\n    let endPoint;\n    let angle;\n    let x;\n    let y;\n    let r;\n    let b;\n    let pathType;\n    let centerPoint;\n    let cpx;\n    let cpy;\n    let qcpx;\n    let qcpy;\n    let currentPoint = { x: 0, y: 0 };\n\n    // Reset control point if command is not cubic\n    if (pathType !== 'S' && pathType !== 's' && pathType !== 'C' && pathType !== 'c') {\n      cpx = null;\n      cpy = null;\n    }\n\n    if (pathType !== 'T' && pathType !== 't' && pathType !== 'Q' && pathType !== 'q') {\n      qcpx = null;\n      qcpy = null;\n    }\n\n    canvas.beginPath();\n    for (let i = 0; i < segments.length; ++i) {\n      let s = segments[i];\n      pathType = s[0];\n      switch (pathType) {\n        case 'm':\n        case 'M':\n          if (pathType === 'm') {\n            x += s[1];\n            y += s[2];\n          } else {\n            x = s[1];\n            y = s[2];\n          }\n          canvas.moveTo(x, y);\n          break;\n        case 'l':\n        case 'L':\n          if (pathType === 'l') {\n            x += s[1];\n            y += s[2];\n          } else {\n            x = s[1];\n            y = s[2];\n          }\n          canvas.lineTo(x, y);\n          break;\n        case 'H':\n          x = s[1];\n          canvas.lineTo(x, y);\n          break;\n        case 'h':\n          x += s[1];\n          canvas.lineTo(x, y);\n          break;\n        case 'V':\n          y = s[1];\n          canvas.lineTo(x, y);\n          break;\n        case 'v':\n          y += s[1];\n          canvas.lineTo(x, y);\n          break;\n        case 'a':\n        case 'A':\n          if (pathType === 'a') {\n            x += s[6];\n            y += s[7];\n          } else {\n            x = s[6];\n            y = s[7];\n          }\n\n          r = s[1];\n          // s[2] = 2nd radius in ellipse, ignore\n          // s[3] = rotation of ellipse, ignore\n          largeArcFlag = s[4];\n          sweepFlag = s[5];\n          endPoint = { x, y };\n          // translate all points so that currentPoint is origin\n          translatePoint(endPoint, -currentPoint.x, -currentPoint.y);\n\n          // angle to destination\n          angle = Math.atan2(endPoint.y, endPoint.x);\n\n          // rotate points so that angle is 0\n          rotatePoint(endPoint, -angle);\n\n          b = endPoint.x / 2;\n          // var sweepAngle = Math.asin(b / r);\n\n          centerPoint = { x: 0, y: 0 };\n          centerPoint.x = endPoint.x / 2;\n          if ((sweepFlag && !largeArcFlag) || (!sweepFlag && largeArcFlag)) {\n            centerPoint.y = Math.sqrt((r * r) - (b * b));\n          } else {\n            centerPoint.y = -Math.sqrt((r * r) - (b * b));\n          }\n          startAngle = Math.atan2(-centerPoint.y, -centerPoint.x);\n          endAngle = Math.atan2(endPoint.y - centerPoint.y, endPoint.x - centerPoint.x);\n\n          // rotate back\n          startAngle += angle;\n          endAngle += angle;\n          rotatePoint(endPoint, angle);\n          rotatePoint(centerPoint, angle);\n\n          // translate points\n          translatePoint(endPoint, currentPoint.x, currentPoint.y);\n          translatePoint(centerPoint, currentPoint.x, currentPoint.y);\n\n          canvas.arc(centerPoint.x, centerPoint.y, r, startAngle, endAngle, !sweepFlag);\n          break;\n        case 'C':\n          cpx = s[3]; // Last control point\n          cpy = s[4];\n          x = s[5];\n          y = s[6];\n          canvas.bezierCurveTo(s[1], s[2], cpx, cpy, x, y);\n          break;\n        case 'c':\n          canvas.bezierCurveTo(\n            s[1] + x,\n            s[2] + y,\n            s[3] + x,\n            s[4] + y,\n            s[5] + x,\n            s[6] + y);\n          cpx = s[3] + x; // Last control point\n          cpy = s[4] + y;\n          x += s[5];\n          y += s[6];\n          break;\n        case 'S':\n          if (cpx === null || cpx === null) {\n            cpx = x;\n            cpy = y;\n          }\n\n          canvas.bezierCurveTo(\n            (2 * x) - cpx,\n            (2 * y) - cpy,\n            s[1],\n            s[2],\n            s[3],\n            s[4]\n          );\n          cpx = s[1]; // last control point\n          cpy = s[2];\n          x = s[3];\n          y = s[4];\n          break;\n        case 's':\n          if (cpx === null || cpx === null) {\n            cpx = x;\n            cpy = y;\n          }\n\n          canvas.bezierCurveTo(\n            (2 * x) - cpx,\n            (2 * y) - cpy,\n            s[1] + x,\n            s[2] + y,\n            s[3] + x,\n            s[4] + y\n          );\n          cpx = s[1] + x; // last control point\n          cpy = s[2] + y;\n          x += s[3];\n          y += s[4];\n          break;\n        case 'Q':\n          qcpx = s[1]; // last control point\n          qcpy = s[2];\n          x = s[3];\n          y = s[4];\n          canvas.quadraticCurveTo(qcpx, qcpy, x, y);\n          break;\n        case 'q':\n          qcpx = s[1] + x; // last control point\n          qcpy = s[2] + y;\n          x += s[3];\n          y += s[4];\n          canvas.quadraticCurveTo(qcpx, qcpy, x, y);\n          break;\n        case 'T':\n          if (qcpx === null || qcpx === null) {\n            qcpx = x;\n            qcpy = y;\n          }\n          qcpx = (2 * x) - qcpx; // last control point\n          qcpy = (2 * y) - qcpy;\n          x = s[1];\n          y = s[2];\n          canvas.quadraticCurveTo(qcpx, qcpy, x, y);\n          break;\n        case 't':\n          if (qcpx === null || qcpx === null) {\n            qcpx = x;\n            qcpy = y;\n          }\n          qcpx = (2 * x) - qcpx; // last control point\n          qcpy = (2 * y) - qcpy;\n          x += s[1];\n          y += s[2];\n          canvas.quadraticCurveTo(qcpx, qcpy, x, y);\n          break;\n        case 'z':\n        case 'Z':\n          canvas.closePath();\n          break;\n        default:\n          // throw new Error(`${pathType} is not implemented`);\n      }\n\n      currentPoint.x = x;\n      currentPoint.y = y;\n    }\n  }\n\n  window.CanvasRenderingContext2D.prototype.fill = function fill(...args) {\n    let fillRule = 'nonzero';\n    if (args.length === 0 || (args.length === 1 && typeof args[0] === 'string')) {\n      _fill.apply(this, args);\n      return;\n    }\n    if (arguments.length === 2) {\n      fillRule = args[1];\n    }\n    let path = args[0];\n    buildPath(this, path.segments);\n    _fill.call(this, fillRule);\n  };\n\n  window.CanvasRenderingContext2D.prototype.stroke = function stroke(path) {\n    if (!path) {\n      _stroke.call(this);\n      return;\n    }\n    buildPath(this, path.segments);\n    _stroke.call(this);\n  };\n\n  window.Path2D = Path2D;\n}\n\nexport default polyFillPath2D;\n","/**\n * Short-hand for max(min())\n *\n * @param {number} min Minimum allowed value\n * @param {number} max Maximum allowed value\n * @param {number} value The actual value to cap\n * @ignore\n */\nexport function cap(min, max, value) {\n  return Math.max(min, Math.min(max, value));\n}\n\n/**\n * Resolve a diff, i.e. resolveDiff(0.2, 0.6, 1, 100) = 20\n *\n * @param {object} params parameters\n * @param {number} params.start Normalized start value\n * @param {number} params.end Normalized end value\n * @param {number} params.minPx The minimum number of pixels\n * @param {number} params.maxPx Maximum number of pixels, i.e. the width or height\n * @ignore\n */\nexport function resolveDiff({ start, end, minPx = 0.1, maxPx = 1 }) {\n  const high = Math.max(start, end);\n  const low = Math.min(start, end);\n  const highModified = cap(-0.1, 1.2, high);\n  const lowModified = cap(-0.1, 1.2, low);\n\n  const wantedDiff = (highModified * maxPx) - (lowModified * maxPx);\n  const actualDiff = Math.max(minPx, wantedDiff);\n  const startModifier = (actualDiff - wantedDiff) / 2;\n  const actualLow = (lowModified * maxPx) - startModifier;\n\n  return {\n    actualDiff,\n    startModifier,\n    actualLow\n  };\n}\n","import extend from 'extend';\nimport { resolveDiff } from './box-math';\n\nimport { isNumber } from '../../utils/is-number';\n\nexport function box({ item, boxWidth, boxPadding, rendwidth, rendheight, flipXY }) {\n  let x = 'x';\n  let y = 'y';\n  let width = 'width';\n  let height = 'height';\n  let calcwidth = rendwidth;\n  let calcheight = rendheight;\n\n  if (flipXY) {\n    x = 'y';\n    y = 'x';\n    width = 'height';\n    height = 'width';\n    calcwidth = rendheight;\n    calcheight = rendwidth;\n  }\n\n  const { actualDiff, actualLow } = resolveDiff({ start: item.start, end: item.end, minPx: item.box.minHeightPx, maxPx: calcheight });\n\n  return extend({}, item.box, {\n    type: 'rect',\n    [x]: (boxPadding + item.major) * calcwidth,\n    [y]: actualLow,\n    [height]: actualDiff,\n    [width]: boxWidth * calcwidth,\n    data: item.data || {},\n    collider: {\n      type: null\n    }\n  });\n}\n\nexport function verticalLine({ item, from, to, boxCenter, rendwidth, rendheight, flipXY }) {\n  let x1 = 'x1';\n  let y1 = 'y1';\n  let x2 = 'x2';\n  let y2 = 'y2';\n  let calcwidth = rendwidth;\n  let calcheight = rendheight;\n\n  if (flipXY) {\n    x1 = 'y1';\n    y1 = 'x1';\n    x2 = 'y2';\n    y2 = 'x2';\n    calcwidth = rendheight;\n    calcheight = rendwidth;\n  }\n\n  return extend({}, item.line, {\n    type: 'line',\n    [y2]: Math.floor(from * calcheight),\n    [x1]: boxCenter * calcwidth,\n    [y1]: Math.floor(to * calcheight),\n    [x2]: boxCenter * calcwidth,\n    data: item.data || {},\n    collider: {\n      type: null\n    }\n  });\n}\n\nexport function horizontalLine({ item, key, position, width, boxCenter, rendwidth, rendheight, flipXY }) {\n  let x1 = 'x1';\n  let y1 = 'y1';\n  let x2 = 'x2';\n  let y2 = 'y2';\n  let calcwidth = rendwidth;\n  let calcheight = rendheight;\n\n  if (flipXY) {\n    x1 = 'y1';\n    y1 = 'x1';\n    x2 = 'y2';\n    y2 = 'x2';\n    calcwidth = rendheight;\n    calcheight = rendwidth;\n  }\n\n  const halfWidth = width / 2;\n\n  return extend({ type: 'line' }, item[key], {\n    [y1]: Math.floor(position * calcheight),\n    [x1]: (boxCenter - halfWidth) * calcwidth,\n    [y2]: Math.floor(position * calcheight),\n    [x2]: (boxCenter + halfWidth) * calcwidth,\n    r: halfWidth * calcwidth,\n    cx: boxCenter * calcwidth,\n    cy: position * calcheight,\n    width: width * calcwidth,\n    data: item.data || {},\n    collider: {\n      type: null\n    }\n  });\n}\n\nexport function buildShapes({\n  width,\n  height,\n  flipXY,\n  resolved,\n  keys\n}) {\n  // if (!settings || !settings.major || !settings.major.scale || !settings.minor || !settings.minor.scale) {\n  //   return [];\n  // }\n\n  const output = [];\n\n  let major = null;\n  const items = resolved.major.items;\n\n  for (let i = 0, len = items.length; i < len; i++) {\n    const d = items[i].data;\n    let children = [];\n\n    let majorVal = null;\n    let majorEndVal = null;\n\n    if (typeof resolved.major.settings.binStart !== 'undefined') { // if start and end is defined\n      majorVal = resolved.major.items[i].binStart;\n      majorEndVal = resolved.major.items[i].binEnd;\n      major = resolved.major.settings.binStart.scale;\n    } else {\n      major = resolved.major.settings.major.scale;\n      majorVal = major ? resolved.major.items[i].major : 0;\n    }\n\n    let bandwidth = 0;\n    if (!major) {\n      bandwidth = 1;\n    } else if (major.bandwidth) {\n      bandwidth = major.bandwidth();\n      majorVal -= (bandwidth / 2);\n    } else {\n      bandwidth = majorEndVal - majorVal;\n    }\n\n    let item = extend({}, {\n      major: majorVal,\n      majorEnd: majorEndVal\n    }, resolved.minor.items[i]);\n\n    keys.forEach(key => (item[key] = resolved[key].items[i]));\n\n    const maxMajorWidth = flipXY ? height : width;\n    const boxWidth = Math.min(bandwidth * item.box.width, isNaN(item.box.maxWidthPx) ? maxMajorWidth : item.box.maxWidthPx / maxMajorWidth);\n    const boxPadding = (bandwidth - boxWidth) / 2;\n    const boxCenter = boxPadding + item.major + (boxWidth / 2);\n\n    const rendwidth = width;\n    const rendheight = height;\n\n    if (item.box.show && isNumber(item.start) && isNumber(item.end)) {\n      children.push(box({ item, boxWidth, boxPadding, rendwidth, rendheight, flipXY }));\n    }\n\n    if (item.line.show && isNumber(item.min) && isNumber(item.start)) {\n      children.push(verticalLine({ item, from: item.min, to: item.start, boxCenter, rendwidth, rendheight, flipXY }));\n    }\n\n    if (item.line.show && isNumber(item.max) && isNumber(item.end)) {\n      children.push(verticalLine({ item, from: item.max, to: item.end, boxCenter, rendwidth, rendheight, flipXY }));\n    }\n\n    if (item.median.show && isNumber(item.med)) {\n      children.push(horizontalLine({ item, key: 'median', position: item.med, width: boxWidth, boxCenter, rendwidth, rendheight, flipXY }));\n    }\n\n    if (item.whisker.show) {\n      const whiskerWidth = boxWidth * item.whisker.width;\n\n      if (isNumber(item.min)) {\n        children.push(horizontalLine({ item, key: 'whisker', position: item.min, width: whiskerWidth, boxCenter, rendwidth, rendheight, flipXY }));\n      }\n\n      if (isNumber(item.max)) {\n        children.push(horizontalLine({ item, key: 'whisker', position: item.max, width: whiskerWidth, boxCenter, rendwidth, rendheight, flipXY }));\n      }\n    }\n\n    const container = {\n      type: 'container',\n      data: d,\n      collider: { type: 'bounds' },\n      children\n    };\n\n    output.push(container);\n  }\n\n  return output;\n}\n","export default function pointsToPath(points, close = true) {\n  let d = '';\n\n  for (let i = 0; i < points.length; i++) {\n    const p = points[i];\n    if (i === 0) {\n      d += `M${p.x} ${p.y}`;\n    } else {\n      d += `L${p.x} ${p.y}`;\n    }\n\n    d += ' ';\n  }\n\n  if (close) {\n    d += 'Z';\n  }\n\n  return d;\n}\n","import pointsToPath from '../utils/points-to-path';\n\nexport function generateCrossPoints(x, y, size, barWidth) {\n  const r = size / 2;\n  const innerLeft = x - (barWidth / 2);\n  const innerTop = y - (barWidth / 2);\n  const left = x - r;\n  const top = y - r;\n\n  return [\n    { x: innerLeft, y: innerTop }, // Top\n    { x: innerLeft, y: top },\n    { x: innerLeft + barWidth, y: top },\n    { x: innerLeft + barWidth, y: innerTop }, // Right\n    { x: left + size, y: innerTop },\n    { x: left + size, y: innerTop + barWidth },\n    { x: innerLeft + barWidth, y: innerTop + barWidth }, // Bottom\n    { x: innerLeft + barWidth, y: top + size },\n    { x: innerLeft, y: top + size },\n    { x: innerLeft, y: innerTop + barWidth }, // Left\n    { x: left, y: innerTop + barWidth },\n    { x: left, y: innerTop }\n  ];\n}\n\n/**\n * @extends symbol-config\n * @typedef {object} symbol--cross\n * @property {number} [width] - Width of the diagonals\n */\nfunction cross(options) {\n  const x = options.x;\n  const y = options.y;\n  const r = options.size / 2;\n  const width = isNaN(options.width) ? r / 2 : options.width;\n  const barWidth = Math.min(width, r);\n\n  const points = generateCrossPoints(x, y, options.size, barWidth);\n\n  return {\n    type: 'path',\n    fill: 'black',\n    d: pointsToPath(points)\n  };\n}\n\nexport {\n  cross as default\n};\n","/**\n * Get x1, y1, x2, y2 point from angle\n * Source: {@link https://codepen.io/NV/pen/jcnmK}\n * @private\n *\n * @param  {number} angle Radians\n * @return {object}       Point with x1, y2, x2, y2.\n */\nexport function angleToPoints(angle) {\n  let segment = Math.floor((angle / Math.PI) * 2) + 2;\n  let diagonal = ((0.5 * segment) + 0.25) * Math.PI;\n  let op = Math.cos(Math.abs(diagonal - angle)) * Math.sqrt(2);\n  let x = op * Math.cos(angle);\n  let y = op * Math.sin(angle);\n\n  return {\n    x1: x < 0 ? 1 : 0,\n    y1: y < 0 ? 1 : 0,\n    x2: x >= 0 ? x : x + 1,\n    y2: y >= 0 ? y : y + 1\n  };\n}\n\n/**\n * Turns degrees into radians\n * @private\n *\n * @param  {number} degrees Degrees\n * @return {number}         Radians\n */\nexport function toRadians(d) {\n  return ((-d) / 180) * Math.PI;\n}\n\n/**\n * Turns radians into degrees\n * @private\n *\n * @param  {number} degrees Degrees\n * @return {number}         Radians\n */\nexport function toDegrees(r) {\n  return r * (180 / Math.PI);\n}\n\n/**\n * Get x1, y1, x2, y2 point from degree\n * @private\n *\n * @param  {number} d Degree\n * @return {object}   Point with x1, y2, x2, y2.\n */\nexport function degreesToPoints(d) {\n  return angleToPoints(toRadians(d));\n}\n","import { mappedAttributes } from '../scene-graph//attributes';\nimport circle from './circle';\nimport diamond from './diamond';\nimport saltire from './saltire';\nimport square from './square';\nimport triangle from './triangle';\nimport line from './line';\nimport star from './star';\nimport nPolygon from './n-polygon';\nimport cross from './cross';\nimport bar from './bar';\nimport registry from '../utils/registry';\n\nconst reg = registry();\n\nreg.add('circle', circle);\nreg.add('diamond', diamond);\nreg.add('saltire', saltire);\nreg.add('square', square);\nreg.add('triangle', triangle);\nreg.add('line', line);\nreg.add('star', star);\nreg.add('n-polygon', nPolygon);\nreg.add('cross', cross);\nreg.add('bar', bar);\n\nfunction createRectCollider({ x, y, size }) {\n  const r = size / 2;\n  return {\n    type: 'rect',\n    x: x - r,\n    y: y - r,\n    width: size,\n    height: size\n  };\n}\n\nfunction applyOpts(obj, opts = {}) {\n  Object.keys(opts).forEach((key) => {\n    if (typeof mappedAttributes[key] !== 'undefined' && key !== 'transform') {\n      obj[key] = opts[key];\n    }\n  });\n}\n\n/**\n * Factory function for symbols.\n * Options object is passed to symbols function.\n * @private\n * @param {symbol--bar|symbol--circle|symbol--cross|symbol--diamond|symbol--line|symbol--n-polygon|symbol--saltire|symbol--square|symbol--star|symbol--triangle} options - Options definition may contain any of the supported display-object attributes\n * @returns {object} A node definition\n */\nfunction create(options = {}) { // TODO handle reserverd properties x, y, size, data, etc..\n  const fn = reg.get(options.type);\n  if (fn) {\n    const s = fn(options);\n    if (!s.collider) {\n      s.collider = createRectCollider(options);\n    }\n\n    applyOpts(s, options);\n\n    if (typeof options.data !== 'undefined') {\n      s.data = options.data;\n    }\n\n    return s;\n  }\n  return fn;\n}\n\nconst symbols = {\n  add: (type, fn) => reg.add(type, fn),\n  get: type => reg.get(type),\n  remove: type => reg.remove(type),\n  create\n};\n\nexport {\n  create as default,\n  symbols\n};\n\n/**\n * Mandatory symbol config\n * @typedef {object} symbol-config\n * @property {object} options - Options definition may contain any of the supported display-object attributes\n * @property {string} options.type - Type of symbol\n * @property {number} options.x - x-coordinate\n * @property {number} options.y - y-coordinate\n * @property {number} options.size\n * @property {object} [options.data]\n */\n","import extend from 'extend';\nimport { notNumber } from '../../utils/is-number';\nimport shapeFactory from '../../symbols';\n\nconst DEFAULT_ERROR_SETTINGS = {\n  errorShape: {\n    shape: 'saltire',\n    width: 2,\n    size: 0.5,\n    fill: '#333',\n    stroke: '#333',\n    strokeWidth: 0\n  }\n};\n\n /**\n  * @typedef {object}\n  * @alias component--point.settings\n  */\nconst DEFAULT_DATA_SETTINGS = {\n  /** Type of shape\n   * @type {datum-string=} */\n  shape: 'circle',\n  label: '',\n  /** Fill color\n   * @type {datum-string=} */\n  fill: '#333',\n  /** Stroke color\n   * @type {datum-string=} */\n  stroke: '#ccc',\n  /** Stroke width\n   * @type {datum-number=} */\n  strokeWidth: 0,\n  /** Opacity of shape\n   * @type {datum-number=} */\n  opacity: 1,\n  /** Normalized x coordinate\n   * @type {datum-number=} */\n  x: 0.5,\n  /** Normalized y coordinate\n   * @type {datum-number=} */\n  y: 0.5,\n  /** Normalized size of shape\n   * @type {datum-number=} */\n  size: 1,\n  strokeDasharray: ''\n};\n\n /**\n  * @typedef {object}\n  * @alias component--point.settings.sizeLimits\n  */\nconst SIZE_LIMITS = {\n  /** Maximum size of shape, in pixels\n   * @type {number=} */\n  maxPx: 10000,\n  /** Minimum size of shape, in pixels\n   * @type {number=} */\n  minPx: 1,\n  /** Maximum size relative linear scale extent\n   * @type {number=} */\n  maxRelExtent: 0.1,\n  /** Minimum size relative linear scale extent\n   * @type {number=} */\n  minRelExtent: 0.01,\n  /** Maximum size relative discrete scale banwidth\n   * @type {number=} */\n  maxRelDiscrete: 1,\n  /** Minimum size relative discrete scale banwidth\n   * @type {number=} */\n  minRelDiscrete: 0.1\n};\n\nfunction getPxSpaceFromScale(s, space) {\n  if (s && typeof s.bandwidth === 'function') { // some kind of ordinal scale\n    return {\n      isBandwidth: true,\n      value: Math.max(1, s.bandwidth() * space)\n    };\n  }\n  return {\n    isBandwidth: false,\n    value: Math.max(1, space)\n  };\n}\n\nfunction getPointSizeLimits(x, y, width, height, limits) {\n  const xSpacePx = getPxSpaceFromScale(x ? x.scale : undefined, width, limits);\n  const ySpacePx = getPxSpaceFromScale(y ? y.scale : undefined, height, limits);\n  let maxSizePx = Math.min(xSpacePx.value * limits[xSpacePx.isBandwidth ? 'maxRelDiscrete' : 'maxRelExtent'], ySpacePx.value * limits[ySpacePx.isBandwidth ? 'maxRelDiscrete' : 'maxRelExtent']);\n  let minSizePx = Math.min(xSpacePx.value * limits[xSpacePx.isBandwidth ? 'minRelDiscrete' : 'minRelExtent'], ySpacePx.value * limits[ySpacePx.isBandwidth ? 'minRelDiscrete' : 'minRelExtent']);\n  const min = Math.max(1, Math.floor(minSizePx));\n  const max = Math.max(1, Math.floor(maxSizePx));\n  return { min, max, maxGlobal: limits.maxPx, minGlobal: limits.minPx };\n}\n\nfunction createDisplayPoints(dataPoints, { x, y, width, height }, pointSize, shapeFn) {\n  return dataPoints.filter(p =>\n   !isNaN(p.x + p.y)\n  ).map((p) => {\n    const s = notNumber(p.size) ? DEFAULT_ERROR_SETTINGS.errorShape : p;\n    const size = pointSize.min + (s.size * (pointSize.max - pointSize.min));\n    const shapeSpec = {\n      type: s.shape === 'rect' ? 'square' : s.shape,\n      label: p.label,\n      x: p.x * width,\n      y: p.y * height,\n      fill: s.fill,\n      size: Math.min(pointSize.maxGlobal, Math.max(pointSize.minGlobal, size)),\n      stroke: s.stroke,\n      strokeWidth: s.strokeWidth,\n      strokeDasharray: s.strokeDasharray,\n      opacity: s.opacity\n    };\n    if (s === p.errorShape) {\n      shapeSpec.width = s.width;\n    }\n    const shape = shapeFn(shapeSpec);\n\n    shape.data = p.data;\n    return shape;\n  });\n}\n\nconst component = {\n  require: ['chart', 'resolver'],\n  defaultSettings: {\n    settings: {},\n    data: {},\n    animations: {\n      enabled: false,\n      trackBy: node => node.data.value\n    },\n    style: {\n      item: '$shape'\n    }\n  },\n  created() {\n    this.rect = { x: 0, y: 0, width: 0, height: 0 };\n  },\n  beforeRender(opts) {\n    this.rect = opts.size;\n  },\n  render({ data }) {\n    const resolved = this.resolver.resolve({\n      data,\n      defaults: extend({}, DEFAULT_DATA_SETTINGS, this.style.item),\n      settings: this.settings.settings,\n      scaled: {\n        x: this.rect.width,\n        y: this.rect.height\n      }\n    });\n    const { width, height } = this.rect;\n    const limits = extend({}, SIZE_LIMITS, this.settings.settings.sizeLimits);\n    const points = resolved.items;\n    const pointSize = getPointSizeLimits(resolved.settings.x, resolved.settings.y, width, height, limits);\n    return createDisplayPoints(points, this.rect, pointSize, this.settings.shapeFn || shapeFactory);\n  }\n};\n\nexport default component;\n","import extend from 'extend';\nimport { pie, arc } from 'd3-shape';\n\n/**\n * @typedef {object}\n * @alias component--pie-settings\n */\nconst DEFAULT_DATA_SETTINGS = {\n  /** Start angle of the pie, in radians\n   * @type {number=} */\n  startAngle: 0,\n  /** End angle of the pie, in radians\n   * @type {number=} */\n  endAngle: 2 * Math.PI,\n  /**\n   * @typedef {object}\n   */\n  slice: {\n    label: '',\n    /** Absolute value of the slice's arc length\n     * @type {number=} */\n    arc: 1,\n    /** Visibility of the slice\n     * @type {boolean=} */\n    show: true,\n    /** Fill color of the slice\n     * @type {string=} */\n    fill: '#333',\n    /** Stroke color of the slice\n     * @type {string=} */\n    stroke: '#ccc',\n    /** Stroke width of the slice\n     * @type {number=} */\n    strokeWidth: 1,\n    /** Opacity of the slice\n     * @type {number=} */\n    opacity: 1,\n    /** Inner radius of the slice\n     * @type {number=} */\n    innerRadius: 0,\n    /** Outer radius of the slice\n     * @type {number=} */\n    outerRadius: 0.8,\n    /** Corner radius of the slice, in pixels\n     * @type {number=} */\n    cornerRadius: 0,\n    /** Radial offset of the slice\n     * @type {number=} */\n    offset: 0\n  }\n};\n\n/**\n * @typedef {object} component--pie\n * @property {string} [type='pie']\n * @example\n * {\n *   type: 'pie',\n *   data: {\n *     extract: {\n *       field: 'Region',\n *       props: {\n *         num: { field: 'Population' }\n *       }\n *     }\n *   },\n *   settings: {\n *     startAngle: Math.PI / 2,\n *     endAngle: -Math.PI / 2,\n *     slice: {\n *       arc: { ref: 'num' },\n *       fill: 'green',\n *       stroke: 'red',\n *       strokeWidth: 2,\n *       innerRadius: 0.6,\n *       outerRadius 0.8,\n *       opacity: 0.8,\n *       offset: 0.2\n *     }\n *   }\n * }\n */\n\nfunction offsetSlice(centroid, offset, outerRadius, innerRadius) {\n  let [vx, vy] = centroid;\n  const vlen = Math.sqrt((vx * vx) + (vy * vy));\n  vx /= vlen;\n  vy /= vlen;\n  const diff = outerRadius - innerRadius;\n  return { x: vx * offset * diff, y: vy * offset * diff };\n}\n\nfunction createDisplayPies(arcData, { x, y, width, height }, slices) {\n  const arcGen = arc();\n  const center = { x: x + (width / 2), y: y + (height / 2) };\n  const innerRadius = (Math.min(width, height) / 2);\n  const outerRadius = (Math.min(width, height) / 2);\n  const cornerRadius = outerRadius / 100;\n  return arcData.map((a, i) => {\n    const slice = slices[i];\n    slice.type = 'path';\n    const or = outerRadius * slice.outerRadius;\n    const ir = innerRadius * slice.innerRadius;\n    arcGen.innerRadius(ir);\n    arcGen.outerRadius(or);\n    arcGen.cornerRadius(cornerRadius * slice.cornerRadius);\n    slice.d = arcGen(a);\n    const centroid = arcGen.centroid(a);\n    const offset = slice.offset ? offsetSlice(centroid, slice.offset, or, ir) : { x: 0, y: 0 };\n    slice.transform = `translate(${offset.x}, ${offset.y}) translate(${center.x}, ${center.y})`;\n    return slice;\n  });\n}\n\nexport function arcValue(stngs, item) {\n  if (stngs.slice && 'arc' in stngs.slice) {\n    return item.arc;\n  }\n  return item.data.value;\n}\n\nconst pieComponent = {\n  require: ['chart', 'resolver'],\n  defaultSettings: {\n    settings: {\n      startAngle: 0,\n      endAngle: 2 * Math.PI,\n      padAngle: 0,\n      slice: {}\n    },\n    style: {\n      slice: '$shape'\n    },\n    data: {}\n  },\n  created() {\n    this.rect = { x: 0, y: 0, width: 0, height: 0 };\n  },\n  beforeRender(opts) {\n    this.rect = opts.size;\n  },\n  render({ data }) {\n    const arcValues = [];\n    const stngs = this.settings.settings;\n    const { items } = this.resolver.resolve({\n      data,\n      defaults: extend({}, DEFAULT_DATA_SETTINGS.slice, this.style.slice),\n      settings: stngs.slice\n    });\n    for (let i = 0, len = items.length; i < len; i++) {\n      arcValues.push(arcValue(stngs, items[i]));\n    }\n    const pieGen = pie().sortValues(null);\n    pieGen.startAngle(stngs.startAngle);\n    pieGen.endAngle(stngs.endAngle);\n    pieGen.padAngle(stngs.padAngle);\n    const arcData = pieGen(arcValues);\n    return createDisplayPies(arcData, extend({}, this.rect, { x: 0, y: 0 }), items);\n  }\n};\n\nexport default pieComponent;\n","import crispify from './crispifier';\n\nclass Transposer {\n  /**\n   * @private\n   */\n  constructor(...items) {\n    this.reset();\n\n    this.push(...items);\n  }\n\n  /**\n   * Evaluate a key for a transposed coordinate\n   *\n   * @param  {String} key   Key\n   * @return {String}         Actual key\n   */\n  static evaluateKey(key, flipXY) {\n    if (flipXY) {\n      const firstChar = key.substring(0, 1);\n      const rest = key.substring(1);\n\n      if (firstChar === 'x') {\n        return `y${rest}`;\n      } else if (firstChar === 'y') {\n        return `x${rest}`;\n      } else if (key === 'cx') {\n        return 'cy';\n      } else if (key === 'cy') {\n        return 'cx';\n      } else if (key === 'width') {\n        return 'height';\n      } else if (key === 'height') {\n        return 'width';\n      }\n    }\n\n    return key;\n  }\n\n  /**\n   * Transpose a coordinate according to this.flipXY and\n   * the available rendering area\n   *\n   * @param  {String} key        The key of the coordinate to transpose\n   * @param  {Number} coordinate The coordinate\n   * @return {Number}            The actual location of the coordinate\n   */\n  transposeCoordinate(key, coordinate, flipXY) {\n    if (typeof coordinate === 'number' && isFinite(coordinate)) {\n      const firstChar = key.substring(0, 1);\n\n      if (firstChar === 'x' || key === 'cx') {\n        return coordinate * this.width;\n      } else if (key === 'width') {\n        return coordinate * this.width;\n      } else if (key === 'r') {\n        return coordinate * (!flipXY ? this.width : this.height);\n      } else if (firstChar === 'y' || key === 'cy') {\n        return coordinate * this.height;\n      } else if (key === 'height') {\n        return coordinate * this.height;\n      }\n    }\n\n    return coordinate;\n  }\n\n  /**\n   * Push an item into the storage of the transposer\n   *\n   * @param  {Object} items An item to be drawed\n   * @return {Object}       Can be chained\n   */\n  push(...items) {\n    this.storage.push(...items);\n    return this;\n  }\n\n  processItem(item) {\n    let newItem = {};\n    const flipXY = (typeof item.flipXY !== 'undefined' ? item.flipXY : this.flipXY);\n    const crisp = (typeof item.crisp !== 'undefined' ? item.crisp : this.crisp);\n\n    if (item.fn && typeof item.fn === 'function') {\n      let width = flipXY ? this.height : this.width;\n      let height = flipXY ? this.width : this.height;\n\n      item = item.fn({ width, height, flipXY });\n\n      const objectKeys = Object.keys(item);\n\n      for (let ki = 0, kl = objectKeys.length; ki < kl; ki++) {\n        let key = objectKeys[ki];\n        const nkey = Transposer.evaluateKey(key, flipXY);\n        newItem[nkey] = item[key];\n      }\n    } else {\n      const objectKeys = Object.keys(item);\n\n      for (let ki = 0, kl = objectKeys.length; ki < kl; ki++) {\n        let key = objectKeys[ki];\n        const nkey = Transposer.evaluateKey(key, flipXY);\n        const nval = this.transposeCoordinate(nkey, item[key], flipXY);\n        newItem[nkey] = nval;\n      }\n    }\n\n    if (crisp) {\n      crispify(newItem);\n    }\n\n    return newItem;\n  }\n\n  /**\n   * Get the output of the transposer\n   *\n   * @return {Array}   Array of objects\n   */\n  output() {\n    let items = [];\n\n    for (let i = 0, l = this.storage.length; i < l; i++) {\n      let newItem = this.processItem(this.storage[i]);\n\n      items.push(newItem);\n    }\n\n    return items;\n  }\n\n  /**\n   * Reset the transposer\n   *\n   * @return {Undefined}  Does not return anything\n   */\n  reset() {\n    this.storage = [];\n    this.flipXY = false;\n    this.crisp = false;\n\n    this.width = 0;\n    this.height = 0;\n  }\n}\n\nexport function transposer(...items) {\n  return new Transposer(...items);\n}\n\nexport default Transposer;\n","import extend from 'extend';\nimport { transposer } from '../../transposer/transposer';\nimport { updateScaleSize } from '../../scales';\n\n/**\n * Generate array of lines (ticks) from scale\n *\n * @param {object} scale - A scale supplied by the chart\n * @param {object} settings - The settings object from the grid line component\n * @param {object} rect - The rect containing width and height to renderer in\n * @returns {array} - Returns an array of ticks\n * @ignore\n */\nfunction lineGen(scale, distance) {\n  if (!scale || !distance) {\n    return [];\n  }\n  return (scale.cachedTicks && scale.cachedTicks()) || scale.ticks({ distance });\n}\n\nconst gridLineComponent = {\n  created() {\n  },\n\n  require: ['chart', 'renderer'],\n  defaultSettings: {\n    displayOrder: 0,\n    style: { // Theming style\n      ticks: '$guide-line',\n      minorTicks: '$guide-line--minor'\n    }\n  },\n\n  beforeRender(opts) {\n    this.rect = opts.size;\n\n    this.blueprint = transposer();\n\n    this.blueprint.width = this.rect.width;\n    this.blueprint.height = this.rect.height;\n    this.blueprint.x = this.rect.x;\n    this.blueprint.y = this.rect.y;\n    this.blueprint.crisp = true;\n  },\n\n  render() {\n    // Setup scales\n    this.x = this.settings.x ? this.chart.scale(this.settings.x) : null;\n    this.y = this.settings.y ? this.chart.scale(this.settings.y) : null;\n    updateScaleSize(this, 'x', this.rect.width);\n    updateScaleSize(this, 'y', this.rect.height);\n\n    // Return an empty array to abort rendering when no scales are available to renderer\n    if (!this.x && !this.y) {\n      return [];\n    }\n\n    this.settings.ticks = extend({ show: true }, this.style.ticks, this.settings.ticks || {});\n    this.settings.minorTicks = extend({ show: false }, this.style.minorTicks, this.settings.minorTicks || {});\n\n    // Setup lines for X and Y\n    this.lines = {\n      x: [],\n      y: []\n    };\n\n    // Use the lineGen function to generate appropriate ticks\n    this.lines.x = lineGen(this.x, this.rect.width);\n    this.lines.y = lineGen(this.y, this.rect.height);\n\n    // Set all Y lines to flipXY by default\n    // This makes the transposer flip them individually\n    this.lines.y = this.lines.y.map(i => extend(i, { flipXY: true }));\n\n    // Define a style that differs between major and minor ticks.\n    let style = {};\n\n    // Loop through all X and Y lines\n    [...this.lines.x, ...this.lines.y].forEach((p) => {\n      style = p.isMinor ? this.settings.minorTicks : this.settings.ticks;\n\n      // If the style's show is falsy, don't renderer this item (to respect axis settings).\n      if (style.show) {\n        // Use the transposer to handle actual positioning\n        this.blueprint.push({\n          type: 'line',\n          x1: p.position,\n          y1: 0,\n          x2: p.position,\n          y2: 1,\n          stroke: style.stroke || 'black',\n          strokeWidth: typeof style.strokeWidth !== 'undefined' ? style.strokeWidth : 1,\n          flipXY: p.flipXY || false // This flips individual points (Y-lines)\n        });\n      }\n    });\n\n    return this.blueprint.output();\n  }\n};\n\nexport default gridLineComponent;\n","import extend from 'extend';\nimport Collision from '../../math/narrow-phase-collision';\n\nexport function refLabelDefaultSettings() {\n  return {\n    fill: '#000',\n    fontFamily: 'Arial',\n    fontSize: '12px',\n    opacity: 1,\n    maxWidth: 1,\n    maxWidthPx: 9999,\n    padding: 5,\n    background: {\n      fill: '#fff',\n      stroke: 'transparent',\n      strokeWidth: 0,\n      opacity: 0.5\n    }\n  };\n}\n\n/**\n * Converts a numerical OR string value to a normalized value\n *\n * @param {string|number} align -Description how to align (Numerical from 0-1 or 'top', 'left', 'center', 'middle', 'bottom' or 'right')\n * @returns {number} - Normalized value 0...1\n * @ignore\n */\nexport function alignmentToNumber(align) {\n  if (typeof align === 'undefined') {\n    return 0;\n  } else if (typeof align === 'number' && isFinite(align)) {\n    return align;\n  } else if (typeof align === 'string') {\n    switch (align) {\n      case 'center':\n      case 'middle':\n        return 0.5;\n      case 'bottom':\n      case 'right':\n        return 1;\n      case 'top':\n      case 'left':\n      default:\n        return 0;\n    }\n  }\n\n  return 0;\n}\n\n/**\n * Create line and label (if applicable)\n * Does not return anything, modifies \"items\" property instead (should be re-considered)\n *\n * @param {object} p - Current point\n * @param {object} style - Applicable line styling\n * @param {object} settings - Settings object derived from parent\n * @param {object[]} items - Array of all items (for collision detection)\n * @ignore\n */\nexport function createLineWithLabel({ chart, blueprint, renderer, p, settings, items }) {\n  let doesNotCollide = true;\n  let line = false;\n  let rect = false;\n  let label = false;\n  let value = false;\n  let style = extend(true, {}, settings.style.line, p.line || {});\n\n  // Use the transposer to handle actual positioning\n  line = blueprint.processItem({\n    type: 'line',\n    x1: p.position,\n    y1: 0,\n    x2: p.position,\n    y2: 1,\n    stroke: style.stroke || 'black',\n    strokeWidth: style.strokeWidth || 1,\n    flipXY: p.flipXY || false // This flips individual points (Y-lines)\n  });\n\n  if (p.label) {\n    const item = extend(true, refLabelDefaultSettings(), settings.style.label || {}, { fill: style.stroke }, p.label);\n    let formatter;\n    let measuredValue = {\n      width: 0,\n      height: 0\n    };\n    let valueString = '';\n\n    if (typeof p.formatter === 'string') {\n      formatter = chart.formatter(p.formatter);\n    } else if (typeof p.formatter === 'object') {\n      formatter = chart.formatter(p.formatter);\n    } else if (typeof p.scale !== 'undefined' && p.scale.data) {\n      // TODO - Add support for array as source into formatter\n      const scaleData = p.scale.data() && p.scale.data().fields;\n      formatter = scaleData && scaleData[0] ? scaleData[0].formatter() : null;\n    }\n\n    if (formatter) {\n      valueString = ` (${formatter(p.value)})`;\n    } else if (p.scale) {\n      valueString = ` (${p.value})`;\n    }\n\n    if (valueString) {\n      measuredValue = renderer.measureText({\n        text: valueString,\n        fontFamily: item.fontFamily,\n        fontSize: item.fontSize\n      });\n    }\n\n    // Measure the label text\n    let measuredLabel = renderer.measureText({\n      text: item.text || '',\n      fontFamily: item.fontFamily,\n      fontSize: item.fontSize\n    });\n\n    let measured = {\n      width: measuredLabel.width + measuredValue.width,\n      height: Math.max(measuredLabel.height, measuredValue.height)\n    };\n\n    let labelPadding = item.padding;\n\n    // let anchor = item.anchor === 'end' ? 'end' : 'start';\n\n    let align = alignmentToNumber(p.flipXY ? item.vAlign : item.align);\n    let vAlign = alignmentToNumber(p.flipXY ? item.align : item.vAlign);\n\n    let calcWidth = Math.min(1 + measured.width + (labelPadding * 2), item.maxWidth * blueprint.width, item.maxWidthPx);\n    let calcHeight = measured.height + (labelPadding * 2);\n\n    let rectWidth = (p.flipXY ? calcHeight : calcWidth);\n    let rectHeight = (p.flipXY ? calcWidth : calcHeight);\n\n    rect = blueprint.processItem({\n      fn: ({ width, height }) => {\n        let x = (p.position * width) - ((p.flipXY ? calcHeight : calcWidth) * (1 - align));\n        x = p.flipXY ? x : Math.max(x, 0);\n        const y = Math.max(Math.abs((vAlign * height) - (rectHeight * vAlign)), 0);\n        return {\n          type: 'rect',\n          x,\n          y,\n          width: p.flipXY ? rectWidth : Math.min(rectWidth, blueprint.width - x),\n          height: rectHeight,\n          stroke: item.background.stroke,\n          strokeWidth: item.background.strokeWidth,\n          fill: item.background.fill,\n          opacity: item.background.opacity\n        };\n      },\n      flipXY: p.flipXY || false // This flips individual points (Y-lines)\n    });\n\n    if (\n      rect.x < -1 || (rect.x + rect.width) > (blueprint.width + 1) ||\n      rect.y < -1 || (rect.y + rect.height) > (blueprint.height + 1)\n    ) {\n      // do not create labels if out of bounds\n      rect = undefined;\n    } else {\n      // Labels are just basic objects attached to a corner of a rect,\n      // and this rect needs to already be processed\n      // so there is no blueprint.processItem required here\n      label = {\n        type: 'text',\n        text: item.text || '',\n        fill: item.fill,\n        opacity: item.opacity,\n        fontFamily: item.fontFamily,\n        fontSize: item.fontSize,\n        x: rect.x + labelPadding,\n        y: rect.y + (rect.height / 2) + (measured.height / 3),\n        maxWidth: rect.width - (labelPadding * 2) - measuredValue.width,\n        anchor: 'start'\n      };\n\n      if (valueString) {\n        value = {\n          type: 'text',\n          text: valueString || '',\n          fill: item.fill,\n          opacity: item.opacity,\n          fontFamily: item.fontFamily,\n          fontSize: item.fontSize,\n          x: label.x + 3 + (rect.width - (measuredValue.width + (labelPadding * 2))),\n          y: label.y\n        };\n      }\n\n      // Detect collisions with other labels/rects or lines\n      for (let i = 0, len = items.length; i < len; i++) {\n        let curItem = items[i];\n\n        if (curItem.type === 'rect') {\n          // We only detect rects here, since rects are always behind labels,\n          // and we wouldn't want to measure text one more time\n          if (Collision.testRectRect(rect, curItem)) {\n            doesNotCollide = false;\n          }\n        } else if (curItem.type === 'line') {\n          // This will only collide when flipXY are the same for both objects,\n          // So it only collides on objects on the same \"axis\"\n          if (p.flipXY === curItem.flipXY && Collision.testRectLine(rect, curItem)) {\n            doesNotCollide = false;\n          }\n        }\n      }\n    }\n  }\n\n  // Always push the line,\n  // but this is done after collision detection,\n  // because otherwise it would collide with it's own line\n  items.push(line);\n\n  // Only push rect & label if we haven't collided and both are defined\n  if (doesNotCollide && rect && label) {\n    items.push(rect, label);\n    if (value) {\n      items.push(value);\n    }\n  }\n}\n","import extend from 'extend';\nimport { transposer } from '../../transposer/transposer';\nimport { oobManager } from './oob';\nimport { createLineWithLabel } from './lines-and-labels';\n\nfunction createOobData(line) {\n  const data = {\n    value: line.value\n  };\n\n  if (line.label) {\n    data.label = line.label.text;\n  }\n\n  return data;\n}\n\nfunction filterUndefinedValue(line) {\n  return typeof line.value !== 'undefined';\n}\n\n/**\n * @typedef {object} component--ref-line\n * @experimental\n * @property {refline-generic-style} [style=refline-generic-style] - x coordinate\n * @property {object} lines - X & Y Lines\n * @property {reflines-x[]} [lines.x=refline-line[]] - lines along X\n * @property {reflines-y[]} [lines.y=refline-line[]] - lines along Y\n */\n\n/**\n * @typedef {object} component--ref-line.style\n * @property {refline-oob-style} [oob=component--ref-line.style.oob] - Style for out of bounds object (oob)\n * @property {refline-line} [line=refline-line] - Generic style for lines\n * @property {refline-line-label} [label=refline-line-label] - Generic style for labels\n */\n\n/**\n * @typedef {object} component--ref-line.style.oob\n * @property {boolean} [show=true] - Show out of bounds items\n * @property {string} [type=undefined] - EXPERIMENTAL:  Set this to 'arc' for an experimental out of bounds shape (only works with SVG)\n * @property {number} [width=10] - Width of the out of bounds object\n * @property {string} [fill='#1A1A1A'] - Fill color of the OOB object\n * @property {string} [stroke='transparent'] - Stroke of the OOB object\n * @property {number} [strokeWidth=0] - Stroke width of the OOB object\n * @property {number} [opacity=1] - Opacity of the OOB object\n * @property {refline-generic-text} [text=refline-generic-text] - Text configuration for out of bounds\n * @property {refline-generic-object} [triangle=refline-generic-object] - The triangle in OOB\n * @property {object} [padding] - Padding on X\n * @property {number} [padding.x=28] - Padding on X\n * @property {number} [padding.y=5] - Padding on X\n */\n\n/**\n * @typedef {object} component--ref-line.generic-text\n * @property {string} [text=''] - Text (if applicable)\n * @property {string} [fontSize='12px'] - Font size (if applicable)\n * @property {string} [fontFamily='Arial'] - Font family\n * @property {string} [fill='#fff'] - Fill color\n * @property {string} [stroke='transparent'] - Stroke\n * @property {number} [strokeWidth=0] - Stroke width\n * @property {number} [opacity=1] - Opacity\n */\n\n/**\n * @typedef {object} component--ref-line.line\n * @property {number} value - The value of the reference line. If a scale is specified, it is applied.\n * @property {Scale} [scale=undefined] - Scale to use (if undefined will use normalized value 0-1)\n * @property {refline-generic-object} [line=refline-generic-object] - The style of the line\n * @property {refline-line-label} [label=refline-line-label] - The label style of the line\n */\n\n/**\n * @typedef {object} component--ref-line.line-label\n * @property {number} padding=5 - Padding inside the label\n * @property {string} [text=''] - Text\n * @property {string} [fontSize='12px'] - Font size\n * @property {string} [fontFamily='Arial'] - Font family\n * @property {string} [stroke='transparent'] - Stroke\n * @property {number} [strokeWidth=0] - Stroke width\n * @property {number} [opacity=1] - Opacity\n * @property {number|string} [align=0] - Alignment property left to right (0 = left, 1 = right). Also supports string ('left', 'center', 'middle', 'right')\n * @property {number|string} [vAlign=0] - Alignment property top to bottom (0 = top, 1 = bottom). Also supports string ('top', 'center', 'middle', 'bottom')\n * @property {number} [maxWidth=1] - The maximum relative width to the width of the rendering area (see maxWidthPx below aswell)\n * @property {number} [maxWidthPx=9999] - The maximum width in pixels.\n * @property {refline-line-label-background} [background=refline-line-label-background] - The background style (rect behind text)\n */\n\n/**\n * @example\n * // Labels will be rendered with the maximum size of the smallest value of maxWidth and maxWidthPx size, so you may specify maxWidth 0.8 but maxWidthPx 100 and will never be over 100px and never over 80% of the renderable area.\n */\n\n/**\n * @typedef {object} component--ref-line.line-label-background\n * @property {string} [fill='#fff'] - Fill color\n * @property {string} [stroke='transparent'] - Stroke\n * @property {number} [strokeWidth=0] - Stroke width\n * @property {number} [opacity=0.5] - Opacity\n */\n\n/**\n * @typedef {object} component--ref-line.generic-object\n * @property {string} [fill='#fff'] - Fill color\n * @property {string} [stroke='transparent'] - Stroke\n * @property {number} [strokeWidth=0] - Stroke width\n * @property {number} [opacity=1] - Opacity\n */\n\nconst refLineComponent = {\n  require: ['chart', 'renderer', 'dockConfig'],\n  defaultSettings: {\n    displayOrder: 0,\n    style: {\n      oob: {\n        show: true,\n        width: 10,\n        fill: '#1A1A1A',\n        stroke: 'transparent',\n        strokeWidth: 0,\n        opacity: 1,\n        text: {\n          fontFamily: 'Arial',\n          stroke: 'transparent',\n          fill: '#fff',\n          strokeWidth: 0,\n          opacity: 1\n        },\n        triangle: {\n          fill: '#4D4D4D',\n          stroke: 'transparent',\n          strokeWidth: 0,\n          opacity: 1\n        },\n        padding: {\n          x: 28,\n          y: 5\n        }\n      },\n      line: {\n        stroke: '#000'\n      },\n      label: {\n        strokeWidth: 0\n      }\n    }\n  },\n\n  preferredSize() {\n    return 30;\n  },\n\n  beforeRender(opts) {\n    this.rect = opts.size;\n\n    this.blueprint = transposer();\n\n    this.blueprint.width = this.rect.width;\n    this.blueprint.height = this.rect.height;\n    this.blueprint.x = this.rect.x;\n    this.blueprint.y = this.rect.y;\n    this.blueprint.crisp = true;\n  },\n\n  render() {\n    let settings = this.settings;\n\n    // Setup lines for X and Y\n    this.lines = {\n      x: [],\n      y: []\n    };\n\n    this.lines.x = (settings.lines && settings.lines.x) || [];\n    this.lines.y = (settings.lines && settings.lines.y) || [];\n\n    if (this.lines.x.length === 0 && this.lines.y.length === 0) {\n      return [];\n    }\n\n    const oob = {\n      x0: [],\n      x1: [],\n      y0: [],\n      y1: []\n    };\n\n    // Convert a value to an actual position using the scale\n    this.lines.x = this.lines.x.filter(filterUndefinedValue).map((line) => {\n      if (line.scale) {\n        let scale = this.chart.scale(line.scale);\n        return extend(line, { scale, position: scale(line.value) });\n      }\n\n      return extend(line, { position: line.value });\n    });\n    // Set all Y lines to flipXY by default\n    // This makes the transposer flip them individually\n    this.lines.y = this.lines.y.filter(filterUndefinedValue).map((line) => {\n      if (line.scale) {\n        let scale = this.chart.scale(line.scale);\n        return extend(line, { scale, position: scale(line.value), flipXY: true });\n      }\n\n      return extend(line, { position: line.value, flipXY: true });\n    });\n\n    // Move out of bounds lines (OOB) to separate rendering\n    this.lines.x = this.lines.x.filter((line) => {\n      if (line.position < 0 || line.position > 1) {\n        oob[`x${line.position > 1 ? 1 : 0}`].push(createOobData(line));\n        return false;\n      }\n      return true;\n    });\n\n    this.lines.y = this.lines.y.filter((line) => {\n      if (line.position < 0 || line.position > 1) {\n        oob[`y${line.position > 1 ? 1 : 0}`].push(createOobData(line));\n        return false;\n      }\n      return true;\n    });\n\n    let items = [];\n\n    // Loop through all X and Y lines\n    [...this.lines.x, ...this.lines.y].forEach((p) => {\n      let show = p.show === true || typeof p.show === 'undefined';\n\n      if (show) {\n        // Create line with labels\n        createLineWithLabel({ chart: this.chart, blueprint: this.blueprint, renderer: this.renderer, p, settings, items });\n      }\n    });\n\n    // Handle out of bounds\n    if (settings.style.oob.show) {\n      oobManager({ blueprint: this.blueprint, oob, settings, items });\n    }\n\n    return items;\n  }\n};\n\nexport default refLineComponent;\n","import extend from 'extend';\n\nfunction appendStyle(struct, buildOpts) {\n  extend(struct, buildOpts.style);\n  const halfWidth = struct.strokeWidth / 2;\n\n  if (buildOpts.align === 'top') {\n    struct.y1 -= halfWidth;\n    struct.y2 -= halfWidth;\n  } else if (buildOpts.align === 'bottom') {\n    struct.y1 += halfWidth;\n    struct.y2 += halfWidth;\n  } else if (buildOpts.align === 'left') {\n    struct.x1 -= halfWidth;\n    struct.x2 -= halfWidth;\n  } else if (buildOpts.align === 'right') {\n    struct.x1 += halfWidth;\n    struct.x2 += halfWidth;\n  }\n}\n\nexport default function buildLine(buildOpts) {\n  const struct = {\n    type: 'line',\n    x1: 0,\n    x2: 0,\n    y1: 0,\n    y2: 0,\n    collider: {\n      type: null\n    }\n  };\n\n  if (buildOpts.align === 'top' || buildOpts.align === 'bottom') {\n    struct.x1 = buildOpts.innerRect.x - buildOpts.outerRect.x;\n    struct.x2 = buildOpts.innerRect.width + buildOpts.innerRect.x;\n    struct.y1 = struct.y2 = buildOpts.align === 'top' ? buildOpts.innerRect.height - buildOpts.padding : buildOpts.padding;\n  } else {\n    struct.x1 = struct.x2 = buildOpts.align === 'left' ? buildOpts.innerRect.width - buildOpts.padding : buildOpts.padding;\n    struct.y1 = buildOpts.innerRect.y - buildOpts.outerRect.y;\n    struct.y2 = buildOpts.innerRect.height + buildOpts.innerRect.y;\n  }\n\n  appendStyle(struct, buildOpts);\n\n  return struct;\n}\n","import { rotate as rotateVector } from '../../math/vector';\n\nfunction checkText(text) {\n  return typeof text === 'string' || typeof text === 'number' ? text : '-';\n}\n\nfunction appendStyle(struct, buildOpts) {\n  ['fill', 'fontSize', 'fontFamily'].forEach((style) => {\n    struct[style] = buildOpts.style[style];\n  });\n}\n\nfunction clampEnds(struct, buildOpts) {\n  if (buildOpts.tilted || buildOpts.stepSize) {\n    return;\n  }\n\n  const outerBoundaryMultipler = 0.75;\n  if (buildOpts.align === 'top' || buildOpts.align === 'bottom') {\n    const leftBoundary = 0;\n    const rightBoundary = buildOpts.outerRect.width;\n    const textWidth = Math.min((buildOpts.maxWidth * outerBoundaryMultipler) / 2, buildOpts.textRect.width / 2);\n    const leftTextBoundary = struct.x - textWidth;\n    const rightTextBoundary = struct.x + textWidth;\n    if (leftTextBoundary < leftBoundary) {\n      struct.anchor = 'start';\n      struct.x = buildOpts.innerRect.x - buildOpts.outerRect.x;\n      struct.maxWidth *= outerBoundaryMultipler;\n    } else if (rightTextBoundary > rightBoundary) {\n      struct.anchor = 'end';\n      struct.x = buildOpts.innerRect.width + buildOpts.innerRect.x;\n      struct.maxWidth *= outerBoundaryMultipler;\n    }\n  } else {\n    const topBoundary = 0;\n    const bottomBoundary = buildOpts.outerRect.height;\n    const textHeight = buildOpts.maxHeight / 2;\n    const topTextBoundary = struct.y - textHeight;\n    const bottomTextBoundary = struct.y + textHeight;\n    if (topTextBoundary < topBoundary) {\n      struct.y = buildOpts.innerRect.y - buildOpts.outerRect.y;\n      struct.baseline = 'text-before-edge';\n    } else if (bottomTextBoundary > bottomBoundary) {\n      struct.y = buildOpts.innerRect.height + (buildOpts.innerRect.y - buildOpts.outerRect.y);\n      struct.baseline = 'text-after-edge';\n    }\n  }\n}\n\nfunction appendPadding(struct, buildOpts) {\n  if (buildOpts.align === 'top') {\n    struct.y -= buildOpts.padding;\n  } else if (buildOpts.align === 'bottom') {\n    struct.y += buildOpts.padding + buildOpts.maxHeight;\n  } else if (buildOpts.align === 'left') {\n    struct.x -= buildOpts.padding;\n  } else if (buildOpts.align === 'right') {\n    struct.x += buildOpts.padding;\n  }\n}\n\nfunction appendTilting(struct, buildOpts) {\n  if (buildOpts.tilted) {\n    const r = -buildOpts.angle;\n    const radians = r * (Math.PI / 180);\n\n    if (buildOpts.align === 'bottom') {\n      struct.x -= (buildOpts.maxHeight * Math.sin(radians)) / 2;\n      struct.y -= buildOpts.maxHeight;\n      struct.y += (buildOpts.maxHeight * Math.cos(radians)) / 2;\n    } else {\n      struct.x -= (buildOpts.maxHeight * Math.sin(radians)) / 3;\n    }\n\n    struct.transform = `rotate(${r}, ${struct.x}, ${struct.y})`;\n    struct.anchor = (buildOpts.align === 'bottom') === (buildOpts.angle < 0) ? 'start' : 'end';\n\n    // adjustForEnds\n    const textWidth = Math.cos(radians) * buildOpts.maxWidth;\n    if ((buildOpts.align === 'bottom') === (buildOpts.angle < 0)) {\n      // right\n      const rightBoundary = buildOpts.outerRect.width - buildOpts.paddingEnd;\n      const rightTextBoundary = struct.x + textWidth;\n      if (rightTextBoundary > rightBoundary) {\n        struct.maxWidth = (rightBoundary - struct.x - 10) / Math.cos(radians);\n      }\n    } else {\n      // left\n      const leftBoundary = buildOpts.paddingEnd;\n      const leftTextBoundary = struct.x - textWidth;\n      if (leftTextBoundary < leftBoundary) {\n        struct.maxWidth = (struct.x - leftBoundary - 10) / Math.cos(radians);\n      }\n    }\n  }\n}\n\nfunction bandwidthCollider(tick, struct, buildOpts) {\n  if (buildOpts.align === 'bottom' || buildOpts.align === 'top') {\n    const tickCenter = tick.position * buildOpts.innerRect.width;\n    const leftBoundary = tickCenter + (buildOpts.innerRect.x - buildOpts.outerRect.x - (buildOpts.stepSize / 2));\n    struct.collider = {\n      type: 'rect',\n      x: leftBoundary,\n      y: 0,\n      width: leftBoundary < 0 ? buildOpts.stepSize + leftBoundary : buildOpts.stepSize, // Adjust collider so that it doesnt extend onto neighbor collider\n      height: buildOpts.innerRect.height\n    };\n  } else {\n    const tickCenter = tick.position * buildOpts.innerRect.height;\n    const topBoundary = tickCenter + (buildOpts.innerRect.y - buildOpts.outerRect.y - (buildOpts.stepSize / 2));\n    struct.collider = {\n      type: 'rect',\n      x: 0,\n      y: topBoundary,\n      width: buildOpts.innerRect.width,\n      height: topBoundary < 0 ? buildOpts.stepSize + topBoundary : buildOpts.stepSize // Adjust collider so that it doesnt extend onto neighbor collider\n    };\n  }\n\n  // Clip edges of the collider, should not extend beyoned the outerRect\n  const collider = struct.collider;\n  collider.x = Math.max(collider.x, 0);\n  collider.y = Math.max(collider.y, 0);\n  const widthClip = (collider.x + collider.width) - (buildOpts.outerRect.x + buildOpts.outerRect.width);\n  collider.width = widthClip > 0 ? collider.width - widthClip : collider.width;\n  const heightClip = (collider.y + collider.height) - (buildOpts.outerRect.y + buildOpts.outerRect.height);\n  collider.height = heightClip > 0 ? collider.height - heightClip : collider.height;\n}\n\nfunction boundsCollider(tick, struct) {\n  struct.collider = {\n    type: 'polygon',\n    vertices: [\n      { x: struct.boundingRect.x, y: struct.boundingRect.y },\n      { x: struct.boundingRect.x + struct.boundingRect.width, y: struct.boundingRect.y },\n      { x: struct.boundingRect.x + struct.boundingRect.width, y: struct.boundingRect.y + struct.boundingRect.height },\n      { x: struct.boundingRect.x, y: struct.boundingRect.y + struct.boundingRect.height }\n    ]\n  };\n}\n\nfunction tiltedCollider(tick, struct, buildOpts) {\n  const radians = buildOpts.angle * (Math.PI / 180);\n  const halfWidth = Math.max(buildOpts.stepSize / 2, struct.boundingRect.height / 2); // Handle if bandwidth is zero\n  const startAnchor = struct.anchor === 'start';\n  const em = struct.anchor === 'end' && radians < 0;\n  const sp = struct.anchor === 'start' && radians >= 0;\n  const y = struct.boundingRect.y + (sp || em ? struct.boundingRect.height : 0);\n  // Generate starting points at bandwidth boundaries\n  const points = [\n    { x: struct.x - halfWidth, y },\n    { x: struct.x + halfWidth, y }\n  ].map(p => rotateVector(p, radians, { x: struct.x, y: struct.y })); // Rotate around center point to counteract labels rotation\n\n  // Append points to wrap polygon around label\n  const margin = 10; // extend slightly to handle single char labels better\n  const leftPoint = {\n    x: startAnchor ? struct.boundingRect.x + struct.boundingRect.width + margin : struct.boundingRect.x - margin,\n    y: struct.boundingRect.y + struct.boundingRect.height\n  };\n\n  const rightPoint = {\n    x: startAnchor ? struct.boundingRect.x + struct.boundingRect.width + margin : struct.boundingRect.x - margin,\n    y: struct.boundingRect.y\n  };\n\n  const orderedPoints = radians >= 0 ? [leftPoint, rightPoint] : [rightPoint, leftPoint];\n  points.push(...orderedPoints);\n\n  struct.collider = {\n    type: 'polygon',\n    vertices: points\n  };\n}\n\nfunction appendCollider(tick, struct, buildOpts) {\n  if (buildOpts.layered || !buildOpts.stepSize) {\n    boundsCollider(tick, struct);\n  } else if (buildOpts.tilted) {\n    tiltedCollider(tick, struct, buildOpts);\n  } else {\n    bandwidthCollider(tick, struct, buildOpts);\n  }\n}\n\nfunction appendBounds(struct, buildOpts) {\n  struct.boundingRect = buildOpts.textBounds(struct);\n}\n\nfunction wiggle(buildOpts, isVertical) {\n  const a = isNaN(buildOpts.style.align) ? 0.5 : Math.min(Math.max(buildOpts.style.align, 0), 1);\n  let w = 0;\n  if (buildOpts.tilted) {\n    w = (buildOpts.stepSize * a);\n  } else {\n    const size = isVertical ? buildOpts.textRect.height : buildOpts.textRect.width;\n    w = Math.max(0, buildOpts.stepSize - size) * a;\n  }\n\n  return w;\n}\n\nexport default function buildNode(tick, buildOpts) {\n  const struct = {\n    type: 'text',\n    text: checkText(tick.label),\n    x: 0,\n    y: 0,\n    maxWidth: buildOpts.maxWidth,\n    maxHeight: buildOpts.maxHeight\n  };\n\n  if (buildOpts.align === 'top' || buildOpts.align === 'bottom') {\n    struct.x = (tick.start * buildOpts.innerRect.width) + (buildOpts.innerRect.x - buildOpts.outerRect.x) + wiggle(buildOpts, false);\n    struct.y = buildOpts.align === 'top' ? buildOpts.innerRect.height : 0;\n    struct.anchor = buildOpts.stepSize ? 'start' : 'middle';\n\n    struct.x += isNaN(buildOpts.style.offset) ? 0 : +buildOpts.style.offset;\n  } else {\n    struct.y = (tick.start * buildOpts.innerRect.height) + (buildOpts.innerRect.y - buildOpts.outerRect.y) + wiggle(buildOpts, true);\n    struct.x = buildOpts.align === 'left' ? buildOpts.innerRect.width : 0;\n    struct.anchor = buildOpts.align === 'left' ? 'end' : 'start';\n    struct.baseline = buildOpts.stepSize ? 'text-before-edge' : 'central';\n\n    struct.y += isNaN(buildOpts.style.offset) ? 0 : +buildOpts.style.offset;\n  }\n\n  appendStyle(struct, buildOpts);\n  clampEnds(struct, buildOpts);\n  appendPadding(struct, buildOpts);\n  appendTilting(struct, buildOpts);\n  appendBounds(struct, buildOpts);\n  appendCollider(tick, struct, buildOpts);\n\n  return struct;\n}\n","import extend from 'extend';\n\nfunction appendStyle(struct, buildOpts) {\n  extend(struct, buildOpts.style);\n}\n\nfunction appendPadding(struct, buildOpts) {\n  if (buildOpts.align === 'top') {\n    struct.y1 -= buildOpts.padding;\n    struct.y2 -= buildOpts.padding;\n  } else if (buildOpts.align === 'bottom') {\n    struct.y1 += buildOpts.padding;\n    struct.y2 += buildOpts.padding;\n  } else if (buildOpts.align === 'left') {\n    struct.x1 -= buildOpts.padding;\n    struct.x2 -= buildOpts.padding;\n  } else if (buildOpts.align === 'right') {\n    struct.x1 += buildOpts.padding;\n    struct.x2 += buildOpts.padding;\n  }\n}\n\nfunction adjustForEnds(struct, buildOpts) {\n  const halfWidth = struct.strokeWidth / 2;\n\n  if (struct.x1 === buildOpts.innerRect.width) { // outer end tick\n    struct.x1 -= halfWidth;\n    struct.x2 -= halfWidth;\n  } else if (struct.x1 === 0) { // outer start tick\n    struct.x1 += halfWidth;\n    struct.x2 += halfWidth;\n  } else if (struct.y1 === buildOpts.innerRect.height) {\n    struct.y1 -= halfWidth;\n    struct.y2 -= halfWidth;\n  } else if (struct.y1 === 0) {\n    struct.y1 += halfWidth;\n    struct.y2 += halfWidth;\n  }\n}\n\nexport default function buildNode(tick, buildOpts) {\n  const struct = {\n    type: 'line',\n    x1: 0,\n    x2: 0,\n    y1: 0,\n    y2: 0,\n    collider: {\n      type: null\n    }\n  };\n\n  if (buildOpts.align === 'top' || buildOpts.align === 'bottom') {\n    struct.x1 = struct.x2 = (tick.position * buildOpts.innerRect.width) + (buildOpts.innerRect.x - buildOpts.outerRect.x);\n    struct.y1 = buildOpts.align === 'top' ? buildOpts.innerRect.height : 0;\n    struct.y2 = buildOpts.align === 'top' ? struct.y1 - buildOpts.tickSize : struct.y1 + buildOpts.tickSize;\n  } else {\n    struct.y1 = struct.y2 = (tick.position * (buildOpts.innerRect.height)) + (buildOpts.innerRect.y - buildOpts.outerRect.y);\n    struct.x1 = buildOpts.align === 'left' ? buildOpts.innerRect.width : 0;\n    struct.x2 = buildOpts.align === 'left' ? struct.x1 - buildOpts.tickSize : struct.x1 + buildOpts.tickSize;\n  }\n\n  appendStyle(struct, buildOpts);\n  appendPadding(struct, buildOpts);\n  adjustForEnds(struct, buildOpts);\n  return struct;\n}\n","function isMajorTick(tick) {\n  return !tick.isMinor;\n}\n\nfunction isVerticalLabelOverlapping({\n  majorTicks,\n  measureText,\n  rect\n}) {\n  const size = rect.height;\n  const textHeight = measureText('M').height;\n  if (majorTicks.length < 2) {\n    return false;\n  }\n\n  const d = size * Math.abs(majorTicks[0].position - majorTicks[1].position);\n  if (d < textHeight) {\n    return true;\n  }\n\n  return false;\n}\n\nfunction isHorizontalLabelOverlapping({\n  majorTicks,\n  measureText,\n  rect,\n  state\n}) {\n  /*\n   * Currently isn't any good way of doing a accurate measurement on size available (bandWidth * width) for labels.\n   * It's a lifecycle limitation as components docked either left or right can affect the width available after the calculation is done.\n   * <number of components docked left/right> * <width of components> => Less accurate ===> Can result in only ellips char rendered as labels.\n   */\n  const m = state.labels.activeMode === 'layered' ? 2 : 1;\n  const size = rect.width;\n  const tickSize = majorTicks\n    .map(tick => tick.label)\n    .map(l => `${l.slice(0, 1)}${l.length > 1 ? '…' : ''}`) // Measure the size of 1 chars + the ellips char.\n    .map(measureText)\n    .map(r => r.width);\n  for (let i = 0; i < majorTicks.length; ++i) {\n    const tick = majorTicks[i];\n    const d1 = m * size * Math.abs(tick.start - tick.end);\n    const d2 = tickSize[i];\n    if (d1 < d2) {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction shouldAutoTilt({\n  majorTicks,\n  measure,\n  rect,\n  state,\n  settings\n}) {\n  const glyphCount = settings.labels.maxGlyphCount;\n  const m = state.labels.activeMode === 'layered' ? 2 : 1;\n  const magicSizeRatioMultipler = 0.7; // So that if less the 70% of labels are visible, toggle on tilt\n  const ellipsCharSize = measure('…').width; // include ellipsed char in calc as it's generally large then the char it replaces\n  const size = rect.width;\n  let maxLabelWidth = 0;\n  let d1 = 0;\n\n  if (!isNaN(glyphCount)) {\n    const minBandwidth = majorTicks.reduce((prev, curr) => Math.min(Math.abs(curr.start - curr.end), prev), Infinity);\n    d1 = m * size * minBandwidth;\n    maxLabelWidth = measure('M').width * magicSizeRatioMultipler * glyphCount;\n    if (maxLabelWidth + ellipsCharSize > d1) {\n      return true;\n    }\n  } else {\n    for (let i = 0; i < majorTicks.length; i++) {\n      const tick = majorTicks[i];\n      const label = tick.label;\n      const width = measure(label).width * (label.length > 1 ? magicSizeRatioMultipler : 1);\n      d1 = m * size * Math.abs(tick.start - tick.end);\n      if (width + ellipsCharSize > d1) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n}\n\nfunction isTiltedLabelOverlapping({\n  majorTicks,\n  measureText,\n  rect,\n  bleedSize,\n  angle\n}) {\n  if (majorTicks.length < 2) {\n    return false;\n  } else if (angle === 0) {\n    return true; // TODO 0 angle should be considered non-tilted\n  }\n  const absAngle = Math.abs(angle);\n  const size = rect.width - bleedSize;\n  const stepSize = size * Math.abs(majorTicks[0].position - majorTicks[1].position);\n  const textHeight = measureText('M').height;\n  const reciprocal = 1 / stepSize; // 1 === Math.sin(90 * (Math.PI / 180))\n  const distanceBetweenLabels = Math.sin(absAngle * (Math.PI / 180)) / reciprocal;\n\n  return textHeight > distanceBetweenLabels;\n}\n\nfunction isToLarge({\n  rect,\n  state,\n  majorTicks,\n  measure,\n  horizontal\n}) {\n  if (horizontal) {\n    return isHorizontalLabelOverlapping({\n      majorTicks,\n      measureText: measure,\n      rect,\n      state\n    });\n  }\n\n  return isVerticalLabelOverlapping({\n    majorTicks,\n    measureText: measure,\n    rect,\n    state\n  });\n}\n\nexport function getClampedValue({ value, maxValue, minValue, range, modifier }) {\n  if (!isNaN(range) && !isNaN(modifier)) {\n    value = range * modifier;\n  }\n\n  if (value > maxValue) {\n    value = maxValue;\n  }\n\n  if (value < minValue) {\n    value = minValue;\n  }\n\n  return value;\n}\n\nexport default function getSize({\n  isDiscrete,\n  rect,\n  formatter,\n  measureText,\n  scale,\n  settings,\n  state\n}) {\n  let size = 0;\n  const edgeBleed = { left: 0, top: 0, right: 0, bottom: 0 };\n  const {\n    maxLengthPx: maxValue,\n    minLengthPx: minValue\n  } = settings.labels;\n\n  if (settings.labels.show) {\n    const align = settings.align;\n    const horizontal = align === 'top' || align === 'bottom';\n    const distance = horizontal ? rect.width : rect.height;\n    const majorTicks = scale.ticks({\n      settings,\n      distance,\n      formatter\n    }).filter(isMajorTick);\n\n    const measure = (text) => {\n      const m = measureText({\n        text,\n        fontSize: settings.labels.fontSize,\n        fontFamily: settings.labels.fontFamily\n      });\n      m.width = getClampedValue({ value: m.width, maxValue, minValue });\n      return m;\n    };\n\n    if (isDiscrete && horizontal && settings.labels.mode === 'auto') {\n      if (shouldAutoTilt({ majorTicks, measure, rect, state, settings })) {\n        state.labels.activeMode = 'tilted';\n      } else {\n        state.labels.activeMode = 'horizontal';\n      }\n    }\n\n    if (isDiscrete && state.labels.activeMode !== 'tilted' && isToLarge({ rect, state, majorTicks, measure, horizontal })) {\n      const toLargeSize = Math.max(rect.width, rect.height); // used to hide the axis\n      return { size: toLargeSize, isToLarge: true };\n    }\n\n    let sizeFromTextRect;\n    if (state.labels.activeMode === 'tilted') {\n      const radians = Math.abs(settings.labels.tiltAngle) * (Math.PI / 180); // angle in radians\n      sizeFromTextRect = r => (getClampedValue({ value: r.width, maxValue, minValue }) * Math.sin(radians)) + (r.height * Math.cos(radians));\n    } else if (horizontal) {\n      sizeFromTextRect = r => r.height;\n    } else {\n      sizeFromTextRect = r => getClampedValue({ value: r.width, maxValue, minValue });\n    }\n\n    let labels;\n    if (horizontal && state.labels.activeMode !== 'tilted') {\n      labels = ['M'];\n    } else if (!isNaN(settings.labels.maxGlyphCount)) {\n      let label = '';\n      for (let i = 0; i < settings.labels.maxGlyphCount; i++) {\n        label += 'M';\n      }\n      labels = [label];\n    } else {\n      labels = majorTicks.map(tick => tick.label);\n    }\n    const tickMeasures = labels.map(measure);\n    const labelSizes = tickMeasures.map(sizeFromTextRect);\n    const textSize = Math.max(...labelSizes, 0);\n    size += textSize;\n    size += settings.labels.margin;\n\n    if (state.labels.activeMode === 'layered') {\n      size *= 2;\n    }\n\n    if (state.labels.activeMode === 'tilted') {\n      const extendLeft = (settings.align === 'bottom') === (settings.labels.tiltAngle >= 0);\n      const radians = Math.abs(settings.labels.tiltAngle) * (Math.PI / 180); // angle in radians\n      const h = measureText('M').height;\n      const maxWidth = (textSize - (h * Math.cos(radians))) / Math.sin(radians);\n      const labelWidth = r => (Math.min(maxWidth, r.width) * Math.cos(radians)) + r.height;\n      const adjustByPosition = (s, i) => {\n        const pos = majorTicks[i] ? majorTicks[i].position : 0;\n        if (extendLeft) {\n          return s - (pos * rect.width);\n        }\n        return s - ((1 - pos) * rect.width);\n      };\n      const bleedSize = Math.min(settings.labels.maxEdgeBleed, Math.max(...tickMeasures.map(labelWidth).map(adjustByPosition), 0)) + settings.paddingEnd;\n      const bleedDir = extendLeft ? 'left' : 'right';\n      edgeBleed[bleedDir] = bleedSize;\n\n      if (isDiscrete && isTiltedLabelOverlapping({ majorTicks, measureText, rect, bleedSize, angle: settings.labels.tiltAngle })) {\n        return { size: Math.max(rect.width, rect.height), isToLarge: true };\n      }\n    }\n  }\n\n  return { size, edgeBleed };\n}\n","import buildLine from './axis-line-node';\nimport buildLabel from './axis-label-node';\nimport buildTick from './axis-tick-node';\nimport NarrowPhaseCollision from '../../math/narrow-phase-collision';\nimport { getClampedValue } from './axis-label-size';\n\nfunction tickSpacing(settings) {\n  let spacing = 0;\n  spacing += settings.paddingStart;\n  spacing += settings.line.show ? settings.line.strokeWidth : 0;\n  spacing += settings.ticks.show ? settings.ticks.margin : 0;\n  return spacing;\n}\n\nfunction tickMinorSpacing(settings) {\n  return settings.line.strokeWidth + settings.minorTicks.margin;\n}\n\nfunction labelsSpacing(settings) {\n  let spacing = 0;\n  spacing += settings.ticks.show ? settings.ticks.tickSize : 0;\n  spacing += tickSpacing(settings) + settings.labels.margin;\n  return spacing;\n}\n\nfunction calcActualTextRect({ style, measureText, tick }) {\n  return measureText({\n    text: tick.label,\n    fontSize: style.fontSize,\n    fontFamily: style.fontFamily\n  });\n}\n\nfunction majorTicks(ticks) {\n  return ticks.filter(t => !t.isMinor);\n}\n\nfunction minorTicks(ticks) {\n  return ticks.filter(t => t.isMinor);\n}\n\nfunction tickBuilder(ticks, buildOpts) {\n  return ticks.map(tick => buildTick(tick, buildOpts));\n}\n\nfunction tickBandwidth(scale, tick) {\n  return tick ? Math.abs(tick.end - tick.start) : scale.bandwidth();\n}\n\nfunction labelBuilder(ticks, buildOpts, tickFn) {\n  return ticks.map((tick) => {\n    tickFn(tick);\n    const label = buildLabel(tick, buildOpts);\n    label.data = tick.data;\n    return label;\n  });\n}\n\nfunction layeredLabelBuilder(ticks, buildOpts, settings, tickFn) {\n  const padding = buildOpts.padding;\n  const spacing = labelsSpacing(settings);\n  return ticks.map((tick, i) => {\n    tickFn(tick);\n    const padding2 = spacing + buildOpts.maxHeight + settings.labels.margin;\n    buildOpts.layer = i % 2;\n    buildOpts.padding = i % 2 === 0 ? padding : padding2;\n    const label = buildLabel(tick, buildOpts);\n    label.data = tick.data;\n    return label;\n  });\n}\n\nexport function filterOverlappingLabels(labels, ticks) {\n  const isOverlapping = (l1, l2) => { // eslint-disable-line arrow-body-style\n    const rect1 = l1.boundingRect;\n    const rect2 = l2.boundingRect;\n\n    return NarrowPhaseCollision.testRectRect(rect1, rect2);\n  };\n\n  for (let i = 0; i <= labels.length - 1; i++) {\n    for (let k = i + 1; k <= Math.min(i + 5, i + (labels.length - 1)); k++) { // TODO Find a better way to handle exteme/layered labels then to iterare over ~5 next labels\n      if (labels[i] && labels[k] && isOverlapping(labels[i], labels[k])) {\n        if (k === labels.length - 1) { // On collition with last label, remove current label instead\n          labels.splice(i, 1);\n          if (ticks) { ticks.splice(i, 1); }\n        } else {\n          labels.splice(k, 1);\n          if (ticks) { ticks.splice(k, 1); }\n        }\n        k--;\n        i--;\n      }\n    }\n  }\n}\n\nfunction discreteCalcMaxTextRect({ measureText, settings, innerRect, scale, tilted, layered, tick }) {\n  const h = measureText({\n    text: 'M',\n    fontSize: settings.labels.fontSize,\n    fontFamily: settings.labels.fontFamily\n  }).height;\n\n  const bandwidth = tickBandwidth(scale, tick);\n\n  const textRect = { width: 0, height: h };\n  if (settings.align === 'left' || settings.align === 'right') {\n    textRect.width = innerRect.width - labelsSpacing(settings) - settings.paddingEnd;\n  } else if (layered) {\n    textRect.width = (bandwidth * innerRect.width) * 2;\n  } else if (tilted) {\n    const radians = Math.abs(settings.labels.tiltAngle) * (Math.PI / 180);\n    textRect.width = (innerRect.height - labelsSpacing(settings) - settings.paddingEnd - (h * Math.cos(radians))) / Math.sin(radians);\n  } else {\n    textRect.width = bandwidth * innerRect.width;\n  }\n\n  textRect.width = getClampedValue({ value: textRect.width, maxValue: settings.labels.maxLengthPx, minValue: settings.labels.minLengthPx });\n\n  return textRect;\n}\n\nfunction continuousCalcMaxTextRect({ measureText, settings, innerRect, ticks, tilted, layered }) {\n  const h = measureText({\n    text: 'M',\n    fontSize: settings.labels.fontSize,\n    fontFamily: settings.labels.fontFamily\n  }).height;\n\n  const textRect = { width: 0, height: h };\n  if (settings.align === 'left' || settings.align === 'right') {\n    textRect.width = innerRect.width - labelsSpacing(settings) - settings.paddingEnd;\n  } else if (layered) {\n    textRect.width = (innerRect.width / majorTicks(ticks).length) * 0.75 * 2;\n  } else if (tilted) {\n    const radians = Math.abs(settings.labels.tiltAngle) * (Math.PI / 180);\n    textRect.width = (innerRect.height - labelsSpacing(settings) - settings.paddingEnd - (h * Math.cos(radians))) / Math.sin(radians);\n  } else {\n    textRect.width = (innerRect.width / majorTicks(ticks).length) * 0.75;\n  }\n\n  textRect.width = getClampedValue({ value: textRect.width, maxValue: settings.labels.maxLengthPx, minValue: settings.labels.minLengthPx });\n\n  return textRect;\n}\n\nfunction getStepSizeFn({ innerRect, scale, settings, tick }) {\n  const size = settings.align === 'top' || settings.align === 'bottom' ? innerRect.width : innerRect.height;\n  const bandwidth = tickBandwidth(scale, tick);\n  return size * bandwidth;\n}\n\nexport default function nodeBuilder(isDiscrete) {\n  let calcMaxTextRectFn;\n  let filterLabels = false;\n\n  function continuous() {\n    calcMaxTextRectFn = continuousCalcMaxTextRect;\n    filterLabels = true;\n    return continuous;\n  }\n\n  function discrete() {\n    calcMaxTextRectFn = discreteCalcMaxTextRect;\n    return discrete;\n  }\n\n  function build({ settings, scale, innerRect, outerRect, measureText, ticks, state, textBounds }) {\n    const nodes = [];\n    const major = majorTicks(ticks);\n    const minor = minorTicks(ticks);\n    const buildOpts = {\n      innerRect,\n      align: settings.align,\n      outerRect\n    };\n    const tilted = state.labels.activeMode === 'tilted';\n    const layered = state.labels.activeMode === 'layered';\n    let majorTickNodes;\n\n    if (settings.line.show) {\n      buildOpts.style = settings.line;\n      buildOpts.padding = settings.paddingStart;\n\n      nodes.push(buildLine(buildOpts));\n    }\n    if (settings.ticks.show) {\n      buildOpts.style = settings.ticks;\n      buildOpts.tickSize = settings.ticks.tickSize;\n      buildOpts.padding = tickSpacing(settings);\n\n      majorTickNodes = tickBuilder(major, buildOpts);\n    }\n    if (settings.labels.show) {\n      const padding = labelsSpacing(settings);\n      buildOpts.style = settings.labels;\n      buildOpts.padding = padding;\n      buildOpts.tilted = tilted;\n      buildOpts.layered = layered;\n      buildOpts.angle = settings.labels.tiltAngle;\n      buildOpts.paddingEnd = settings.paddingEnd;\n      buildOpts.textBounds = textBounds;\n      const tickFn = (tick) => {\n        const maxSize = calcMaxTextRectFn({ measureText, settings, innerRect, ticks, scale, tilted, layered, tick });\n        buildOpts.maxWidth = maxSize.width;\n        buildOpts.maxHeight = maxSize.height;\n        buildOpts.textRect = calcActualTextRect({ tick, measureText, style: buildOpts.style });\n        buildOpts.stepSize = getStepSizeFn({ innerRect, scale, ticks, settings, tick });\n      };\n\n      let labelNodes = [];\n      if (layered && (settings.align === 'top' || settings.align === 'bottom')) {\n        labelNodes = layeredLabelBuilder(major, buildOpts, settings, tickFn);\n      } else {\n        labelNodes = labelBuilder(major, buildOpts, tickFn);\n      }\n\n      // Remove labels (and paired tick) that are overlapping\n      if (filterLabels && !buildOpts.tilted) {\n        filterOverlappingLabels(labelNodes, majorTickNodes);\n      }\n\n      nodes.push(...labelNodes);\n    }\n\n    if (settings.minorTicks && settings.minorTicks.show && minor.length > 0) {\n      buildOpts.style = settings.minorTicks;\n      buildOpts.tickSize = settings.minorTicks.tickSize;\n      buildOpts.padding = tickMinorSpacing(settings);\n\n      nodes.push(...tickBuilder(minor, buildOpts));\n    }\n\n    if (majorTickNodes) {\n      nodes.push(...majorTickNodes);\n    }\n\n    return nodes;\n  }\n\n  continuous.build = build;\n  discrete.build = build;\n\n  return isDiscrete ? discrete() : continuous();\n}\n","import extend from 'extend';\n\nfunction parseTitle(text, join, scale) {\n  let title = '';\n  if (typeof text === 'function') {\n    title = text();\n  } else if (typeof text === 'string') {\n    title = text;\n  } else if (scale) {\n    let data = scale.data();\n    const titles = (data.fields || []).map(field => field.title());\n    title = titles.join(join);\n  }\n\n  return title;\n}\n\nfunction getTextAnchor(dock, anchor) {\n  let val = 'middle';\n  if (dock === 'left') {\n    if (anchor === 'top') {\n      val = 'end';\n    } else if (anchor === 'bottom') {\n      val = 'start';\n    }\n  } else if (dock === 'right') {\n    if (anchor === 'top') {\n      val = 'start';\n    } else if (anchor === 'bottom') {\n      val = 'end';\n    }\n  } else if (anchor === 'left') {\n    val = 'start';\n  } else if (anchor === 'right') {\n    val = 'end';\n  }\n  return val;\n}\n\nfunction generateTitle({\n  title,\n  definitionSettings,\n  dock,\n  rect,\n  measureText,\n  style\n}) {\n  const struct = {\n    type: 'text',\n    text: title,\n    x: 0,\n    y: 0,\n    dx: 0,\n    dy: 0,\n    anchor: getTextAnchor(dock, definitionSettings.anchor),\n    baseline: 'alphabetical'\n  };\n\n  extend(struct, style.text);\n  const textRect = measureText(struct);\n\n  if (dock === 'top' || dock === 'bottom') {\n    let x = rect.width / 2;\n    if (definitionSettings.anchor === 'left') {\n      x = definitionSettings.paddingLeft || 0;\n    } else if (definitionSettings.anchor === 'right') {\n      x = rect.width - (definitionSettings.paddingRight || 0);\n    }\n\n    struct.x = x;\n    struct.y = dock === 'top' ? rect.height - definitionSettings.paddingStart : definitionSettings.paddingStart + textRect.height;\n    struct.dy = dock === 'top' ? -(textRect.height / 6) : -(textRect.height / 3);\n    struct.maxWidth = rect.width * 0.8;\n  } else {\n    let y = rect.height / 2;\n    if (definitionSettings.anchor === 'top') {\n      y = definitionSettings.paddingStart;\n    } else if (definitionSettings.anchor === 'bottom') {\n      y = rect.height - definitionSettings.paddingStart;\n    }\n\n    struct.y = y;\n    struct.x = dock === 'left' ? rect.width - definitionSettings.paddingStart : definitionSettings.paddingStart;\n    struct.dx = dock === 'left' ? -(textRect.height / 3) : (textRect.height / 3);\n    const rotation = dock === 'left' ? 270 : 90;\n    struct.transform = `rotate(${rotation}, ${struct.x + struct.dx}, ${struct.y + struct.dy})`;\n    struct.maxWidth = rect.height * 0.8;\n  }\n\n  if (!isNaN(definitionSettings.maxLengthPx)) {\n    struct.maxWidth = Math.min(struct.maxWidth, definitionSettings.maxLengthPx);\n  }\n\n  return struct;\n}\n\n/**\n * @typedef {object} component--text\n * @property {string} [type='text']\n * @property {string|function} text\n * @property {component--text-settings} settings - Text settings\n * @example\n * {\n *  type: 'text',\n *  text: 'my title',\n *  dock: 'left',\n *  settings: {\n *    anchor: 'left',\n *    style: {\n *      fill: 'red'\n *    }\n *  }\n * }\n */\n\n/**\n * @typedef {object} component--text-settings\n * @property {number} [paddingStart=5]\n * @property {number} [paddingEnd=5]\n * @property {number} [paddingLeft=0]\n * @property {number} [paddingRight=0]\n * @property {string} [anchor='center'] - Where to v- or h-align the text. Supports `left`, `right`, `top`, `bottom` and `center`\n * @property {string} [join=', '] - String to add when joining titles from multiple sources\n * @property {number} [maxLengthPx] - Limit the text length to this value in pixels\n */\nconst textComponent = {\n  require: ['renderer', 'chart'],\n  defaultSettings: {\n    dock: 'bottom',\n    displayOrder: 0,\n    prioOrder: 0,\n    settings: {\n      paddingStart: 5,\n      paddingEnd: 5,\n      paddingLeft: 0,\n      paddingRight: 0,\n      anchor: 'center',\n      join: ', ',\n      maxLengthPx: NaN\n    },\n    style: {\n      text: '$title'\n    }\n  },\n\n  created() {\n    this.rect = {\n      x: 0,\n      y: 0,\n      width: 0,\n      height: 0\n    };\n\n    this.definitionSettings = this.settings.settings;\n\n    const text = this.settings.text;\n    const join = this.definitionSettings.join;\n    this.title = parseTitle(text, join, this.scale);\n  },\n\n  preferredSize() {\n    const height = this.renderer.measureText({\n      text: this.title,\n      fontSize: this.style.text.fontSize,\n      fontFamily: this.style.text.fontFamily\n    }).height;\n    return height + this.definitionSettings.paddingStart + this.definitionSettings.paddingEnd;\n  },\n\n  beforeRender(opts) {\n    extend(this.rect, opts.size);\n  },\n\n  render() {\n    const {\n      title,\n      definitionSettings,\n      rect\n    } = this;\n    const nodes = [];\n    nodes.push(generateTitle({\n      title,\n      dock: this.settings.dock,\n      definitionSettings,\n      rect,\n      measureText: this.renderer.measureText,\n      style: this.style\n    }));\n    return nodes;\n  },\n\n  beforeUpdate(opts) {\n    if (opts.settings) {\n      extend(this.settings, opts.settings);\n      this.definitionSettings = opts.settings.settings;\n    }\n    const text = this.settings.text;\n    const join = this.definitionSettings.join;\n    this.title = parseTitle(text, join, this.scale);\n  }\n};\n\nexport default textComponent;\n","/**\n * @typedef {object} component--scrollbar\n * @private\n */\n\n/**\n * @typedef {object} component--scrollbar.settings\n * @property {boolean} [backgroundColor = '#eee']\n * @property {boolean} [thumbColor = '#ccc']\n * @property {boolean} [width = 16]\n */\n\nfunction start(_scrollbar, pos) {\n  const dock = _scrollbar.settings.dock;\n  const invert = _scrollbar.settings.settings.invert;\n  const horizontal = dock === 'top' || dock === 'bottom';\n  const lengthAttr = horizontal ? 'width' : 'height';\n  const length = _scrollbar.rect[lengthAttr];\n  const scroll = _scrollbar.chart.scroll(_scrollbar.settings.scroll);\n  let currentMove;\n\n  { // local scope to allow reuse of variable names later\n    let offset = pos[horizontal ? 'x' : 'y'];\n    if (invert) {\n      offset = length - offset;\n    }\n    const scrollState = scroll.getState();\n\n    currentMove = {\n      startOffset: offset,\n      startScroll: scrollState.start,\n      swipe: false\n    };\n\n    // Detect swipe start outsize the thumb & change startScroll to jump the scroll there.\n    const scrollPoint = ((offset / length) * (scrollState.max - scrollState.min)) + scrollState.min;\n    if (scrollPoint < scrollState.start) {\n      currentMove.startScroll = scrollPoint;\n    } else if (scrollPoint > scrollState.start + scrollState.viewSize) {\n      currentMove.startScroll = scrollPoint - scrollState.viewSize;\n    }\n  }\n\n  const update = (p) => {\n    let offset = p[horizontal ? 'x' : 'y'];\n    if (invert) {\n      offset = length - offset;\n    }\n    if (!currentMove.swipe) {\n      if (Math.abs(currentMove.startOffset - offset) <= 1) {\n        return;\n      }\n      currentMove.swipe = true;\n    }\n\n    const scrollState = scroll.getState();\n    const scrollMove = ((offset - currentMove.startOffset) / length) * (scrollState.max - scrollState.min);\n    const scrollStart = currentMove.startScroll + scrollMove;\n    scroll.moveTo(scrollStart);\n  };\n  const end = (p) => {\n    let offset = p[horizontal ? 'x' : 'y'];\n    if (invert) {\n      offset = length - offset;\n    }\n    const scrollState = scroll.getState();\n    if (currentMove.swipe) {\n      const scrollMove = ((offset - currentMove.startOffset) / length) * (scrollState.max - scrollState.min);\n      const scrollStart = currentMove.startScroll + scrollMove;\n      scroll.moveTo(scrollStart);\n    } else {\n      const scrollCenter = ((offset / length) * (scrollState.max - scrollState.min)) + scrollState.min;\n      const scrollStart = scrollCenter - (scrollState.viewSize / 2);\n      scroll.moveTo(scrollStart);\n    }\n  };\n\n  return {\n    update,\n    end\n  };\n}\n\nfunction getLocalPos(event, renderer) {\n  const containerRect = renderer.element().getBoundingClientRect();\n  return {\n    x: event.center.x - containerRect.left,\n    y: event.center.y - containerRect.top\n  };\n}\n\nconst scrollbarComponent = {\n  require: ['chart', 'renderer'],\n  on: {\n    panStart(event) {\n      const pos = getLocalPos(event, this.renderer);\n      const startPos = {\n        x: pos.x - event.deltaX,\n        y: pos.y - event.deltaY\n      };\n      this.currentMove = start(this, startPos);\n      this.currentMove.update(pos);\n    },\n    panMove(event) {\n      if (!this.currentMove) { return; }\n      const pos = getLocalPos(event, this.renderer);\n      this.currentMove.update(pos);\n    },\n    panEnd(event) {\n      if (!this.currentMove) { return; }\n      const pos = getLocalPos(event, this.renderer);\n      this.currentMove.end(pos);\n      this.currentMove = null;\n    },\n    panCancel() {\n      this.currentMove = null;\n    },\n    tap(event) {\n      const pos = getLocalPos(event, this.renderer);\n      const move = start(this, pos);\n      move.end(pos);\n    }\n  },\n  defaultSettings: {\n    settings: {\n      backgroundColor: '#eee',\n      thumbColor: '#ccc',\n      width: 16 // 32 for touch\n    }\n  },\n  created: function created() {\n    this.rect = {\n      x: 0,\n      y: 0,\n      width: 0,\n      height: 0\n    };\n  },\n\n  preferredSize: function preferredSize(rect) {\n    const scrollState = this.chart.scroll(this.settings.scroll).getState();\n    // hide the scrollbar if it is not possible to scroll\n    if (scrollState.viewSize >= scrollState.max - scrollState.min) {\n      const toLargeSize = Math.max(rect.width, rect.height);\n      return toLargeSize;\n    }\n    return this.settings.settings.width;\n  },\n\n  resize: function resize(opts) {\n    const inner = opts.inner;\n    this.rect = inner;\n    return inner;\n  },\n\n  render: function render(h) {\n    const dock = this.settings.dock;\n    const invert = this.settings.settings.invert;\n    const horizontal = dock === 'top' || dock === 'bottom';\n    const lengthAttr = horizontal ? 'width' : 'height';\n\n    const _rect = this.rect;\n    const length = _rect[lengthAttr];\n\n    const scrollState = this.chart.scroll(this.settings.scroll).getState();\n    let thumbStart = (length * (scrollState.start - scrollState.min)) / (scrollState.max - scrollState.min);\n    const thumbRange = (length * scrollState.viewSize) / (scrollState.max - scrollState.min);\n\n    if (invert) {\n      thumbStart = length - thumbStart - thumbRange;\n    }\n\n    return h(\n      'div',\n      {\n        style: {\n          position: 'relative',\n          width: '100%',\n          height: '100%',\n          background: this.settings.settings.backgroundColor,\n          pointerEvents: 'auto'\n        }\n      },\n      [].concat(h('div', {\n        class: {\n          scroller: true\n        },\n        style: {\n          position: 'absolute',\n          [horizontal ? 'left' : 'top']: `${thumbStart}px`,\n          [horizontal ? 'top' : 'left']: '25%',\n          [horizontal ? 'height' : 'width']: '50%', // ${width}px\n          [lengthAttr]: `${Math.max(1, thumbRange)}px`,\n          background: this.settings.settings.thumbColor\n        }\n      }))\n    );\n  },\n\n  renderer: 'dom'\n};\n\nexport default function scrollbar(picasso) {\n  picasso.component('scrollbar', scrollbarComponent);\n}\n","import extend from 'extend';\n\nimport {\n  TARGET_SIZE,\n  VERTICAL\n} from './brush-range-const';\n\nfunction buildLine({ h, isVertical, value, pos, align, borderHit, state }) {\n  const isAlignStart = align !== 'end';\n  const alignStart = { left: '0', top: '0' };\n  const alignEnd = { right: '0', bottom: '0' };\n  const alignStyle = isAlignStart ? alignStart : alignEnd;\n  let start = 0;\n  let width = '100%';\n  let height = '100%';\n\n  if (state.targetRect && state.settings.bubbles.align === 'start') {\n    width = `${state.targetRect.x + state.targetRect.width}px`;\n    height = `${state.targetRect.y + state.targetRect.height}px`;\n  } else if (state.targetRect && state.settings.bubbles.align === 'end') {\n    start = isVertical ? state.targetRect.x : state.targetRect.y;\n    width = `${state.rect.width - start}px`;\n    height = `${state.rect.height - start}px`;\n  }\n\n  if (!isAlignStart) {\n    pos -= borderHit;\n  }\n\n  // edge\n  return h('div', {\n    on: {\n      mouseover() {\n        this.children[0].elm.style.backgroundColor = '#000';\n        this.children[0].elm.style[isVertical ? 'height' : 'width'] = '2px';\n      },\n      mouseout() {\n        this.children[0].elm.style.backgroundColor = state.style.line.stroke;\n        this.children[0].elm.style[isVertical ? 'height' : 'width'] = '1px';\n      }\n    },\n    attrs: {\n      'data-value': value\n    },\n    style: {\n      cursor: isVertical ? 'ns-resize' : 'ew-resize',\n      position: 'absolute',\n      left: isVertical ? `${start}px` : `${pos}px`,\n      top: isVertical ? `${pos}px` : `${start}px`,\n      height: isVertical ? `${borderHit}px` : height,\n      width: isVertical ? width : `${borderHit}px`,\n      pointerEvents: 'auto'\n    }\n  }, [\n    // line\n    h('div', {\n      style: extend({\n        backgroundColor: state.style.line.stroke,\n        position: 'absolute',\n        height: isVertical ? `${1}px` : '100%',\n        width: isVertical ? '100%' : `${1}px`\n      },\n        alignStyle\n      )\n    })\n  ]);\n}\n\nfunction buildBubble({ h, isVertical, label, otherValue, idx, pos, align, state }) {\n  const isAlignStart = align !== 'end';\n  const isOutside = state.settings.bubbles.placement === 'outside';\n  let outside = 'none';\n  let bubbleDock;\n  if (isVertical) {\n    bubbleDock = isAlignStart ? 'left' : 'right';\n    if (isOutside) {\n      outside = isAlignStart ? 'translate(-100%,  0px)' : 'translate(100%,  0px)';\n    }\n  } else {\n    bubbleDock = isAlignStart ? 'top' : 'bottom';\n    if (isOutside) {\n      outside = isAlignStart ? 'translate(0px, -100%)' : 'translate(0px,  100%)';\n    }\n  }\n\n  // bubble wrapper\n  return h('div', {\n    style: {\n      position: 'absolute',\n      [bubbleDock]: '0',\n      [isVertical ? 'top' : 'left']: `${pos}px`,\n      transform: outside\n    }\n  }, [\n    // bubble\n    h('div', {\n      attrs: {\n        'data-other-value': otherValue,\n        'data-idx': idx\n      },\n      style: extend({\n        position: 'relative',\n        borderRadius: `${state.style.bubble.borderRadius}px`,\n        border: `${state.style.bubble.strokeWidth}px solid ${state.style.bubble.stroke}`,\n        backgroundColor: state.style.bubble.fill,\n        color: state.style.bubble.color,\n        fontFamily: state.style.bubble.fontFamily,\n        fontSize: state.style.bubble.fontSize,\n        padding: '4px 8px',\n        textAlign: 'center',\n        overflow: 'hidden',\n        textOverflow: 'ellipsis',\n        whiteSpace: 'nowrap',\n        maxWidth: '150px',\n        minWidth: '50px',\n        minHeight: '1em',\n        pointerEvents: 'auto',\n        transform: isVertical ? 'translate(0,-50%)' : 'translate(-50%,0)'\n      })\n    }, [label])\n  ]);\n}\n\nfunction buildArea({ h, isVertical, top, height, color, on, opacity }) {\n  return h('div', {\n    style: {\n      backgroundColor: color,\n      opacity,\n      position: 'absolute',\n      left: isVertical ? 0 : `${top}px`,\n      top: isVertical ? `${top}px` : 0,\n      height: isVertical ? `${height}px` : '100%',\n      width: isVertical ? '100%' : `${height}px`,\n      pointerEvents: 'auto'\n    },\n    on\n  }, []);\n}\n\nexport default function buildRange({ borderHit, els, isVertical, state, vStart, vEnd, idx }) {\n  let targetOffset = 0;\n  if (state.targetRect) {\n    targetOffset = isVertical ? state.targetRect.y : state.targetRect.x;\n  }\n  const hasScale = !!state.scale;\n  const start = hasScale ? state.scale.norm(vStart) * state.size : vStart;\n  const end = hasScale ? state.scale.norm(vEnd) * state.size : vEnd;\n  const height = Math.abs(start - end);\n  const top = Math.min(start, end) + targetOffset;\n  const bottom = top + height;\n\n  if (state.targetRect) {\n    const target = state.targetFillRect || state.targetRect;\n    const targetSize = isVertical ? target.height : target.width;\n    const targetStart = hasScale ? state.scale.norm(vStart) * targetSize : vStart;\n    const targetEnd = hasScale ? state.scale.norm(vEnd) * targetSize : vEnd;\n    const targetHeight = Math.abs(targetStart - targetEnd);\n    const targetTop = Math.min(targetStart, targetEnd);\n    const targetArea = {\n      h: state.h,\n      isVertical,\n      top: targetTop,\n      height: targetHeight,\n      color: state.style.target.fill,\n      opacity: state.style.target.opacity\n    };\n    if (state.style.target.opacity < 0.8) {\n      targetArea.on = {\n        mouseover() {\n          this.elm.style.opacity = state.style.target.opacity + 0.1;\n        },\n        mouseout() {\n          this.elm.style.opacity = state.style.target.opacity;\n        }\n      };\n    }\n    els.push(state.h('div', {\n      style: {\n        position: 'absolute',\n        left: `${target.x}px`,\n        top: `${target.y}px`,\n        height: `${target.height}px`,\n        width: `${target.width}px`\n      }\n    }, [\n      buildArea(targetArea)\n    ]));\n  }\n\n  // active range area\n  // els.push(buildArea({\n  //   h: state.h,\n  //   isVertical,\n  //   top,\n  //   height,\n  //   color: state.settings.fill\n  // }));\n\n  els.push(buildLine({\n    h: state.h,\n    isVertical,\n    borderHit,\n    value: start < end ? vStart : vEnd,\n    pos: top,\n    align: 'start',\n    state\n  }));\n\n  els.push(buildLine({\n    h: state.h,\n    isVertical,\n    borderHit,\n    value: start < end ? vEnd : vStart,\n    pos: bottom,\n    align: 'end',\n    state\n  }));\n\n  const bubbles = state.settings.bubbles;\n  if (bubbles && bubbles.show) {\n    const fontSize = bubbles.fontSize;\n    const fontFamily = bubbles.fontFamily;\n    const fill = bubbles.fill;\n    const style = {\n      fontSize,\n      fontFamily,\n      color: fill\n    };\n\n    const range = [vStart, vEnd];\n    els.push(buildBubble({\n      h: state.h,\n      isVertical,\n      align: bubbles.align,\n      style,\n      idx,\n      otherValue: start < end ? vEnd : vStart,\n      label: `${state.format(start < end ? vStart : vEnd, range)}`,\n      pos: top,\n      state\n    }));\n\n    els.push(buildBubble({\n      h: state.h,\n      isVertical,\n      align: bubbles.align,\n      style,\n      idx,\n      otherValue: start < end ? vStart : vEnd,\n      label: `${state.format(start < end ? vEnd : vStart, range)}`,\n      pos: bottom,\n      state\n    }));\n  }\n}\n\nexport function getMoveDelta(state) {\n  const posDelta = state.active.limitHigh - state.active.end;\n  const negDelta = state.active.limitLow - state.active.start;\n  let delta = state.current - state.start;\n  if (delta < 0) {\n    delta = Math.max(delta, negDelta);\n  } else {\n    delta = Math.min(delta, posDelta);\n  }\n\n  return delta;\n}\n\nexport function nodes(state) {\n  if (!state.active) {\n    return [];\n  }\n  let vStart = state.start;\n  let vEnd = state.current;\n  if (state.active.idx !== -1) {\n    if (state.active.mode === 'foo') {\n      vStart = Math.min(state.active.start, state.active.end);\n      vEnd = Math.max(state.active.start, state.active.end);\n    } else if (state.active.mode === 'modify') {\n      vStart = Math.min(state.start, state.current);\n      vEnd = Math.max(state.start, state.current);\n    } else {\n      const delta = getMoveDelta(state);\n      vStart = state.active.start + delta;\n      vEnd = state.active.end + delta;\n    }\n  }\n\n  let els = [];\n\n  const isVertical = state.direction === VERTICAL;\n\n  // add all other ranges\n  state.ranges.forEach((r, i) => {\n    if (i !== state.active.idx) {\n      buildRange({\n        borderHit: TARGET_SIZE,\n        els,\n        isVertical,\n        state,\n        vStart: Math.min(r.min, r.max),\n        vEnd: Math.max(r.min, r.max),\n        idx: i\n      });\n    }\n  });\n\n  // add active range\n  buildRange({\n    borderHit: TARGET_SIZE,\n    els,\n    isVertical,\n    state,\n    vStart,\n    vEnd,\n    idx: state.active.idx\n  });\n\n  return els;\n}\n","import extend from 'extend';\nimport Collisions from '../../../core/math/narrow-phase-collision';\n\nfunction rangelimits(state) {\n  return {\n    min: state.scale.min(),\n    max: state.scale.max()\n  };\n}\n\nfunction areaLimits(state) {\n  return {\n    min: 0,\n    max: state.direction ? state.rect.width : state.rect.height\n  };\n}\n\nfunction findActive(state, value, limits) {\n  let rs = state.ranges;\n  let i;\n  let activeIdx = -1;\n  for (i = 0; i < rs.length; i++) {\n    if (rs[i].min <= value && value <= rs[i].max) {\n      activeIdx = i;\n      limits.min = i ? rs[i - 1].max : limits.min;\n      limits.max = i + 1 < rs.length ? rs[i + 1].min : limits.max;\n      break;\n    } else if (value < rs[i].min) {\n      limits.max = rs[i].min;\n      limits.min = i ? rs[i - 1].max : limits.min;\n      break;\n    }\n  }\n  if (activeIdx === -1 && rs.length && i >= rs.length) {\n    limits.min = rs[rs.length - 1].max;\n  }\n\n  let activeRange;\n\n  if (activeIdx !== -1) {\n    activeRange = {\n      idx: activeIdx,\n      start: rs[activeIdx].min,\n      end: rs[activeIdx].max,\n      limitLow: limits.min,\n      limitHigh: limits.max,\n      mode: 'foo'\n    };\n  }\n  state.active = activeRange;\n}\n\nexport function startArea({ state, e, renderer, ranges, targetSize }) {\n  if (state.started) {\n    return;\n  }\n  const x = (e.center.x - e.deltaX);\n  const y = (e.center.y - e.deltaY);\n  let target = document.elementFromPoint(x, y);\n  if (!renderer.element().contains(target)) {\n    target = null;\n  }\n\n  const tempState = {\n    started: true\n  };\n\n  state.offset = renderer.element().getBoundingClientRect();\n  state.ranges = ranges(state);\n  const relX = x - state.offset.left; // coordinate relative renderer\n  const relY = y - state.offset.top;\n  const startPoint = (e.center[state.cssCoord.coord] - e[state.cssCoord.pos]) - state.offset[state.cssCoord.offset];\n  const relStart = (e.center[state.cssCoord.coord]) - state.offset[state.cssCoord.offset];\n  let v = relStart;\n  let vStart = startPoint;\n\n  tempState.start = startPoint;\n  tempState.current = relStart;\n\n  let rs = state.ranges;\n  const limits = areaLimits(state);\n  let i;\n  let activeIdx = -1;\n  if (target && target.hasAttribute('data-idx')) {\n    activeIdx = parseInt(target.getAttribute('data-idx'), 10);\n    limits.min = activeIdx > 0 ? rs[activeIdx - 1].max : limits.min;\n    limits.max = activeIdx + 1 < rs.length ? rs[activeIdx + 1].min : limits.max;\n  } else {\n    for (i = 0; i < rs.length; i++) {\n      if (rs[i].min <= vStart && vStart <= rs[i].max) {\n        activeIdx = i;\n        limits.min = i ? rs[i - 1].max : limits.min;\n        limits.max = i + 1 < rs.length ? rs[i + 1].min : limits.max;\n        break;\n      } else if (vStart < rs[i].min) {\n        limits.max = rs[i].min;\n        limits.min = i ? rs[i - 1].max : limits.min;\n        break;\n      }\n    }\n    if (activeIdx === -1 && rs.length && i >= rs.length) {\n      limits.min = rs[rs.length - 1].max;\n    }\n  }\n\n  if (activeIdx === -1 && !state.multi) {\n    tempState.ranges = [];\n    limits.min = 0;\n    limits.max = state.direction ? state.rect.width : state.rect.height;\n  }\n  let activeRange;\n\n  if (activeIdx !== -1) {\n    activeRange = {\n      idx: activeIdx,\n      start: rs[activeIdx].min,\n      end: rs[activeIdx].max,\n      limitLow: limits.min,\n      limitHigh: limits.max,\n      mode: 'move'\n    };\n\n    if (target && target.hasAttribute('data-other-value')) {\n      tempState.start = parseFloat(target.getAttribute('data-other-value'));\n      activeRange.mode = 'modify';\n    } else {\n      let pxStart = activeRange.start;\n      let pxEnd = activeRange.end;\n      if (Math.abs(startPoint - pxStart) <= targetSize) {\n        tempState.start = activeRange.end;\n        activeRange.mode = 'modify';\n      } else if (Math.abs(startPoint - pxEnd) <= targetSize) {\n        tempState.start = activeRange.start;\n        activeRange.mode = 'modify';\n      }\n    }\n  } else {\n    activeRange = {\n      idx: -1,\n      start: vStart,\n      end: v,\n      limitLow: limits.min,\n      limitHigh: limits.max,\n      mode: 'current'\n    };\n  }\n\n  tempState.active = activeRange;\n\n  if (activeRange.mode !== 'modify' && state.targetRect && !Collisions.testRectPoint(state.targetRect, { x: relX, y: relY })) {\n    // do nothing\n  } else {\n    Object.keys(tempState).forEach(key => (state[key] = tempState[key]));\n  }\n}\n\nexport function start({ state, e, renderer, ranges, targetSize }) {\n  if (state.started) {\n    return;\n  }\n  const x = (e.center.x - e.deltaX);\n  const y = (e.center.y - e.deltaY);\n  let target = document.elementFromPoint(x, y);\n  if (!renderer.element().contains(target)) {\n    target = null;\n  }\n\n  const tempState = {\n    started: true\n  };\n\n  state.offset = extend({}, renderer.element().getBoundingClientRect());\n  const relX = x - state.offset.left; // coordinate relative renderer\n  const relY = y - state.offset.top;\n  state.offset.left += state.targetRect ? state.targetRect.x : 0; // make offset relative to targetRect\n  state.offset.top += state.targetRect ? state.targetRect.y : 0;\n  state.ranges = ranges(state, state.fauxBrushInstance || state.brushInstance);\n  const startPoint = (e.center[state.cssCoord.coord] - e[state.cssCoord.pos]) - state.offset[state.cssCoord.offset];\n  const relStart = (e.center[state.cssCoord.coord]) - state.offset[state.cssCoord.offset];\n  tempState.current = state.scale.normInvert(relStart / state.size);\n  tempState.start = state.scale.normInvert(startPoint / state.size);\n\n  let rs = state.ranges;\n  const limits = rangelimits(state);\n  let i;\n  let activeIdx = -1;\n  if (target && target.hasAttribute('data-idx')) {\n    activeIdx = parseInt(target.getAttribute('data-idx'), 10);\n    limits.min = activeIdx > 0 ? rs[activeIdx - 1].max : limits.min;\n    limits.max = activeIdx + 1 < rs.length ? rs[activeIdx + 1].min : limits.max;\n  } else {\n    for (i = 0; i < rs.length; i++) {\n      if (rs[i].min <= tempState.start && tempState.start <= rs[i].max) {\n        activeIdx = i;\n        limits.min = i ? rs[i - 1].max : limits.min;\n        limits.max = i + 1 < rs.length ? rs[i + 1].min : limits.max;\n        break;\n      } else if (tempState.start < rs[i].min) {\n        limits.max = rs[i].min;\n        limits.min = i ? rs[i - 1].max : limits.min;\n        break;\n      }\n    }\n    if (activeIdx === -1 && rs.length && i >= rs.length) {\n      limits.min = rs[rs.length - 1].max;\n    }\n  }\n\n  if (activeIdx === -1 && !state.multi) {\n    tempState.ranges = [];\n    limits.min = state.scale.min();\n    limits.max = state.scale.max();\n  }\n  let activeRange;\n\n  if (activeIdx !== -1) {\n    activeRange = {\n      idx: activeIdx,\n      start: rs[activeIdx].min,\n      end: rs[activeIdx].max,\n      limitLow: limits.min,\n      limitHigh: limits.max,\n      mode: 'move'\n    };\n\n    if (target && target.hasAttribute('data-other-value')) {\n      tempState.start = parseFloat(target.getAttribute('data-other-value'));\n      activeRange.mode = 'modify';\n    } else {\n      let pxStart = state.scale.norm(activeRange.start) * state.size;\n      let pxEnd = state.scale.norm(activeRange.end) * state.size;\n      if (Math.abs(startPoint - pxStart) <= targetSize) {\n        tempState.start = activeRange.end;\n        activeRange.mode = 'modify';\n      } else if (Math.abs(startPoint - pxEnd) <= targetSize) {\n        tempState.start = activeRange.start;\n        activeRange.mode = 'modify';\n      }\n    }\n  } else {\n    activeRange = {\n      idx: -1,\n      start: tempState.start,\n      end: tempState.current,\n      limitLow: limits.min,\n      limitHigh: limits.max,\n      mode: 'current'\n    };\n  }\n\n  tempState.active = activeRange;\n\n  if (activeRange.mode !== 'modify' && state.targetRect && !Collisions.testRectPoint(state.targetRect, { x: relX, y: relY })) {\n    // do nothing\n  } else {\n    Object.keys(tempState).forEach(key => (state[key] = tempState[key]));\n  }\n}\nexport function end(state, ranges) {\n  state.started = false;\n  state.ranges = ranges(state, state.fauxBrushInstance || state.brushInstance);\n  const limits = rangelimits(state);\n  findActive(state, state.current, limits);\n}\n\nexport function endArea(state, ranges) {\n  state.started = false;\n  state.ranges = ranges(state);\n  const limits = areaLimits(state);\n  findActive(state, state.current, limits);\n}\n\nexport function move(state, e) {\n  const relY = e.center[state.cssCoord.coord] - state.offset[state.cssCoord.offset];\n  const rel = relY / state.size;\n  const v = state.scale.normInvert(rel);\n  state.current = Math.max(Math.min(v, state.active.limitHigh), state.active.limitLow);\n}\n\nexport function moveArea(state, e) {\n  const rel = e.center[state.cssCoord.coord] - state.offset[state.cssCoord.offset];\n\n  state.current = Math.max(Math.min(rel, state.active.limitHigh), state.active.limitLow);\n}\n","import {\n  nodes,\n  getMoveDelta\n} from './brush-range-node-builder';\nimport { start, end, move } from './brush-range-interaction';\nimport linear from '../../../core/scales/linear';\nimport { scaleWithSize } from '../../../core/scales';\nimport brushFactory from '../../../core/brush';\nimport {\n  TARGET_SIZE,\n  VERTICAL,\n  HORIZONTAL\n} from './brush-range-const';\nimport {\n  pointsToRect,\n  rectToPoints\n} from '../../../core/geometry/util';\n\nfunction render(state) {\n  state.renderer.render(nodes(state));\n}\n\nfunction ranges(state, brush) {\n  if (!brush || !brush.isActive()) {\n    return [];\n  }\n\n  const sourceData = state.scale.data();\n  const sourceFields = sourceData ? sourceData.fields || [] : [];\n  const sources = sourceFields.map(field => field.id());\n  const rangeBrush = brush.brushes().filter(f => f.type === 'range' && sources.indexOf(f.id) !== -1)[0];\n\n  if (!rangeBrush) {\n    return [];\n  }\n\n  return rangeBrush.brush.ranges();\n}\n\nfunction setRanges(state) {\n  let rs = state.ranges.map(r => ({ min: r.min, max: r.max }));\n  if (state.active.idx !== -1) {\n    if (state.active.mode === 'modify') {\n      rs[state.active.idx].min = Math.min(state.start, state.current);\n      rs[state.active.idx].max = Math.max(state.start, state.current);\n    } else {\n      const delta = getMoveDelta(state);\n      rs[state.active.idx].min += delta;\n      rs[state.active.idx].max += delta;\n    }\n  } else {\n    rs.push({\n      min: Math.min(state.start, state.current),\n      max: Math.max(state.start, state.current)\n    });\n  }\n\n  const scaleData = state.scale.data();\n  if (scaleData && scaleData.fields) {\n    scaleData.fields.forEach((field) => {\n      if (state.fauxBrushInstance) {\n        let ordRS = ranges(state, state.fauxBrushInstance);\n        let oldValues = state.findValues(ordRS);\n        let values = state.findValues(rs);\n\n        let addedValues = values.filter(v => oldValues.indexOf(v) === -1);\n        let removedValues = oldValues.filter(v => values.indexOf(v) === -1);\n\n        let addItems = addedValues.map(v => ({ key: field.id(), value: v }));\n        let removeItems = removedValues.map(v => ({ key: field.id(), value: v }));\n\n        state.brushInstance.addAndRemoveValues(addItems, removeItems);\n\n        state.fauxBrushInstance.setRange(field.id(), rs);\n      } else {\n        state.brushInstance.setRange(field.id(), rs);\n      }\n    });\n  }\n}\n\nfunction findClosest(value, scale) {\n  let name;\n  let minDist = Infinity;\n  const domain = scale.domain();\n  const halfBandwidth = scale.bandwidth() / 2;\n  for (let i = 0; i < domain.length; ++i) {\n    const d = Math.abs(value - halfBandwidth - scale(domain[i]));\n    if (d < minDist) {\n      minDist = d;\n      name = domain[i];\n    }\n  }\n  return name;\n}\n\nfunction findClosestLabel(value, scale) {\n  const ticks = scale.ticks();\n  const idx = scale.domain().indexOf(findClosest(value, scale));\n  return idx !== -1 ? ticks[idx].label : '-';\n}\n\nfunction rangesOverlap(r1, r2) {\n  return Math.min(...r1) <= Math.max(...r2) && Math.max(...r1) >= Math.min(...r2);\n}\n\nfunction findValues(rangesValues, scale) {\n  const domain = scale.domain();\n  const scaleRange = scale.range();\n  const values = [];\n  rangesValues.forEach((range) => {\n    if (!rangesOverlap(scaleRange, [range.min, range.max])) {\n      return;\n    }\n    const startIdx = domain.indexOf(findClosest(range.min, scale));\n    const endIdx = domain.indexOf(findClosest(range.max, scale));\n    values.push.apply(values, domain.slice(Math.min(startIdx, endIdx), Math.max(startIdx, endIdx) + 1)); /* eslint prefer-spread:0 */\n  });\n\n  return values;\n}\n\nfunction resolveNodeBounds(targetNodes) {\n  const points = targetNodes.reduce((ary, node) => {\n    ary.push(...rectToPoints(node.bounds));\n    return ary;\n  }, []);\n  return pointsToRect(points);\n}\n\nfunction resolveTarget(ctx) {\n  const resolved = {\n    targetRect: null,\n    targetFillRect: null,\n    scale: null,\n    size: null\n  };\n  const stngs = ctx.settings.settings;\n  const target = stngs.target ? ctx.chart.component(stngs.target.component) : null;\n  const targetNodes = stngs.target && stngs.target.selector ? ctx.chart.findShapes(stngs.target.selector) : [];\n  const targetFillNodes = stngs.target && stngs.target.fillSelector ? ctx.chart.findShapes(stngs.target.fillSelector) : [];\n  if (targetNodes.length > 0) {\n    const bounds = resolveNodeBounds(targetNodes);\n    resolved.size = bounds[ctx.state.direction === VERTICAL ? 'height' : 'width'];\n    resolved.scale = scaleWithSize(ctx.chart.scale(stngs.scale), resolved.size);\n    resolved.targetRect = bounds;\n    if (targetFillNodes.length > 0) {\n      const fillBounds = resolveNodeBounds(targetFillNodes);\n      resolved.targetFillRect = fillBounds;\n    }\n  } else if (target && target.rect) {\n    resolved.targetRect = {\n      x: target.rect.x - ctx.state.rect.x,\n      y: target.rect.y - ctx.state.rect.y,\n      width: target.rect.width,\n      height: target.rect.height\n    };\n  }\n\n  return resolved;\n}\n\n/**\n * @typedef {object} component--brush-range-settings\n * @property {string} brush - Brush context to apply changes to\n * @property {string} scale - Scale to extract data from\n * @property {string} [direction=vertical] - Rendering direction [horizontal|vertical]\n * @property {object} [bubbles]\n * @property {boolean} [bubbles.show=true] - True to show label bubble, false otherwise\n * @property {string} [bubbles.align=start] - Where to anchor bubble [start|end]\n * @property {object} [target]\n * @property {string} [target.component] - Render matching overlay on target component\n * @property {string} [target.selector] - Instead of targeting a component, target one or more shapes\n * @property {string} [target.fillSelector] - Target a subset of the selector as fill area. Only applicable if `selector` property is set\n */\n\n /**\n * @typedef {object} component--brush-range-style\n * @property {object} [bubble]\n * @property {string} [bubble.fontSize]\n * @property {string} [bubble.fontFamily]\n * @property {string} [bubble.fill]\n * @property {string} [bubble.color]\n * @property {string} [bubble.stroke]\n * @property {number} [bubble.strokeWidth]\n * @property {number} [bubble.borderRadius]\n * @property {object} [line]\n * @property {string} [line.stroke]\n * @property {number} [line.strokeWidth]\n * @property {object} [target]\n * @property {string} [target.fill]\n * @property {number} [target.strokeWidth]\n * @property {number} [target.opacity]\n */\n\nconst brushRangeComponent = {\n  require: ['chart', 'settings', 'renderer'],\n  defaultSettings: {\n    settings: {\n      bubbles: {\n        show: true,\n        align: 'start'\n      }\n    },\n    style: {\n      bubble: '$label-overlay',\n      line: '$shape-guide--inverted',\n      target: '$selection-area-target'\n    }\n  },\n  renderer: 'dom',\n  on: {\n    rangeStart(e) { this.start(e); },\n    rangeMove(e) { this.move(e); },\n    rangeEnd(e) { this.end(e); },\n    rangeClear(e) { this.clear(e); }\n  },\n  created() {\n    this.state = {};\n  },\n  beforeRender(opts) {\n    this.state.rect = opts.size;\n  },\n  render(h) {\n    const stngs = this.settings.settings;\n    this.state.direction = stngs.direction === 'vertical' ? VERTICAL : HORIZONTAL;\n    const offset = this.renderer.element().getBoundingClientRect();\n    const size = this.state.rect[this.state.direction === VERTICAL ? 'height' : 'width'];\n    let scale = scaleWithSize(this.chart.scale(stngs.scale), size);\n\n    const target = resolveTarget(this);\n    scale = target.scale ? target.scale : scale;\n    this.state.targetRect = target.targetRect;\n    this.state.targetFillRect = target.targetFillRect;\n    this.state.size = target.size === null ? size : target.size;\n\n    this.state.settings = stngs;\n    this.state.style = this.style;\n    this.state.offset = offset;\n    this.state.brush = stngs.brush;\n    this.state.brushInstance = this.chart.brush(this.state.brush);\n    this.state.renderer = this.renderer;\n    this.state.multi = !!stngs.multiple;\n    this.state.h = h;\n    this.state.cssCoord = {\n      offset: this.state.direction === VERTICAL ? 'top' : 'left',\n      coord: this.state.direction === VERTICAL ? 'y' : 'x',\n      pos: this.state.direction === VERTICAL ? 'deltaY' : 'deltaX'\n    };\n\n    if (!{}.hasOwnProperty.call(scale, 'norm')) { // Non-linear scale if norm method is unavailable\n      this.state.scale = linear();\n      this.state.scale.data = scale.data;\n      this.state.format = (v, r) => {\n        if (!rangesOverlap(scale.range(), r)) {\n          return '-';\n        }\n        return findClosestLabel(v, scale);\n      };\n      this.state.fauxBrushInstance = brushFactory();\n      this.state.findValues = valueRanges => findValues(valueRanges, scale);\n    } else {\n      this.state.fauxBrushInstance = null;\n      this.state.findValues = null;\n      this.state.scale = scale;\n      const scaleData = this.state.scale.data();\n      if (scaleData && scaleData.fields && scaleData.fields[0]) {\n        this.state.format = scaleData.fields[0].formatter();\n      }\n    }\n    return [];\n  },\n  start(e) {\n    start({\n      e,\n      state: this.state,\n      renderer: this.renderer,\n      ranges,\n      targetSize: TARGET_SIZE\n    });\n  },\n  end() {\n    if (!this.state.started) {\n      return;\n    }\n    end(this.state, ranges);\n    render(this.state);\n  },\n  move(e) {\n    if (!this.state.started) {\n      return;\n    }\n    move(this.state, e);\n    setRanges(this.state);\n    render(this.state);\n  },\n  clear() {\n    if (this.state.fauxBrushInstance) {\n      this.state.fauxBrushInstance.clear();\n    }\n    this.state.renderer.render([]);\n  }\n};\n\nexport default brushRangeComponent;\n","import {\n  getMoveDelta,\n  nodes\n} from './brush-range-node-builder';\nimport {\n  startArea,\n  moveArea,\n  endArea\n} from './brush-range-interaction';\nimport rangeCollection from '../../../core/brush/range-collection';\nimport {\n  TARGET_SIZE,\n  VERTICAL,\n  HORIZONTAL\n} from './brush-range-const';\n\nfunction render(state) {\n  state.renderer.render(nodes(state));\n}\n\nfunction ranges(state) {\n  return state.rc.ranges();\n}\n\nfunction shapesFromRange(state, brushRange) {\n  const shapeAt = {\n    x: state.direction ? brushRange.min + state.rect.x : state.rect.x,\n    y: state.direction ? state.rect.y : brushRange.min + state.rect.y,\n    width: state.direction ? brushRange.max - brushRange.min : state.rect.width + state.rect.x,\n    height: state.direction ? state.rect.height + state.rect.y : brushRange.max - brushRange.min\n  };\n  return state.chart.shapesAt(shapeAt, state.settings.brush);\n}\n\nfunction brushFromShape(state, newShapes) {\n  state.chart.brushFromShapes(newShapes, state.settings.brush);\n}\n\nfunction setRanges(state) {\n  const rs = state.ranges.map(r => ({ min: r.min, max: r.max }));\n\n  if (state.active.idx !== -1) {\n    if (state.active.mode === 'modify') {\n      rs[state.active.idx].min = Math.min(state.start, state.current);\n      rs[state.active.idx].max = Math.max(state.start, state.current);\n    } else {\n      const delta = getMoveDelta(state);\n      rs[state.active.idx].min = state.active.start + delta;\n      rs[state.active.idx].max = state.active.end + delta;\n    }\n  } else {\n    rs.push({\n      min: Math.min(state.start, state.current),\n      max: Math.max(state.start, state.current)\n    });\n  }\n\n  state.rc.set(rs);\n\n  const shapes = [];\n  rs.forEach((range) => {\n    shapes.push(...shapesFromRange(state, range));\n  });\n\n  brushFromShape(state, shapes);\n}\n\nfunction getBubbleLabel(state, value, range) {\n  const min = Math.min(...range);\n  const max = Math.max(...range);\n  const shapeAt = {\n    x: state.direction ? min + state.rect.x : state.rect.x,\n    y: state.direction ? state.rect.y : min + state.rect.y,\n    width: state.direction ? max - min : state.rect.width + state.rect.x,\n    height: state.direction ? state.rect.height + state.rect.y : max - min\n  };\n\n  const shapes = state.chart.shapesAt(shapeAt, state.settings.brush);\n\n  if (shapes.length === 0) {\n    return '-';\n  }\n\n  const labelShape = shapes.reduce((s0, s1) => {\n    // Min value\n    const bounds0 = s0.bounds;\n    const bounds1 = s1.bounds;\n\n    if (value === min) {\n      if (bounds0[state.cssCoord.coord] <= bounds1[state.cssCoord.coord]) {\n        return s0;\n      }\n      return s1;\n    }\n\n    // Max value\n    if (bounds0[state.cssCoord.coord] + bounds0[state.cssCoord.area] >= bounds1[state.cssCoord.coord] + bounds1[state.cssCoord.area]) {\n      return s0;\n    }\n    return s1;\n  });\n\n  const compConfig = state.settings.brush.components.reduce((c0, c1) => (c0.key === labelShape.key ? c0 : c1));\n\n  if (typeof state.settings.bubbles.label === 'function') {\n    return state.settings.bubbles.label(labelShape.data);\n  } else if (Array.isArray(compConfig.data) && compConfig.data.length) {\n    return labelShape.data[compConfig.data[0]].label;\n  }\n\n  return labelShape.data && labelShape.data.label ? labelShape.data.label : '-';\n}\n\n/**\n * @typedef {object} component--brush-area-dir-settings\n * @property {object} brush\n * @property {array} brush.components\n * @property {object} brush.components[].key - Component key\n * @property {object} brush.components[].contexts[] - Brush context to apply changes to\n * @property {object} [brush.components[].data] - Data reference\n * @property {object} [brush.components[].action] - Type of brush action\n * @property {string} [direction=vertical] - Rendering direction [horizontal|vertical]\n * @property {object} [bubbles]\n * @property {boolean} [bubbles.show=true] - True to show label bubble, false otherwise\n * @property {string} [bubbles.align=start] - Where to anchor bubble [start|end]\n * @property {function} [bubbles.label] - Callback function for the labels\n * @property {object} [target]\n * @property {string} [target.component] - Render matching overlay on target component\n */\n\n /**\n * @typedef {object} component--brush-area-dir-style\n * @property {object} [bubble]\n * @property {string} [bubble.fontSize]\n * @property {string} [bubble.fontFamily]\n * @property {string} [bubble.fill]\n * @property {string} [bubble.color]\n * @property {string} [bubble.stroke]\n * @property {number} [bubble.strokeWidth]\n * @property {number} [bubble.borderRadius]\n * @property {object} [line]\n * @property {string} [line.stroke]\n * @property {number} [line.strokeWidth]\n * @property {object} [target]\n * @property {string} [target.fill]\n * @property {number} [target.strokeWidth]\n * @property {number} [target.opacity]\n */\n\nconst brushAreaDirectionalComponent = {\n  require: ['chart', 'settings', 'renderer'],\n  defaultSettings: {\n    settings: {\n      bubbles: {\n        show: true,\n        align: 'start'\n      }\n    },\n    style: {\n      bubble: '$label-overlay',\n      line: '$shape-guide--inverted',\n      target: '$selection-area-target'\n    }\n  },\n  renderer: 'dom',\n  on: {\n    areaStart(e) { this.start(e); },\n    areaMove(e) { this.move(e); },\n    areaEnd(e) { this.end(e); },\n    areaClear(e) { this.clear(e); }\n  },\n  created() {\n    this.rect = { x: 0, y: 0, width: 0, height: 0 };\n    this.state = {};\n  },\n  beforeRender(opts) {\n    this.rect = opts.size;\n  },\n  render(h) {\n    this.state.rect = this.rect;\n\n    const stngs = this.settings.settings;\n    const direction = stngs.direction === 'vertical' ? VERTICAL : HORIZONTAL;\n    const size = this.state.rect[direction === VERTICAL ? 'height' : 'width'];\n    const offset = this.renderer.element().getBoundingClientRect();\n\n    const target = stngs.target ? this.chart.component(stngs.target.component) : null;\n    if (target && target.rect) {\n      this.state.targetRect = {\n        x: (target.rect.x - this.rect.x),\n        y: (target.rect.y - this.rect.y),\n        width: target.rect.width,\n        height: target.rect.height\n      };\n    } else {\n      this.state.targetRect = null;\n    }\n    this.state.style = this.style;\n    this.state.chart = this.chart;\n    this.state.direction = direction;\n    this.state.settings = stngs;\n    this.state.offset = offset;\n    this.state.rc = rangeCollection();\n    this.state.renderer = this.renderer;\n    this.state.multi = !!stngs.multiple;\n    this.state.h = h;\n    this.state.size = size;\n    this.state.cssCoord = {\n      offset: this.state.direction === VERTICAL ? 'top' : 'left',\n      coord: this.state.direction === VERTICAL ? 'y' : 'x',\n      pos: this.state.direction === VERTICAL ? 'deltaY' : 'deltaX',\n      area: this.state.direction === VERTICAL ? 'height' : 'width'\n    };\n\n    this.state.format = function getFormat(v, r) {\n      return getBubbleLabel(this, v, r);\n    };\n\n    return [];\n  },\n  start(e) {\n    startArea({\n      e,\n      state: this.state,\n      renderer: this.renderer,\n      ranges,\n      targetSize: TARGET_SIZE\n    });\n  },\n  end() {\n    if (!this.state.started) {\n      return;\n    }\n    endArea(this.state, ranges);\n    render(this.state);\n  },\n  move(e) {\n    if (!this.state.started) {\n      return;\n    }\n    moveArea(this.state, e);\n    setRanges(this.state);\n    render(this.state);\n  },\n  clear() {\n    if (this.state.rc) {\n      this.state.rc.clear();\n    }\n    this.state.renderer.render([]);\n  }\n};\n\nexport default brushAreaDirectionalComponent;\n","import { scaleWithSize } from '../../scales';\n\nconst FILL = '#ccc';\nconst OPACITY = 1;\n\nfunction ranges(state) {\n  const brush = state.brush;\n  if (!brush || !brush.isActive()) {\n    return [];\n  }\n\n  const sourceData = state.scale.data();\n  const sourceFields = sourceData ? sourceData.fields || [] : [];\n  const sources = sourceFields.map(field => field.id());\n  const rangeBrush = brush.brushes().filter(f => f.type === 'range' && sources.indexOf(f.id) !== -1)[0];\n\n  if (!rangeBrush) {\n    return [];\n  }\n\n  return rangeBrush.brush.ranges();\n}\n\nfunction shapes(state) {\n  const isVertical = state.direction === 'vertical';\n  const size = state.rect[isVertical ? 'height' : 'width'];\n  const otherSize = state.rect[isVertical ? 'width' : 'height'];\n  return ranges(state).map((range) => {\n    const start = state.scale(range.min) * size;\n    const end = state.scale(range.max) * size;\n    const low = Math.min(start, end);\n    const s = Math.abs(start - end);\n    return {\n      type: 'rect',\n      fill: state.fill,\n      opacity: state.opacity,\n      x: isVertical ? 0 : low,\n      width: isVertical ? otherSize : s,\n      y: isVertical ? low : 0,\n      height: isVertical ? s : otherSize\n    };\n  });\n}\n\nfunction onStart(state) {\n  state.renderer.render(shapes(state));\n}\n\nfunction onUpdate(state) {\n  state.renderer.render(shapes(state));\n}\n\nfunction onEnd(state) {\n  state.renderer.render(shapes(state));\n}\n\nfunction setup(state, brush, scale, renderer) {\n  state.brush = brush;\n\n  if (!brush) {\n    return;\n  }\n\n  function start() {\n    onStart(state);\n  }\n\n  function update() {\n    onUpdate(state);\n  }\n\n  function end() {\n    onEnd(state);\n  }\n\n  brush.on('start', start);\n  brush.on('update', update);\n  brush.on('end', end);\n\n  state.start = start;\n  state.update = update;\n  state.end = end;\n  state.brush = brush;\n  state.scale = scale;\n  state.renderer = renderer;\n}\n\nfunction teardown(state) {\n  if (state.brush) {\n    state.brush.removeListener('start', state.start);\n    state.brush.removeListener('update', state.update);\n    state.brush.removeListener('end', state.end);\n  }\n\n  state.start = undefined;\n  state.update = undefined;\n  state.end = undefined;\n  state.brush = undefined;\n  state.scale = undefined;\n  state.renderer = undefined;\n}\n\n/**\n * @typedef {object} component--range\n */\n\n/**\n * @typedef {object} component--range.settings\n * @property {string} brush - Name of brush instance\n * @property {string} scale - Name of a scale\n * @property {string} [direction='horizontal'] - Direction of the brush\n * @property {string} [fill='#ccc'] - Fill color\n * @property {number} [opacity=1] - Layer opacity\n */\n\nconst rangeComponent = {\n  require: ['chart', 'settings', 'renderer'],\n  defaultSettings: {\n    settings: {}\n  },\n  preferredSize: () => 50,\n  created() {\n    this.rect = { x: 0, y: 0, width: 0, height: 0 };\n    this.state = {};\n  },\n  beforeRender(opts) {\n    this.rect = opts.size;\n  },\n  render() {\n    const stngs = this.settings.settings;\n    const brush = this.chart.brush(stngs.brush);\n    const direction = stngs.direction || 'horizontal';\n    const distance = direction === 'horizontal' ? this.rect.width : this.rect.height;\n    const scale = scaleWithSize(this.chart.scale(stngs.scale), distance);\n\n    teardown(this.state);\n    setup(this.state, brush, scale, this.renderer);\n\n    this.state.rect = this.rect;\n    this.state.fill = stngs.fill || FILL;\n    this.state.opacity = typeof stngs.opacity !== 'undefined' ? stngs.opacity : OPACITY;\n    this.state.direction = direction;\n\n    return shapes(this.state);\n  },\n  beforeDestroy() {\n    teardown(this.state);\n  }\n};\n\nexport default rangeComponent;\n","import { sqrDistance } from '../../math/vector';\n\nfunction getPoint(rendererBounds, event) {\n  const eventOffsetX = event.center.x;\n  const eventOffsetY = event.center.y;\n  return {\n    x: eventOffsetX - rendererBounds.left,\n    y: eventOffsetY - rendererBounds.top\n  };\n  // return {\n  //   x: Math.min(Math.max(eventOffsetX - rendererBounds.left, 0), rendererBounds.width),\n  //   y: Math.min(Math.max(eventOffsetY - rendererBounds.top, 0), rendererBounds.height)\n  // };\n}\n\nfunction withinThreshold(p, state, settings) {\n  const startPoint = state.points[0];\n  const sqrDist = sqrDistance(p, startPoint);\n  return sqrDist < Math.pow(settings.settings.snapIndicator.threshold, 2);\n}\n\nfunction appendToPath(state, p) {\n  if (state.path.d == null) {\n    state.path.d = `M${p.x} ${p.y} `;\n  } else {\n    state.path.d += `L${p.x} ${p.y} `;\n  }\n  state.points.push(p);\n}\n\nfunction render(state, renderer) {\n  const nodes = [\n    state.startPoint,\n    state.path,\n    state.snapIndicator\n  ].filter(node => node.visible);\n\n  renderer.render(nodes);\n}\n\nfunction setSnapIndictor({ state, start = null, end = null }) {\n  if (start !== null) {\n    state.snapIndicator.x1 = start.x;\n    state.snapIndicator.y1 = start.y;\n  }\n  if (end !== null) {\n    state.snapIndicator.x2 = end.x;\n    state.snapIndicator.y2 = end.y;\n  }\n}\n\nfunction showSnapIndicator(state, show) {\n  state.snapIndicator.visible = show;\n}\n\nfunction setStartPoint(state, p) {\n  state.startPoint.cx = p.x;\n  state.startPoint.cy = p.y;\n}\n\nfunction getComponentDelta(chart, rendererBounds) {\n  const chartBounds = chart.element.getBoundingClientRect();\n  return {\n    x: rendererBounds.left - chartBounds.left,\n    y: rendererBounds.top - chartBounds.top\n  };\n}\n\nfunction doLineBrush(state, chart) {\n  if (state.active) {\n    const p1 = state.points[state.points.length - 2];\n    const p2 = state.points[state.points.length - 1];\n    state.lineBrushShape.x1 = p1.x + state.componentDelta.x;\n    state.lineBrushShape.y1 = p1.y + state.componentDelta.y;\n    state.lineBrushShape.x2 = p2.x + state.componentDelta.x;\n    state.lineBrushShape.y2 = p2.y + state.componentDelta.y;\n\n    const shapes = chart.shapesAt(state.lineBrushShape, { components: state.brushConfig });\n    chart.brushFromShapes(shapes, { components: state.brushConfig });\n  }\n}\n\nfunction doPolygonBrush(state, chart) {\n  if (state.active) {\n    const dx = state.componentDelta.x;\n    const dy = state.componentDelta.y;\n    const vertices = state.points.map(p => ({\n      x: p.x + dx,\n      y: p.y + dy\n    }));\n\n    const shapes = chart.shapesAt({ vertices }, { components: state.brushConfig });\n    chart.brushFromShapes(shapes, { components: state.brushConfig });\n  }\n}\n\nfunction initPath(stgns) {\n  return {\n    visible: true,\n    type: 'path',\n    d: null,\n    fill: stgns.fill,\n    stroke: stgns.stroke,\n    strokeWidth: stgns.strokeWidth,\n    opacity: stgns.opacity,\n    strokeDasharray: stgns.strokeDasharray,\n    collider: {\n      type: null\n    }\n  };\n}\n\nfunction initSnapIndicator(stgns) {\n  return {\n    visible: false,\n    type: 'line',\n    x1: 0,\n    y1: 0,\n    x2: 0,\n    y2: 0,\n    strokeDasharray: stgns.strokeDasharray,\n    stroke: stgns.stroke,\n    strokeWidth: stgns.strokeWidth,\n    opacity: stgns.opacity,\n    collider: {\n      type: null\n    }\n  };\n}\n\nfunction initStartPoint(stgns) {\n  return {\n    visible: true,\n    type: 'circle',\n    cx: 0,\n    cy: 0,\n    r: stgns.r,\n    fill: stgns.fill,\n    opacity: stgns.opacity,\n    stroke: stgns.stroke,\n    strokeWidth: stgns.strokeWidth,\n    collider: {\n      type: null\n    }\n  };\n}\n\nfunction getBrushConfig(settings) {\n  return settings.settings.brush.components.map(b => (\n    {\n      key: b.key,\n      contexts: b.contexts || ['lassoBrush'],\n      data: b.data || [''],\n      action: b.action || 'add'\n    }));\n}\n\nfunction endBrush(state, chart) {\n  state.brushConfig.forEach((config) => {\n    config.contexts.forEach((context) => {\n      chart.brush(context).end();\n    });\n  });\n}\n\nfunction resetState() {\n  return {\n    points: [],\n    active: false,\n    path: null,\n    snapIndicator: null,\n    startPoint: null,\n    rendererBounds: null,\n    componentDelta: null,\n    brushConfig: null,\n    lineBrushShape: { x1: 0, y1: 0, x2: 0, y2: 0 } // Keep a single shape instance to avoid instantiating a new object on each lookup\n  };\n}\n\n/**\n * @typedef {object} component--brush-lasso\n */\n\n/**\n * @typedef {object} component--brush-lasso-settings\n * @property {object} [lasso] - Lasso style settings\n * @property {string} [lasso.fill='transparent']\n * @property {string} [lasso.stroke='black']\n * @property {number} [lasso.strokeWidth=2]\n * @property {number} [lasso.opacity=0.7]\n * @property {number} [lasso.strokeDasharray]\n * @property {object} [snapIndicator] - Snap indicator settings\n * @property {number} [snapIndicator.threshold=75] - The distance in pixel to show the snap indicator, if less then threshold the indicator is dispalyed\n * @property {string} [snapIndicator.strokeDasharray='5, 5']\n * @property {string} [snapIndicator.stroke='black']\n * @property {number} [snapIndicator.strokeWidth=2]\n * @property {number} [snapIndicator.opacity=0.5]\n * @property {object} [startPoint] - Start point style settings\n * @property {number} [startPoint.r=10] - Circle radius\n * @property {string} [startPoint.stroke='green']\n * @property {number} [startPoint.strokeWidth=1]\n * @property {number} [startPoint.opacity=1]\n * @property {object} [brush]\n * @property {object[]} brush.components - Array of components to brush on.\n * @property {string} [brush.components[].component.key] - Component key\n * @property {string[]} [brush.components[].component.contexts=['brushLasso']] - Name of the brushing contexts to affect\n * @property {string[]} [brush.components[].component.data=['']] - The mapped data properties to add to the brush\n * @property {string} [brush.components[].component.action='add'] - Type of action to respond with\n */\n\nconst brushLassoComponent = {\n  require: ['chart', 'renderer', 'settings'],\n  defaultSettings: {\n    displayOrder: 0,\n    settings: {\n      brush: {\n        components: []\n      },\n      snapIndicator: {\n        threshold: 75,\n        strokeDasharray: '5, 5',\n        stroke: 'black',\n        strokeWidth: 2,\n        opacity: 0.5\n      },\n      lasso: {\n        fill: 'transparent',\n        stroke: 'black',\n        strokeWidth: 2,\n        opacity: 0.7,\n        strokeDasharray: '20, 10'\n      },\n      startPoint: {\n        r: 10,\n        fill: 'green',\n        stroke: 'black',\n        strokeWidth: 1,\n        opacity: 1\n      }\n    }\n  },\n  on: {\n    lassoStart(e) {\n      this.start(e);\n    },\n    lassoEnd(e) {\n      this.end(e);\n    },\n    lassoMove(e) {\n      this.move(e);\n    },\n    lassoCancel() {\n      this.cancel();\n    }\n  },\n  created() {\n    this.state = resetState();\n  },\n  start(e) {\n    this.state.active = true;\n    this.state.path = initPath(this.settings.settings.lasso);\n    this.state.snapIndicator = initSnapIndicator(this.settings.settings.snapIndicator);\n    this.state.startPoint = initStartPoint(this.settings.settings.startPoint);\n    this.state.rendererBounds = this.renderer.element().getBoundingClientRect();\n    this.state.componentDelta = getComponentDelta(this.chart, this.state.rendererBounds);\n    this.state.brushConfig = getBrushConfig(this.settings);\n\n    const p = getPoint(this.state.rendererBounds, e);\n\n    appendToPath(this.state, p);\n    setSnapIndictor({ state: this.state, start: p });\n    setStartPoint(this.state, p);\n  },\n  move(e) {\n    if (!this.state.active) {\n      return;\n    }\n\n    const p = getPoint(this.state.rendererBounds, e);\n\n    if (withinThreshold(p, this.state, this.settings)) {\n      showSnapIndicator(this.state, true);\n    } else {\n      showSnapIndicator(this.state, false);\n    }\n\n    appendToPath(this.state, p);\n    setSnapIndictor({ state: this.state, end: p });\n    render(this.state, this.renderer);\n\n    doLineBrush(\n      this.state,\n      this.chart\n    );\n  },\n  end(e) {\n    if (!this.state.active) {\n      return;\n    }\n\n    showSnapIndicator(this.state, false);\n    const p = getPoint(this.state.rendererBounds, e);\n    const shouldSnap = withinThreshold(p, this.state, this.settings);\n\n    if (shouldSnap) {\n      doPolygonBrush(this.state, this.chart);\n    }\n\n    this.state = resetState();\n    this.renderer.render([]);\n  },\n  cancel() {\n    if (!this.state.active) {\n      return;\n    }\n    endBrush(this.state, this.chart);\n    this.state = resetState();\n    this.renderer.render([]);\n  },\n  render() {\n    // Do nothing\n  }\n};\n\nexport default brushLassoComponent;\n","import extend from 'extend';\nimport collisions from '../../math/narrow-phase-collision';\n\nconst LINE_HEIGHT = 1.5;\nconst PADDING = 4;\n// const DOUBLE_PADDING = PADDING * 2;\n\nfunction cbContext(node, chart) {\n  return {\n    node,\n    data: node.data,\n    scale: chart.scale,\n    formatter: chart.formatter,\n    dataset: chart.dataset\n  };\n}\n\nexport function placeTextInRect(rect, text, opts) {\n  const label = {\n    type: 'text',\n    text,\n    maxWidth: opts.rotate ? rect.height : rect.width,\n    x: 0,\n    y: rect.y,\n    dx: 0,\n    dy: 0,\n    fill: opts.fill,\n    anchor: opts.rotate ? 'end' : 'start',\n    baseline: 'alphabetical',\n    fontSize: `${opts.fontSize}px`,\n    fontFamily: opts.fontFamily\n  };\n\n  const textMetrics = opts.textMetrics;\n\n  if (rect.width < opts.fontSize || rect.height < textMetrics.height) {\n    return false;\n  }\n\n  if (opts.rotate) {\n    const wiggleHor = Math.max(0, rect.width - (textMetrics.height / (LINE_HEIGHT * 0.8)));\n    const wiggleVert = Math.max(0, rect.height - textMetrics.width);\n    label.x = rect.x + (textMetrics.height / LINE_HEIGHT) + (opts.align * wiggleHor);\n    label.y = rect.y + (opts.justify * wiggleVert);\n    label.transform = `rotate(-90, ${label.x + label.dx}, ${label.y + label.dy})`;\n  } else {\n    const wiggleWidth = Math.max(0, rect.width - textMetrics.width);\n    const wiggleHeight = Math.max(0, rect.height - (textMetrics.height / (LINE_HEIGHT * 0.8))); // 0.8 - MAGIC NUMBER - need to figure out why this works the best\n    label.x = rect.x + (opts.align * wiggleWidth);\n    label.y = rect.y + (textMetrics.height / LINE_HEIGHT) + (opts.justify * wiggleHeight);\n  }\n\n  return label;\n}\n\nfunction limitBounds(bounds, view) {\n  const minY = Math.max(0, Math.min(bounds.y, view.height));\n  const maxY = Math.max(0, Math.min(bounds.y + bounds.height, view.height));\n  const minX = Math.max(0, Math.min(bounds.x, view.width));\n  const maxX = Math.max(0, Math.min(bounds.x + bounds.width, view.width));\n  bounds.x = minX;\n  bounds.width = maxX - minX;\n  bounds.y = minY;\n  bounds.height = maxY - minY;\n}\n\nfunction pad(bounds, padding) {\n  bounds.x += padding;\n  bounds.width -= (padding * 2);\n  bounds.y += padding;\n  bounds.height -= (padding * 2);\n}\n\nexport function getBarRect({ bar, view, direction, position, padding = PADDING }) {\n  const bounds = {};\n  extend(bounds, bar);\n\n  if (!position || position === 'inside') {\n    // do nothing\n  } else if (direction === 'up' || direction === 'down') {\n    const start = Math.max(0, Math.min(bar.y, view.height));\n    const end = Math.max(0, Math.min(bar.y + bar.height, view.height));\n\n    if ((position === 'outside' && direction === 'up') || (position === 'opposite' && direction === 'down')) {\n      bounds.y = 0;\n      bounds.height = start;\n    } else if ((position === 'outside' && direction === 'down') || (position === 'opposite' && direction === 'up')) {\n      bounds.y = end;\n      bounds.height = view.height - end;\n    }\n  } else {\n    const start = Math.max(0, Math.min(bar.x, view.width));\n    const end = Math.max(0, Math.min(bar.x + bar.width, view.width));\n\n    if ((position === 'outside' && direction === 'left') || (position === 'opposite' && direction === 'right')) {\n      bounds.x = 0;\n      bounds.width = start;\n    } else if ((position === 'outside' && direction === 'right') || (position === 'opposite' && direction === 'left')) {\n      bounds.x = end;\n      bounds.width = view.width - end;\n    }\n  }\n\n  limitBounds(bounds, view);\n  pad(bounds, padding);\n\n  return bounds;\n}\n\nexport function findBestPlacement({\n  direction,\n  fitsHorizontally,\n  lblStngs,\n  measured,\n  node,\n  orientation,\n  // placements,\n  placementSettings,\n  rect\n}, barRect = getBarRect) {\n  let largest;\n  let bounds;\n  let placement;\n  let testBounds;\n  let p;\n  const boundaries = [];\n  for (p = 0; p < placementSettings.length; p++) {\n    placement = placementSettings[p];\n    testBounds = barRect({\n      bar: node.localBounds,\n      view: rect,\n      direction,\n      position: placement.position\n    });\n    boundaries.push(testBounds);\n    largest = !p || testBounds.height > largest.height ? testBounds : largest;\n\n    if (orientation === 'v' && ((fitsHorizontally && testBounds.height > measured.height * LINE_HEIGHT) ||\n      (!fitsHorizontally && testBounds.height > measured.width))) {\n      bounds = testBounds;\n      break;\n    } else if (orientation === 'h' && (testBounds.height > measured.height) &&\n      (testBounds.width > measured.width)) {\n      bounds = testBounds;\n      break;\n    }\n  }\n\n  // fallback strategy - place the text in the largest rectangle\n  if (orientation === 'v' && !fitsHorizontally && !bounds && largest.height > lblStngs.fontSize * 2) {\n    bounds = largest;\n    p = boundaries.indexOf(bounds);\n  } else if (orientation === 'h' && !bounds && largest.height > lblStngs.fontSize * 2) {\n    bounds = largest;\n    p = boundaries.indexOf(bounds);\n  }\n  placement = placementSettings[p];\n\n  return { bounds, placement };\n}\n\nexport function placeInBars({\n  chart,\n  targetNodes,\n  rect,\n  fitsHorizontally,\n  collectiveOrientation\n}, findPlacement = findBestPlacement,\n  placer = placeTextInRect) {\n  const labels = [];\n  let label;\n  let target;\n  let node;\n  let text;\n  let justify;\n  let bounds;\n  let fill;\n  let measured;\n  let direction;\n  let lblStngs;\n  let placement;\n  let placements;\n  let arg;\n  let orientation;\n\n  for (let i = 0, len = targetNodes.length; i < len; i++) {\n    bounds = null;\n    target = targetNodes[i];\n    node = target.node;\n    arg = cbContext(node, chart);\n    direction = target.direction;\n    orientation = direction === 'left' || direction === 'right' ? 'h' : 'v';\n    for (let j = 0; j < target.texts.length; j++) {\n      text = target.texts[j];\n      if (!text) {\n        continue;\n      }\n\n      lblStngs = target.labelSettings[j];\n      measured = target.measurements[j];\n      placements = lblStngs.placements;\n\n      const bestPlacement = findPlacement({\n        direction,\n        fitsHorizontally,\n        lblStngs,\n        measured,\n        node,\n        orientation,\n        placements,\n        placementSettings: target.placementSettings[j],\n        rect\n      });\n\n      bounds = bestPlacement.bounds;\n      placement = bestPlacement.placement;\n\n      if (bounds && placement) {\n        justify = placement.justify;\n        fill = typeof placement.fill === 'function' ? placement.fill(arg, i) : placement.fill;\n\n        if (direction === 'up') {\n          justify = 1 - justify;\n        }\n        if (placement.position === 'opposite') {\n          justify = 1 - justify;\n        }\n\n        label = placer(bounds, text, {\n          fill,\n          justify: orientation === 'h' ? placement.align : justify,\n          align: orientation === 'h' ? justify : placement.align,\n          fontSize: lblStngs.fontSize,\n          fontFamily: lblStngs.fontFamily,\n          textMetrics: measured,\n          rotate: !(collectiveOrientation === 'h' || fitsHorizontally)\n        });\n\n        if (label) {\n          labels.push(label);\n        }\n      }\n    }\n  }\n\n  return labels;\n}\n\nexport function precalculate({\n  nodes,\n  rect,\n  chart,\n  labelSettings,\n  placementSettings,\n  settings,\n  renderer\n}) {\n  const labelStruct = {};\n  const targetNodes = [];\n  let target;\n  let fitsHorizontally = true;\n  let hasHorizontalDirection = false;\n  let node;\n  let text;\n  let bounds;\n  let measured;\n  let lblStng;\n  let direction;\n\n  for (let i = 0; i < nodes.length; i++) {\n    node = nodes[i];\n    bounds = node.localBounds;\n    if (!collisions.testRectRect(bounds, rect)) {\n      continue;\n    }\n    let arg = cbContext(node, chart);\n\n    target = {\n      node,\n      texts: [],\n      measurements: [],\n      labelSettings: [],\n      placementSettings: []\n      // direction: 'up'\n    };\n\n    for (let j = 0; j < labelSettings.length; j++) {\n      lblStng = labelSettings[j];\n      text = typeof lblStng.label === 'function' ? lblStng.label(arg, i) : '';\n      if (!text) {\n        continue; // eslint-ignore-line\n      }\n      direction = typeof settings.direction === 'function' ? settings.direction(arg, i) : settings.direction || 'up';\n      hasHorizontalDirection = hasHorizontalDirection || direction === 'left' || direction === 'right';\n\n      labelStruct.fontFamily = lblStng.fontFamily;\n      labelStruct.fontSize = `${lblStng.fontSize}px`;\n      labelStruct.text = text;\n\n      measured = renderer.measureText(labelStruct);\n      target.measurements.push(measured);\n      target.texts.push(text);\n      target.labelSettings.push(lblStng);\n      target.placementSettings.push(placementSettings[j]);\n      target.direction = direction;\n      fitsHorizontally = fitsHorizontally && measured.width <= (bounds.width - (PADDING * 2));\n    }\n\n    targetNodes.push(target);\n  }\n\n  return {\n    targetNodes,\n    fitsHorizontally,\n    hasHorizontalDirection\n  };\n}\n\n/**\n * @typedef {object} component--labels~label-strategy\n *\n */\n\n/**\n * @typedef {object} component--labels~label-strategy.settings\n * @property {string|function} [direction='up'] - The direction in which the bars are growing: 'up', 'down', 'right' or 'left'.\n * @property {string} [fontFamily='Arial']\n * @property {number} [fontSize=12]\n * @property {Array<object>} labels\n * @property {string|function} labels[].label - The text value\n * @property {Array<object>} labels[].placements\n * @property {string} labels[].placements[].position - 'inside' | 'outside' | 'opposite'\n * @property {number} [labels[].placements[].justify=0] - Placement of the label along the direction of the bar\n * @property {number} [labels[].placements[].align=0.5] - Placement of the label along the perpendicular direction of the bar\n * @property {string} [labels[].placements[].fill='#333'] - Color of the label\n */\n\nexport function bars({\n  settings,\n  chart,\n  nodes,\n  rect,\n  renderer,\n  style\n}, placer = placeInBars) {\n  const defaults = extend({\n    fontSize: 12,\n    fontFamily: 'Arial',\n    align: 0.5,\n    justify: 0,\n    fill: '#333'\n  }, style.label);\n\n  defaults.fontSize = parseInt(defaults.fontSize, 10);\n\n  const labelSettings = settings.labels.map(labelSetting =>\n    extend({}, defaults, settings, labelSetting)\n  );\n\n  const placementSettings = settings.labels.map(labelSetting =>\n    labelSetting.placements.map(placement =>\n      extend({}, defaults, settings, labelSetting, placement)\n    )\n  );\n\n  const {\n    fitsHorizontally,\n    hasHorizontalDirection,\n    targetNodes\n  } = precalculate({\n    nodes,\n    chart,\n    renderer,\n    settings,\n    rect,\n    labelSettings,\n    placementSettings\n  });\n\n  return placer({\n    chart,\n    targetNodes,\n    stngs: settings,\n    rect,\n    fitsHorizontally,\n    collectiveOrientation: hasHorizontalDirection ? 'h' : 'v'\n  });\n}\n","import extend from 'extend';\nimport symbolFactory from '../../symbols';\n\n/* eslint no-mixed-operators:0 */\n\nfunction placeTextInRect(rect, label, opts) {\n  const textMetrics = opts.textMetrics;\n\n  if (rect.height < textMetrics.height) {\n    return false;\n  }\n\n  const wiggleWidth = Math.max(0, rect.width - textMetrics.width);\n  label.baseline = 'hanging';\n  const wiggleHeight = Math.max(0, rect.height - (textMetrics.height));\n  label.x = rect.x + (opts.align * wiggleWidth);\n  label.y = rect.y + (opts.justify * wiggleHeight);\n\n  return label;\n}\n\nfunction wiggleSymbol(container, size, opts) {\n  const wiggleWidth = Math.max(0, container.width - size);\n  const wiggleHeight = Math.max(0, container.height - size);\n\n  return {\n    x: container.x + (size / 2) + (opts.align * wiggleWidth),\n    y: container.y + (size / 2) + (opts.justify * wiggleHeight)\n  };\n}\n\nexport function createRenderItem({\n  x = 0,\n  y,\n  item,\n  globalMetrics,\n  symbolFn = symbolFactory,\n  direction = 'ltr'\n}) {\n  let label = item.label.displayObject;\n  let labelBounds = item.label.bounds;\n  let symbolItem = item.symbol.meta;\n  const rtl = direction === 'rtl';\n\n  let labelRect = {\n    x: rtl ? x + globalMetrics.maxLabelBounds.width : x + globalMetrics.maxSymbolSize + globalMetrics.spacing,\n    y,\n    width: globalMetrics.maxLabelBounds.width,\n    height: Math.max(globalMetrics.maxSymbolSize, globalMetrics.maxLabelBounds.height)\n  };\n\n  let wiggled = wiggleSymbol({\n    x: rtl ? x + globalMetrics.maxLabelBounds.width + globalMetrics.spacing : x,\n    y,\n    width: globalMetrics.maxSymbolSize,\n    height: labelRect.height\n  }, symbolItem.size, {\n    align: typeof symbolItem.align === 'undefined' ? 0.5 : symbolItem.align,\n    justify: typeof symbolItem.justify === 'undefined' ? 0.5 : symbolItem.justify\n  });\n\n  const symbol = symbolFn(extend({}, symbolItem, wiggled));\n\n  delete symbol.collider;\n\n  label.anchor = rtl ? 'end' : 'start';\n\n  placeTextInRect(labelRect, label, {\n    textMetrics: labelBounds,\n    fontSize: parseInt(label.fontSize, 10),\n    align: 0.0,\n    justify: 0.5\n  });\n\n  let container = {\n    type: 'container',\n    data: item.label.displayObject.data,\n    children: [symbol, label],\n    collider: {\n      type: 'rect',\n      x,\n      y,\n      width: globalMetrics.maxItemBounds.width,\n      height: globalMetrics.maxItemBounds.height\n    }\n  };\n\n  return {\n    item: container,\n    metrics: labelRect\n  };\n}\n\nexport function getItemsToRender({\n  viewRect\n}, rect, {\n  itemized,\n  create = createRenderItem,\n  parallels\n}) {\n  const direction = itemized.layout.direction;\n  const globalMetrics = itemized.globalMetrics;\n  const legendItems = itemized.items;\n  const isHorizontal = itemized.layout.orientation === 'horizontal';\n  let s = 0;\n\n  const renderItems = [];\n  const fixedHeight = globalMetrics.maxItemBounds.height;\n  const fixedWidth = globalMetrics.maxItemBounds.width;\n  const rowHeight = itemized.layout.margin.vertical + fixedHeight;\n  const columnWidth = itemized.layout.margin.horizontal + fixedWidth;\n  let x = rect.x;\n  let y = rect.y;\n\n  let shift = viewRect.x - rect.x;\n\n  for (let i = 0; i < legendItems.length; i++) {\n    let renderItem = create({\n      y,\n      x: direction === 'rtl' ? viewRect.x + shift + viewRect.width - fixedWidth - (x - rect.x) : x,\n      item: legendItems[i],\n      globalMetrics,\n      direction\n    });\n\n    if ((isHorizontal && x >= viewRect.x - fixedWidth) || (!isHorizontal && y >= viewRect.y - fixedHeight)) {\n      renderItems.push(renderItem.item);\n    }\n\n    s++;\n    if (s >= parallels) {\n      s = 0;\n      if (isHorizontal) {\n        x += columnWidth; // next column\n        y = rect.y; // reset y to first row\n      } else {\n        y += rowHeight; // next row\n        x = rect.x; // reset x to first column\n      }\n    } else if (isHorizontal) {\n      y += rowHeight; // next row\n    } else {\n      x += columnWidth; // next column\n    }\n\n    if (!isHorizontal && (y > viewRect.y + viewRect.height)) {\n      break;\n    } else if (isHorizontal && x > viewRect.x + viewRect.width) {\n      break;\n    }\n  }\n  return renderItems;\n}\n\n\nexport function itemize({\n  resolved,\n  dock\n}, renderer) {\n  let label;\n  let items = [];\n  let item;\n  let sourceItems = resolved.items.items;\n  let sourceSymbols = resolved.symbols.items;\n  let sourceLabels = resolved.labels.items;\n\n  let maxSymbolSize = 0;\n  let maxLabelWidth = 0;\n  let maxLabelHeight = 0;\n\n  for (let i = 0; i < sourceItems.length; i++) {\n    if (sourceItems[i].show === false) {\n      continue;\n    }\n\n    label = extend({}, sourceLabels[i], { // create the displayObject here in order to measure it\n      type: 'text',\n      fontSize: `${parseInt(sourceLabels[i].fontSize, 10)}px`,\n      text: typeof sourceLabels[i].text !== 'undefined' ? sourceLabels[i].text : sourceLabels[i].data.label || ''\n    });\n\n    item = {\n      symbol: {\n         // can't create a displayObject here due to need to wiggle the center position of the symbol later on,\n         // just store the object needed later on\n        meta: sourceSymbols[i]\n      },\n      label: {\n        displayObject: label,\n        bounds: renderer.textBounds(label)\n      }\n    };\n\n    items.push(item);\n\n    maxSymbolSize = Math.max(sourceSymbols[i].size, maxSymbolSize);\n    maxLabelWidth = Math.max(item.label.bounds.width, maxLabelWidth);\n    maxLabelHeight = Math.max(item.label.bounds.height, maxLabelHeight);\n  }\n\n  return {\n    items,\n    globalMetrics: {\n      spacing: 8,\n      maxSymbolSize,\n      maxItemBounds: {\n        height: Math.max(maxSymbolSize, maxLabelHeight),\n        width: maxSymbolSize + 8 + maxLabelWidth\n      },\n      maxLabelBounds: {\n        width: maxLabelWidth,\n        height: maxLabelHeight\n      }\n    },\n    layout: {\n      margin: {\n        vertical: typeof resolved.layout.item.vertical !== 'undefined' ? resolved.layout.item.vertical : 8,\n        horizontal: typeof resolved.layout.item.horizontal !== 'undefined' ? resolved.layout.item.horizontal : 8\n      },\n      mode: resolved.layout.item.mode,\n      size: resolved.layout.item.size,\n      orientation: dock === 'top' || dock === 'bottom' ? 'horizontal' : 'vertical',\n      direction: resolved.layout.item.direction\n    }\n  };\n}\n\nexport function extent(itemized, parallels) {\n  const count = itemized.items.length;\n  const size = Math.ceil(count / parallels);\n  const property = itemized.layout.orientation === 'horizontal' ? 'width' : 'height';\n  const margin = property === 'width' ? 'horizontal' : 'vertical';\n  return (itemized.globalMetrics.maxItemBounds[property] * size) +\n    ((size - 1) * itemized.layout.margin[margin]);\n}\n\nexport function spread(itemized, parallels) {\n  const size = parallels;\n  const property = itemized.layout.orientation === 'horizontal' ? 'height' : 'width';\n  const margin = property === 'width' ? 'horizontal' : 'vertical';\n  return (itemized.globalMetrics.maxItemBounds[property] * size) + // expected vertical size of items\n    ((size - 1) * itemized.layout.margin[margin]); // expected spacing between items\n}\n\nexport function parallelize(availableExtent, availableSpread, itemized) {\n  const count = itemized.items.length;\n  const extentProperty = itemized.layout.orientation === 'horizontal' ? 'width' : 'height';\n  const margin = extentProperty === 'width' ? 'horizontal' : 'vertical';\n  const extentInPx = (itemized.globalMetrics.maxItemBounds[extentProperty] * count) +\n    ((count - 1) * itemized.layout.margin[margin]);\n  let numNeeded = Math.ceil(extentInPx / availableExtent);\n\n  if (availableSpread != null) {\n    const spreadProperty = itemized.layout.orientation === 'horizontal' ? 'height' : 'width';\n    const numAllowed = Math.floor(availableSpread / (4 + itemized.globalMetrics.maxItemBounds[spreadProperty]));\n    numNeeded = Math.min(numNeeded, numAllowed);\n  }\n\n  const numInput = isNaN(itemized.layout.size) ? 1 : itemized.layout.size;\n  return Math.max(1, Math.min(numNeeded, numInput));\n}\n\nexport default function (legend, {\n  onScroll = () => {}\n}) {\n  let itemized;\n  let parallels;\n  let viewRect;\n  let containerRect;\n  let offset = 0;\n  let overflow = 0;\n\n  const api = {\n    itemize: (obj) => {\n      itemized = itemize(obj, legend.renderer);\n    },\n    getItemsToRender: (obj) => {\n      viewRect = obj.viewRect;\n      overflow = api.getContentOverflow(viewRect);\n      const ext = api.extent();\n      offset = Math.min(offset, overflow);\n\n      containerRect = extend({}, viewRect);\n\n      const offsetProperty = api.orientation() === 'horizontal' ? 'x' : 'y';\n      containerRect[offsetProperty] -= offset;\n      containerRect[offsetProperty === 'x' ? 'width' : 'height'] = ext;\n\n      return getItemsToRender(obj, containerRect, { itemized, parallels });\n    },\n    parallelize: (availableExtent, availableSpread) => {\n      parallels = parallelize(availableExtent, availableSpread, itemized);\n      return parallels;\n    },\n    hasContentOverflow: () => {\n      const property = itemized.layout.orientation === 'horizontal' ? 'width' : 'height';\n      return extent(itemized, parallels) > viewRect[property];\n    },\n    getContentOverflow: (rect = viewRect) => {\n      const property = itemized.layout.orientation === 'horizontal' ? 'width' : 'height';\n      return Math.max(0, extent(itemized, parallels) - rect[property]);\n    },\n    getNextSize: () => {\n      // TODO - calculate the actual size to next item to ensure alignment\n      const property = itemized.layout.orientation === 'horizontal' ? 'width' : 'height';\n      const margin = property === 'width' ? 'horizontal' : 'vertical';\n      return itemized.globalMetrics.maxItemBounds[property] + itemized.layout.margin[margin];\n    },\n    getPrevSize: () => {\n      // TODO - calculate the actual size to next item to ensure alignment\n      const property = itemized.layout.orientation === 'horizontal' ? 'width' : 'height';\n      const margin = property === 'width' ? 'horizontal' : 'vertical';\n      return itemized.globalMetrics.maxItemBounds[property] + itemized.layout.margin[margin];\n    },\n    hasNext: () => {\n      if (api.orientation() === 'horizontal') {\n        return viewRect.x + viewRect.width < containerRect.x + containerRect.width;\n      }\n      return viewRect.y + viewRect.height < containerRect.y + containerRect.height;\n    },\n    hasPrev: () => {\n      if (api.orientation() === 'horizontal') {\n        return containerRect.x < viewRect.x;\n      }\n      return containerRect.y < viewRect.y;\n    },\n    next: () => {\n      api.scroll(-api.getNextSize());\n    },\n    prev: () => {\n      api.scroll(api.getPrevSize());\n    },\n    scroll: (delta) => {\n      const current = Math.max(0, Math.min(overflow, (offset - delta)));\n      if (current === offset) {\n        return;\n      }\n      offset = current;\n      onScroll();\n    },\n    offset: () => offset,\n    orientation: () => itemized.layout.orientation,\n    direction: () => itemized.layout.direction,\n    extent: () => extent(itemized, parallels), // total amount of space along orientation\n    spread: () => spread(itemized, parallels) // total amount of space perpendicular to orientation\n  };\n\n  return api;\n}\n","// import extend from 'extend';\n\nconst DIR = {\n  up: '\\u25B2',\n  right: '\\u25B6',\n  down: '\\u25BC',\n  left: '\\u25C0'\n};\n\nfunction itemize({\n  // resolved,\n  dock,\n  navigation\n}) {\n  return {\n    layout: {\n      orientation: dock === 'top' || dock === 'bottom' ? 'vertical' : 'horizontal'\n    },\n    navigation\n  };\n}\n\nfunction btn(h, {\n  size,\n  isActive,\n  direction,\n  nav,\n  attrs\n}) {\n  let c = {};\n  let content = '';\n  if (nav && nav.button) {\n    if (typeof nav.button.class === 'function') {\n      c = nav.button.class({ direction });\n    } else if (nav.button.class) {\n      c = nav.button.class;\n    }\n    if (typeof nav.button.content === 'function') {\n      content = nav.button.content(h, { direction });\n    }\n  }\n  const style = {\n    width: `${size}px`,\n    minWidth: `${size}px`,\n    height: `${size}px`\n  };\n\n  if (!Object.keys(c).length) { // if no classes are set, add some basic styling\n    style.border = '0';\n    style.background = 'none';\n  }\n  const attrsMerged = attrs;\n  attrsMerged.disabled = !isActive ? 'disabled' : undefined;\n\n  return h('button', {\n    class: c,\n    style,\n    attrs: attrsMerged\n  }, [content || h('span', {\n    style: {\n      pointerEvents: 'none'\n    }\n  }, [DIR[direction]])]);\n}\n\nfunction render(renderer, {\n  rect,\n  itemRenderer\n}, itemized, legend) {\n  if (!renderer || !renderer.renderArgs) {\n    return;\n  }\n  renderer.size(rect);\n  const h = renderer.renderArgs[0];\n\n  const isVertical = itemized.layout.orientation === 'vertical'; // orientation of the navigation (not the legend)\n  const isRtl = itemRenderer.direction() === 'rtl';\n\n  const hasNext = itemRenderer.hasNext();\n  const hasPrev = itemRenderer.hasPrev();\n\n  if (!hasPrev && !hasNext) {\n    renderer.render([]);\n    return;\n  }\n\n  const buttonSize = 32;\n\n  const order = isVertical ? ['right', 'left'] : ['down', 'up'];\n  if (isRtl) {\n    order.reverse();\n  }\n\n  const nodes = [h('div', {\n    style: {\n      position: 'relative',\n      display: 'flex',\n      'flex-direction': isVertical ? 'column' : 'row',\n      'justify-content': 'center',\n      height: '100%',\n      pointerEvents: 'auto'\n    }\n  }, [btn(h, {\n    size: buttonSize,\n    isActive: hasNext,\n    direction: order[0],\n    attrs: {\n      'data-action': 'next',\n      'data-component-key': legend.settings.key\n    },\n    nav: itemized.navigation\n  }), btn(h, {\n    size: buttonSize,\n    isActive: hasPrev,\n    direction: order[1],\n    attrs: {\n      'data-action': 'prev',\n      'data-component-key': legend.settings.key\n    },\n    nav: itemized.navigation\n  })])];\n  renderer.render(nodes);\n}\n\nexport default function (legend) {\n  let itemized;\n\n  const nav = {\n    itemize: (obj) => {\n      itemized = itemize(obj);\n    },\n    render: obj => render(nav.renderer, obj, itemized, legend),\n    extent: () => 32,\n    spread: () => 64\n  };\n\n  return nav;\n}\n","import extend from 'extend';\n/* eslint no-mixed-operators:0 */\n\nexport default function layout(rect, display, orientation, {\n  itemRenderer,\n  navigationRenderer,\n  titleRenderer,\n  isPreliminary = false\n}) {\n  let title;\n  let content;\n  let navigation;\n  let preferredSize = 0;\n\n  const paddedRect = {\n    x: display.spacing,\n    y: display.spacing,\n    width: rect.width - (2 * display.spacing),\n    height: rect.height - (2 * display.spacing)\n  };\n\n  title = {\n    x: paddedRect.x,\n    y: paddedRect.y,\n    width: paddedRect.width,\n    height: titleRenderer.spread()\n  };\n\n  if (orientation === 'horizontal') {\n    // const titleAtTop = false;\n    // if (titleAtTop) { // this might be a nicer layout sometimes\n    //   // |------------------|\n    //   // |title             |\n    //   // |------------|-----|\n    //   // |content     | nav |\n    //   // |------------|-----|\n\n    //   // available space for items without navigation UI\n    //   const availableExtentForItems = paddedRect.width;\n    //   const availableSpreadForItems = paddedRect.height - (title.y + title.height) + 8;\n    //   const isRtl = itemRenderer.direction() === 'rtl';\n    //   itemRenderer.parallelize(availableExtentForItems, isPreliminary ? undefined : availableSpreadForItems);\n\n    //   const navigationSize = itemRenderer.extent() > availableExtentForItems ? navigationRenderer.extent() : 0;\n    //   content = {\n    //     x: paddedRect.x,\n    //     y: title.y + title.height,\n    //     width: paddedRect.width - navigationSize,\n    //     height: availableSpreadForItems\n    //   };\n    //   navigation = {\n    //     x: content.x + content.width,\n    //     y: title.y + title.height,\n    //     width: navigationSize,\n    //     height: paddedRect.height - (title.y + title.height) + 8\n    //   };\n\n    //   if (isRtl) { // switch navigation and content\n    //     navigation.x = content.x;\n    //     content.x = navigation.x + navigation.width;\n    //     // totalContent.x = navigation.x;\n    //   }\n    //   preferredSize = title.height + Math.max(navigationRenderer.spread(), itemRenderer.spread());\n    // } else {\n      // |-----|------------|-----|\n      // |title|content     | nav |\n      // |-----|------------|-----|\n\n    title = {\n      x: paddedRect.x,\n      y: paddedRect.y,\n      width: titleRenderer.extent(),\n      height: titleRenderer.spread()\n    };\n\n    // available space for items without navigation UI\n    const availableExtentForItems = paddedRect.width - title.width - (title.width ? display.spacing : 0);\n    const availableSpreadForItems = paddedRect.height;\n    itemRenderer.parallelize(availableExtentForItems, isPreliminary ? undefined : availableSpreadForItems);\n\n    const navigationSize = itemRenderer.extent() > availableExtentForItems ? navigationRenderer.extent() : 0;\n    const spread = itemRenderer.spread();\n    const navigationSpread = navigationSize ? navigationRenderer.spread() : 0;\n    content = {\n      x: title.x + title.width + (title.width ? display.spacing : 0),\n      y: paddedRect.y + Math.max(0, (navigationSpread - spread) / 2),\n      width: paddedRect.width - navigationSize - title.width - (navigationSize ? display.spacing : 0) - (title.width ? display.spacing : 0),\n      height: availableSpreadForItems\n    };\n    navigation = {\n      x: content.x + content.width + (navigationSize ? display.spacing : 0),\n      y: paddedRect.y,\n      width: navigationSize,\n      height: paddedRect.height\n    };\n\n    title.y = content.y;\n\n    const isRtl = itemRenderer.direction() === 'rtl';\n    if (isRtl) { // switch title, content and navigation\n      navigation.x = paddedRect.x;\n      content.x = navigation.x + navigation.width + (navigation.width ? display.spacing : 0);\n      title.x = content.x + content.width + (title.width ? display.spacing : 0);\n    }\n    preferredSize = Math.max(title.height, navigationSpread, itemRenderer.spread());\n    // }\n  } else {\n    // |------------|\n    // |title       |\n    // |------------|\n    // |content     |\n    // |------------|\n    // |navigation  |\n    // |------------|\n\n    const availableExtentForItems = paddedRect.height - title.height - (title.height ? display.spacing : 0);\n    const availableSpreadForItems = paddedRect.width;\n    itemRenderer.parallelize(availableExtentForItems, isPreliminary ? undefined : availableSpreadForItems);\n\n    const navigationSize = itemRenderer.extent() > availableExtentForItems ? navigationRenderer.extent() : 0;\n    navigation = {\n      x: paddedRect.x,\n      y: paddedRect.y + paddedRect.height - navigationSize,\n      width: paddedRect.width,\n      height: navigationSize\n    };\n\n    content = {\n      x: paddedRect.x,\n      y: title.y + title.height + (title.height ? display.spacing : 0),\n      width: paddedRect.width,\n      height: paddedRect.height - title.height - (title.height ? display.spacing : 0) - navigation.height - (navigation.height ? display.spacing : 0)\n    };\n\n    preferredSize = Math.max(titleRenderer.extent(), navigationSize ? navigationRenderer.spread() : 0, itemRenderer.spread());\n  }\n\n  content = extend({}, rect, {\n    x: rect.x + content.x,\n    y: rect.y + content.y,\n    width: content.width,\n    height: content.height\n  });\n\n  navigation.x += rect.x;\n  navigation.y += rect.y;\n\n  title.x += rect.x;\n  title.y += rect.y;\n\n  return {\n    title: extend({}, rect, title),\n    content: extend({}, rect, content),\n    navigation: extend({}, rect, navigation),\n    orientation,\n    preferredSize\n  };\n}\n","import extend from 'extend';\nimport resolveSettings from './legend-resolver';\nimport itemRendererFactory from './item-renderer';\nimport navigationRendererFactory from './navigation-renderer';\nimport titleRendererFactory from './title-renderer';\nimport layout from './legend-layout';\n\nfunction update(comp) {\n  comp.state.resolved = resolveSettings(comp);\n  comp.titleRenderer.itemize({\n    resolved: comp.state.resolved,\n    dock: comp.settings.dock || 'center'\n  });\n  comp.itemRenderer.itemize({\n    resolved: comp.state.resolved,\n    dock: comp.settings.dock || 'center'\n  });\n  comp.navigationRenderer.itemize({\n    resolved: comp.state.resolved,\n    dock: comp.settings.dock || 'center',\n    navigation: comp.settings.settings.navigation\n  });\n\n  comp.state.display = {\n    spacing: 8\n  };\n}\n\nfunction preferredSize(comp, size) {\n  let s = 0;\n  const dock = comp.settings.dock || 'center';\n  const orientation = dock === 'top' || dock === 'bottom' ? 'horizontal' : 'vertical';\n  const d = comp.state.display;\n  const tempLayout = layout(size.inner, d, orientation, {\n    itemRenderer: comp.itemRenderer,\n    navigationRenderer: comp.navigationRenderer,\n    titleRenderer: comp.titleRenderer,\n    isPreliminary: true\n  });\n  s += d.spacing; // start padding in both vertical and horizontal mode\n  s += tempLayout.preferredSize;\n  s += d.spacing; // end padding in both vertical and horizontal mode\n  return s;\n}\n\nfunction render(legend) {\n  const {\n    rect,\n    settings,\n    state,\n    itemRenderer,\n    navigationRenderer,\n    titleRenderer\n  } = legend;\n  const orientation = settings.dock === 'top' || settings.dock === 'bottom' ? 'horizontal' : 'vertical';\n  const l = layout(rect, state.display, orientation, {\n    itemRenderer,\n    navigationRenderer,\n    titleRenderer\n  });\n\n  legend.renderer.size(l.content);\n\n  // l.content.x = 0;\n  // l.content.y = 0;\n\n  // l.navigation.x += rect.x;\n  // l.navigation.y += rect.y;\n\n  // l.title.x += rect.x;\n  // l.title.y += rect.y;\n\n  let contentItems = itemRenderer.getItemsToRender({\n    viewRect: extend({}, l.content, { x: 0, y: 0 })\n  });\n\n  navigationRenderer.render({\n    rect: l.navigation,\n    itemRenderer\n  });\n\n  titleRenderer.render({\n    rect: l.title\n  });\n\n  legend.state.views = {\n    layout: l\n  };\n\n  return contentItems;\n}\n\nconst component = {\n  require: ['chart', 'settings', 'renderer', 'update', 'resolver', 'registries'],\n  defaultSettings: {\n    settings: {},\n    style: {\n      item: {\n        label: '$label',\n        shape: '$shape'\n      },\n      title: '$title'\n    }\n  },\n  mounted(renderElement) {\n    if (renderElement && renderElement.parentElement) {\n      this.navigationRenderer.renderer.appendTo(renderElement.parentElement);\n      this.titleRenderer.renderer.appendTo(renderElement.parentElement);\n    }\n    this.navigationRenderer.render({\n      rect: this.state.views.layout.navigation,\n      itemRenderer: this.itemRenderer\n    });\n\n    this.titleRenderer.render({\n      rect: this.state.views.layout.title\n    });\n  },\n  beforeUnmount() {\n    this.navigationRenderer.renderer.clear();\n    this.titleRenderer.renderer.clear();\n  },\n  on: {\n    panstart() {\n      if (this.state.interaction.started) {\n        return;\n      }\n      const contentOverflow = this.itemRenderer.getContentOverflow();\n      if (!contentOverflow) {\n        return;\n      }\n      this.state.interaction.started = true;\n      this.state.interaction.delta = 0;\n    },\n    panmove(e) {\n      if (!this.state.interaction.started) {\n        return;\n      }\n      const delta = this.itemRenderer.orientation() === 'horizontal' ? (this.itemRenderer.direction() === 'rtl' ? -1 : 1) * e.deltaX : e.deltaY;\n      this.itemRenderer.scroll(delta - this.state.interaction.delta);\n      this.state.interaction.delta = delta;\n    },\n    panend() {\n      this.state.interaction.started = false;\n    },\n    scroll(delta) {\n      this.itemRenderer.scroll(-delta);\n    },\n    next() {\n      this.itemRenderer.next();\n    },\n    prev() {\n      this.itemRenderer.prev();\n    }\n  },\n  created() {\n    this.rect = { x: 0, y: 0, width: 0, height: 0 };\n    this.state = {\n      interaction: {}\n    };\n    this.onScroll = () => {\n      const items = render(this);\n      this.update(items);\n    };\n    this.itemRenderer = itemRendererFactory(this, {\n      onScroll: this.onScroll\n    });\n    this.navigationRenderer = navigationRendererFactory(this);\n    this.titleRenderer = titleRendererFactory(this);\n    this.navigationRenderer.renderer = this.registries.renderer('dom')();\n    this.titleRenderer.renderer = this.registries.renderer()();\n    update(this);\n  },\n  preferredSize(obj) {\n    return preferredSize(this, obj);\n  },\n  beforeUpdate() {\n    update(this);\n  },\n  beforeRender(opts) {\n    this.rect = opts.size;\n  },\n  render() {\n    return render(this);\n  },\n  beforeDestroy() {\n    this.navigationRenderer.renderer.destroy();\n    this.titleRenderer.renderer.destroy();\n  }\n};\n\nexport default component;\n","import extend from 'extend';\n\n/**\n * @typedef {object}\n * @alias component--legend-cat.settings\n */\nconst DEFAULT_SETTINGS = {\n  /**\n   * @typedef {object=}\n   */\n  layout: {\n    /**\n     * Maximum number of columns (vertical) or rows (horizontal)\n     * @type {number=}\n     */\n    size: 1,\n    /**\n     * Layout direction. Either `'ltr'` or `'rtl'`\n     * @type {string=}\n     */\n    direction: 'ltr'\n  },\n  /**\n   * Settings applied per item\n   * @typedef {object=}\n   */\n  item: {\n    /** Whether to show the current item\n     * @type {boolean=} */\n    show: true,\n    justify: 0.5,\n    align: 0.5,\n    /**\n     * @typedef {object=} */\n    label: {\n      fontSize: '12px',\n      fontFamily: 'Arial',\n      fill: '#595959',\n      /** Word break rule, how to apply line break if label text overflows its maxWidth property. Either `'break-word'` or `'break-all'`\n       * @type {string=} */\n      wordBreak: 'none',\n      /** Max number of lines allowed if label is broken into multiple lines (only applicable with wordBreak)\n       * @type {number=} */\n      maxLines: 2,\n      /** Maximum width of label, in px\n       * @type {number=} */\n      maxWidth: 136,\n      lineHeight: 1.2\n    },\n    /**\n     * @typedef {object=} */\n    shape: {\n      /**\n       * @type {string=} */\n      type: 'square',\n      /**\n       * @type {number=} */\n      size: 12\n    }\n  },\n  /**\n   * @typedef {object=} */\n  title: {\n    /** Whether to show the title\n     * @type {boolean=} */\n    show: true,\n    /** Title text. Defaults to the title of the provided data field\n     * @type {string=} */\n    text: undefined,\n    /** Horizontal alignment of the text. Allowed values are `'start'`, `'middle'` and `'end'`\n     * @type {string}\n     */\n    anchor: 'start',\n    fontSize: '16px',\n    fontFamily: 'Arial',\n    fill: '#595959',\n    /** Word break rule, how to apply line break if label text overflows its maxWidth property. Either `'break-word'` or `'break-all'`\n     * @type {string=} */\n    wordBreak: 'none',\n    /** Max number of lines allowed if label is broken into multiple lines, is only appled when `wordBreak` is not set to `'none'`\n     * @type {number=} */\n    maxLines: 2,\n    /** Maximum width of title, in px\n     * @type {number=} */\n    maxWidth: 156,\n    lineHeight: 1.25\n  },\n  /**\n   * @typedef {object=} */\n  navigation: {\n    /**\n     * @typedef {object=} */\n    button: {\n      /**\n       * @type {object<string, boolean>=} */\n      class: undefined,\n      /**\n       * @type {function} */\n      content: undefined\n    }\n  }\n};\n\n/**\n * Resolve settings based on input, defaults, and data\n *\n * @ignore\n * @param {legendComponent} comp - The component instance\n */\nexport default function resolveSettings(comp) {\n  const domain = comp.scale.domain();\n  let data = { items: [] };\n  if (comp.scale.type === 'threshold-color') {\n    const fields = comp.scale.data().fields;\n    const sourceField = fields[0];\n    const formatter = sourceField ? sourceField.formatter() : v => String(v);\n\n    for (let i = 0; i < domain.length - 1; i++) {\n      const it = {\n        value: domain[i],\n        label: `${formatter(domain[i])} - < ${formatter(domain[i + 1])}`\n      };\n      if (sourceField) {\n        it.source = {\n          key: sourceField.key()\n        };\n      }\n      data.items.push(it);\n    }\n\n    const orientation = comp.settings.dock === 'top' || comp.settings.dock === 'bottom' ? 'horizontal' : 'vertical';\n\n    if (orientation === 'vertical') {\n      data.items.reverse();\n    }\n  } else {\n    const labels = comp.scale.labels ? comp.scale.labels() : null;\n    data.items = domain.map((d, idx) => {\n      let datum = comp.scale.datum ? extend({}, comp.scale.datum(d)) : { value: d };\n      if (comp.scale.datum) {\n        datum = extend({}, comp.scale.datum(d));\n        datum.value = d;\n      }\n\n      if (comp.scale.label) {\n        datum.label = comp.scale.label(d);\n      } else if (labels) {\n        datum.label = labels[idx];\n      }\n\n      return datum;\n    });\n  }\n\n  const title = comp.resolver.resolve({\n    data: {\n      fields: comp.scale.data().fields\n    },\n    defaults: extend(true, {}, DEFAULT_SETTINGS.title, comp.style.title),\n    settings: comp.settings.settings.title\n  });\n\n  const layout = comp.resolver.resolve({\n    data: {\n      fields: comp.scale.data().fields\n    },\n    defaults: DEFAULT_SETTINGS.layout,\n    settings: comp.settings.settings.layout\n  });\n\n  const labels = comp.resolver.resolve({\n    data,\n    defaults: extend(true, {}, DEFAULT_SETTINGS.item.label, comp.style.item.label),\n    settings: (comp.settings.settings.item || {}).label\n  });\n\n  const shapeSettings = extend(true, {}, (comp.settings.settings.item || {}).shape);\n\n  if (typeof shapeSettings.fill === 'undefined' && comp.settings.scale) {\n    shapeSettings.fill = {\n      scale: comp.settings.scale\n    };\n  }\n\n  const symbols = comp.resolver.resolve({\n    data,\n    defaults: extend(true, {}, DEFAULT_SETTINGS.item.shape, comp.style.item.shape),\n    settings: shapeSettings\n  });\n\n  const items = comp.resolver.resolve({\n    data,\n    defaults: extend(true, {}, {\n      show: DEFAULT_SETTINGS.item.show\n    }),\n    settings: {\n      show: (comp.settings.settings.item || {}).show\n    }\n  });\n\n  function range(item, i) {\n    let v = item.data.value;\n    let next = domain[i + 1];\n    item.data.value = [v, next];\n  }\n\n  if (comp.scale.type === 'threshold-color') {\n    const orientation = comp.settings.dock === 'top' || comp.settings.dock === 'bottom' ? 'horizontal' : 'vertical';\n\n    if (orientation === 'vertical') {\n      items.items.reverse().forEach(range);\n      items.items.reverse();\n    } else {\n      items.items.forEach(range);\n    }\n  }\n\n  return {\n    title,\n    labels,\n    symbols,\n    items,\n    layout\n  };\n}\n","function applyAlignJustify(ctx, node) {\n  let wiggle = 0;\n  const cmd = {\n    type: ctx.state.isVertical ? 'justify' : 'align',\n    coord: ctx.state.isVertical ? 'y' : 'x',\n    pos: ctx.state.isVertical ? 'height' : 'width',\n    fn: ctx.state.isVertical ? 'requiredHeight' : 'requiredWidth'\n  };\n\n  wiggle = ctx.state.rect[cmd.pos] - ctx.state.legend.length() - ctx.state.title[cmd.fn]();\n  wiggle *= Math.min(1, Math.max(ctx.stgns[cmd.type], 0));\n  node[cmd.coord] += wiggle;\n}\n\nexport function generateStopNodes(ctx) {\n  const fillScale = ctx.state.legend.fillScale;\n  const majorScale = ctx.state.legend.majorScale;\n  const stops = fillScale.domain().map(d => ({\n    type: 'stop',\n    color: fillScale(d),\n    offset: Math.min(1, Math.max(0, majorScale.norm(d)))\n  }));\n\n  return stops.sort((a, b) => a.offset - b.offset);\n}\n\nexport function createTitleNode(ctx) {\n  const state = ctx.state;\n  const settings = ctx.stgns;\n  const isTickLeft = state.ticks.anchor === 'left';\n  const isTickTop = state.ticks.anchor === 'top';\n  let x = state.rect.x;\n  let y = state.rect.y;\n  let textAnchor = 'start';\n\n  if (state.title.anchor === 'left') {\n    x += state.title.requiredWidth() - settings.title.padding;\n    y += state.title.textMetrics.height;\n    y += isTickTop ? state.rect.height - state.title.textBounds.height : 0;\n    textAnchor = 'end';\n  } else if (state.title.anchor === 'right') {\n    x += state.legend.length();\n    x += settings.title.padding;\n    y += state.title.textMetrics.height;\n    y += isTickTop ? state.rect.height - state.title.textBounds.height : 0;\n  } else if (state.title.anchor === 'top') {\n    x += isTickLeft ? state.rect.width : 0;\n    y += state.title.textMetrics.height;\n    textAnchor = isTickLeft ? 'end' : 'start';\n  }\n\n  const node = {\n    tag: 'legend-title',\n    type: 'text',\n    x,\n    y: Math.min(y, state.rect.y + state.rect.height),\n    text: settings.title.text,\n    fill: settings.title.fill,\n    fontSize: settings.title.fontSize,\n    fontFamily: settings.title.fontFamily,\n    maxWidth: settings.title.maxLengthPx,\n    maxLines: settings.title.maxLines,\n    wordBreak: settings.title.wordBreak,\n    hyphens: settings.title.hyphens,\n    lineHeight: settings.title.lineHeight,\n    anchor: textAnchor\n  };\n\n  applyAlignJustify(ctx, node);\n  return node;\n}\n\nexport function createLegendRectNode(ctx, stops) {\n  const state = ctx.state;\n  const settings = ctx.stgns;\n  const container = state.rect;\n  let x = container.x;\n  let y = container.y;\n  let width = state.isVertical ? settings.size : state.legend.length();\n  let height = state.isVertical ? state.legend.length() : settings.size;\n\n  if (state.ticks.anchor === 'left') {\n    x += state.rect.width - settings.size;\n  } else if (state.ticks.anchor === 'top') {\n    y += state.rect.height - settings.size;\n  }\n\n  if (state.title.anchor === 'top') {\n    y += state.title.requiredHeight();\n  } else if (state.title.anchor === 'left') {\n    x += state.title.requiredWidth();\n  }\n\n  const node = {\n    type: 'rect',\n    x,\n    y,\n    width,\n    height,\n    fill: {\n      type: 'gradient',\n      stops,\n      degree: state.isVertical ? 90 : 180\n    }\n  };\n\n  applyAlignJustify(ctx, node);\n  return node;\n}\n\nexport function createTickNodes(ctx, legendNode) {\n  const state = ctx.state;\n  const settings = ctx.stgns;\n  let anchor = 'start';\n  const rangeSelectorRect = {\n    type: 'rect',\n    x: legendNode.x,\n    y: legendNode.y,\n    width: state.isVertical ? 0 : legendNode.width,\n    height: state.isVertical ? legendNode.height : 0,\n    fill: 'transparent'\n  };\n\n  const nodes = state.ticks.values.map((tick) => {\n    let x = 0;\n    let y = 0;\n    let dx = 0;\n    let dy = 0;\n\n    if (state.isVertical) {\n      y = legendNode.y + (legendNode.height * tick.pos);\n      dy = tick.pos === 1 ? -(tick.textMetrics.height / 5) : tick.textMetrics.height;\n    } else {\n      x = legendNode.x + (legendNode.width * tick.pos);\n    }\n\n    if (state.ticks.anchor === 'right') {\n      x = legendNode.x + settings.size + settings.tick.padding;\n\n      rangeSelectorRect.x = legendNode.x + legendNode.width;\n    } else if (state.ticks.anchor === 'left') {\n      x = legendNode.x - settings.tick.padding;\n      anchor = 'end';\n    } else if (state.ticks.anchor === 'top') {\n      y = legendNode.y - settings.tick.padding;\n      dy -= tick.textMetrics.height * 0.25;\n      anchor = tick.pos === 0 ? 'start' : 'end';\n    } else if (state.ticks.anchor === 'bottom') {\n      y = legendNode.y + legendNode.height + settings.tick.padding;\n      dy = tick.textMetrics.height * 0.8;\n      anchor = tick.pos === 0 ? 'start' : 'end';\n\n      rangeSelectorRect.y = legendNode.y + legendNode.height;\n    }\n\n    const node = {\n      type: 'text',\n      x,\n      y,\n      dx,\n      dy,\n      text: tick.label,\n      fontSize: settings.tick.fontSize,\n      fontFamily: settings.tick.fontFamily,\n      fill: settings.tick.fill,\n      maxWidth: state.isVertical ? settings.tick.maxLengthPx : Math.min(settings.tick.maxLengthPx, state.legend.length() / 2),\n      anchor,\n      textBoundsFn: ctx.renderer.textBounds\n    };\n\n    return node;\n  });\n\n  return {\n    type: 'container',\n    id: 'legend-seq-ticks',\n    children: [...nodes, rangeSelectorRect]\n  };\n}\n","import {\n  createTitleNode,\n  generateStopNodes,\n  createLegendRectNode,\n  createTickNodes\n} from './node-builder';\n\n\nfunction resolveAnchor(dock, anchor, map) {\n  const mapped = map[dock];\n  if (typeof mapped === 'object') {\n    if (mapped.valid.indexOf(anchor) !== -1) {\n      return anchor;\n    }\n    return mapped.default;\n  }\n\n  return map.default;\n}\n\nfunction resolveTickAnchor(settings) {\n  const dock = settings.dock;\n  const anchor = settings.settings.tick.anchor;\n\n  const dockAnchorMap = {\n    left: { valid: ['left', 'right'], default: 'left' },\n    right: { valid: ['left', 'right'], default: 'right' },\n    top: { valid: ['top', 'bottom'], default: 'top' },\n    bottom: { valid: ['top', 'bottom'], default: 'bottom' },\n    default: 'right'\n  };\n\n  return resolveAnchor(dock, anchor, dockAnchorMap);\n}\n\nfunction resolveTitleAnchor(settings) {\n  const dockAnchorMap = {\n    left: { valid: ['top'], default: 'top' },\n    right: { valid: ['top'], default: 'top' },\n    top: { valid: ['left', 'right'], default: 'left' },\n    bottom: { valid: ['left', 'right'], default: 'left' },\n    default: 'top'\n  };\n\n  const dock = settings.dock;\n  const anchor = settings.settings.title.anchor;\n\n  return resolveAnchor(dock, anchor, dockAnchorMap);\n}\n\nfunction initRect(ctx, size) {\n  const rect = { x: 0, y: 0, width: 0, height: 0 };\n  const padding = ctx.stgns.padding;\n  rect.x = padding.left;\n  rect.y = padding.top;\n  rect.width = size.width - padding.left - padding.right;\n  rect.height = size.height - padding.top - padding.bottom;\n\n  return rect;\n}\n\nfunction getTicks(ctx, majorScale) {\n  const values = majorScale.domain();\n  let labels = values;\n  let labelFn = ctx.stgns.tick.label;\n  if (!labelFn && ctx.formatter) {\n    labelFn = ctx.formatter;\n  } else if (!labelFn && majorScale.data().fields) {\n    labelFn = majorScale.data().fields[0].formatter();\n  }\n  if (typeof labelFn === 'function') {\n    labels = values.map(labelFn).map(String);\n  }\n\n  const ticks = values.map((value, i) => {\n    const label = labels[i];\n    return {\n      value,\n      label,\n      pos: majorScale.norm(parseFloat(value, 10)),\n      textMetrics: ctx.renderer.measureText({\n        text: label,\n        fontSize: ctx.stgns.tick.fontSize,\n        fontFamily: ctx.stgns.tick.fontFamily\n      })\n    };\n  });\n\n  return ticks;\n}\n\nfunction initState(ctx) {\n  const isVertical = ctx.settings.dock !== 'top' && ctx.settings.dock !== 'bottom';\n  const titleStgns = ctx.stgns.title;\n\n  const fillScale = ctx.chart.scale(ctx.stgns.fill);\n  const majorScale = ctx.chart.scale(ctx.stgns.major);\n  const tickValues = getTicks(ctx, majorScale);\n  const tickAnchor = resolveTickAnchor(ctx.settings);\n\n  if (typeof titleStgns.text === 'undefined') {\n    const fields = majorScale.data().fields;\n    titleStgns.text = fields && fields[0] ? fields[0].title() : '';\n  }\n\n  const titleTextMetrics = ctx.renderer.measureText({\n    text: titleStgns.text,\n    fontSize: titleStgns.fontSize,\n    fontFamily: titleStgns.fontFamily\n  });\n\n  const titleTextBounds = ctx.renderer.textBounds({\n    text: titleStgns.text,\n    fontSize: titleStgns.fontSize,\n    fontFamily: titleStgns.fontFamily,\n    maxLines: titleStgns.maxLines,\n    maxWidth: titleStgns.maxLengthPx,\n    wordBreak: titleStgns.wordBreak,\n    hyphens: titleStgns.hyphens,\n    lineHeight: titleStgns.lineHeight\n  });\n\n  const state = {\n    isVertical,\n    nodes: [],\n    title: {\n      anchor: resolveTitleAnchor(ctx.settings),\n      textMetrics: titleTextMetrics,\n      textBounds: titleTextBounds,\n      requiredWidth: () => {\n        if (!titleStgns.show) {\n          return 0;\n        }\n        let w = titleTextBounds.width;\n        let mw = titleStgns.maxLengthPx;\n        if (!isVertical) {\n          w += titleStgns.padding;\n          mw += titleStgns.padding;\n        }\n        return Math.min(w, mw, state.rect.width);\n      },\n      requiredHeight: () => {\n        if (!titleStgns.show) {\n          return 0;\n        }\n        let h = titleTextBounds.height;\n        if (isVertical) {\n          h += titleStgns.padding;\n        }\n        return Math.min(h, state.rect.height);\n      }\n    },\n    ticks: {\n      values: tickValues,\n      anchor: tickAnchor,\n      length: Math.min(Math.max(...tickValues.map(t => t.textMetrics.width)), ctx.stgns.tick.maxLengthPx),\n      requiredHeight: () => (tickAnchor === 'top' ? Math.max(...state.ticks.values.map(t => t.textMetrics.height)) + ctx.stgns.tick.padding : 0),\n      height: Math.max(...tickValues.map(t => t.textMetrics.height))\n    },\n    legend: {\n      fillScale,\n      majorScale,\n      length: () => {\n        const pos = isVertical ? 'height' : 'width';\n        const fnPos = isVertical ? 'requiredHeight' : 'requiredWidth';\n        const len = Math.min(state.rect[pos], state.rect[pos] * ctx.stgns.length) - state.title[fnPos]();\n        return Math.max(0, Math.min(len, ctx.stgns.maxLengthPx));\n      }\n    }\n  };\n\n  return state;\n}\n\n/**\n * @typedef {object} component--legend-seq\n * @property {string} fill - Reference to definition of sequential color scale\n * @property {string} major - Reference to definition of linear scale\n * @property {number} [size=15] - Size in pixels of the legend, if vertical is the width and height otherwise\n * @property {number} [length=1] - A value in the range 0-1 indicating the length of the legend node\n * @property {number} [maxLengthPx=250] - Max length in pixels\n * @property {number} [align=0.5] - A value in the range 0-1 indicating horizontal alignment of the legend's content. 0 aligns to the left, 1 to the right.\n * @property {number} [justify=0] - A value in the range 0-1 indicating vertical alignment of the legend's content. 0 aligns to the top, 1 to the bottom.\n * @property {object} [padding]\n * @property {number} [padding.left=5]\n * @property {number} [padding.right=5]\n * @property {number} [padding.top=5]\n * @property {number} [padding.bottom=5]\n * @property {object} [tick]\n * @property {function} [tick.label] - Function applied to all tick values, returned values are used as labels\n * @property {string} [tick.fill='#595959']\n * @property {string} [tick.fontSize='12px']\n * @property {string} [tick.fontFamily='Arial']\n * @property {number} [tick.maxLengthPx=150] - Max length in pixels\n * @property {string} [tick.anchor='right'] - Where to anchor the tick in relation to the legend node, supported values are [top, bottom, left and right]\n * @property {number} [tick.padding=5] - padding in pixels to the legend node\n * @property {object} [title] - Title settings\n * @property {boolean} [title.show=true] - Toggle title on/off\n * @property {string} [title.text=''] - Title text. Defaults to the title of the provided data field\n * @property {string} [title.fill='#595959']\n * @property {string} [title.fontSize='12px']\n * @property {string} [title.fontFamily='Arial']\n * @property {number} [title.maxLengthPx=100] - Max length in pixels\n * @property {number} [title.padding=5] - padding in pixels to the legend node\n * @property {string} [title.anchor='top'] - Where to anchor the title in relation to the legend node, supported values are [top, left and right]\n * @property {string} [title.wordBreak='none'] - How overflowing title is handled, if it should insert line breaks at word boundries (break-word) or character boundries (break-all)\n * @property {string} [title.hyphens='auto'] - How words should be hyphenated when text wraps across multiple lines (only applicable with wordBreak)\n * @property {number} [title.maxLines=2] - Number of allowed lines if title contains line breaks (only applicable with wordBreak)\n * @property {number} [title.lineHeight=1.2] - A multiplier defining the distance between lines (only applicable with wordBreak)\n */\n\nconst legendDef = {\n  require: ['chart', 'settings', 'renderer'],\n  defaultSettings: {\n    displayOrder: 0,\n    dock: 'right',\n    settings: {\n      size: 15,\n      length: 0.5,\n      maxLengthPx: 250,\n      align: 0.5,\n      justify: 0,\n      padding: {\n        left: 5,\n        right: 5,\n        top: 5,\n        bottom: 5\n      },\n      tick: {\n        label: null,\n        fill: '#595959',\n        fontSize: '12px',\n        fontFamily: 'Arial',\n        maxLengthPx: 100,\n        anchor: null, // Use default based on dock\n        padding: 5\n      },\n      title: {\n        show: true,\n        text: undefined,\n        fill: '#595959',\n        fontSize: '12px',\n        fontFamily: 'Arial',\n        maxLengthPx: 100,\n        padding: 5,\n        maxLines: 2,\n        wordBreak: 'none',\n        lineHeight: 1.2,\n        hyphens: 'auto',\n        anchor: null // Use default based on dock\n      }\n    }\n  },\n  preferredSize(opts) {\n    const state = this.state;\n    state.rect = initRect(this, opts.inner);\n\n    // Init with size of legend\n    let prefSize = this.stgns.size;\n\n    // Append paddings\n    const paddings = state.isVertical ? this.stgns.padding.left + this.stgns.padding.right : this.stgns.padding.top + this.stgns.padding.bottom;\n    prefSize += paddings;\n\n    // Append tick size\n    const maxSize = Math.max(opts.inner.width, opts.inner.height);\n    if ((state.ticks.anchor === 'left' || state.ticks.anchor === 'right')) {\n      const tHeight = state.ticks.values.reduce((sum, t) => sum + t.textMetrics.height, 0);\n      if (tHeight > this.state.legend.length()) {\n        return maxSize;\n      }\n      prefSize += state.ticks.length;\n    } else {\n      const tWidth = state.ticks.length;\n      if (tWidth > this.state.legend.length()) {\n        return maxSize;\n      }\n      prefSize += Math.max(...state.ticks.values.map(t => t.textMetrics.height));\n    }\n    prefSize += this.stgns.tick.padding;\n\n    // Append or use title size\n    if (this.stgns.title.show) {\n      if (state.title.anchor === 'left' || state.title.anchor === 'right') {\n        prefSize = Math.max(state.title.textBounds.height + paddings, prefSize);\n      } else {\n        prefSize = Math.max(prefSize, state.title.requiredWidth() + paddings);\n      }\n    }\n\n    this.state.preferredSize = prefSize;\n    return prefSize;\n  },\n  created() {\n    this.stgns = this.settings.settings;\n\n    this.state = initState(this);\n  },\n  beforeUpdate(opts) {\n    this.stgns = opts.settings.settings;\n\n    this.state = initState(this);\n  },\n  beforeRender(opts) {\n    this.state.nodes = [];\n    this.state.rect = initRect(this, opts.size);\n\n    if (this.stgns.title.show) {\n      const titleNode = createTitleNode(this);\n      this.state.nodes.push(titleNode);\n    }\n\n    const stopNodes = generateStopNodes(this);\n    const rectNode = createLegendRectNode(this, stopNodes);\n    const tickNodes = createTickNodes(this, rectNode);\n\n    const targetNode = { // The target node enables range selection component to limit its range to a specific area\n      id: 'legend-seq-target',\n      type: 'container',\n      children: [rectNode, tickNodes]\n    };\n\n    this.state.nodes.push(targetNode);\n  },\n  render() {\n    return this.state.nodes;\n  }\n};\n\nexport default legendDef;\n","import extend from 'extend';\nimport {\n  area,\n  curveLinear,\n  curveStep,\n  curveStepAfter,\n  curveStepBefore,\n  curveBasis,\n  curveCardinal,\n  curveCatmullRom,\n  curveMonotoneX,\n  curveMonotoneY,\n  curveNatural\n} from 'd3-shape';\n\nconst CURVES = {\n  step: curveStep,\n  stepAfter: curveStepAfter,\n  stepBefore: curveStepBefore,\n  linear: curveLinear,\n  basis: curveBasis,\n  cardinal: curveCardinal.tension(0),\n  catmullRom: curveCatmullRom,\n  monotonex: curveMonotoneX,\n  monotoney: curveMonotoneY,\n  natural: curveNatural\n};\n\n/**\n * @typedef {object}\n * @alias component--line-settings\n */\nconst SETTINGS = {\n  /**\n   * @typedef {object}\n   */\n  coordinates: {\n    /**\n     * @type {number} */\n    minor: 0.5,\n    /**\n     * @type {number} */\n    major: 0.5,\n    /**\n     * @type {number=} */\n    layerId: 0\n  },\n  /**\n   * @type {string=} */\n  orientation: 'horizontal',\n  /**\n   * @typedef {object} */\n  layers: {\n    /**\n     * @type {string=} */\n    curve: 'linear',\n    /**\n     * @type {boolean=} */\n    show: true,\n    /**\n     * @typedef {object} */\n    line: {\n      /**\n       * @type {string=} */\n      stroke: '#ccc',\n      /**\n       * @type {number=} */\n      strokeWidth: 1,\n      /**\n       * @type {number=} */\n      opacity: 1,\n      /**\n       * @type {boolean=} */\n      show: true\n    },\n    /**\n     * @typedef {object} */\n    area: {\n      /**\n       * @type {string=} */\n      fill: '#ccc',\n      /**\n       * @type {number=} */\n      opacity: 0.8,\n      /**\n       * @type {boolean=} */\n      show: true\n    }\n  }\n};\n\nfunction createDisplayLayer(points, {\n  generator,\n  item,\n  data\n}, fill = '') {\n  const path = generator(points);\n  return {\n    type: 'path',\n    d: path,\n    opacity: item.opacity,\n    stroke: item.stroke,\n    strokeWidth: item.strokeWidth,\n    fill: fill || item.fill,\n    data\n  };\n}\n\nfunction createDisplayLayers(layers, {\n  width,\n  height,\n  missingMinor0,\n  stngs\n}) {\n  const nodes = [];\n  layers.forEach((layer) => {\n    const { lineObj, layerObj, areaObj, points } = layer;\n\n    const areaGenerator = area();\n    let lineGenerator;\n    let secondaryLineGenerator;\n    let minor = { size: height, p: 'y' };\n    let major = { size: width, p: 'x' };\n    if (stngs.orientation === 'vertical') {\n      const temp = extend(true, {}, major);\n      major = extend(true, {}, minor);\n      minor = extend(true, {}, temp);\n    }\n\n    areaGenerator\n      [major.p](d => d.major * major.size) // eslint-disable-line no-unexpected-multiline\n      [`${minor.p}1`](d => d.minor * minor.size) // eslint-disable-line no-unexpected-multiline\n      [`${minor.p}0`](d => d.minor0 * minor.size) // eslint-disable-line no-unexpected-multiline\n      .defined(d => typeof d.minor === 'number' && !isNaN(d.minor))\n      .curve(CURVES[layerObj.curve === 'monotone' ? `monotone${major.p}` : layerObj.curve]);\n    lineGenerator = areaGenerator[`line${minor.p.toUpperCase()}1`]();\n    secondaryLineGenerator = areaGenerator[`line${minor.p.toUpperCase()}0`]();\n\n    // area layer\n    if (stngs.layers.area && areaObj.show !== false) {\n      nodes.push(createDisplayLayer(points, {\n        data: layer.firstPoint,\n        item: areaObj,\n        generator: areaGenerator\n      }));\n    }\n\n    // main line layer\n    if (lineObj && lineObj.show !== false) {\n      nodes.push(createDisplayLayer(points, {\n        data: layer.firstPoint,\n        item: lineObj,\n        generator: lineGenerator\n      }, 'none'));\n\n      // secondary line layer, used only when rendering area\n      if (!missingMinor0 && stngs.layers.area && areaObj.show !== false) {\n        nodes.push(createDisplayLayer(points, {\n          data: layer.firstPoint,\n          item: lineObj,\n          generator: secondaryLineGenerator\n        }, 'none'));\n      }\n    }\n  });\n\n  return nodes;\n}\n\nfunction resolve({\n  data,\n  stngs,\n  rect,\n  resolver,\n  style\n}) {\n  const { width, height } = rect;\n  const coordinates = resolver.resolve({\n    data,\n    defaults: SETTINGS.coordinates,\n    settings: stngs.coordinates || {},\n    scaled: {\n      major: stngs.orientation === 'vertical' ? height : width,\n      minor: stngs.orientation === 'vertical' ? width : height\n    }\n  });\n\n  // collect points into layers\n  const layerIds = {};\n  let numLines = 0;\n  for (let i = 0; i < coordinates.items.length; i++) {\n    let p = coordinates.items[i];\n    let lid = p.layerId;\n    layerIds[lid] = layerIds[lid] || { order: numLines++, id: lid, items: [], firstPoint: p.data };\n    layerIds[lid].items.push(p);\n  }\n\n  const metaLayers = Object.keys(layerIds).map(lid => layerIds[lid]);\n  const layersData = { items: metaLayers.map(layer => layer.firstPoint) };\n\n  const layersResolved = resolver.resolve({\n    data: layersData,\n    defaults: {\n      curve: SETTINGS.layers.curve, show: SETTINGS.layers.show\n    },\n    settings: {\n      curve: stngs.layers.curve,\n      show: stngs.layers.show\n    }\n  });\n\n  const linesResolved = resolver.resolve({\n    data: layersData,\n    defaults: extend({}, SETTINGS.layers.line, style.line),\n    settings: stngs.layers.line\n  });\n\n  const areasResolved = resolver.resolve({\n    data: layersData,\n    defaults: extend({}, SETTINGS.layers.area, style.area),\n    settings: stngs.layers.area\n  });\n\n  return {\n    coordinates,\n    metaLayers,\n    layers: layersResolved,\n    lines: linesResolved,\n    areas: areasResolved\n  };\n}\n\nfunction calculateVisibleLayers(opts) {\n  const {\n    metaLayers,\n    coordinates,\n    layers,\n    lines,\n    areas\n  } = resolve(opts);\n\n  const visibleLayers = [];\n  metaLayers.forEach((layer, ix) => {\n    const layerObj = layers.items[ix];\n    if (layerObj.show === false) {\n      return;\n    }\n\n    const values = [];\n    const points = [];\n    let point;\n    let pData;\n    for (let i = 0; i < layer.items.length; i++) {\n      point = layer.items[i];\n      pData = point.data;\n      if (isNaN(point.major)) {\n        continue;\n      }\n      if (opts.missingMinor0) {\n        point.minor0 = coordinates.settings.minor.scale ? coordinates.settings.minor.scale(pData.minor0 ? pData.minor0.value : 0) : 0;\n      }\n      if (!isNaN(point.minor)) {\n        values.push(point.minor);\n      }\n      points.push(point);\n    }\n\n    const median = values.sort((a, b) => a - b)[Math.floor((values.length - 1) / 2)];\n\n    visibleLayers.push({\n      layerObj,\n      lineObj: lines.items[ix],\n      areaObj: areas.items[ix],\n      median,\n      points,\n      firstPoint: layer.firstPoint\n    });\n  });\n\n  return visibleLayers;\n}\n\nconst lineMarkerComponent = {\n  require: ['chart', 'resolver'],\n  defaultSettings: {\n    style: {\n      area: '$shape',\n      line: '$shape-outline'\n    }\n  },\n  created() {\n    this.stngs = this.settings.settings || {};\n  },\n  beforeRender({ size }) {\n    this.rect = size;\n  },\n  render({ data }) {\n    const { width, height } = this.rect;\n    const missingMinor0 = typeof this.stngs.coordinates.minor0 === 'undefined';\n\n    const visibleLayers = calculateVisibleLayers({\n      data,\n      stngs: this.stngs,\n      rect: this.rect,\n      resolver: this.resolver,\n      style: this.style,\n      missingMinor0\n    });\n\n    visibleLayers.sort((a, b) => a.median - b.median);\n\n    // generate visuals\n    return createDisplayLayers(visibleLayers, {\n      width,\n      height,\n      missingMinor0,\n      stngs: this.stngs\n    });\n  }\n};\n\nexport default lineMarkerComponent;\n","import extend from 'extend';\nimport NarrowPhaseCollision from '../../../core/math/narrow-phase-collision';\n\n/**\n * @typedef {object} component--brush-area-brush\n * @property {string} key - Component key\n * @property {string[]} [contexts] - Name of the brushing contexts to affect\n * @property {string[]} [data] - The mapped data properties to add to the brush\n * @property {string} [action='set'] - Type of action to respond with\n */\n\n/**\n  * @typedef {object}\n  * @alias component--brush-area-settings\n  */\nconst DEFAULT_SETTINGS = {\n  /**\n   * @type {object}\n   */\n  brush: {\n    /**\n   * @type {Array<component--brush-area-brush>}\n   */\n    components: []\n  }\n};\n\n/**\n * Transform the incoming event into point in the local coordinate system. That is the coordinate system of the component.\n * @private\n * @param {object} ctx - Context\n * @param {object} event - Incoming event, either native event or hammer event\n * @param {boolean} clamp - True to clamp the point inside the component bounds\n * @returns {point}\n */\nfunction getLocalPoint(ctx, event, clamp = true) {\n  let x;\n  let y;\n\n  if (typeof event.center === 'object') {\n    x = event.center.x;\n    y = event.center.y;\n  } else {\n    x = event.clientX;\n    y = event.clientY;\n  }\n\n  const localX = x - ctx.state.boundingRect.left;\n  const localY = y - ctx.state.boundingRect.top;\n\n  return {\n    x: clamp ? Math.max(0, Math.min(localX, ctx.rect.width)) : localX,\n    y: clamp ? Math.max(0, Math.min(localY, ctx.rect.height)) : localY\n  };\n}\n\n/**\n * Transform a local point into a point in the chart coordinate system.\n * @private\n * @param {object} ctx - Context\n * @param {object} p - Point to transform\n * @returns {point}\n */\nfunction localToChartPoint(ctx, p) {\n  return {\n    x: p.x + ctx.rect.x,\n    y: p.y + ctx.rect.y\n  };\n}\n\n/**\n * Extract and apply default brush configuration.\n * @private\n * @param {object} settings\n * @returns {object[]} An Array of brush configurations\n */\nfunction getBrushConfig(settings) {\n  return settings.settings.brush.components.map(b => (\n    {\n      key: b.key,\n      contexts: b.contexts,\n      data: b.data,\n      action: b.action || 'set'\n    }));\n}\n\n/**\n * End all active brush contexts.\n * @private\n * @param {oject} state\n * @param {object} chart - Chart instance\n */\nfunction doEndBrush(state, chart) {\n  state.brushConfig.forEach((config) => {\n    if (Array.isArray(config.contexts)) {\n      config.contexts.forEach((context) => {\n        chart.brush(context).end();\n      });\n    }\n  });\n}\n\n/**\n * Convert two points into a rectangle.\n * @private\n * @param {point} p0\n * @param {point} p1\n * @returns {rect}\n */\nfunction toRect(p0, p1) {\n  const xMin = Math.min(p0.x, p1.x);\n  const yMin = Math.min(p0.y, p1.y);\n  const xMax = Math.max(p0.x, p1.x);\n  const yMax = Math.max(p0.y, p1.y);\n\n  return {\n    x: xMin,\n    y: yMin,\n    width: xMax - xMin,\n    height: yMax - yMin\n  };\n}\n\n/**\n * Perform a brush on the given area.\n * @private\n * @param {object} ctx\n */\nfunction doAreaBrush(ctx) {\n  if (ctx.state.active) {\n    const start = localToChartPoint(ctx, ctx.state.start);\n    const end = localToChartPoint(ctx, ctx.state.end);\n\n    const shapes = ctx.chart.shapesAt(toRect(start, end), { components: ctx.state.brushConfig });\n    ctx.chart.brushFromShapes(shapes, { components: ctx.state.brushConfig });\n  }\n}\n\nfunction render(ctx) {\n  ctx.renderer.render([\n    extend({ type: 'rect' }, toRect(ctx.state.start, ctx.state.end), ctx.style.area)\n  ]);\n}\n\nfunction resetState() {\n  return {\n    start: { x: 0, y: 0 },\n    end: { x: 0, y: 0 },\n    active: false\n  };\n}\n\nconst definition = {\n  require: ['chart', 'renderer'],\n  defaultSettings: {\n    displayOrder: 99,\n    settings: DEFAULT_SETTINGS,\n    style: {\n      area: '$selection-area-target'\n    }\n  },\n  on: {\n    areaStart(e) {\n      this.start(e);\n    },\n    areaMove(e) {\n      this.move(e);\n    },\n    areaEnd(e) {\n      this.end(e);\n    },\n    areaCancel() {\n      this.cancel();\n    }\n  },\n  created() {\n    this.state = resetState();\n  },\n  preferredSize() {\n    return 0;\n  },\n  render() {},\n  beforeRender({ size }) {\n    this.rect = size;\n  },\n  start(e) {\n    this.state.boundingRect = this.renderer.element().getBoundingClientRect();\n    const p = getLocalPoint(this, e, false);\n\n    // Require event to be inside the component bounds\n    if (!NarrowPhaseCollision.testRectPoint({ x: 0, y: 0, width: this.rect.width, height: this.rect.height }, p)) {\n      return;\n    }\n\n    this.state.brushConfig = getBrushConfig(this.settings);\n    this.state.start = getLocalPoint(this, e);\n    this.state.active = true;\n  },\n  move(e) {\n    if (!this.state.active) {\n      return;\n    }\n\n    this.state.end = getLocalPoint(this, e);\n\n    doAreaBrush(this);\n    render(this);\n  },\n  end() {\n    if (!this.state.active) {\n      return;\n    }\n\n    this.state = resetState();\n    this.renderer.render([]);\n  },\n  cancel() {\n    if (!this.state.active) {\n      return;\n    }\n    doEndBrush(this.state, this.chart);\n    this.state = resetState();\n    this.renderer.render([]);\n  }\n\n};\n\nexport default definition;\n","import {\n  pointsToLine,\n  pointsToRect\n} from './util';\nimport NarrowPhaseCollision from '../math/narrow-phase-collision';\n\nfunction close(vertices) {\n  const first = vertices[0];\n  const last = vertices[vertices.length - 1];\n\n  if (first.x !== last.x || first.y !== last.y) {\n    vertices.push(first);\n  }\n}\n\nfunction removeDuplicates(vertices) {\n  for (let i = 0; i < vertices.length - 1; i++) {\n    const v0 = vertices[i];\n    const v1 = vertices[i + 1];\n    if (v0.x === v1.x && v0.y === v1.y) {\n      vertices.splice(i, 1);\n      i--;\n    }\n  }\n}\n\n/**\n * Construct a new GeoPolygon instance\n * @private\n */\nclass GeoPolygon {\n  constructor({ vertices = [] } = {}) {\n    this.set({ vertices });\n  }\n\n  /**\n   * Set the vertices.\n   * If vertices doesn't close the polygon, a closing vertice is appended.\n   * @param {object} input An object with a vertices property\n   * @param {point[]} [input.vertices=[]] Vertices are represented as an array of points.\n   */\n  set({ vertices = [] } = {}) {\n    this.type = 'polygon';\n    this.vertices = vertices.slice();\n    this.edges = [];\n\n    removeDuplicates(this.vertices);\n\n    if (this.vertices.length <= 2) {\n      return;\n    }\n\n    close(this.vertices);\n\n    this.xMin = NaN;\n    this.yMin = NaN;\n    this.xMax = NaN;\n    this.yMax = NaN;\n\n    for (let i = 0; i < this.vertices.length; i++) {\n      if (i < this.vertices.length - 1) {\n        this.edges.push([this.vertices[i], this.vertices[i + 1]]);\n      }\n\n      this.xMin = isNaN(this.xMin) ? this.vertices[i].x : Math.min(this.xMin, this.vertices[i].x);\n      this.xMax = isNaN(this.xMax) ? this.vertices[i].x : Math.max(this.xMax, this.vertices[i].x);\n      this.yMin = isNaN(this.yMin) ? this.vertices[i].y : Math.min(this.yMin, this.vertices[i].y);\n      this.yMax = isNaN(this.yMax) ? this.vertices[i].y : Math.max(this.yMax, this.vertices[i].y);\n    }\n\n    this._bounds = null;\n    this._boundingRect = null;\n  }\n\n  /**\n   * Check if a point is inside the area of the polygon.\n   * Supports convex, concave and self-intersecting polygons (filled area).\n   * @param {point} point\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  containsPoint(point) {\n    return NarrowPhaseCollision.testPolygonPoint(this, point);\n  }\n\n  /**\n   * Check if circle is inside the area of the polygon.\n   * Supports convex, concave and self-intersecting polygons (filled area).\n   * @param {circle} circle\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsCircle(circle) {\n    return NarrowPhaseCollision.testCirclePolygon(circle, this);\n  }\n\n   /**\n   * @param {point[]} points - Line start and end point as an array of points\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsLine(points) {\n    return NarrowPhaseCollision.testPolygonLine(this, pointsToLine((points)));\n  }\n\n  /**\n   * @param {point[]} points - Rect vertices as an array of points\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsRect(points) {\n    return NarrowPhaseCollision.testPolygonRect(this, pointsToRect(points));\n  }\n\n  /**\n   * Check if polygon intersects another polygon.\n   * Supports convex, concave and self-intersecting polygons (filled area).\n   * @param {GeoPolygon} polygon\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsPolygon(polygon) {\n    // This is a unoptimized solution and should be replaced by a more efficient algorithm.\n    if (!NarrowPhaseCollision.testRectRect(this.boundingRect(), polygon.boundingRect())) {\n      return false;\n    }\n\n    let intersects = false;\n    for (let i = 0, len = this.edges.length; i < len; i++) {\n      intersects = NarrowPhaseCollision.testPolygonLine(polygon, pointsToLine(this.edges[i]));\n      if (intersects === true) {\n        break;\n      }\n    }\n    return intersects;\n  }\n\n  /**\n   * Get the points\n   * @returns {point[]}\n   */\n  points() {\n    return this.vertices;\n  }\n\n  /**\n   * Get the bounds of the polygon, as an array of points\n   * @returns {point[]}\n   */\n  bounds() {\n    if (!this._bounds) {\n      this._bounds = [\n        { x: this.xMin, y: this.yMin },\n        { x: this.xMax, y: this.yMin },\n        { x: this.xMax, y: this.yMax },\n        { x: this.xMin, y: this.yMax }\n      ];\n    }\n\n    return this._bounds;\n  }\n\n  /**\n   * Get the bounding rect of the polygon\n   * @returns {rect}\n   */\n  boundingRect() {\n    if (!this._boundingRect) {\n      this._boundingRect = {\n        x: this.xMin,\n        y: this.yMin,\n        width: this.xMax - this.xMin,\n        height: this.yMax - this.yMin\n      };\n    }\n    return this._boundingRect;\n  }\n}\n\n\n/**\n* Construct a new GeoPolygon instance\n* @param {object} input An object with a vertices property\n* @param {point[]} [input.vertices=[]] Vertices are represented as an array of points.\n* @returns {GeoPolygon} GeoPolygon instance\n* @private\n*/\nfunction create(...a) {\n  return new GeoPolygon(...a);\n}\n\nexport {\n  create,\n  GeoPolygon as default\n};\n","import {\n  pointsToLine,\n  pointsToRect\n} from './util';\nimport NarrowPhaseCollision from '../math/narrow-phase-collision';\n\nfunction pointsAreNotEqual(p0, p1) {\n  return p0.x !== p1.x || p0.y !== p1.y;\n}\n\n/**\n * Construct a new GeoPolyline instance\n * @private\n */\nclass GeoPolyline {\n  constructor({ points = [] } = {}) {\n    this.set({ points });\n  }\n\n  set({ points = [] } = {}) {\n    this.type = 'polyline';\n    this.segments = [];\n    this._points = points.slice();\n\n    if (this._points.length > 1) {\n      for (let i = 0, len = this._points.length - 1; i < len; i++) {\n        if (pointsAreNotEqual(this._points[i], this._points[i + 1])) {\n          this.segments.push({\n            x1: this._points[i].x,\n            y1: this._points[i].y,\n            x2: this._points[i + 1].x,\n            y2: this._points[i + 1].y\n          });\n        }\n      }\n    }\n  }\n\n  /**\n   * @param {point} point\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  containsPoint(point) {\n    return this.segments.some(line => NarrowPhaseCollision.testLinePoint(line, point));\n  }\n\n  /**\n   * @param {circle} circle\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsCircle(circle) {\n    return this.segments.some(line => NarrowPhaseCollision.testCircleLine(circle, line));\n  }\n\n  /**\n   * @param {point[]} points - Line start and end point as an array of points\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsLine(points) {\n    const testLine = pointsToLine(points);\n    return this.segments.some(line => NarrowPhaseCollision.testLineLine(line, testLine));\n  }\n\n  /**\n   * @param {point[]} points - Rect vertices as an array of points\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsRect(points) {\n    const rect = pointsToRect(points);\n    return this.segments.some(line => NarrowPhaseCollision.testRectLine(rect, line));\n  }\n\n  /**\n   * @param {GeoPolygon} polygon\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsPolygon(polygon) {\n    // This is a unoptimized solution and should be replaced by a more efficient algorithm.\n    return this.segments.some(line => NarrowPhaseCollision.testPolygonLine(polygon, line));\n  }\n\n  /**\n   * Get the points\n   * @returns {point[]}\n   */\n  points() {\n    return this._points;\n  }\n}\n\nfunction create(...a) {\n  return new GeoPolyline(...a);\n}\n\nexport {\n  create,\n  GeoPolyline as default\n};\n","import { create as rect } from './rect';\nimport { create as circle } from './circle';\nimport { create as line } from './line';\nimport { create as polygon } from './polygon';\nimport { create as polyline } from './polyline';\nimport registry from '../utils/registry';\n\nconst reg = registry();\n\nreg.add('rect', rect);\nreg.add('circle', circle);\nreg.add('line', line);\nreg.add('polygon', polygon);\nreg.add('polyline', polyline);\n\nexport function create(type, input) { // eslint-disable-line import/prefer-default-export\n  return reg.get(type)(input);\n}\n\n/**\n * @typedef {object} rect\n * @property {number} x - X-coordinate\n * @property {number} y - Y-coordinate\n * @property {number} width - Width\n * @property {number} height - Height\n */\n\n/**\n * @typedef {object} line\n * @property {number} x1 - Start x-coordinate\n * @property {number} y1 - Start y-coordinate\n * @property {number} x2 - End x-coordinate\n * @property {number} y2 - End y-coordinate\n */\n\n/**\n * @typedef {object} point\n * @property {number} x - X-coordinate\n * @property {number} y - Y-coordinate\n */\n\n/**\n * @typedef {object} circle\n * @property {number} cx - Center x-coordinate\n * @property {number} cy - Center y-coordinate\n * @property {number} r - Circle radius\n */\n\n/**\n * @typedef {object} polygon\n * @property {Array<point>} points - Array of connected points\n */\n\n/**\n * @typedef {object} polyline\n * @property {Array<point>} points - Array of connected points\n */\n\n/**\n * @typedef {object} path\n * @property {string} d - Path definition\n */\n","const transformRegEx = /(translate|scale|rotate|matrix)\\(([0-9,.eE+-\\s]+)(?:,|\\s?)+\\)/g;\n\nfunction parseTransform(transform) {\n  let m,\n    commands = [];\n  while ((m = transformRegEx.exec(transform)) !== null) { // eslint-disable-line no-cond-assign\n    const argsStr = m[2].trim();\n    const args = argsStr.indexOf(',') === -1 ? argsStr.split(' ') : argsStr.split(',');\n\n    commands.push({\n      cmd: m[1],\n      args: args.filter(a => a.trim().length > 0).map(a => Number(a))\n    });\n  }\n\n  return commands;\n}\n\nfunction resolveRotateCmd(matrix, transform) {\n  const radians = transform.args[0] * (Math.PI / 180);\n\n  if (transform.args.length > 2) {\n    const x = transform.args[1];\n    const y = transform.args[2];\n    matrix.translate(x, y);\n    matrix.rotate(radians);\n    matrix.translate(-x, -y);\n  } else if (transform.args.length === 1) {\n    matrix.rotate(radians);\n  }\n}\n\nfunction resolveScaleCmd(matrix, transform) {\n  const x = transform.args[0];\n  const y = isNaN(transform.args[1]) ? transform.args[0] : transform.args[1];\n  matrix.scale(x, y);\n}\n\nfunction resolveTranslateCmd(matrix, transform) {\n  const x = transform.args[0];\n  const y = isNaN(transform.args[1]) ? 0 : transform.args[1];\n  matrix.translate(x, y);\n}\n\nfunction resolveMatrixCmd(matrix, transform) {\n  if (transform.args.length >= 6) {\n    matrix.transform(...transform.args);\n  }\n}\n\nexport default function resolveTransform(t, matrix) {\n  const transforms = parseTransform(t);\n  let transform;\n\n  for (let i = 0, len = transforms.length; i < len; i++) {\n    transform = transforms[i];\n\n    if (transform.cmd === 'rotate') {\n      resolveRotateCmd(matrix, transform);\n    } else if (transform.cmd === 'scale') {\n      resolveScaleCmd(matrix, transform);\n    } else if (transform.cmd === 'matrix') {\n      resolveMatrixCmd(matrix, transform);\n    } else if (transform.cmd === 'translate') {\n      resolveTranslateCmd(matrix, transform);\n    }\n  }\n}\n","import { pointsToRect, pointsToCircle, pointsToLine } from '../geometry/util';\nimport pointsToPath from '../utils/points-to-path';\n\nfunction appendDpi(points, dpi) {\n  for (let i = 0, len = points.length; i < len; i++) {\n    points[i].x /= dpi;\n    points[i].y /= dpi;\n  }\n}\n\nfunction geometryToDef(geometry, dpi, mvm) {\n  const type = geometry.type;\n  const points = mvm ? mvm.transformPoints(geometry.points()) : geometry.points();\n  appendDpi(points, dpi);\n  let def = null;\n\n  if (type === 'rect' || type === 'bounds') {\n    def = pointsToRect(points);\n    def.type = type;\n  } else if (type === 'circle') {\n    def = pointsToCircle(points, geometry.r);\n    def.type = type;\n  } else if (type === 'line') {\n    def = pointsToLine(points);\n    def.type = type;\n  } else if (type === 'polygon' || type === 'polyline') {\n    const path = pointsToPath(points, type === 'polygon');\n    def = {\n      type: 'path',\n      d: path\n    };\n  }\n\n  return def;\n}\n\n/**\n * @ignore\n * @returns {object} Returns a node definition of the collider\n */\nfunction colliderToShape(node, dpi) {\n  const collider = node.collider();\n\n  if (collider && collider.fn) {\n    const mvm = node.modelViewMatrix;\n    const isCollection = collider.type === 'collection';\n\n    if (isCollection) {\n      const children = collider.fn.geometries.map(geometry => geometryToDef(geometry, dpi, mvm));\n\n      return {\n        type: 'container',\n        children\n      };\n    }\n\n    return geometryToDef(collider.fn, dpi, mvm);\n  }\n\n  return null;\n}\n\n/**\n * Read-only object representing a node on the scene.\n */\nclass SceneNode {\n  constructor(node) {\n    this._bounds = node.boundingRect ? (withTransform = true) => node.boundingRect(withTransform) : () => ({ x: 0, y: 0, width: 0, height: 0 });\n    this._attrs = node.attrs;\n    this._type = node.type;\n    this._data = node.data;\n    this._dpi = node.stage ? node.stage.dpi : 1;\n    this._collider = () => colliderToShape(node, this._dpi);\n    this._desc = node.desc;\n    this._tag = node.tag;\n  }\n\n  /**\n   * Node type\n   * @type {string}\n   */\n  get type() {\n    return this._type;\n  }\n\n  /**\n   * Get the associated data\n   * @type {any}\n   */\n  get data() {\n    return this._data;\n  }\n\n  /**\n   * Node attributes\n   * @type {object}\n   */\n  get attrs() {\n    return this._attrs;\n  }\n\n  /**\n   * Element the scene is attached to\n   * @type {HTMLElement}\n   * @private\n   */\n  set element(e) {\n    this._element = e;\n  }\n\n  /**\n   * Element the scene is attached to\n   * @type {HTMLElement}\n   */\n  get element() {\n    return this._element;\n  }\n\n  /**\n  * Key of the component this shape belongs to\n  * @type {string}\n  * @private\n  */\n  set key(k) {\n    this._key = k;\n  }\n\n  /**\n  * Key of the component this shape belongs to\n  * @type {string}\n  */\n  get key() {\n    return this._key;\n  }\n\n  /**\n   * Bounding rectangle of the node. After any transform has been applied, if any, but excluding scaling transform related to devicePixelRatio.\n   * Origin is in the top-left corner of the scene element.\n   * @type {rect}\n   */\n  get bounds() {\n    const bounds = this._bounds();\n    bounds.x /= this._dpi;\n    bounds.y /= this._dpi;\n    bounds.width /= this._dpi;\n    bounds.height /= this._dpi;\n    return bounds;\n  }\n\n  /**\n   * Bounding rectangle of the node withing it's local coordinate system.\n   * Origin is in the top-left corner of the scene element.\n   * @type {rect}\n   */\n  get localBounds() {\n    const bounds = this._bounds(false);\n    return bounds;\n  }\n\n  /**\n   * Collider of the node. Transform on the node has been applied to the collider shape, if any, but excluding scaling transform related to devicePixelRatio.\n   * Origin is in the top-left corner of the scene element.\n   *\n   * If node has no collider, null is returned.\n   * @type {line|rect|circle|path}\n   */\n  get collider() {\n    return this._collider();\n  }\n\n  /**\n   * Node description\n   * @type {object}\n   */\n  get desc() {\n    return this._desc;\n  }\n\n  /**\n   * Node tag\n   * @type {string}\n   */\n  get tag() {\n    return this._tag;\n  }\n}\n\nfunction create(...a) {\n  return new SceneNode(...a);\n}\n\nexport {\n  create as default,\n  SceneNode\n};\n","import createSceneNode from './scene-node';\n\nexport class Collision {\n  constructor(node) {\n    this._node = createSceneNode(node);\n    this._parent = null;\n    this._input = null;\n  }\n\n  get node() {\n    return this._node;\n  }\n\n  set parent(p) {\n    this._parent = p;\n  }\n\n  get parent() {\n    return this._parent;\n  }\n\n  set input(i) {\n    this._input = i;\n  }\n\n  get input() {\n    return this._input;\n  }\n}\n\nexport default function create(...a) {\n  return new Collision(...a);\n}\n","import createCollision from './collision';\nimport { scalarMultiply } from '../math/vector';\nimport { create as createPolygon } from '../geometry/polygon';\nimport {\n  lineToPoints,\n  rectToPoints,\n  getShapeType\n} from '../geometry/util';\n\nfunction appendParentNode(node, collision) {\n  const p = node.parent;\n\n  if (p && p.type !== 'stage') {\n    collision.parent = createCollision(p);\n\n    const pp = p.parent;\n    if (pp && pp.type !== 'stage') {\n      appendParentNode(pp, collision.parent);\n    }\n  }\n}\n\nfunction appendInputShape(shape, collisions) {\n  for (let i = 0, len = collisions.length; i < len; i++) {\n    collisions[i].input = shape;\n  }\n}\n\nfunction resolveFrontChildCollision(node, type, input) {\n  const num = node.descendants.length;\n\n  for (let i = num - 1; i >= 0; i--) {\n    const desc = node.descendants[i];\n    const collider = desc._collider;\n\n    if (collider && collider.fn[type](input)) {\n      const collision = createCollision(desc);\n\n      appendParentNode(desc, collision);\n\n      return collision;\n    }\n  }\n  return null;\n}\n\nfunction resolveBoundsCollision(node, type, input) {\n  const collider = node._collider.fn;\n  let transformedInput = input;\n\n  if (Array.isArray(input.vertices)) {\n    transformedInput = createPolygon(input); // TODO Shouldn't have to do this here, currently its beacause a collision algorithm optimization, i.e. caching of polygon bounds\n  }\n\n  if (collider[type](transformedInput)) {\n    const c = createCollision(node);\n\n    appendParentNode(node, c);\n\n    return c;\n  }\n  return null;\n}\n\nfunction resolveGeometryCollision(node, type, input) {\n  let transformedInput = {};\n  if (node.modelViewMatrix) {\n    if (Array.isArray(input)) { // Rect or Line\n      transformedInput = node.inverseModelViewMatrix.transformPoints(input);\n    } else if (!isNaN(input.r)) { // Circle\n      const p = { x: input.cx, y: input.cy };\n      ({ x: transformedInput.cx, y: transformedInput.cy } = node.inverseModelViewMatrix.transformPoint(p));\n      transformedInput.r = input.r;\n    } else if (Array.isArray(input.vertices)) { // Polygon\n      transformedInput.vertices = node.inverseModelViewMatrix.transformPoints(input.vertices);\n    } else { // Point\n      transformedInput = node.inverseModelViewMatrix.transformPoint(input);\n    }\n  } else {\n    transformedInput = input;\n  }\n\n  if (Array.isArray(transformedInput.vertices)) {\n    transformedInput = createPolygon(transformedInput); // TODO Shouldn't have to do this here, currently its beacause a collision algorithm optimization, i.e. caching of polygon bounds\n  }\n\n  const collider = node._collider.fn;\n  if (collider[type](transformedInput)) {\n    const c = createCollision(node);\n\n    appendParentNode(node, c);\n\n    return c;\n  }\n\n  return null;\n}\n\nfunction resolveCollision(node, intersectionType, input) {\n  const collider = node._collider;\n  if (collider === null) { return null; }\n\n  if (collider.type === 'frontChild') {\n    return resolveFrontChildCollision(node, intersectionType, input);\n  } else if (collider.type === 'bounds') {\n    return resolveBoundsCollision(node, intersectionType, input);\n  }\n\n  return resolveGeometryCollision(node, intersectionType, input);\n}\n\nfunction findAllCollisions(nodes, intersectionType, ary, input) {\n  const num = nodes.length;\n  for (let i = 0; i < num; i++) {\n    const node = nodes[i];\n\n    const collision = resolveCollision(node, intersectionType, input);\n\n    if (collision) { ary.push(collision); }\n\n    // Only traverse children if no match is found on parent and it doesnt have any custom collider\n    if (node.children && !collision && !node._collider) {\n      findAllCollisions(node.children, intersectionType, ary, input);\n    }\n  }\n}\n\nfunction hasCollision(nodes, intersectionType, input) {\n  const num = nodes.length;\n  for (let i = 0; i < num; i++) {\n    const node = nodes[i];\n\n    const collision = resolveCollision(node, intersectionType, input);\n\n    if (collision !== null) { return true; }\n\n    if (node.children && !node._collider) {\n      return hasCollision(node.children, intersectionType, input);\n    }\n  }\n  return false;\n}\n\nfunction resolveShape(shape, ratio = 1) {\n  const type = getShapeType(shape);\n  let _shape = {};\n\n  switch (type) {\n    case 'circle':\n      _shape.cx = shape.cx * ratio;\n      _shape.cy = shape.cy * ratio;\n      _shape.r = shape.r;\n      return ['intersectsCircle', _shape];\n    case 'rect':\n      _shape = rectToPoints(shape).map(p => scalarMultiply(p, ratio));\n      return ['intersectsRect', _shape];\n    case 'line':\n      _shape = lineToPoints(shape).map(p => scalarMultiply(p, ratio));\n      return ['intersectsLine', _shape];\n    case 'point':\n      _shape = scalarMultiply(shape, ratio);\n      return ['containsPoint', _shape];\n    case 'polygon':\n      _shape.vertices = shape.vertices.map(vertex => scalarMultiply(vertex, ratio));\n      return ['intersectsPolygon', _shape];\n    default:\n      return [];\n  }\n}\n\nexport function resolveCollionsOnNode(node, shape) {\n  const [intersectionType, _shape] = resolveShape(shape, node.dpi);\n  const collisions = [];\n\n  if (intersectionType) {\n    findAllCollisions([node], intersectionType, collisions, _shape);\n    appendInputShape(shape, collisions);\n  }\n  return collisions;\n}\n\nexport function hasCollisionOnNode(node, shape) {\n  const [intersectionType, _shape] = resolveShape(shape, node.dpi);\n\n  return hasCollision([node], intersectionType, _shape);\n}\n","import extend from 'extend';\nimport DisplayObject from './display-object';\nimport NodeContainer from '../node-container';\n\n/**\n * @extends node-def\n * @typedef {object} node--container-def\n * @property {node-def[]} children - Array of child nodes\n */\n\nconst NC = NodeContainer.prototype;\n\nfunction reCalcBoundingRect(c, child, includeTransform = false) {\n  if (typeof child.bounds !== 'undefined') {\n    const [p0, , p2] = child.bounds(includeTransform);\n    const { x: xMin, y: yMin } = p0;\n    const { x: xMax, y: yMax } = p2;\n\n    const _xMax = isNaN(c._boundingRect.width) ? xMax : Math.max(xMax, c._boundingRect.width + c._boundingRect.x);\n    const _yMax = isNaN(c._boundingRect.height) ? yMax : Math.max(yMax, c._boundingRect.height + c._boundingRect.y);\n\n    c._boundingRect.x = isNaN(c._boundingRect.x) ? xMin : Math.min(xMin, c._boundingRect.x);\n    c._boundingRect.y = isNaN(c._boundingRect.y) ? yMin : Math.min(yMin, c._boundingRect.y);\n    c._boundingRect.width = _xMax - c._boundingRect.x;\n    c._boundingRect.height = _yMax - c._boundingRect.y;\n  }\n}\n\nexport default class Container extends DisplayObject {\n  constructor(s = {}) {\n    const { type = 'container' } = s;\n    super(type);\n    this.set(s);\n    this._boundingRect = {};\n  }\n\n  set(v = {}) {\n    super.set(v);\n\n    const { collider } = v;\n    const opts = extend({\n      type: null\n    }, collider);\n\n    super.collider(opts);\n  }\n\n  boundingRect(includeTransform = false) {\n    const num = this.children.length;\n    this._boundingRect = {};\n\n    for (let i = 0; i < num; i++) {\n      reCalcBoundingRect(this, this.children[i], includeTransform);\n    }\n    return extend({ x: 0, y: 0, width: 0, height: 0 }, this._boundingRect);\n  }\n\n  bounds(includeTransform = false) {\n    const rect = this.boundingRect(includeTransform);\n\n    return [\n      { x: rect.x, y: rect.y },\n      { x: rect.x + rect.width, y: rect.y },\n      { x: rect.x + rect.width, y: rect.y + rect.height },\n      { x: rect.x, y: rect.y + rect.height }\n    ];\n  }\n\n  addChild(c) {\n    const r = NC.addChild.call(this, c);\n\n    if (this._collider && this._collider.type === 'bounds') {\n      reCalcBoundingRect(this, c, true);\n      const opts = extend({ type: 'bounds', x: 0, y: 0, width: 0, height: 0 }, this._boundingRect);\n      super.collider(opts);\n    }\n\n    return r;\n  }\n\n  addChildren(children) {\n    const r = NC.addChildren.call(this, children);\n    const num = children.length;\n\n    if (this._collider && this._collider.type === 'bounds' && num > 0) {\n      for (let i = 0; i < num; i++) {\n        reCalcBoundingRect(this, children[i], true);\n      }\n      const opts = extend({ type: 'bounds', x: 0, y: 0, width: 0, height: 0 }, this._boundingRect);\n      super.collider(opts);\n    }\n\n    return r;\n  }\n\n  removeChild(c) {\n    c._stage = null;\n    let desc = c.descendants,\n      num = desc ? desc.length : 0,\n      i;\n    // remove reference to stage from all descendants\n    for (i = 0; i < num; i++) {\n      desc[i]._stage = null;\n    }\n\n    NC.removeChild.call(this, c);\n\n    if (this._collider && this._collider.type === 'bounds') {\n      const opts = extend(this.boundingRect(true), { type: 'bounds' });\n      super.collider(opts);\n    }\n\n    return this;\n  }\n\n  removeChildren(children) {\n    NC.removeChildren.call(this, children);\n\n    if (this._collider && this._collider.type === 'bounds') {\n      const opts = extend(this.boundingRect(true), { type: 'bounds' });\n      super.collider(opts);\n    }\n\n    return this;\n  }\n}\n\nexport function create(...s) {\n  return new Container(...s);\n}\n","import DisplayObject from './display-object';\nimport NodeContainer from '../node-container';\n\n /**\n * @typedef {object} gradient-def\n * @property {string} type\n * @property {object[]} stops\n * @property {string} [stops[].type=linearGradient] - radialGradient|linearGradient\n * @property {string} stops[].color - {@link https://www.w3.org/TR/SVG/types.html#DataTypeColor}\n * @property {string} [stops[].opacity=1] - {@link https://www.w3.org/TR/css-color-4/#propdef-opacity}\n * @property {number} stops[].offset - {@link https://www.w3.org/TR/SVG/pservers.html#StopElementOffsetAttribute}\n * @property {number} [degree] - Gradient rotation angle\n */\n\n/**\n * @typedef {object} node--gradient-item-def\n * @property {string} id - Gradient identifier\n * @property {number} x1 - {@link https://www.w3.org/TR/SVG/pservers.html#LinearGradientElementX1Attribute}\n * @property {number} y1 - {@link https://www.w3.org/TR/SVG/pservers.html#LinearGradientElementY1Attribute}\n * @property {number} x2 - {@link https://www.w3.org/TR/SVG/pservers.html#LinearGradientElementX2Attribute}\n * @property {number} y2 - {@link https://www.w3.org/TR/SVG/pservers.html#LinearGradientElementY2Attribute}\n * @property {number} offset - {@link https://www.w3.org/TR/SVG/pservers.html#StopElementOffsetAttribute}\n * @property {object} style - {@link https://www.w3.org/TR/SVG/styling.html#StyleAttribute}\n */\n\nconst NC = NodeContainer.prototype;\n\nconst allowedAttrs = [\n  'x1',\n  'x2',\n  'y1',\n  'y2',\n  'id',\n  'offset',\n  'style'\n];\n\nexport default class GradientItem extends DisplayObject {\n  constructor(s = {}) {\n    const { type = 'container' } = s;\n    super(type);\n    this.set(s);\n    this._boundingRect = {};\n  }\n\n  set(v = {}) {\n    super.set(v);\n\n    const attrs = this.attrs;\n\n    let attrKey = '';\n\n    for (let i = 0, len = allowedAttrs.length; i !== len; i++) {\n      attrKey = allowedAttrs[i];\n\n      if (v[attrKey]) {\n        attrs[attrKey] = v[attrKey];\n      }\n    }\n  }\n\n  addChild(c) {\n    const r = NC.addChild.call(this, c);\n\n    return r;\n  }\n\n  addChildren(children) {\n    const r = NC.addChildren.call(this, children);\n\n    return r;\n  }\n\n  removeChild(c) {\n    c._stage = null;\n    let desc = c.descendants,\n      num = desc ? desc.length : 0,\n      i;\n    // remove reference to stage from all descendants\n    for (i = 0; i < num; i++) {\n      desc[i]._stage = null;\n    }\n\n    NC.removeChild.call(this, c);\n\n    return this;\n  }\n\n  removeChildren(children) {\n    NC.removeChildren.call(this, children);\n\n    return this;\n  }\n}\n\nexport function create(...s) {\n  return new GradientItem(...s);\n}\n","import flatness from './curve-flattness';\n\nfunction mid(p0, p1) {\n  return {\n    x: (p0.x + p1.x) / 2,\n    y: (p0.y + p1.y) / 2\n  };\n}\n\nfunction interpolate(t, s, cp1, cp2, e) {\n  const td = 1 - t;\n  const t0 = Math.pow(td, 3) * s;\n  const t1 = 3 * Math.pow(td, 2) * t * cp1;\n  const t2 = 3 * td * Math.pow(t, 2) * cp2;\n  const t3 = Math.pow(t, 3) * e;\n\n  return t0 + t1 + t2 + t3;\n}\n\n/**\n * Recursive subdivision of a curve using de Casteljau algorithm.\n * Splits the curve into multiple line segments where each segments is choosen based on a level of flatness.\n * @ignore\n * @param {point} s - Start point\n * @param {point} cp1 - First control point\n * @param {point} cp2 - Second control point\n * @param {point} e - End point\n * @param {array} points - Initial set of points\n * @returns {point[]} Array of points\n */\nfunction toPoints(s, cp1, cp2, e, points = []) {\n  if (flatness(s, cp1, cp2, e) <= 10) {\n    // Poor man's Set\n    if (points.indexOf(s) === -1) {\n      points.push(s);\n    }\n    if (points.indexOf(e) === -1) {\n      points.push(e);\n    }\n    return points;\n  }\n\n  const t = 0.5;\n\n  const m0 = mid(s, cp1);\n  const m1 = mid(cp1, cp2);\n  const m2 = mid(cp2, e);\n\n  const b = { // Split curve at point\n    x: interpolate(t, s.x, cp1.x, cp2.x, e.x),\n    y: interpolate(t, s.y, cp1.y, cp2.y, e.y)\n  };\n\n  const q0 = mid(m0, m1); // New cp2 for left curve\n  const q1 = mid(m1, m2); // New cp1 for right curve\n\n  toPoints(s, m0, q0, b, points); // left curve\n  toPoints(b, q1, m2, e, points); // Right curve\n\n  return points;\n}\n\nexport {\n  toPoints as default,\n  interpolate\n};\n","/**\n * Measure the flatnass of a cubic bezier curve\n * @ignore\n * @param {point} s - Start point\n * @param {point} cp1 - First control point\n * @param {point} cp2 - Second control point\n * @param {point} e - End point\n */\nexport default function flatness(s, cp1, cp2, e) {\n  const ux = Math.abs((s.x + cp2.x) - (cp1.x + cp1.x));\n  const uy = Math.abs((s.y + cp2.y) - (cp1.y + cp1.y));\n  const vx = Math.abs((cp1.x + e.x) - (cp2.x + cp2.x));\n  const vy = Math.abs((cp1.y + e.y) - (cp2.y + cp2.y));\n\n  return ux + uy + vx + vy;\n}\n","import cubicToPoints from './cubic-bezier-curve-interpolation';\n\nfunction interpolate(t, s, cp, e) {\n  const td = (1 - t);\n\n  return (Math.pow(td, 2) * s) +\n    (2 * td * t * cp) +\n    (Math.pow(t, 2) * e);\n}\n\nfunction toCubic(s, cp, e) {\n  const cp1x = s.x + ((2 / 3) * (cp.x - s.x));\n  const cp1y = s.y + ((2 / 3) * (cp.y - s.y));\n  const cp2x = e.x + ((2 / 3) * (cp.x - e.x));\n  const cp2y = e.y + ((2 / 3) * (cp.y - e.y));\n  const cp1 = { x: cp1x, y: cp1y };\n  const cp2 = { x: cp2x, y: cp2y };\n\n  return { cp1, cp2 };\n}\n\n/**\n * Recursive subdivision of a curve using de Casteljau algorithm.\n * Splits the curve into multiple line segments where each segments is choosen based on a level of flatness.\n * @ignore\n * @param {point} s - Start point\n * @param {point} cp - Control point\n * @param {point} e - End point\n * @returns {point[]} Array of points\n */\nfunction toPoints(s, cp, e) {\n  const { cp1, cp2 } = toCubic(s, cp, e);\n\n  return cubicToPoints(s, cp1, cp2, e);\n}\n\nexport {\n  interpolate,\n  toPoints as default\n};\n","import { parsePath } from 'path2d-polyfill';\nimport arcToCenter, { PI_X2 } from '../math/arc-to-center';\nimport cubicCurveToPoints from '../math/cubic-bezier-curve-interpolation';\nimport quadCurveToPoints from '../math/quad-bezier-curve-interpolation';\n\n/**\n * Transform an arc to a set of points a long the arc.\n * Specifiction F.6 (https://www.w3.org/TR/SVG/implnote.html#ArcImplementationNotes)\n * @ignore\n * @param {array} s - Segments\n * @param {number} startX - X-coordinate for start of arc\n * @param {number} startY - Y-coordinate for start of arc\n */\nfunction arcToPoints(s, startX, startY) {\n  const points = [];\n  const largeArcFlag = !!s[4]; // F.6.3\n  const sweepFlag = !!s[5]; // F.6.3\n  const rotation = s[3];\n  let endX = s[6];\n  let endY = s[7];\n  let rx = s[1];\n  let ry = s[2];\n  let cx;\n  let cy;\n  let sweepAngle;\n  let startAngle;\n\n  if (s[0] === 'a') {\n    endX += startX;\n    endY += startY;\n  }\n\n  // F.6.2\n  if (startX === endY && startY === endY) {\n    return points;\n  }\n\n  // Given no radius, threat as lineTo command\n  if (!rx || !ry) {\n    points.push({ x: endX, y: endY });\n    return points;\n  }\n\n  ({ cx, cy, rx, ry, sweepAngle, startAngle } = arcToCenter(rx, ry, rotation, largeArcFlag, sweepFlag, endX, endY, startX, startY));\n\n  // Approximation of perimeter\n  const p = Math.abs(sweepAngle * Math.sqrt((Math.pow(rx, 2) + Math.pow(ry, 2)) / 2));\n\n  // Generate a point every 10th pixel. Scaling of the node should probably be included in this calculation\n  const res = Math.ceil(p / 10);\n  const resAngle = sweepAngle / res;\n\n  for (let k = 1; k <= res; k++) {\n    const deltaAngle = resAngle * k;\n    const radians = (startAngle + deltaAngle) % PI_X2;\n    const cos = Math.cos(radians);\n    const sin = Math.sin(radians);\n    // F.6.3 https://www.w3.org/TR/SVG/implnote.html#ArcImplementationNotes\n    points.push({\n      x: cx + (cos * rx) + (-sin * cos),\n      y: cy + (sin * ry) + (cos * sin)\n    });\n  }\n\n  // points.push({ x: cx, y: cy });\n\n  return points;\n}\n\n/**\n * Converts a SVG path data string into a set of points.\n * @ignore\n * @param {string} path\n * @returns {Array<point[]>} Array of points\n */\nfunction pathToPoints(path) {\n  const commands = parsePath(path);\n  const segments = [];\n  const points = [];\n  let x = 0; // Current point\n  let y = 0;\n  let cpx = null; // Last control point on a cubic curve\n  let cpy = null;\n  let qcpx = null; // Last control point on a quad curve\n  let qcpy = null;\n\n  for (let i = 0; i < commands.length; ++i) {\n    const cmd = commands[i];\n    const pathType = cmd[0];\n\n    // Reset control point if command is not cubic\n    if (pathType !== 'S' && pathType !== 's' && pathType !== 'C' && pathType !== 'c') {\n      cpx = null;\n      cpy = null;\n    }\n\n    if (pathType !== 'T' && pathType !== 't' && pathType !== 'Q' && pathType !== 'q') {\n      qcpx = null;\n      qcpy = null;\n    }\n\n    switch (pathType) {\n      case 'm':\n        if (points.length) {\n          segments.push(points.splice(0));\n        }\n        // Fall through\n      case 'l': // eslint-disable-line no-fallthrough\n        x += cmd[1];\n        y += cmd[2];\n        points.push({ x, y });\n        break;\n      case 'M':\n        if (points.length) {\n          segments.push(points.splice(0));\n        }\n        // Fall through\n      case 'L': // eslint-disable-line no-fallthrough\n        x = cmd[1];\n        y = cmd[2];\n        points.push({ x, y });\n        break;\n      case 'H':\n        x = cmd[1];\n        points.push({ x, y });\n        break;\n      case 'h':\n        x += cmd[1];\n        points.push({ x, y });\n        break;\n      case 'V':\n        y = cmd[1];\n        points.push({ x, y });\n        break;\n      case 'v':\n        y += cmd[1];\n        points.push({ x, y });\n        break;\n      case 'a':\n        points.push(...arcToPoints(cmd, x, y));\n        x += cmd[6];\n        y += cmd[7];\n        break;\n      case 'A':\n        points.push(...arcToPoints(cmd, x, y));\n        x = cmd[6];\n        y = cmd[7];\n        break;\n      case 'c':\n        points.push(...cubicCurveToPoints(\n          { x, y },\n          { x: cmd[1] + x, y: cmd[2] + y },\n          { x: cmd[3] + x, y: cmd[4] + y },\n          { x: cmd[5] + x, y: cmd[6] + y }\n        ));\n        cpx = cmd[3] + x; // Last control point\n        cpy = cmd[4] + y;\n        x += cmd[5];\n        y += cmd[6];\n        break;\n      case 'C':\n        points.push(...cubicCurveToPoints(\n          { x, y },\n          { x: cmd[1], y: cmd[2] },\n          { x: cmd[3], y: cmd[4] },\n          { x: cmd[5], y: cmd[6] }\n        ));\n        cpx = cmd[3]; // Last control point\n        cpy = cmd[4];\n        x = cmd[5];\n        y = cmd[6];\n        break;\n      case 's':\n        if (cpx === null || cpx === null) {\n          cpx = x;\n          cpy = y;\n        }\n\n        points.push(...cubicCurveToPoints(\n          { x, y },\n          { x: (2 * x) - cpx, y: (2 * y) - cpy },\n          { x: cmd[1] + x, y: cmd[2] + y },\n          { x: cmd[3] + x, y: cmd[4] + y }\n        ));\n        cpx = cmd[1] + x; // last control point\n        cpy = cmd[2] + y;\n        x += cmd[3];\n        y += cmd[4];\n        break;\n      case 'S':\n        if (cpx === null || cpx === null) {\n          cpx = x;\n          cpy = y;\n        }\n\n        points.push(...cubicCurveToPoints(\n          { x, y },\n          { x: (2 * x) - cpx, y: (2 * y) - cpy },\n          { x: cmd[1], y: cmd[2] },\n          { x: cmd[3], y: cmd[4] }\n        ));\n        cpx = cmd[1]; // last control point\n        cpy = cmd[2];\n        x = cmd[3];\n        y = cmd[4];\n        break;\n      case 'Q':\n        points.push(...quadCurveToPoints(\n          { x, y },\n          { x: cmd[1], y: cmd[2] },\n          { x: cmd[3], y: cmd[4] }\n        ));\n\n        qcpx = cmd[1]; // last control point\n        qcpy = cmd[2];\n        x = cmd[3];\n        y = cmd[4];\n        break;\n      case 'q':\n        points.push(...quadCurveToPoints(\n          { x, y },\n          { x: cmd[1] + x, y: cmd[2] + y },\n          { x: cmd[3] + x, y: cmd[4] + y }\n        ));\n\n        qcpx = cmd[1] + x; // last control point\n        qcpy = cmd[2] + y;\n        x += cmd[3];\n        y += cmd[4];\n        break;\n      case 'T':\n        if (qcpx === null || qcpx === null) {\n          qcpx = x;\n          qcpy = y;\n        }\n\n        qcpx = (2 * x) - qcpx; // last control point\n        qcpy = (2 * y) - qcpy;\n        points.push(...quadCurveToPoints(\n          { x, y },\n          { x: qcpx, y: qcpy },\n          { x: cmd[1], y: cmd[2] }\n        ));\n\n        x = cmd[1];\n        y = cmd[2];\n        break;\n      case 't':\n        if (qcpx === null || qcpx === null) {\n          qcpx = x;\n          qcpy = y;\n        }\n\n        qcpx = (2 * x) - qcpx; // last control point\n        qcpy = (2 * y) - qcpy;\n        points.push(...quadCurveToPoints(\n          { x, y },\n          { x: qcpx, y: qcpy },\n          { x: cmd[1] + x, y: cmd[2] + y }\n        ));\n        x += cmd[1];\n        y += cmd[2];\n        break;\n      case 'z':\n      case 'Z':\n        points.push({ x: points[0].x, y: points[0].y });\n        break;\n      default:\n        // Do nothing\n    }\n  }\n\n  segments.push(points.splice(0));\n\n  return segments;\n}\n\nexport {\n  pathToPoints as default\n};\n","import { toRadians } from '../math/angles';\n\nconst PI_X2 = Math.PI * 2;\n\n/**\n * Implementation of F.6.5 https://www.w3.org/TR/SVG/implnote.html#ArcImplementationNotes\n * @ignore\n * @param {number} rx - Arc x-radius\n * @param {number} ry - Arc y-radius\n * @param {number} rotation - Arc rotation in degrees (0-360)\n * @param {boolean} largeArcFlag\n * @param {boolean} sweepFlag\n * @param {number} endX - X-coordinate for end of arc\n * @param {number} endY - Y-coordinate for end of arc\n * @param {number} startX - X-coordinate for start of arc\n * @param {number} startY - Y-coordinate for start of arc\n * @returns {object}\n */\nfunction arcToCenter(rx, ry, rotation, largeArcFlag, sweepFlag, endX, endY, startX, startY) {\n  let startAngle;\n  let endAngle;\n  let sweepAngle;\n  let cx;\n  let cy;\n  let radiusRatio;\n\n  const rad = toRadians(rotation % 360);\n\n  // F.6.5.1\n  const cos = Math.cos(rad);\n  const sin = Math.sin(rad);\n  const hdx = (startX - endX) / 2;\n  const hdy = (startY - endY) / 2;\n\n  const x1d = (cos * hdx) + (sin * hdy);\n  const y1d = (cos * hdy) - (sin * hdx);\n\n  // F.6.6\n  rx = Math.abs(rx);\n  ry = Math.abs(ry);\n\n  radiusRatio = (Math.pow(x1d, 2) / Math.pow(rx, 2)) + (Math.pow(y1d, 2) / Math.pow(ry, 2));\n  if (radiusRatio > 1) {\n    radiusRatio = Math.sqrt(radiusRatio);\n    rx *= radiusRatio;\n    ry *= radiusRatio;\n  }\n\n  // F.6.5.2\n  const rxry = rx * ry;\n  const rxy1d = rx * y1d;\n  const ryx1d = ry * x1d;\n  const den = Math.pow(rxy1d, 2) + Math.pow(ryx1d, 2);\n  const num = Math.pow(rxry, 2) - den;\n\n  let frac = Math.sqrt(Math.max(num / den, 0));\n\n  if (largeArcFlag === sweepFlag) {\n    frac = -frac;\n  }\n\n  const cxd = frac * (rxy1d / ry);\n  const cyd = frac * -(ryx1d / rx);\n\n  // F.6.5.3\n  const mx = (startX + endX) / 2;\n  const my = (startY + endY) / 2;\n  cx = ((cos * cxd) - (sin * cyd)) + mx;\n  cy = (sin * cxd) + (cos * cyd) + my;\n\n  // F.6.5.6 clockwise angle\n  const ux = (x1d - cxd) / rx;\n  const uy = (y1d - cyd) / ry;\n  const vx = (-x1d - cxd) / rx;\n  const vy = (-y1d - cyd) / ry;\n  startAngle = Math.atan2(uy, ux);\n  startAngle += startAngle < 0 ? PI_X2 : 0;\n  endAngle = Math.atan2(vy, vx);\n  endAngle += endAngle < 0 ? PI_X2 : 0;\n\n  sweepAngle = endAngle - startAngle;\n\n  if (!sweepFlag && startAngle < endAngle) {\n    sweepAngle -= PI_X2;\n  } else if (sweepFlag && endAngle < startAngle) {\n    sweepAngle += PI_X2;\n  }\n\n  sweepAngle %= PI_X2;\n\n  return {\n    startAngle,\n    sweepAngle,\n    cx,\n    cy,\n    rx,\n    ry\n  };\n}\n\nexport {\n  arcToCenter as default,\n  PI_X2\n};\n","import { create as stage } from './stage';\nimport { create as container } from './container';\nimport { create as gradientitem } from './gradient-item';\nimport { create as rect } from './rect';\nimport { create as circle } from './circle';\nimport { create as line } from './line';\nimport { create as path } from './path';\nimport { create as text } from './text';\nimport registry from '../../utils/registry';\n\nconst reg = registry();\n\nreg.add('rect', rect);\nreg.add('circle', circle);\nreg.add('text', text);\nreg.add('line', line);\nreg.add('path', path);\nreg.add('stage', stage);\nreg.add('container', container);\nreg.add('defs', gradientitem);\nreg.add('linearGradient', gradientitem);\nreg.add('radialGradient', gradientitem);\nreg.add('stop', gradientitem);\n\nexport function create(type, input) { // eslint-disable-line import/prefer-default-export\n  return reg.get(type)(input);\n}\n","import { create } from './display-objects';\nimport Matrix from '../math/matrix';\nimport resolveTransform from './transform-resolver';\nimport contextFactory from './context';\n\nconst styleContext = contextFactory(\n  [\n    'stroke',\n    'fill',\n    'strokeWidth',\n    'opacity',\n    'fontFamily',\n    'fontSize',\n    'baseline'\n  ]\n);\n\nfunction doEvent(state, listeners) {\n  if (!Array.isArray(listeners)) {\n    return;\n  }\n\n  for (let i = 0, len = listeners.length; i < len; i++) {\n    listeners[i](state);\n  }\n}\n\nfunction updateState(state, index, nodes) {\n  state.node = nodes[index];\n  state.index = index;\n}\n\nfunction traverse(items, parent, matrix, on) {\n  let disabled = false;\n  const state = {\n    siblings: items,\n    node: null,\n    index: 0\n  };\n  for (let i = 0, len = items.length; i < len; i++) {\n    updateState(state, i, items);\n    doEvent(state, on.create);\n\n    disabled = typeof state.node.disabled === 'function' ? state.node.disabled() : state.node.disabled;\n    if (disabled) {\n      continue;\n    }\n\n    // Save the current style context to be able to inherit styles\n    state.node = styleContext.save(state.node);\n\n    const displayNode = create(state.node.type, state.node);\n    if (displayNode) {\n      if (state.node.transform) {\n        matrix.save();\n        resolveTransform(state.node.transform, matrix);\n      }\n\n      if (!matrix.isIdentity()) {\n        displayNode.modelViewMatrix = matrix.clone();\n      }\n\n      parent.addChild(displayNode);\n      if (state.node.children) {\n        traverse(state.node.children, displayNode, matrix, on);\n      }\n\n      if (state.node.transform) {\n        matrix.restore();\n      }\n    }\n\n    // Revert to previous style context\n    styleContext.restore();\n  }\n}\n\nexport default function scene({\n  items,\n  stage,\n  dpi,\n  on = {}\n}) {\n  if (!stage) {\n    stage = create('stage', dpi);\n  }\n\n  traverse(items, stage, new Matrix(), on);\n\n  return stage;\n}\n","const LINEBREAK_REGEX = /\\n+|\\r+|\\r\\n/;\nconst WHITESPACE_REGEX = /\\s/;\nconst HYPHEN_REGEX = /[a-zA-Z\\u00C0-\\u00F6\\u00F8-\\u00FF\\u00AD]/;\nexport const NO_BREAK = 0;\nexport const MANDATORY = 1;\nexport const BREAK_ALLOWED = 2;\n\nexport function includesLineBreak(c) {\n  if (typeof c === 'string') {\n    return c.search(LINEBREAK_REGEX) !== -1;\n  }\n  return String(c).search(LINEBREAK_REGEX) !== -1;\n}\n\nfunction includesWhiteSpace(c) {\n  return c.search(WHITESPACE_REGEX) !== -1;\n}\n\nfunction hyphenationAllowed(c) {\n  /* Latin character set. Excluding numbers, sign and symbol characters, but including soft hyphen */\n  return c.search(HYPHEN_REGEX) !== -1;\n}\n\nfunction resolveBreakOpportunity(chunk, i, chunks, mandatory, noBreakAllowed) {\n  if (mandatory.some(fn => fn(chunk, i, chunks))) {\n    return MANDATORY;\n  }\n  if (noBreakAllowed.some(fn => fn(chunk, i, chunks))) {\n    return NO_BREAK;\n  }\n\n  return BREAK_ALLOWED;\n}\n\nfunction cleanEmptyChunks(chunks) {\n  if (chunks[0] === '') {\n    chunks.shift();\n  }\n  if (chunks[chunks.length - 1] === '') {\n    chunks.pop();\n  }\n}\n\nfunction clamp(val, min, max) {\n  return Math.max(min, Math.min(max, val));\n}\n\nfunction condition(reverse, index, length) {\n  if (reverse) {\n    return index >= 0;\n  }\n  return index < length;\n}\n\nexport default function stringTokenizer({\n  string,\n  separator = '',\n  reverse = false,\n  measureText = text => ({ width: text.length, height: 1 }),\n  mandatoryBreakIdentifiers = [includesLineBreak],\n  noBreakAllowedIdentifiers = [],\n  suppressIdentifier = [includesWhiteSpace, includesLineBreak, chunk => chunk === ''],\n  hyphenationIdentifiers = [hyphenationAllowed]\n} = {}) {\n  const chunks = String(string).split(separator);\n  cleanEmptyChunks(chunks);\n  const length = chunks.length;\n  let position = reverse ? length : -1; // Set init position 1 step before or after to make first next call go to first position\n\n  function peek(peekAt) {\n    const i = clamp(peekAt, 0, length - 1);\n    const chunk = chunks[i];\n    const textMeasure = measureText(chunk);\n    const opportunity = resolveBreakOpportunity(\n      chunk,\n      i,\n      chunks,\n      mandatoryBreakIdentifiers,\n      noBreakAllowedIdentifiers\n    );\n\n    return {\n      index: i,\n      value: chunk,\n      breakOpportunity: opportunity,\n      suppress: suppressIdentifier.some(fn => fn(chunk, i, chunks)),\n      hyphenation: hyphenationIdentifiers.some(fn => fn(chunk, i, chunks)),\n      width: textMeasure.width,\n      height: textMeasure.height,\n      done: false\n    };\n  }\n\n  function next(jumpToPosition) {\n    if (isNaN(jumpToPosition)) {\n      if (reverse) {\n        position--;\n      } else {\n        position++;\n      }\n    } else {\n      position = clamp(jumpToPosition, 0, length - 1);\n    }\n\n    if (condition(reverse, position, length)) {\n      return peek(position);\n    }\n    return { done: true };\n  }\n\n  return {\n    next,\n    peek,\n    length\n  };\n}\n","import stringTokenizer, {\n  MANDATORY,\n  BREAK_ALLOWED\n} from './string-tokenizer';\nimport {\n  DEFAULT_LINE_HEIGHT,\n  HYPHENS_CHAR\n} from './text-const';\n\nfunction resolveMaxAllowedLines(node, measuredLineHeight) {\n  const maxHeight = node.maxHeight;\n  let maxLines = Math.max(node.maxLines, 1) || Infinity;\n\n  if (isNaN(maxHeight)) {\n    return maxLines;\n  }\n\n  const lineHeight = node.lineHeight || DEFAULT_LINE_HEIGHT;\n  const calcLineHeight = measuredLineHeight * lineHeight;\n\n  return Math.max(1, Math.min(Math.floor(maxHeight / calcLineHeight), maxLines));\n}\n\nfunction initState(node, measureText) {\n  return {\n    lines: [],\n    line: '',\n    width: 0,\n    maxLines: resolveMaxAllowedLines(node, measureText(node.text).height),\n    maxWidth: node.maxWidth,\n    hyphens: {\n      enabled: node.hyphens === 'auto',\n      char: HYPHENS_CHAR,\n      metrics: measureText(HYPHENS_CHAR)\n    }\n  };\n}\n\nfunction newLine(state) {\n  state.lines.push(state.line);\n  state.line = '';\n  state.width = 0;\n}\n\nfunction appendToLine(state, token) {\n  state.line += token.value;\n  state.width += token.width;\n}\n\nfunction insertHyphenAndJump(state, token, iterator) {\n  if (token.width > state.maxWidth) {\n    return token;\n  }\n\n  const startIndex = token.index;\n\n  for (let i = 1; i < 5; i++) {\n    const pairToken = iterator.peek(token.index - 1);\n\n    if (!token.hyphenation || !pairToken.hyphenation || token.index === 0) {\n      return token;\n    } else if (state.width + state.hyphens.metrics.width <= state.maxWidth) {\n      state.line += state.hyphens.char;\n      return token;\n    } else if (state.line.length === 1) {\n      return token;\n    }\n\n    token = iterator.next(startIndex - i);\n    state.line = state.line.slice(0, -1);\n    state.width -= token.width;\n  }\n\n  return token;\n}\n\nfunction breakSequence(state, token, measureText) {\n  const charTokenIterator = stringTokenizer({\n    string: token.value,\n    measureText\n  });\n\n  while (state.lines.length < state.maxLines) {\n    let charToken = charTokenIterator.next();\n    if (charToken.done) {\n      break;\n    } else if (state.width + charToken.width > state.maxWidth && charToken.breakOpportunity === BREAK_ALLOWED && state.line.length > 0) {\n      charToken = state.hyphens.enabled ? insertHyphenAndJump(state, charToken, charTokenIterator) : charToken;\n      newLine(state);\n      appendToLine(state, charToken);\n    } else {\n      appendToLine(state, charToken);\n    }\n  }\n}\n\nexport function breakAll(node, measureText) {\n  const text = node.text;\n  const iterator = stringTokenizer({\n    string: text,\n    separator: '',\n    measureText,\n    noBreakAllowedIdentifiers: [(chunk, i) => i === 0]\n  });\n  const state = initState(node, measureText);\n  let reduced = true;\n\n  while (state.lines.length < state.maxLines) {\n    let token = iterator.next();\n\n    if (token.done) {\n      newLine(state);\n      reduced = false;\n      break;\n    } else if (token.breakOpportunity === MANDATORY) {\n      newLine(state);\n    } else if (state.width + token.width > state.maxWidth && token.breakOpportunity === BREAK_ALLOWED) {\n      if (token.suppress) { // Token is suppressable and can be ignored\n        state.width += token.width;\n      } else {\n        token = state.hyphens.enabled ? insertHyphenAndJump(state, token, iterator) : token;\n        newLine(state);\n        appendToLine(state, token);\n      }\n    } else {\n      appendToLine(state, token);\n    }\n  }\n\n  return {\n    lines: state.lines,\n    reduced\n  };\n}\n\nexport function breakWord(node, measureText) {\n  const text = node.text;\n  const iterator = stringTokenizer({\n    string: text,\n    separator: /(\\s|-|\\u2010)/,\n    measureText\n  });\n  const state = initState(node, measureText);\n  let reduced = true;\n\n  while (state.lines.length < state.maxLines) {\n    let token = iterator.next();\n\n    if (token.done) {\n      newLine(state);\n      reduced = false;\n      break;\n    } else if (token.breakOpportunity === MANDATORY) {\n      newLine(state);\n    } else if (state.width + token.width > state.maxWidth && token.breakOpportunity === BREAK_ALLOWED) {\n      if (token.suppress) { // Token is suppressable and can be ignored\n        newLine(state);\n      } else if (token.width > state.maxWidth) { // Single sequence is wider then maxWidth, break sequence into multiple lines\n        breakSequence(state, token, measureText);\n      } else {\n        newLine(state);\n        appendToLine(state, token);\n      }\n    } else {\n      appendToLine(state, token);\n    }\n  }\n\n  return {\n    lines: state.lines,\n    reduced\n  };\n}\n","import extend from 'extend';\nimport { breakAll, breakWord } from './word-break';\nimport { DEFAULT_LINE_HEIGHT, ELLIPSIS_CHAR } from './text-const';\nimport { includesLineBreak } from './string-tokenizer';\n\nfunction generateLineNodes(result, item, lineHeight) {\n  const container = { type: 'container', children: [] };\n\n  if (typeof item.id !== 'undefined') { // TODO also inherit data attribute and more?\n    container.id = item.id;\n  }\n\n  let currentY = 0;\n\n  result.lines.forEach((line, i) => {\n    const node = extend({}, item);\n    node.text = line;\n    node._lineBreak = true; // Flag node as processed to avoid duplicate linebreak run\n\n    if (result.reduced && i === result.lines.length - 1) {\n      node.text += ELLIPSIS_CHAR;\n    } else {\n      delete node.maxWidth;\n    }\n    node.dy = isNaN(node.dy) ? currentY : node.dy + currentY;\n    currentY += lineHeight;\n    container.children.push(node);\n  });\n\n  return container;\n}\n\nfunction shouldLineBreak(item) {\n  // If type text and not already broken into lines\n  return item.type === 'text' && !item._lineBreak;\n}\n\nfunction wrappedMeasureText(node, measureText) {\n  return text => measureText({\n    text,\n    fontSize: node.fontSize,\n    fontFamily: node.fontFamily\n  });\n}\n\nexport function resolveLineBreakAlgorithm(node) {\n  const WORDBREAK = {\n    'break-all': breakAll,\n    'break-word': breakWord\n  };\n\n  return WORDBREAK[node.wordBreak];\n}\n\n/**\n * Apply wordBreak rules to text nodes.\n * @ignore\n * @param {function} measureText\n * @returns {function} Event function to convert a text node into multiple nodes\n */\nexport function onLineBreak(measureText) {\n  return (state) => {\n    const item = state.node;\n    if (shouldLineBreak(item)) {\n      const wordBreakFn = resolveLineBreakAlgorithm(item);\n      if (!wordBreakFn) {\n        return;\n      }\n\n      const tm = measureText(item);\n      if (tm.width <= item.maxWidth && !includesLineBreak(item.text)) {\n        return;\n      }\n\n      const lineHeight = tm.height * (item.lineHeight || DEFAULT_LINE_HEIGHT);\n      const result = wordBreakFn(item, wrappedMeasureText(item, measureText));\n\n      state.node = generateLineNodes(result, item, lineHeight); // Convert node to container\n    }\n  };\n}\n","import { ELLIPSIS_CHAR } from './text-const';\n\nexport function ellipsText({ text, 'font-size': fontSize, 'font-family': fontFamily, maxWidth }, measureText) { // eslint-disable-line import/prefer-default-export\n  text = typeof text === 'string' ? text : `${text}`;\n  if (maxWidth === undefined) {\n    return text;\n  }\n  let textWidth = measureText({ text, fontSize, fontFamily }).width;\n  if (textWidth <= maxWidth) {\n    return text;\n  }\n\n  let min = 0;\n  let max = text.length - 1;\n  while (min <= max) {\n    let reduceIndex = Math.floor((min + max) / 2);\n    let reduceText = text.substr(0, reduceIndex) + ELLIPSIS_CHAR;\n    textWidth = measureText({ text: reduceText, fontSize, fontFamily }).width;\n    if (textWidth <= maxWidth) {\n      min = reduceIndex + 1;\n    } else { // textWidth > maxWidth\n      max = reduceIndex - 1;\n    }\n  }\n  return text.substr(0, max) + ELLIPSIS_CHAR;\n}\n","/**\n * Currently some browsers, IE11 and Edge confirmed, doesn't support the dominant-baseline svg-attribute and\n * the browser that does, have different implementations. Thus giving an unpredictable result when rendering'\n * text and predicting it's position (ex. in collision detection).\n *\n * To supplement and the aid in aligning/positioning text with various items, this function can be used\n * to follow a common heuristic across supported renderers.\n * @ignore\n * @param {object} textNode\n * @param {string|number} [textNode['font-size']=0] - String in px format or number\n * @param {string} [textNode['dominant-baseline']] - If baseline is omitted dominant-baseline is used\n * @param {string} [textNode.baseline]\n * @returns {number} Delta-y required to adjust for baseline\n */\nexport default function baselineHeuristic(textNode) {\n  const baseline = textNode.baseline || textNode['dominant-baseline'];\n  let dy = 0;\n\n  const fontSize = parseInt(textNode.fontSize || textNode['font-size'], 10) || 0;\n\n  switch (baseline) {\n    case 'hanging':\n      dy = fontSize * 0.75;\n      break;\n    case 'text-before-edge':\n      dy = fontSize * 0.85;\n      break;\n    case 'middle':\n      dy = fontSize * 0.25;\n      break;\n    case 'central':\n      dy = fontSize * 0.35;\n      break;\n    case 'mathemetical':\n      dy = fontSize / 2;\n      break;\n    case 'text-after-edge':\n    case 'ideographic':\n      dy = -fontSize * 0.2;\n      break;\n    default:\n      dy = 0;\n      break;\n  }\n\n  return dy;\n}\n","import extend from 'extend';\nimport { resolveLineBreakAlgorithm } from './line-break-resolver';\nimport baselineHeuristic from './baseline-heuristic';\nimport {\n  DEFAULT_LINE_HEIGHT,\n  ELLIPSIS_CHAR\n} from './text-const';\n\nlet heightMeasureCache = {},\n  widthMeasureCache = {},\n  canvasCache;\n\nfunction measureTextWidth({ text, fontSize, fontFamily }) {\n  const match = widthMeasureCache[text + fontSize + fontFamily];\n  if (match !== undefined) {\n    return match;\n  }\n  canvasCache = canvasCache || document.createElement('canvas');\n  const g = canvasCache.getContext('2d');\n  g.font = `${fontSize} ${fontFamily}`;\n  const w = g.measureText(text).width;\n  widthMeasureCache[text + fontSize + fontFamily] = w;\n  return w;\n}\n\nfunction measureTextHeight({ fontSize, fontFamily }) {\n  const match = heightMeasureCache[fontSize + fontFamily];\n\n  if (match !== undefined) {\n    return match;\n  }\n  const text = 'M';\n  const height = measureTextWidth({ text, fontSize, fontFamily }) * 1.2;\n  heightMeasureCache[fontSize + fontFamily] = height;\n  return height;\n}\n\n/**\n * @private\n * @param {object} opts\n * @param {string} opts.text - Text to measure\n * @param {string} opts.fontSize - Font size with a unit definition, ex. 'px' or 'em'\n * @param {string} opts.fontFamily - Font family\n * @return {object} Width and height of text in pixels\n * @example\n * measureText({\n *  text: 'my text',\n *  fontSize: '12px',\n *  fontFamily: 'Arial'\n * }); // returns { width: 20, height: 12 }\n */\nexport function measureText({ text, fontSize, fontFamily }) { // eslint-disable-line import/prefer-default-export\n  const w = measureTextWidth({ text, fontSize, fontFamily });\n  const h = measureTextHeight({ fontSize, fontFamily });\n  return { width: w, height: h };\n}\n\n/**\n * Calculates the bounding rectangle of a text node.\n * The bounding rectangle is a approximate of the \"em square\" seen here (http://www.w3resource.com/html5-canvas/html5-canvas-text.php)\n * @ignore\n * @param {object} attrs - Text node definition\n * @param {number} [attrs.x] - X-coordinate\n * @param {number} [attrs.y] - Y-coordinate\n * @param {number} [attrs.dx] - Delta x-coordinate\n * @param {number} [attrs.dy] - Delta y-coordinate\n * @param {string} [attrs.anchor] - Text anchor\n * @param {number} [attrs.maxWidth] - Maximum allowed text width\n * @return {object} The bounding rectangle\n */\nfunction calcTextBounds(attrs, measureFn = measureText) {\n  const fontSize = attrs['font-size'] || attrs.fontSize;\n  const fontFamily = attrs['font-family'] || attrs.fontFamily;\n  const textMeasure = measureFn({ text: attrs.text, fontFamily, fontSize });\n  const calWidth = Math.min(attrs.maxWidth || textMeasure.width, textMeasure.width); // Use actual value if max is not set\n  const x = attrs.x || 0;\n  const y = attrs.y || 0;\n  const dx = attrs.dx || 0;\n  const dy = (attrs.dy || 0) + baselineHeuristic(attrs);\n\n  const boundingRect = {\n    x: 0,\n    y: (y + dy) - (textMeasure.height * 0.75), // Magic number for alphabetical baseline\n    width: calWidth,\n    height: textMeasure.height\n  };\n\n  const anchor = attrs['text-anchor'] || attrs.anchor;\n\n  if (anchor === 'middle') {\n    boundingRect.x = (x + dx) - (calWidth / 2);\n  } else if (anchor === 'end') {\n    boundingRect.x = (x + dx) - calWidth;\n  } else {\n    boundingRect.x = x + dx;\n  }\n\n  return boundingRect;\n}\n\n/**\n * Calculates the bounding rectangle of a text node. Including any line breaks.\n * @ignore\n * @param {object} node\n * @param {string} node.text - Text to measure\n * @param {number} [node.x=0] - X-coordinate\n * @param {number} [node.y=0] - Y-coordinate\n * @param {number} [node.dx=0] - Delta x-coordinate\n * @param {number} [node.dy=0] - Delta y-coordinate\n * @param {string} [node.anchor='start'] - Text anchor\n * @param {string} [node.fontSize] - Font size\n * @param {string} [node.fontFamily] - Font family\n * @param {string} [node['font-size']] - Font size\n * @param {string} [node['font-family']] - Font family\n * @param {string} [node.wordBreak] - Word-break option\n * @param {number} [node.maxWidth] - Maximum allowed text width\n * @param {number} [node.maxHeight] - Maximum allowed text height. If both maxLines and maxHeight are set, the property that results in the fewest number of lines is used\n * @param {number} [node.maxLines] - Maximum number of lines allowed.\n * @param {number} [node.lineHeight=1.2] - Line height\n * @param {function} [measureFn] - Optional text measure function\n * @return {object} The bounding rectangle\n */\nexport function textBounds(node, measureFn = measureText) {\n  const lineBreakFn = resolveLineBreakAlgorithm(node);\n  if (lineBreakFn) {\n    const fontSize = node['font-size'] || node.fontSize;\n    const fontFamily = node['font-family'] || node.fontFamily;\n    const resolvedLineBreaks = lineBreakFn(node, text => measureFn({ text, fontFamily, fontSize }));\n    const nodeCopy = extend({}, node);\n    let maxWidth = 0;\n    let widestLine = '';\n    for (let i = 0, len = resolvedLineBreaks.lines.length; i < len; i++) {\n      let line = resolvedLineBreaks.lines[i];\n      line += i === len - 1 && resolvedLineBreaks.reduced ? ELLIPSIS_CHAR : '';\n      const width = measureFn({ text: line, fontSize, fontFamily }).width;\n      if (width >= maxWidth) {\n        maxWidth = width;\n        widestLine = line;\n      }\n    }\n    nodeCopy.text = widestLine;\n    const bounds = calcTextBounds(nodeCopy, measureFn);\n    const lineHeight = node.lineHeight || DEFAULT_LINE_HEIGHT;\n    bounds.height = bounds.height * resolvedLineBreaks.lines.length * lineHeight;\n\n    return bounds;\n  }\n\n  return calcTextBounds(node, measureFn);\n}\n","import { degreesToPoints } from '../../../core/math/angles';\n\n/**\n * Get or create a gradient\n * @ignore\n * @param  {Object} g        Canvas 2d context\n * @param  {Object} shape    Current shape (for width/height properties)\n * @param  {Object} gradient The gradient properties\n * @return {Object}          A canvas compatible radial or linear gradient object\n */\nexport default function createCanvasGradient(g, shape, gradient) {\n  const { orientation, degree, stops = [] } = gradient;\n\n  let newGradient = null;\n\n  if (orientation === 'radial') {\n    const width = (shape.width || 0);\n    const height = (shape.height || 0);\n\n    const theX = (shape.x !== undefined ? shape.x : shape.cx);\n    const theY = (shape.y !== undefined ? shape.y : shape.cy);\n\n    newGradient = g.createRadialGradient(\n      theX + (width / 2),\n      theY + (height / 2),\n      1,\n      theX + (width / 2),\n      theY + (height / 2),\n      (shape.r || Math.max(shape.width, shape.height) / 2)\n    );\n  } else {\n    const points = degreesToPoints(degree);\n\n    const width = (shape.width || (shape.r * 2));\n    const height = (shape.height || (shape.r * 2));\n\n    const theX = (shape.x !== undefined ? shape.x : (shape.cx - shape.r));\n    const theY = (shape.y !== undefined ? shape.y : (shape.cy - shape.r));\n\n    newGradient = g.createLinearGradient(\n      theX + (points.x1 * width),\n      theY + (points.y1 * height),\n      theX + (points.x2 * width),\n      theY + (points.y2 * height)\n    );\n  }\n\n  for (let i = 0, len = stops.length; i < len; i++) {\n    let stop = stops[i];\n    newGradient.addColorStop(stop.offset, stop.color);\n  }\n\n  return newGradient;\n}\n","/**\n * @typedef {object} renderer-container-def\n * @property {number} [x] - x-coordinate\n * @property {number} [y] - y-coordinate\n * @property {number} [width] - Width\n * @property {number} [height] - Height\n * @property {object} [scaleRatio]\n * @property {number} [scaleRatio.x] - Scale ratio on x-axis\n * @property {number} [scaleRatio.y] - Scale ratio on y-axis\n * @property {object} [margin]\n * @property {number} [margin.left] - Left margin\n * @property {number} [margin.top] - Top margin\n */\n\n  /**\n * Create the renderer box\n * @private\n * @param {renderer-container-def} [opts]\n * @returns {renderer-container-def} A svg renderer instance\n */\nexport default function createRendererBox({ x, y, width, height, scaleRatio, margin } = {}) {\n  const box = {\n    x: 0,\n    y: 0,\n    width: 0,\n    height: 0,\n    scaleRatio: {\n      x: 1,\n      y: 1\n    },\n    margin: {\n      left: 0,\n      top: 0\n    }\n  };\n\n  box.x = isNaN(x) ? box.x : x;\n  box.y = isNaN(y) ? box.y : y;\n  box.width = isNaN(width) ? box.width : width;\n  box.height = isNaN(height) ? box.height : height;\n  if (typeof scaleRatio !== 'undefined') {\n    box.scaleRatio.x = isNaN(scaleRatio.x) ? box.scaleRatio.x : scaleRatio.x;\n    box.scaleRatio.y = isNaN(scaleRatio.y) ? box.scaleRatio.y : scaleRatio.y;\n  }\n  if (typeof margin !== 'undefined') {\n    box.margin.left = isNaN(margin.left) ? 0 : margin.left;\n    box.margin.top = isNaN(margin.top) ? 0 : margin.top;\n  }\n\n  return box;\n}\n","import {\n  measureText,\n  textBounds\n} from '../text-manipulation';\n\n/**\n * Base renderer factory\n * @private\n */\nfunction create() {\n  /**\n * @interface\n * @alias renderer\n */\n  const renderer = {\n    /**\n   * Get the element this renderer is attached to\n   * @returns {HTMLElement}\n   */\n    element: () => {},\n\n    /**\n     * Get the root element of the renderer\n     * @returns {HTMLElement}\n     */\n    root: () => {},\n\n    /**\n    * @param {HTMLElement} element - Element to attach renderer to\n    * @returns {HTMLElement} Root element of the renderer\n    */\n    appendTo: () => {},\n\n    /**\n     * @param {node-def[]} nodes - Nodes to render\n     * @returns {boolean} True if the nodes where rendered, otherwise false\n     */\n    render: () => false,\n\n    /**\n     * Get nodes renderer at area\n     * @param {point|circle|rect|line|polygon} geometry - Get nodes that intersects with geometry\n     * @returns {SceneNode[]}\n     */\n    itemsAt: () => [],\n\n    /**\n     * Get all nodes matching the provided selector\n     * @param {string} selector CSS selector [type, attribute, universal, class]\n     * @returns {SceneNode[]} Array of objects containing matching nodes\n     */\n    findShapes: () => [],\n\n    /**\n     * Clear all child elements from the renderer root element\n     * @returns {renderer} The renderer instance\n     */\n    clear: () => {},\n\n    /**\n     * Remove the renderer root element from its parent element\n     */\n    destory: () => {},\n\n    /**\n     * Set or Get the size definition of the renderer container.\n     * @param {renderer-container-def} [opts] - Size definition\n     * @returns {renderer-container-def} The current size definition\n     */\n    size: () => {},\n\n    /**\n     * @function\n     * @param {object} opts\n     * @param {string} opts.text - Text to measure\n     * @param {string} opts.fontSize - {@link https://www.w3.org/TR/SVG/text.html#FontPropertiesUsedBySVG}\n     * @param {string} opts.fontFamily - {@link https://www.w3.org/TR/SVG/text.html#FontPropertiesUsedBySVG}\n     * @returns {object} Width and height of text\n     * @example\n     * measureText({\n     *  text: 'my text',\n     *  fontSize: '12px',\n     *  fontFamily: 'Arial'\n     * }); // returns { width: 20, height: 12 }\n     */\n    measureText,\n\n    /**\n     * Calculates the bounding rectangle of a text node. Including any potential line breaks.\n     * @function\n     * @param {node--text-def} node\n     * @return {rect} The bounding rectangle\n     */\n    textBounds\n  };\n\n  return renderer;\n}\n\nexport {\n  create as default\n};\n","import sceneFactory from '../../../core/scene-graph/scene';\nimport registry from '../../../core/utils/registry';\nimport {\n  onLineBreak\n} from '../../text-manipulation';\nimport createCanvasGradient from './canvas-gradient';\nimport createRendererBox from '../renderer-box';\nimport create from '../index';\n\nconst reg = registry();\n\nfunction toLineDash(p) {\n  if (Array.isArray(p)) {\n    return p;\n  } else if (typeof p === 'string') {\n    if (p.indexOf(',') !== -1) {\n      return p.split(',');\n    }\n    return p.split(' ');\n  }\n  return [];\n}\n\nfunction dpiScale(g) {\n  const dpr = typeof window === 'undefined' ? 1 : window.devicePixelRatio || 1;\n  const backingStorePixelRatio = g.webkitBackingStorePixelRatio ||\n    g.mozBackingStorePixelRatio ||\n    g.msBackingStorePixelRatio ||\n    g.oBackingStorePixelRatio ||\n    g.backingStorePixelRatio || 1;\n  return dpr / backingStorePixelRatio;\n}\n\nfunction resolveMatrix(p, g) {\n  g.setTransform(p[0][0], p[1][0], p[0][1], p[1][1], p[0][2], p[1][2]);\n}\n\nfunction applyContext(g, s, shapeToCanvasMap, computed = {}) {\n  const computedKeys = Object.keys(computed);\n\n  for (let i = 0, len = shapeToCanvasMap.length; i < len; i++) {\n    let cmd = shapeToCanvasMap[i];\n\n    const shapeCmd = cmd[0];\n    const canvasCmd = cmd[1];\n    const convertCmd = cmd[2];\n\n    if ((shapeCmd in s.attrs && !(canvasCmd in computed)) && g[canvasCmd] !== s.attrs[shapeCmd]) {\n      const val = convertCmd ? convertCmd(s.attrs[shapeCmd]) : s.attrs[shapeCmd];\n      if (typeof g[canvasCmd] === 'function') {\n        g[canvasCmd](val);\n      } else {\n        g[canvasCmd] = val;\n      }\n    }\n  }\n\n  for (let i = 0, len = computedKeys.length; i < len; i++) {\n    const key = computedKeys[i];\n    g[key] = computed[key];\n  }\n}\n\nfunction renderShapes(shapes, g, shapeToCanvasMap) {\n  for (let i = 0, len = shapes.length; i < len; i++) {\n    let shape = shapes[i];\n    let computed = {};\n    g.save();\n\n    // Gradient check\n    if (shape.attrs && (shape.attrs.fill || shape.attrs.stroke)) {\n      if (shape.attrs.fill && typeof shape.attrs.fill === 'object' && shape.attrs.fill.type === 'gradient') {\n        computed.fillStyle = createCanvasGradient(g, shape.attrs, shape.attrs.fill);\n      }\n      if (shape.attrs.stroke && typeof shape.attrs.stroke === 'object' && shape.attrs.stroke.type === 'gradient') {\n        computed.strokeStyle = createCanvasGradient(g, shape.attrs, shape.attrs.stroke);\n      }\n    }\n\n    applyContext(g, shape, shapeToCanvasMap, computed);\n\n    if (shape.modelViewMatrix) {\n      resolveMatrix(shape.modelViewMatrix.elements, g);\n    }\n\n    if (reg.has(shape.type)) {\n      reg.get(shape.type)(shape.attrs, {\n        g,\n        doFill: 'fill' in shape.attrs && shape.attrs.fill !== 'none',\n        doStroke: 'stroke' in shape.attrs && shape.attrs['stroke-width'] !== 0\n      });\n    }\n    if (shape.children) {\n      renderShapes(shape.children, g, shapeToCanvasMap);\n    }\n    g.restore();\n  }\n}\n\n/**\n * Create a new canvas renderer\n * @typedef {function} canvasRendererFactory\n * @param {function} sceneFn - Scene factory\n * @returns {renderer} A canvas renderer instance\n */\nexport function renderer(sceneFn = sceneFactory) {\n  let el;\n  let scene;\n  let hasChangedRect = false;\n  let rect = createRendererBox();\n  const shapeToCanvasMap = [\n    ['fill', 'fillStyle'],\n    ['stroke', 'strokeStyle'],\n    ['opacity', 'globalAlpha'],\n    ['globalAlpha', 'globalAlpha'],\n    ['stroke-width', 'lineWidth'],\n    ['stroke-dasharray', 'setLineDash', toLineDash]\n  ];\n\n  const canvasRenderer = create();\n\n  canvasRenderer.element = () => el;\n\n  canvasRenderer.root = () => el;\n\n  canvasRenderer.appendTo = (element) => {\n    if (!el) {\n      el = element.ownerDocument.createElement('canvas');\n      el.style.position = 'absolute';\n      el.style['-webkit-font-smoothing'] = 'antialiased';\n      el.style['-moz-osx-font-smoothing'] = 'antialiased';\n      el.style.pointerEvents = 'none';\n    }\n\n    element.appendChild(el);\n\n    return el;\n  };\n\n  canvasRenderer.render = (shapes) => {\n    if (!el) {\n      return false;\n    }\n\n    const g = el.getContext('2d');\n    const dpiRatio = dpiScale(g);\n    const scaleX = rect.scaleRatio.x;\n    const scaleY = rect.scaleRatio.y;\n\n    if (hasChangedRect) {\n      el.style.left = `${Math.round(rect.margin.left + (rect.x * scaleX))}px`;\n      el.style.top = `${Math.round(rect.margin.top + (rect.y * scaleY))}px`;\n      el.style.width = `${Math.round(rect.width * scaleX)}px`;\n      el.style.height = `${Math.round(rect.height * scaleY)}px`;\n      el.width = Math.round(rect.width * dpiRatio * scaleX);\n      el.height = Math.round(rect.height * dpiRatio * scaleY);\n    }\n\n    const sceneContainer = {\n      type: 'container',\n      children: shapes\n    };\n\n    if (dpiRatio !== 1 || scaleX !== 1 || scaleY !== 1) {\n      sceneContainer.transform = `scale(${dpiRatio * scaleX}, ${dpiRatio * scaleY})`;\n    }\n\n    const newScene = sceneFn({\n      items: [sceneContainer],\n      dpi: dpiRatio,\n      on: {\n        create: [onLineBreak(canvasRenderer.measureText)]\n      }\n    });\n    const hasChangedScene = scene ? !newScene.equals(scene) : true;\n\n    const doRender = hasChangedRect || hasChangedScene;\n    if (doRender) {\n      canvasRenderer.clear();\n      renderShapes(newScene.children, g, shapeToCanvasMap);\n    }\n\n    hasChangedRect = false;\n    scene = newScene;\n    return doRender;\n  };\n\n  canvasRenderer.itemsAt = options => (scene ? scene.getItemsFrom(options) : []);\n\n  canvasRenderer.findShapes = (selector) => {\n    if (scene) {\n      return scene.findShapes(selector).map((s) => {\n        s.element = canvasRenderer.element();\n        return s;\n      });\n    }\n    return [];\n  };\n\n  canvasRenderer.clear = () => {\n    if (el) {\n      el.width = el.width;\n    }\n    scene = null;\n\n    return canvasRenderer;\n  };\n\n  canvasRenderer.size = (opts) => {\n    if (opts) {\n      const newRect = createRendererBox(opts);\n\n      if (JSON.stringify(rect) !== JSON.stringify(newRect)) {\n        hasChangedRect = true;\n        rect = newRect;\n      }\n    }\n\n    return rect;\n  };\n\n  canvasRenderer.destroy = () => {\n    if (el) {\n      if (el.parentElement) {\n        el.parentElement.removeChild(el);\n      }\n      el = null;\n    }\n    scene = null;\n  };\n\n  return canvasRenderer;\n}\n\nexport function register(type, renderFn) {\n  reg.add(type, renderFn);\n}\n","\n// Source: https://en.wikipedia.org/wiki/Bi-directional_text and http://www.unicode.org/Public/6.0.0/ucd/UnicodeData.txt\n// 3 types of strong direction characters: L (strong left-to-right), R(strong right-to-left, Hebrew) and AL(strong right-to-left, Arabic language)\nconst rangesOfLChars = '[\\u0041-\\u005A\\u0061-\\u007A\\u00AA\\u00B5\\u00BA\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02B8\\u02BB-\\u02C1\\u02D0-\\u02D1\\u02E0-\\u02E4\\u02EE\\u0370-\\u0373\\u0376-\\u037D\\u0386\\u0388-\\u03F5\\u03F7-\\u0482\\u048A-\\u0589\\u0903-\\u0939\\u093B\\u093D-\\u0940\\u0949-\\u094C\\u094E-\\u0950\\u0958-\\u0961\\u0964-\\u097F\\u0982-\\u09B9\\u09BD-\\u09C0\\u09C7-\\u09CC\\u09CE-\\u09E1\\u09E6-\\u09F1\\u09F4-\\u09FA\\u0A03-\\u0A39\\u0A3E-\\u0A40\\u0A59-\\u0A6F\\u0A72-\\u0A74\\u0A83-\\u0AB9\\u0ABD-\\u0AC0\\u0AC9-\\u0ACC\\u0AD0-\\u0AE1\\u0AE6-\\u0AEF\\u0B02-\\u0B39\\u0B3D-\\u0B3E\\u0B40\\u0B47-\\u0B4C\\u0B57-\\u0B61\\u0B66-\\u0B77\\u0B83-\\u0BBF\\u0BC1-\\u0BCC\\u0BD0-\\u0BF2\\u0C01-\\u0C3D\\u0C41-\\u0C44\\u0C58-\\u0C61\\u0C66-\\u0C6F\\u0C7F-\\u0CB9\\u0CBD-\\u0CCB\\u0CD5-\\u0CE1\\u0CE6-\\u0D40\\u0D46-\\u0D4C\\u0D4E-\\u0D61\\u0D66-\\u0DC6\\u0DCF-\\u0DD1\\u0DD8-\\u0E30\\u0E32-\\u0E33\\u0E40-\\u0E46\\u0E4F-\\u0EB0\\u0EB2-\\u0EB3\\u0EBD-\\u0EC6\\u0ED0-\\u0F17\\u0F1A-\\u0F34\\u0F36\\u0F38\\u0F3E-\\u0F6C\\u0F7F\\u0F85\\u0F88-\\u0F8C\\u0FBE-\\u0FC5\\u0FC7-\\u102C\\u1031\\u1038\\u103B-\\u103C\\u103F-\\u1057\\u105A-\\u105D\\u1061-\\u1070\\u1075-\\u1081\\u1083-\\u1084\\u1087-\\u108C\\u108E-\\u109C\\u109E-\\u135A\\u1360-\\u138F\\u13A0-\\u13F4\\u1401-\\u167F\\u1681-\\u169A\\u16A0-\\u1711\\u1720-\\u1731\\u1735-\\u1751\\u1760-\\u1770\\u1780-\\u17B6\\u17BE-\\u17C5\\u17C7-\\u17C8\\u17D4-\\u17DA\\u17DC\\u17E0-\\u17E9\\u1810-\\u18A8\\u18AA-\\u191C\\u1923-\\u1926\\u1929-\\u1931\\u1933-\\u1938\\u1946-\\u19DA\\u1A00-\\u1A16\\u1A19-\\u1A55\\u1A57\\u1A61\\u1A63-\\u1A64\\u1A6D-\\u1A72\\u1A80-\\u1AAD\\u1B04-\\u1B33\\u1B35\\u1B3B\\u1B3D-\\u1B41\\u1B43-\\u1B6A\\u1B74-\\u1B7C\\u1B82-\\u1BA1\\u1BA6-\\u1BA7\\u1BAA-\\u1BE5\\u1BE7\\u1BEA-\\u1BEC\\u1BEE\\u1BF2-\\u1C2B\\u1C34-\\u1C35\\u1C3B-\\u1C7F\\u1CD3\\u1CE1\\u1CE9-\\u1CEC\\u1CEE-\\u1DBF\\u1E00-\\u1FBC\\u1FBE\\u1FC2-\\u1FCC\\u1FD0-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FFC\\u200E\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E-\\u214F\\u2160-\\u2188\\u2336-\\u237A\\u2395\\u249C-\\u24E9\\u26AC\\u2800-\\u28FF\\u2C00-\\u2CE4\\u2CEB-\\u2CEE\\u2D00-\\u2D70\\u2D80-\\u2DDE\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u31BA\\u31F0-\\u321C\\u3220-\\u324F\\u3260-\\u327B\\u327F-\\u32B0\\u32C0-\\u32CB\\u32D0-\\u3376\\u337B-\\u33DD\\u33E0-\\u33FE\\u3400-\\u4DB5\\u4E00-\\uA48C\\uA4D0-\\uA60C\\uA610-\\uA66E\\uA680-\\uA6EF\\uA6F2-\\uA6F7\\uA722-\\uA787\\uA789-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA824\\uA827\\uA830-\\uA837\\uA840-\\uA873\\uA880-\\uA8C3\\uA8CE-\\uA8D9\\uA8F2-\\uA925\\uA92E-\\uA946\\uA952-\\uA97C\\uA983-\\uA9B2\\uA9B4-\\uA9B5\\uA9BA-\\uA9BB\\uA9BD-\\uAA28\\uAA2F-\\uAA30\\uAA33-\\uAA34\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA4D-\\uAAAF\\uAAB1\\uAAB5-\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2-\\uABE4\\uABE6-\\uABE7\\uABE9-\\uABEC\\uABF0-\\uFB17\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFDC]';\nconst rangesOfRChars = '[\\u05BE\\u05C0\\u05C3\\u05C6\\u05D0-\\u05F4\\u07C0-\\u07EA\\u07F4-\\u07F5\\u07FA-\\u0815\\u081A\\u0824\\u0828\\u0830-\\u0858\\u085E\\u200F\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB4F]';\nconst rangesOfALChars = '[\\u0608\\u060B\\u060D\\u061B-\\u064A\\u066D-\\u066F\\u0671-\\u06D5\\u06E5-\\u06E6\\u06EE-\\u06EF\\u06FA-\\u070D\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\uFB50-\\uFD3D\\uFD50-\\uFDFC\\uFE70-\\uFEFC]';\n// let rangesOfNChars = '[\\u0009-\\u000D\\u001C-\\u0022\\u0026-\\u002A\\u003B-\\u0040\\u005B-\\u0060\\u007B-\\u007E\\u0085\\u00A1\\u00A6-\\u00A9\\u00AB-\\u00AC\\u00AE-\\u00AF\\u00B4\\u00B6-\\u00B8\\u00BB-\\u00BF\\u00D7\\u00F7\\u02B9-\\u02BA\\u02C2-\\u02CF\\u02D2-\\u02DF\\u02E5-\\u02ED\\u02EF-\\u02FF\\u0374-\\u0375\\u037E-\\u0385\\u0387\\u03F6\\u058A\\u0606-\\u0607\\u060E-\\u060F\\u06DE\\u06E9\\u07F6-\\u07F9\\u0BF3-\\u0BF8\\u0BFA\\u0C78-\\u0C7E\\u0F3A-\\u0F3D\\u1390-\\u1399\\u1400\\u1680\\u169B-\\u169C\\u17F0-\\u180A\\u180E\\u1940-\\u1945\\u19DE-\\u19FF\\u1FBD\\u1FBF-\\u1FC1\\u1FCD-\\u1FCF\\u1FDD-\\u1FDF\\u1FED-\\u1FEF\\u1FFD-\\u200A\\u2010-\\u2029\\u2035-\\u2043\\u2045-\\u205F\\u207C-\\u207E\\u208C-\\u208E\\u2100-\\u2101\\u2103-\\u2106\\u2108-\\u2109\\u2114\\u2116-\\u2118\\u211E-\\u2123\\u2125\\u2127\\u2129\\u213A-\\u213B\\u2140-\\u2144\\u214A-\\u214D\\u2150-\\u215F\\u2189-\\u2211\\u2214-\\u2335\\u237B-\\u2394\\u2396-\\u2487\\u24EA-\\u26AB\\u26AD-\\u27FF\\u2900-\\u2B59\\u2CE5-\\u2CEA\\u2CF9-\\u2CFF\\u2E00-\\u3004\\u3008-\\u3020\\u3030\\u3036-\\u3037\\u303D-\\u303F\\u309B-\\u309C\\u30A0\\u30FB\\u31C0-\\u31E3\\u321D-\\u321E\\u3250-\\u325F\\u327C-\\u327E\\u32B1-\\u32BF\\u32CC-\\u32CF\\u3377-\\u337A\\u33DE-\\u33DF\\u33FF\\u4DC0-\\u4DFF\\uA490-\\uA4C6\\uA60D-\\uA60F\\uA673\\uA67E-\\uA67F\\uA700-\\uA721\\uA788\\uA828-\\uA82B\\uA874-\\uA877\\uFD3E-\\uFD3F\\uFDFD\\uFE10-\\uFE19\\uFE30-\\uFE4F\\uFE51\\uFE54\\uFE56-\\uFE5E\\uFE60-\\uFE61\\uFE64-\\uFE68\\uFE6B\\uFF01-\\uFF02\\uFF06-\\uFF0A\\uFF1B-\\uFF20\\uFF3B-\\uFF40\\uFF5B-\\uFF65\\uFFE2-\\uFFE4\\uFFE8-\\uFFFD]';\nconst rangesOfLRgExp = new RegExp(rangesOfLChars);\nconst rangesOfRRgExp = new RegExp(rangesOfRChars);\nconst rangesOfALRgExp = new RegExp(rangesOfALChars);\n// let rangesOfNRgExp = new RegExp(rangesOfNChars);\n// let lrm = String.fromCharCode(8206); // left-to-right marker\n// let rlm = String.fromCharCode(8207); // right-to-left marker\n\nfunction isLtrChar(c) {\n  return rangesOfLRgExp.test(c);\n}\n\nfunction isRtlChar(c) {\n  return rangesOfRRgExp.test(c) || rangesOfALRgExp.test(c);\n}\n\nexport function detectTextDirection(s) {\n  let n = s ? s.length : 0,\n    i,\n    c;\n  for (i = 0; i < n; i++) {\n    c = s[i];\n    if (isLtrChar(c)) {\n      return 'ltr';\n    }\n    if (isRtlChar(c)) {\n      return 'rtl';\n    }\n  }\n  return 'ltr';\n}\n\nconst textAnchorRTLMap = {\n  start: 'end',\n  end: 'start',\n  center: 'center',\n  middle: 'middle'\n};\n\n/* let flippedTextAnchor = true;\nlet detected = false;\nexport function detectRtlSvgSupport(ns, ownerDoc) {\n  if (!detected) {\n    const body = ownerDoc.body;\n    if (body) {\n      const rtlTestSVG = ownerDoc.createElementNS(ns, 'svg');\n      const textNode = ownerDoc.createElementNS(ns, 'text');\n      const group = ownerDoc.createElementNS(ns, 'g');\n\n      rtlTestSVG.setAttribute('xmlns', ns);\n      rtlTestSVG.setAttribute('style', 'position: absolute; width: 100px; height: 100px; top: -100px; left: 0px');\n\n      textNode.setAttribute('text-anchor', 'start');\n      textNode.setAttribute('direction', 'rtl');\n      textNode.setAttribute('font-size', '14px');\n      textNode.setAttribute('x', 50);\n      textNode.setAttribute('y', 50);\n      textNode.textContent = 'ثعبان';\n\n      group.appendChild(textNode);\n      rtlTestSVG.appendChild(group);\n      body.appendChild(rtlTestSVG);\n\n      flippedTextAnchor = textNode.getBoundingClientRect().left < 50;\n      body.removeChild(rtlTestSVG);\n    }\n  }\n  detected = true;\n}*/\n\nexport function flipTextAnchor(value, dir) {\n  if (dir === 'rtl') {\n    return textAnchorRTLMap[value];\n  }\n  return value;\n}\n","function diff(from, to) {\n  const added = [];\n  let items;\n  const removed = [];\n  const updatedNew = [];\n  const updatedOld = [];\n  let fromIds;\n  let toIds;\n  const idMapper = a => a.id;\n  const nodeMapper = (node, i) => {\n    let id;\n    if (typeof node === 'object') {\n      if ('id' in node) {\n        id = node.id;\n      } else {\n        id = i;\n      }\n    } else {\n      id = node;\n    }\n    return {\n      content: node,\n      id: `${id}__${node.type || ''}`\n    };\n  };\n\n  if (!from.isTree) {\n    from = from.map(nodeMapper);\n  }\n\n  to = to.map(nodeMapper);\n\n  fromIds = from.map(idMapper);\n  toIds = to.map(idMapper);\n  // TODO - handle duplicate values\n\n  // added = to.filter( v => fromIds.indexOf( v.id ) < 0 );\n  // updatedNew = to.filter( v => fromIds.indexOf( v.id ) >= 0 );\n  // removed = from.filter( v => toIds.indexOf( v.id ) < 0 );\n  // updatedOld = from.filter( v => toIds.indexOf( v.id ) >= 0 );\n\n  for (let i = 0, len = to.length; i < len; i++) {\n    const idx = fromIds.indexOf(to[i].id);\n    if (idx === -1) {\n      added.push(to[i]);\n    } else {\n      updatedNew.push(to[i]);\n    }\n  }\n\n  for (let i = 0, len = from.length; i < len; i++) {\n    const idx = toIds.indexOf(from[i].id);\n    if (idx === -1) {\n      removed.push(from[i]);\n    } else {\n      updatedOld.push(from[i]);\n    }\n  }\n\n  for (let i = 0, len = added.length; i < len; i++) {\n    if (added[i].content.children) {\n      added[i].diff = diff([], added[i].content.children);\n      added[i].children = added[i].diff.updatedNew.concat(added[i].diff.added);\n      added[i].children.isTree = true;\n    }\n  }\n\n  for (let i = 0, len = updatedNew.length; i < len; i++) {\n    updatedNew[i].diff = diff(updatedOld[i].children || [], updatedNew[i].content.children || []);\n    updatedNew[i].object = updatedOld[i].object;\n    updatedNew[i].children = updatedNew[i].diff.items;\n  }\n\n  items = updatedNew.concat(added);\n\n  added.isTree = true;\n  removed.isTree = true;\n  updatedNew.isTree = true;\n  updatedOld.isTree = true;\n  items.isTree = true;\n\n  return {\n    added,\n    updatedNew,\n    updatedOld,\n    removed,\n    items\n  };\n}\n\nfunction createNodes(nodes, parent, create) {\n  for (let i = 0, len = nodes.length; i < len; i++) {\n    nodes[i].object = create(nodes[i].content.type, parent);\n  }\n}\n\nfunction destroyNodes(nodes, destroy) {\n  for (let i = 0, len = nodes.length; i < len; i++) {\n    if (nodes[i].object !== null && typeof nodes[i].object !== 'undefined') {\n      destroy(nodes[i].object);\n      nodes[i].object = null;\n    }\n  }\n}\n\nfunction updateNodes(nodes, creator, maintainer, destroyer) {\n  let item;\n  for (let i = 0, len = nodes.length; i < len; i++) {\n    item = nodes[i];\n    if (item.object !== null && typeof item.object !== 'undefined') {\n      maintainer(item.object, item.content);\n      if (item.diff) {\n        createNodes(item.diff.added, item.object, creator);\n        destroyNodes(item.diff.removed, destroyer);\n        updateNodes(item.diff.items, creator, maintainer, destroyer);\n      }\n    }\n  }\n}\n\nfunction createTree(oldItems, newItems, root, creator, maintainer, destroyer) {\n  const d = diff(oldItems, newItems);\n\n  createNodes(d.added, root, creator);\n  destroyNodes(d.removed, destroyer);\n  updateNodes(d.items, creator, maintainer, destroyer);\n\n  return d.items;\n}\n\nexport {\n  diff,\n  createTree,\n  destroyNodes,\n  createNodes,\n  updateNodes\n};\n","import { createTree } from '../node-tree';\nimport { creator, maintainer, destroyer } from './svg-nodes';\n\nclass TreeItemRenderer {\n  /**\n   * Constructor\n   * @private\n   * @param  {TreeCreator} treeCreator - Function used to create the DOM tree..\n   * @param  {SVGCreator} nodeCreator - Function used to create nodes.\n   * @param  {SVGMaintainer} nodeMaintainer - Function used to update nodes.\n   * @param  {SVGDestroyer} nodeDestroyer - Function used to destroy nodes.\n   */\n  constructor(treeCreator, nodeCreator, nodeMaintainer, nodeDestroyer) {\n    this.create = treeCreator;\n    this.nodeCreator = nodeCreator;\n    this.nodeMaintainer = nodeMaintainer;\n    this.nodeDestroyer = nodeDestroyer;\n  }\n\n  render(newItems, root) {\n    return this.create([], newItems, root, this.nodeCreator, this.nodeMaintainer, this.nodeDestroyer);\n  }\n}\n\nfunction tree() {\n  return new TreeItemRenderer(createTree, creator, maintainer, destroyer);\n}\n\nexport {\n  TreeItemRenderer as default,\n  tree\n};\n\n/**\n * Create an SVGElement and attach to parent.\n * @private\n * @callback SVGCreator\n * @param {String} type - The type of element to create.\n * @param {SVGElement} parent - The parent element to append the new element to.\n * @return {SVGElement} The created element\n */\n\n/**\n * Update the element with content from item.\n * @private\n * @callback SVGMaintainer\n * @param {SVGElement} el - The element to update\n * @param {Object} item - The object to use as input for the update\n */\n\n/**\n * Detach element from its parent.\n * @private\n * @callback SVGDestroyer\n * @param {SVGElement} el - Element to destroy.\n */\n\n/**\n * Create, update and destroy nodes.\n * @private\n * @callback TreeCreator\n * @param {Object[]} existing - The existing items in the tree.\n * @param {Object[]} active - The new items to create the tree from.\n * @param {SVGCreator} creator - Function used to create nodes.\n * @param {SVGMaintainer} maintainer - Function used to update nodes.\n * @param {SVGDestroyer} destroyer - Function used to destroy nodes.\n */\n","import { degreesToPoints } from '../../../core/math/angles';\nimport { hashObject } from '../../../core/utils/crypto';\n\nlet gradients = [];\nlet gradientHashMap = {};\n\n/**\n * If this attr (fill or stroke) has a gradient, apply it.\n * @ignore\n * @param  {Object} item Item with item[attr]\n * @param  {String} attr The attribute to search for gradient (fill or stroke)\n * @param  {String} url  URL for handling base href\n */\nfunction checkGradient(item = {}, attr = 'fill', url = '') {\n  let gradientHash = hashObject(item[attr]);\n  let gradientId = '';\n\n  if (gradientHashMap[gradientHash] !== undefined) {\n    gradientId = gradientHashMap[gradientHash];\n  } else {\n    let { orientation, degree, stops = [] } = item[attr];\n    let gradient = {};\n\n    if (degree === undefined) {\n      degree = 90;\n    }\n\n    // Default to linear\n    if (orientation === 'radial') {\n      gradient.type = 'radialGradient';\n    } else {\n      gradient = degreesToPoints(degree);\n      gradient.type = 'linearGradient';\n    }\n\n    gradient.id = `picasso-gradient-${gradientHash}`;\n    gradient.children = stops.map(({ offset, color, opacity }) => ({\n      type: 'stop',\n      offset: `${offset * 100}%`,\n      style: `stop-color:${color};stop-opacity:${opacity || 1}`\n    }));\n\n    gradients.push(gradient);\n    gradientHashMap[gradientHash] = gradient.id;\n    gradientId = gradient.id;\n  }\n\n  return `url(${url}#${gradientId})`;\n}\n\n/**\n * Reset the gradients between rendering\n * @ignore\n */\nexport function resetGradients() {\n  gradients = [];\n  gradientHashMap = {};\n}\n\nexport function onGradient(state) {\n  let url = '';\n  if (typeof window !== 'undefined') {\n    url = window.location.href.split('#')[0];\n  }\n\n  const item = state.node;\n  if (item.fill && typeof item.fill === 'object' && item.fill.type === 'gradient') {\n    item.fill = checkGradient(item, 'fill', url);\n  }\n\n  if (item.stroke && typeof item.stroke === 'object' && item.stroke.type === 'gradient') {\n    item.stroke = checkGradient(item, 'stroke', url);\n  }\n}\n\nexport function createDefsNode() {\n  return {\n    type: 'defs',\n    children: gradients,\n    disabled: () => gradients.length === 0\n  };\n}\n","/* eslint import/prefer-default-export: 0 */\n\n/**\n * Hash an object\n * Modified version of Java's HashCode function\n * Source: {@link http://werxltd.com/wp/2010/05/13/javascript-implementation-of-javas-string-hashcode-method/}\n * @ignore\n *\n * @param  {Object} item Item to hash\n * @return {String}      Unique hash id\n */\nexport function hashObject(item) {\n  let hash = 0;\n  let i;\n  let chr;\n  let len;\n\n  item = JSON.stringify(item);\n\n  if (item.length === 0) {\n    return hash;\n  }\n\n  for (i = 0, len = item.length; i < len; i++) {\n    chr = item.charCodeAt(i);\n    hash = ((hash << 5) - hash) + chr;\n    hash &= hash; // Convert to 32bit integer\n  }\n\n  return hash;\n}\n","import { tree as treeFactory } from './svg-tree';\nimport { svgNs } from './svg-nodes';\nimport sceneFactory from '../../../core/scene-graph/scene';\nimport {\n  onLineBreak\n} from '../../text-manipulation';\nimport {\n  resetGradients,\n  onGradient,\n  createDefsNode\n} from './svg-gradient';\nimport createRendererBox from '../renderer-box';\nimport create from '../index';\n\n/**\n * Create a new svg renderer\n * @typedef {function} svgRendererFactory\n * @param {function} treeFactory - Node tree factory\n * @param {string} ns - Namespace definition\n * @param {function} sceneFn - Scene factory\n * @returns {renderer} A svg renderer instance\n */\nexport default function renderer(treeFn = treeFactory, ns = svgNs, sceneFn = sceneFactory) {\n  const tree = treeFn();\n  let el;\n  let group;\n  let hasChangedRect = false;\n  let rect = createRendererBox();\n  let scene;\n\n  const svg = create();\n\n  svg.element = () => el;\n\n  svg.root = () => group;\n\n  svg.appendTo = (element) => {\n    if (!el) {\n      el = element.ownerDocument.createElementNS(ns, 'svg');\n      el.style.position = 'absolute';\n      el.style['-webkit-font-smoothing'] = 'antialiased';\n      el.style['-moz-osx-font-smoothing'] = 'antialiased';\n      el.style.pointerEvents = 'none';\n      el.setAttribute('xmlns', ns);\n      group = element.ownerDocument.createElementNS(ns, 'g');\n      group.style.pointerEvents = 'auto';\n      el.appendChild(group);\n    }\n\n    element.appendChild(el);\n\n    return el;\n  };\n\n  svg.render = (nodes) => {\n    if (!el) {\n      return false;\n    }\n\n    const scaleX = rect.scaleRatio.x;\n    const scaleY = rect.scaleRatio.y;\n\n    if (hasChangedRect) {\n      el.style.left = `${Math.round(rect.margin.left + (rect.x * scaleX))}px`;\n      el.style.top = `${Math.round(rect.margin.top + (rect.y * scaleY))}px`;\n      el.setAttribute('width', Math.round(rect.width * scaleX));\n      el.setAttribute('height', Math.round(rect.height * scaleY));\n    }\n\n    resetGradients();\n\n    const sceneContainer = {\n      type: 'container',\n      children: Array.isArray(nodes) ? [...nodes, createDefsNode()] : nodes\n    };\n\n    if (scaleX !== 1 || scaleY !== 1) {\n      sceneContainer.transform = `scale(${scaleX}, ${scaleY})`;\n    }\n\n    const newScene = sceneFn({\n      items: [sceneContainer],\n      on: {\n        create: [\n          onGradient,\n          onLineBreak(svg.measureText)\n        ]\n      }\n    });\n    const hasChangedScene = scene ? !newScene.equals(scene) : true;\n\n    const doRender = hasChangedRect || hasChangedScene;\n    if (doRender) {\n      svg.clear();\n      tree.render(newScene.children, group);\n    }\n\n    hasChangedRect = false;\n    scene = newScene;\n    return doRender;\n  };\n\n  svg.itemsAt = options => (scene ? scene.getItemsFrom(options) : []);\n\n  svg.findShapes = (selector) => {\n    if (scene) {\n      return scene.findShapes(selector).map((s) => {\n        s.element = svg.element();\n        return s;\n      });\n    }\n    return [];\n  };\n\n  svg.clear = () => {\n    if (!group) {\n      return svg;\n    }\n    scene = null;\n    const g = group.cloneNode(false);\n    el.replaceChild(g, group);\n    group = g;\n    return svg;\n  };\n\n  svg.destroy = () => {\n    if (el && el.parentElement) {\n      el.parentElement.removeChild(el);\n    }\n    el = null;\n    group = null;\n  };\n\n  svg.size = (opts) => {\n    if (opts) {\n      const newRect = createRendererBox(opts);\n\n      if (JSON.stringify(rect) !== JSON.stringify(newRect)) {\n        hasChangedRect = true;\n        rect = newRect;\n      }\n    }\n\n    return rect;\n  };\n\n  return svg;\n}\n\nexport function rendererComponent(picasso) {\n  picasso.renderer('svg', renderer);\n}\n","// jshint newcap: false\n/* global require, module, document, Node */\n'use strict';\n\nvar VNode = require('./vnode');\nvar is = require('./is');\nvar domApi = require('./htmldomapi');\n\nfunction isUndef(s) { return s === undefined; }\nfunction isDef(s) { return s !== undefined; }\n\nvar emptyNode = VNode('', {}, [], undefined, undefined);\n\nfunction sameVnode(vnode1, vnode2) {\n  return vnode1.key === vnode2.key && vnode1.sel === vnode2.sel;\n}\n\nfunction createKeyToOldIdx(children, beginIdx, endIdx) {\n  var i, map = {}, key;\n  for (i = beginIdx; i <= endIdx; ++i) {\n    key = children[i].key;\n    if (isDef(key)) map[key] = i;\n  }\n  return map;\n}\n\nvar hooks = ['create', 'update', 'remove', 'destroy', 'pre', 'post'];\n\nfunction init(modules, api) {\n  var i, j, cbs = {};\n\n  if (isUndef(api)) api = domApi;\n\n  for (i = 0; i < hooks.length; ++i) {\n    cbs[hooks[i]] = [];\n    for (j = 0; j < modules.length; ++j) {\n      if (modules[j][hooks[i]] !== undefined) cbs[hooks[i]].push(modules[j][hooks[i]]);\n    }\n  }\n\n  function emptyNodeAt(elm) {\n    var id = elm.id ? '#' + elm.id : '';\n    var c = elm.className ? '.' + elm.className.split(' ').join('.') : '';\n    return VNode(api.tagName(elm).toLowerCase() + id + c, {}, [], undefined, elm);\n  }\n\n  function createRmCb(childElm, listeners) {\n    return function() {\n      if (--listeners === 0) {\n        var parent = api.parentNode(childElm);\n        api.removeChild(parent, childElm);\n      }\n    };\n  }\n\n  function createElm(vnode, insertedVnodeQueue) {\n    var i, data = vnode.data;\n    if (isDef(data)) {\n      if (isDef(i = data.hook) && isDef(i = i.init)) {\n        i(vnode);\n        data = vnode.data;\n      }\n    }\n    var elm, children = vnode.children, sel = vnode.sel;\n    if (isDef(sel)) {\n      // Parse selector\n      var hashIdx = sel.indexOf('#');\n      var dotIdx = sel.indexOf('.', hashIdx);\n      var hash = hashIdx > 0 ? hashIdx : sel.length;\n      var dot = dotIdx > 0 ? dotIdx : sel.length;\n      var tag = hashIdx !== -1 || dotIdx !== -1 ? sel.slice(0, Math.min(hash, dot)) : sel;\n      elm = vnode.elm = isDef(data) && isDef(i = data.ns) ? api.createElementNS(i, tag)\n                                                          : api.createElement(tag);\n      if (hash < dot) elm.id = sel.slice(hash + 1, dot);\n      if (dotIdx > 0) elm.className = sel.slice(dot + 1).replace(/\\./g, ' ');\n      if (is.array(children)) {\n        for (i = 0; i < children.length; ++i) {\n          api.appendChild(elm, createElm(children[i], insertedVnodeQueue));\n        }\n      } else if (is.primitive(vnode.text)) {\n        api.appendChild(elm, api.createTextNode(vnode.text));\n      }\n      for (i = 0; i < cbs.create.length; ++i) cbs.create[i](emptyNode, vnode);\n      i = vnode.data.hook; // Reuse variable\n      if (isDef(i)) {\n        if (i.create) i.create(emptyNode, vnode);\n        if (i.insert) insertedVnodeQueue.push(vnode);\n      }\n    } else {\n      elm = vnode.elm = api.createTextNode(vnode.text);\n    }\n    return vnode.elm;\n  }\n\n  function addVnodes(parentElm, before, vnodes, startIdx, endIdx, insertedVnodeQueue) {\n    for (; startIdx <= endIdx; ++startIdx) {\n      api.insertBefore(parentElm, createElm(vnodes[startIdx], insertedVnodeQueue), before);\n    }\n  }\n\n  function invokeDestroyHook(vnode) {\n    var i, j, data = vnode.data;\n    if (isDef(data)) {\n      if (isDef(i = data.hook) && isDef(i = i.destroy)) i(vnode);\n      for (i = 0; i < cbs.destroy.length; ++i) cbs.destroy[i](vnode);\n      if (isDef(i = vnode.children)) {\n        for (j = 0; j < vnode.children.length; ++j) {\n          invokeDestroyHook(vnode.children[j]);\n        }\n      }\n    }\n  }\n\n  function removeVnodes(parentElm, vnodes, startIdx, endIdx) {\n    for (; startIdx <= endIdx; ++startIdx) {\n      var i, listeners, rm, ch = vnodes[startIdx];\n      if (isDef(ch)) {\n        if (isDef(ch.sel)) {\n          invokeDestroyHook(ch);\n          listeners = cbs.remove.length + 1;\n          rm = createRmCb(ch.elm, listeners);\n          for (i = 0; i < cbs.remove.length; ++i) cbs.remove[i](ch, rm);\n          if (isDef(i = ch.data) && isDef(i = i.hook) && isDef(i = i.remove)) {\n            i(ch, rm);\n          } else {\n            rm();\n          }\n        } else { // Text node\n          api.removeChild(parentElm, ch.elm);\n        }\n      }\n    }\n  }\n\n  function updateChildren(parentElm, oldCh, newCh, insertedVnodeQueue) {\n    var oldStartIdx = 0, newStartIdx = 0;\n    var oldEndIdx = oldCh.length - 1;\n    var oldStartVnode = oldCh[0];\n    var oldEndVnode = oldCh[oldEndIdx];\n    var newEndIdx = newCh.length - 1;\n    var newStartVnode = newCh[0];\n    var newEndVnode = newCh[newEndIdx];\n    var oldKeyToIdx, idxInOld, elmToMove, before;\n\n    while (oldStartIdx <= oldEndIdx && newStartIdx <= newEndIdx) {\n      if (isUndef(oldStartVnode)) {\n        oldStartVnode = oldCh[++oldStartIdx]; // Vnode has been moved left\n      } else if (isUndef(oldEndVnode)) {\n        oldEndVnode = oldCh[--oldEndIdx];\n      } else if (sameVnode(oldStartVnode, newStartVnode)) {\n        patchVnode(oldStartVnode, newStartVnode, insertedVnodeQueue);\n        oldStartVnode = oldCh[++oldStartIdx];\n        newStartVnode = newCh[++newStartIdx];\n      } else if (sameVnode(oldEndVnode, newEndVnode)) {\n        patchVnode(oldEndVnode, newEndVnode, insertedVnodeQueue);\n        oldEndVnode = oldCh[--oldEndIdx];\n        newEndVnode = newCh[--newEndIdx];\n      } else if (sameVnode(oldStartVnode, newEndVnode)) { // Vnode moved right\n        patchVnode(oldStartVnode, newEndVnode, insertedVnodeQueue);\n        api.insertBefore(parentElm, oldStartVnode.elm, api.nextSibling(oldEndVnode.elm));\n        oldStartVnode = oldCh[++oldStartIdx];\n        newEndVnode = newCh[--newEndIdx];\n      } else if (sameVnode(oldEndVnode, newStartVnode)) { // Vnode moved left\n        patchVnode(oldEndVnode, newStartVnode, insertedVnodeQueue);\n        api.insertBefore(parentElm, oldEndVnode.elm, oldStartVnode.elm);\n        oldEndVnode = oldCh[--oldEndIdx];\n        newStartVnode = newCh[++newStartIdx];\n      } else {\n        if (isUndef(oldKeyToIdx)) oldKeyToIdx = createKeyToOldIdx(oldCh, oldStartIdx, oldEndIdx);\n        idxInOld = oldKeyToIdx[newStartVnode.key];\n        if (isUndef(idxInOld)) { // New element\n          api.insertBefore(parentElm, createElm(newStartVnode, insertedVnodeQueue), oldStartVnode.elm);\n          newStartVnode = newCh[++newStartIdx];\n        } else {\n          elmToMove = oldCh[idxInOld];\n          patchVnode(elmToMove, newStartVnode, insertedVnodeQueue);\n          oldCh[idxInOld] = undefined;\n          api.insertBefore(parentElm, elmToMove.elm, oldStartVnode.elm);\n          newStartVnode = newCh[++newStartIdx];\n        }\n      }\n    }\n    if (oldStartIdx > oldEndIdx) {\n      before = isUndef(newCh[newEndIdx+1]) ? null : newCh[newEndIdx+1].elm;\n      addVnodes(parentElm, before, newCh, newStartIdx, newEndIdx, insertedVnodeQueue);\n    } else if (newStartIdx > newEndIdx) {\n      removeVnodes(parentElm, oldCh, oldStartIdx, oldEndIdx);\n    }\n  }\n\n  function patchVnode(oldVnode, vnode, insertedVnodeQueue) {\n    var i, hook;\n    if (isDef(i = vnode.data) && isDef(hook = i.hook) && isDef(i = hook.prepatch)) {\n      i(oldVnode, vnode);\n    }\n    var elm = vnode.elm = oldVnode.elm, oldCh = oldVnode.children, ch = vnode.children;\n    if (oldVnode === vnode) return;\n    if (!sameVnode(oldVnode, vnode)) {\n      var parentElm = api.parentNode(oldVnode.elm);\n      elm = createElm(vnode, insertedVnodeQueue);\n      api.insertBefore(parentElm, elm, oldVnode.elm);\n      removeVnodes(parentElm, [oldVnode], 0, 0);\n      return;\n    }\n    if (isDef(vnode.data)) {\n      for (i = 0; i < cbs.update.length; ++i) cbs.update[i](oldVnode, vnode);\n      i = vnode.data.hook;\n      if (isDef(i) && isDef(i = i.update)) i(oldVnode, vnode);\n    }\n    if (isUndef(vnode.text)) {\n      if (isDef(oldCh) && isDef(ch)) {\n        if (oldCh !== ch) updateChildren(elm, oldCh, ch, insertedVnodeQueue);\n      } else if (isDef(ch)) {\n        if (isDef(oldVnode.text)) api.setTextContent(elm, '');\n        addVnodes(elm, null, ch, 0, ch.length - 1, insertedVnodeQueue);\n      } else if (isDef(oldCh)) {\n        removeVnodes(elm, oldCh, 0, oldCh.length - 1);\n      } else if (isDef(oldVnode.text)) {\n        api.setTextContent(elm, '');\n      }\n    } else if (oldVnode.text !== vnode.text) {\n      api.setTextContent(elm, vnode.text);\n    }\n    if (isDef(hook) && isDef(i = hook.postpatch)) {\n      i(oldVnode, vnode);\n    }\n  }\n\n  return function(oldVnode, vnode) {\n    var i, elm, parent;\n    var insertedVnodeQueue = [];\n    for (i = 0; i < cbs.pre.length; ++i) cbs.pre[i]();\n\n    if (isUndef(oldVnode.sel)) {\n      oldVnode = emptyNodeAt(oldVnode);\n    }\n\n    if (sameVnode(oldVnode, vnode)) {\n      patchVnode(oldVnode, vnode, insertedVnodeQueue);\n    } else {\n      elm = oldVnode.elm;\n      parent = api.parentNode(elm);\n\n      createElm(vnode, insertedVnodeQueue);\n\n      if (parent !== null) {\n        api.insertBefore(parent, vnode.elm, api.nextSibling(elm));\n        removeVnodes(parent, [oldVnode], 0, 0);\n      }\n    }\n\n    for (i = 0; i < insertedVnodeQueue.length; ++i) {\n      insertedVnodeQueue[i].data.hook.insert(insertedVnodeQueue[i]);\n    }\n    for (i = 0; i < cbs.post.length; ++i) cbs.post[i]();\n    return vnode;\n  };\n}\n\nmodule.exports = {init: init};\n","var NamespaceURIs = {\n  \"xlink\": \"http://www.w3.org/1999/xlink\"\n};\n\nvar booleanAttrs = [\"allowfullscreen\", \"async\", \"autofocus\", \"autoplay\", \"checked\", \"compact\", \"controls\", \"declare\",\n                \"default\", \"defaultchecked\", \"defaultmuted\", \"defaultselected\", \"defer\", \"disabled\", \"draggable\",\n                \"enabled\", \"formnovalidate\", \"hidden\", \"indeterminate\", \"inert\", \"ismap\", \"itemscope\", \"loop\", \"multiple\",\n                \"muted\", \"nohref\", \"noresize\", \"noshade\", \"novalidate\", \"nowrap\", \"open\", \"pauseonexit\", \"readonly\",\n                \"required\", \"reversed\", \"scoped\", \"seamless\", \"selected\", \"sortable\", \"spellcheck\", \"translate\",\n                \"truespeed\", \"typemustmatch\", \"visible\"];\n\nvar booleanAttrsDict = Object.create(null);\nfor(var i=0, len = booleanAttrs.length; i < len; i++) {\n  booleanAttrsDict[booleanAttrs[i]] = true;\n}\n\nfunction updateAttrs(oldVnode, vnode) {\n  var key, cur, old, elm = vnode.elm,\n      oldAttrs = oldVnode.data.attrs, attrs = vnode.data.attrs, namespaceSplit;\n\n  if (!oldAttrs && !attrs) return;\n  oldAttrs = oldAttrs || {};\n  attrs = attrs || {};\n\n  // update modified attributes, add new attributes\n  for (key in attrs) {\n    cur = attrs[key];\n    old = oldAttrs[key];\n    if (old !== cur) {\n      if(!cur && booleanAttrsDict[key])\n        elm.removeAttribute(key);\n      else {\n        namespaceSplit = key.split(\":\");\n        if(namespaceSplit.length > 1 && NamespaceURIs.hasOwnProperty(namespaceSplit[0]))\n          elm.setAttributeNS(NamespaceURIs[namespaceSplit[0]], key, cur);\n        else\n          elm.setAttribute(key, cur);\n      }\n    }\n  }\n  //remove removed attributes\n  // use `in` operator since the previous `for` iteration uses it (.i.e. add even attributes with undefined value)\n  // the other option is to remove all attributes with value == undefined\n  for (key in oldAttrs) {\n    if (!(key in attrs)) {\n      elm.removeAttribute(key);\n    }\n  }\n}\n\nmodule.exports = {create: updateAttrs, update: updateAttrs};\n","function updateClass(oldVnode, vnode) {\n  var cur, name, elm = vnode.elm,\n      oldClass = oldVnode.data.class,\n      klass = vnode.data.class;\n\n  if (!oldClass && !klass) return;\n  oldClass = oldClass || {};\n  klass = klass || {};\n\n  for (name in oldClass) {\n    if (!klass[name]) {\n      elm.classList.remove(name);\n    }\n  }\n  for (name in klass) {\n    cur = klass[name];\n    if (cur !== oldClass[name]) {\n      elm.classList[cur ? 'add' : 'remove'](name);\n    }\n  }\n}\n\nmodule.exports = {create: updateClass, update: updateClass};\n","var raf = (typeof window !== 'undefined' && window.requestAnimationFrame) || setTimeout;\nvar nextFrame = function(fn) { raf(function() { raf(fn); }); };\n\nfunction setNextFrame(obj, prop, val) {\n  nextFrame(function() { obj[prop] = val; });\n}\n\nfunction updateStyle(oldVnode, vnode) {\n  var cur, name, elm = vnode.elm,\n      oldStyle = oldVnode.data.style,\n      style = vnode.data.style;\n\n  if (!oldStyle && !style) return;\n  oldStyle = oldStyle || {};\n  style = style || {};\n  var oldHasDel = 'delayed' in oldStyle;\n\n  for (name in oldStyle) {\n    if (!style[name]) {\n      elm.style[name] = '';\n    }\n  }\n  for (name in style) {\n    cur = style[name];\n    if (name === 'delayed') {\n      for (name in style.delayed) {\n        cur = style.delayed[name];\n        if (!oldHasDel || cur !== oldStyle.delayed[name]) {\n          setNextFrame(elm.style, name, cur);\n        }\n      }\n    } else if (name !== 'remove' && cur !== oldStyle[name]) {\n      elm.style[name] = cur;\n    }\n  }\n}\n\nfunction applyDestroyStyle(vnode) {\n  var style, name, elm = vnode.elm, s = vnode.data.style;\n  if (!s || !(style = s.destroy)) return;\n  for (name in style) {\n    elm.style[name] = style[name];\n  }\n}\n\nfunction applyRemoveStyle(vnode, rm) {\n  var s = vnode.data.style;\n  if (!s || !s.remove) {\n    rm();\n    return;\n  }\n  var name, elm = vnode.elm, idx, i = 0, maxDur = 0,\n      compStyle, style = s.remove, amount = 0, applied = [];\n  for (name in style) {\n    applied.push(name);\n    elm.style[name] = style[name];\n  }\n  compStyle = getComputedStyle(elm);\n  var props = compStyle['transition-property'].split(', ');\n  for (; i < props.length; ++i) {\n    if(applied.indexOf(props[i]) !== -1) amount++;\n  }\n  elm.addEventListener('transitionend', function(ev) {\n    if (ev.target === elm) --amount;\n    if (amount === 0) rm();\n  });\n}\n\nmodule.exports = {create: updateStyle, update: updateStyle, destroy: applyDestroyStyle, remove: applyRemoveStyle};\n","function invokeHandler(handler, vnode, event) {\n  if (typeof handler === \"function\") {\n    // call function handler\n    handler.call(vnode, event, vnode);\n  } else if (typeof handler === \"object\") {\n    // call handler with arguments\n    if (typeof handler[0] === \"function\") {\n      // special case for single argument for performance\n      if (handler.length === 2) {\n        handler[0].call(vnode, handler[1], event, vnode);\n      } else {\n        var args = handler.slice(1);\n        args.push(event);\n        args.push(vnode);\n        handler[0].apply(vnode, args);\n      }\n    } else {\n      // call multiple handlers\n      for (var i = 0; i < handler.length; i++) {\n        invokeHandler(handler[i]);\n      }\n    }\n  }\n}\n\nfunction handleEvent(event, vnode) {\n  var name = event.type,\n      on = vnode.data.on;\n\n  // call event handler(s) if exists\n  if (on && on[name]) {\n    invokeHandler(on[name], vnode, event);\n  }\n}\n\nfunction createListener() {\n  return function handler(event) {\n    handleEvent(event, handler.vnode);\n  }\n}\n\nfunction updateEventListeners(oldVnode, vnode) {\n  var oldOn = oldVnode.data.on,\n      oldListener = oldVnode.listener,\n      oldElm = oldVnode.elm,\n      on = vnode && vnode.data.on,\n      elm = vnode && vnode.elm,\n      name;\n\n  // optimization for reused immutable handlers\n  if (oldOn === on) {\n    return;\n  }\n\n  // remove existing listeners which no longer used\n  if (oldOn && oldListener) {\n    // if element changed or deleted we remove all existing listeners unconditionally\n    if (!on) {\n      for (name in oldOn) {\n        // remove listener if element was changed or existing listeners removed\n        oldElm.removeEventListener(name, oldListener, false);\n      }\n    } else {\n      for (name in oldOn) {\n        // remove listener if existing listener removed\n        if (!on[name]) {\n          oldElm.removeEventListener(name, oldListener, false);\n        }\n      }\n    }\n  }\n\n  // add new listeners which has not already attached\n  if (on) {\n    // reuse existing listener or create new\n    var listener = vnode.listener = oldVnode.listener || createListener();\n    // update vnode for listener\n    listener.vnode = vnode;\n\n    // if element changed or added we add all needed listeners unconditionally\n    if (!oldOn) {\n      for (name in on) {\n        // add listener if element was changed or new listeners added\n        elm.addEventListener(name, listener, false);\n      }\n    } else {\n      for (name in on) {\n        // add listener if new listener added\n        if (!oldOn[name]) {\n          elm.addEventListener(name, listener, false);\n        }\n      }\n    }\n  }\n}\n\nmodule.exports = {\n  create: updateEventListeners,\n  update: updateEventListeners,\n  destroy: updateEventListeners\n};\n","var VNode = require('./vnode');\nvar is = require('./is');\n\nfunction addNS(data, children, sel) {\n  data.ns = 'http://www.w3.org/2000/svg';\n\n  if (sel !== 'foreignObject' && children !== undefined) {\n    for (var i = 0; i < children.length; ++i) {\n      addNS(children[i].data, children[i].children, children[i].sel);\n    }\n  }\n}\n\nmodule.exports = function h(sel, b, c) {\n  var data = {}, children, text, i;\n  if (c !== undefined) {\n    data = b;\n    if (is.array(c)) { children = c; }\n    else if (is.primitive(c)) { text = c; }\n  } else if (b !== undefined) {\n    if (is.array(b)) { children = b; }\n    else if (is.primitive(b)) { text = b; }\n    else { data = b; }\n  }\n  if (is.array(children)) {\n    for (i = 0; i < children.length; ++i) {\n      if (is.primitive(children[i])) children[i] = VNode(undefined, undefined, undefined, children[i]);\n    }\n  }\n  if (sel[0] === 's' && sel[1] === 'v' && sel[2] === 'g') {\n    addNS(data, children, sel);\n  }\n  return VNode(sel, data, children, text, undefined);\n};\n","import { h, patch } from './vdom';\nimport createRendererBox from '../renderer-box';\nimport create from '../index';\n\nexport default function renderer(opts = {}) {\n  const {\n    createElement = document.createElement.bind(document)\n  } = opts;\n\n  let el;\n  let rect = createRendererBox();\n  let vnode;\n\n  const dom = create();\n\n  dom.element = () => el;\n\n  dom.root = () => el;\n\n  dom.appendTo = (element) => {\n    if (!el) {\n      el = createElement('div');\n      el.style.position = 'absolute';\n      el.style['-webkit-font-smoothing'] = 'antialiased';\n      el.style['-moz-osx-font-smoothing'] = 'antialiased';\n      el.style.pointerEvents = 'none';\n    }\n\n    element.appendChild(el);\n\n    return el;\n  };\n\n  dom.render = (nodes) => {\n    if (!el) {\n      return false;\n    }\n\n    const scaleX = rect.scaleRatio.x;\n    const scaleY = rect.scaleRatio.y;\n\n    el.style.left = `${Math.round(rect.margin.left + (rect.x * scaleX))}px`;\n    el.style.top = `${Math.round(rect.margin.left + (rect.y * scaleY))}px`;\n    el.style.width = `${Math.round(rect.width * scaleX)}px`;\n    el.style.height = `${Math.round(rect.height * scaleY)}px`;\n\n    const node = h('div', {}, Array.isArray(nodes) ? nodes : [nodes]);\n\n    if (vnode) {\n      patch(vnode, node);\n    } else {\n      patch(el, node);\n    }\n    vnode = node;\n\n    return true;\n  };\n\n  dom.renderArgs = [h]; // Arguments to render functions using the DOM renderer\n\n  dom.clear = () => {\n    if (el) {\n      let first = el.firstChild;\n\n      while (first) {\n        el.removeChild(first);\n        first = el.firstChild;\n      }\n      vnode = null;\n    }\n\n    return dom;\n  };\n\n  dom.destroy = () => {\n    if (el && el.parentElement) {\n      el.parentElement.removeChild(el);\n    }\n    el = null;\n  };\n\n  dom.size = (inner) => {\n    if (inner) {\n      rect = createRendererBox(inner);\n    }\n    return rect;\n  };\n\n  return dom;\n}\n","import extend from 'extend';\nimport about from './about';\n\nimport {\n  chart,\n  renderer\n} from './core';\n\nimport './web';\n\nimport {\n  components,\n  scales,\n  renderers\n} from './api';\n\nimport componentRegistry from './core/component';\nimport dataRegistry from './core/data';\nimport formatterRegistry from './core/formatter';\nimport interactionRegistry from './core/interaction';\nimport scaleRegistry from './core/charts/scales';\n\nimport loggerFn from './core/utils/logger';\nimport registry from './core/utils/registry';\n\nimport { style, palettes } from './core/theme/light';\n\nfunction usePlugin(plugin, options = {}, api) {\n  plugin(api, options);\n}\n\nfunction pic(config = {}, registries = {}) {\n  const logger = loggerFn(config.logger);\n\n  /**\n   * @lends picassojs\n   */\n  const regis = {\n    // -- registries --\n    /**\n     * Component registry\n     * @type {registry}\n     */\n    component: registry(registries.component),\n    /**\n     * Data registry\n     * @type {registry}\n     */\n    data: registry(registries.data),\n    /**\n     * Formatter registry\n     * @type {registry}\n     */\n    formatter: registry(registries.formatter),\n    /**\n     * Interaction registry\n     * @type {registry}\n     */\n    interaction: registry(registries.interaction),\n    /**\n     * Renderer registry\n     * @type {registry}\n     */\n    renderer: renderer(registries.renderer),\n    /**\n     * Scale registry\n     * @type {registry}\n     */\n    scale: registry(registries.scale),\n    /**\n     * Symbol registry\n     * @type {registry}\n     * @private\n     */\n    symbol: registry(registries.symbol),\n    // -- misc --\n    /**\n     * log some some stuff\n     * @type {logger}\n     * @private\n     */\n    logger\n  };\n\n  if (config.renderer && config.renderer.prio) {\n    regis.renderer.default(config.renderer.prio[0]);\n  }\n\n  /**\n   * picasso.js entry point\n   * @experimental\n   * @entry\n   * @alias picassojs\n   * @param {object} cfg\n   * @param {object} cfg.renderer\n   * @param {Array<string>} cfg.renderer.prio\n   * @param {object} cfg.logger\n   * @param {number} cfg.logger.level\n   * @param {object} cfg.style\n   * @param {Array<object>} cfg.palettes\n   * @returns {picassojs}\n   */\n  function picassojs(cfg = {}) {\n    let cc = {\n      palettes: config.palettes.concat(cfg.palettes || []),\n      style: extend({}, config.style, cfg.style),\n      logger: cfg.logger || config.logger,\n      renderer: cfg.renderer || config.renderer\n    };\n    return pic(cc, regis);\n  }\n\n  /**\n   * @callback picassojs~plugin\n   * @param {picassojs~registries} registries\n   * @param {object} options\n   */\n\n  /**\n   * @param {picassojs~plugin} plugin\n   * @param {object} [options]\n   */\n  picassojs.use = (plugin, options = {}) => usePlugin(plugin, options, regis);\n\n  /**\n   * @param {chart-definition} definition\n   * @returns {chart}\n   */\n  picassojs.chart = definition => chart(definition, {\n    registries: regis,\n    logger,\n    style: config.style,\n    palettes: config.palettes\n  });\n  picassojs.config = () => config;\n\n  Object.keys(regis).forEach((key) => {\n    picassojs[key] = regis[key];\n  });\n\n  /**\n   * picasso.js version\n   * @type {string}\n   */\n  picassojs.version = about.version;\n\n  return picassojs;\n}\n\nconst p = pic({\n  renderer: {\n    prio: ['svg', 'canvas']\n  },\n  logger: {\n    level: 0\n  },\n  style,\n  palettes\n}, {\n  component: componentRegistry,\n  data: dataRegistry,\n  formatter: formatterRegistry,\n  interaction: interactionRegistry,\n  renderer: renderer(),\n  scale: scaleRegistry\n});\n\ncomponents.forEach(p.use);\nrenderers.forEach(p.use);\nscales.forEach(p.use);\n\nexport {\n  p as default\n};\n","'use strict';\n\nvar hasOwn = Object.prototype.hasOwnProperty;\nvar toStr = Object.prototype.toString;\n\nvar isArray = function isArray(arr) {\n\tif (typeof Array.isArray === 'function') {\n\t\treturn Array.isArray(arr);\n\t}\n\n\treturn toStr.call(arr) === '[object Array]';\n};\n\nvar isPlainObject = function isPlainObject(obj) {\n\tif (!obj || toStr.call(obj) !== '[object Object]') {\n\t\treturn false;\n\t}\n\n\tvar hasOwnConstructor = hasOwn.call(obj, 'constructor');\n\tvar hasIsPrototypeOf = obj.constructor && obj.constructor.prototype && hasOwn.call(obj.constructor.prototype, 'isPrototypeOf');\n\t// Not own constructor property must be Object\n\tif (obj.constructor && !hasOwnConstructor && !hasIsPrototypeOf) {\n\t\treturn false;\n\t}\n\n\t// Own properties are enumerated firstly, so to speed up,\n\t// if last one is own, then all properties are own.\n\tvar key;\n\tfor (key in obj) { /**/ }\n\n\treturn typeof key === 'undefined' || hasOwn.call(obj, key);\n};\n\nmodule.exports = function extend() {\n\tvar options, name, src, copy, copyIsArray, clone;\n\tvar target = arguments[0];\n\tvar i = 1;\n\tvar length = arguments.length;\n\tvar deep = false;\n\n\t// Handle a deep copy situation\n\tif (typeof target === 'boolean') {\n\t\tdeep = target;\n\t\ttarget = arguments[1] || {};\n\t\t// skip the boolean and the target\n\t\ti = 2;\n\t}\n\tif (target == null || (typeof target !== 'object' && typeof target !== 'function')) {\n\t\ttarget = {};\n\t}\n\n\tfor (; i < length; ++i) {\n\t\toptions = arguments[i];\n\t\t// Only deal with non-null/undefined values\n\t\tif (options != null) {\n\t\t\t// Extend the base object\n\t\t\tfor (name in options) {\n\t\t\t\tsrc = target[name];\n\t\t\t\tcopy = options[name];\n\n\t\t\t\t// Prevent never-ending loop\n\t\t\t\tif (target !== copy) {\n\t\t\t\t\t// Recurse if we're merging plain objects or arrays\n\t\t\t\t\tif (deep && copy && (isPlainObject(copy) || (copyIsArray = isArray(copy)))) {\n\t\t\t\t\t\tif (copyIsArray) {\n\t\t\t\t\t\t\tcopyIsArray = false;\n\t\t\t\t\t\t\tclone = src && isArray(src) ? src : [];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tclone = src && isPlainObject(src) ? src : {};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Never move original objects, clone them\n\t\t\t\t\t\ttarget[name] = extend(deep, clone, copy);\n\n\t\t\t\t\t// Don't bring in undefined values\n\t\t\t\t\t} else if (typeof copy !== 'undefined') {\n\t\t\t\t\t\ttarget[name] = copy;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Return the modified object\n\treturn target;\n};\n","export default { version: '0.7.0' };\n","export default function(x) {\n  return function constant() {\n    return x;\n  };\n}\n","import {path} from \"d3-path\";\nimport constant from \"./constant\";\nimport curveLinear from \"./curve/linear\";\nimport {x as pointX, y as pointY} from \"./point\";\n\nexport default function() {\n  var x = pointX,\n      y = pointY,\n      defined = constant(true),\n      context = null,\n      curve = curveLinear,\n      output = null;\n\n  function line(data) {\n    var i,\n        n = data.length,\n        d,\n        defined0 = false,\n        buffer;\n\n    if (context == null) output = curve(buffer = path());\n\n    for (i = 0; i <= n; ++i) {\n      if (!(i < n && defined(d = data[i], i, data)) === defined0) {\n        if (defined0 = !defined0) output.lineStart();\n        else output.lineEnd();\n      }\n      if (defined0) output.point(+x(d, i, data), +y(d, i, data));\n    }\n\n    if (buffer) return output = null, buffer + \"\" || null;\n  }\n\n  line.x = function(_) {\n    return arguments.length ? (x = typeof _ === \"function\" ? _ : constant(+_), line) : x;\n  };\n\n  line.y = function(_) {\n    return arguments.length ? (y = typeof _ === \"function\" ? _ : constant(+_), line) : y;\n  };\n\n  line.defined = function(_) {\n    return arguments.length ? (defined = typeof _ === \"function\" ? _ : constant(!!_), line) : defined;\n  };\n\n  line.curve = function(_) {\n    return arguments.length ? (curve = _, context != null && (output = curve(context)), line) : curve;\n  };\n\n  line.context = function(_) {\n    return arguments.length ? (_ == null ? context = output = null : output = curve(context = _), line) : context;\n  };\n\n  return line;\n}\n","import {path} from \"d3-path\";\nimport constant from \"./constant\";\nimport curveLinear from \"./curve/linear\";\nimport line from \"./line\";\nimport {x as pointX, y as pointY} from \"./point\";\n\nexport default function() {\n  var x0 = pointX,\n      x1 = null,\n      y0 = constant(0),\n      y1 = pointY,\n      defined = constant(true),\n      context = null,\n      curve = curveLinear,\n      output = null;\n\n  function area(data) {\n    var i,\n        j,\n        k,\n        n = data.length,\n        d,\n        defined0 = false,\n        buffer,\n        x0z = new Array(n),\n        y0z = new Array(n);\n\n    if (context == null) output = curve(buffer = path());\n\n    for (i = 0; i <= n; ++i) {\n      if (!(i < n && defined(d = data[i], i, data)) === defined0) {\n        if (defined0 = !defined0) {\n          j = i;\n          output.areaStart();\n          output.lineStart();\n        } else {\n          output.lineEnd();\n          output.lineStart();\n          for (k = i - 1; k >= j; --k) {\n            output.point(x0z[k], y0z[k]);\n          }\n          output.lineEnd();\n          output.areaEnd();\n        }\n      }\n      if (defined0) {\n        x0z[i] = +x0(d, i, data), y0z[i] = +y0(d, i, data);\n        output.point(x1 ? +x1(d, i, data) : x0z[i], y1 ? +y1(d, i, data) : y0z[i]);\n      }\n    }\n\n    if (buffer) return output = null, buffer + \"\" || null;\n  }\n\n  function arealine() {\n    return line().defined(defined).curve(curve).context(context);\n  }\n\n  area.x = function(_) {\n    return arguments.length ? (x0 = typeof _ === \"function\" ? _ : constant(+_), x1 = null, area) : x0;\n  };\n\n  area.x0 = function(_) {\n    return arguments.length ? (x0 = typeof _ === \"function\" ? _ : constant(+_), area) : x0;\n  };\n\n  area.x1 = function(_) {\n    return arguments.length ? (x1 = _ == null ? null : typeof _ === \"function\" ? _ : constant(+_), area) : x1;\n  };\n\n  area.y = function(_) {\n    return arguments.length ? (y0 = typeof _ === \"function\" ? _ : constant(+_), y1 = null, area) : y0;\n  };\n\n  area.y0 = function(_) {\n    return arguments.length ? (y0 = typeof _ === \"function\" ? _ : constant(+_), area) : y0;\n  };\n\n  area.y1 = function(_) {\n    return arguments.length ? (y1 = _ == null ? null : typeof _ === \"function\" ? _ : constant(+_), area) : y1;\n  };\n\n  area.lineX0 =\n  area.lineY0 = function() {\n    return arealine().x(x0).y(y0);\n  };\n\n  area.lineY1 = function() {\n    return arealine().x(x0).y(y1);\n  };\n\n  area.lineX1 = function() {\n    return arealine().x(x1).y(y0);\n  };\n\n  area.defined = function(_) {\n    return arguments.length ? (defined = typeof _ === \"function\" ? _ : constant(!!_), area) : defined;\n  };\n\n  area.curve = function(_) {\n    return arguments.length ? (curve = _, context != null && (output = curve(context)), area) : curve;\n  };\n\n  area.context = function(_) {\n    return arguments.length ? (_ == null ? context = output = null : output = curve(context = _), area) : context;\n  };\n\n  return area;\n}\n","export default function(a, b) {\n  return b < a ? -1 : b > a ? 1 : b >= a ? 0 : NaN;\n}\n","export default function(d) {\n  return d;\n}\n","export var slice = Array.prototype.slice;\n","import formatDecimal from \"./formatDecimal\";\n\nexport var prefixExponent;\n\nexport default function(x, p) {\n  var d = formatDecimal(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1],\n      i = exponent - (prefixExponent = Math.max(-8, Math.min(8, Math.floor(exponent / 3))) * 3) + 1,\n      n = coefficient.length;\n  return i === n ? coefficient\n      : i > n ? coefficient + new Array(i - n + 1).join(\"0\")\n      : i > 0 ? coefficient.slice(0, i) + \".\" + coefficient.slice(i)\n      : \"0.\" + new Array(1 - i).join(\"0\") + formatDecimal(x, Math.max(0, p + i - 1))[0]; // less than 1y!\n}\n","export default function(series, order) {\n  if (!((n = series.length) > 1)) return;\n  for (var i = 1, j, s0, s1 = series[order[0]], n, m = s1.length; i < n; ++i) {\n    s0 = s1, s1 = series[order[i]];\n    for (j = 0; j < m; ++j) {\n      s1[j][1] += s1[j][0] = isNaN(s0[j][1]) ? s0[j][0] : s0[j][1];\n    }\n  }\n}\n","export default function(series) {\n  var n = series.length, o = new Array(n);\n  while (--n >= 0) o[n] = n;\n  return o;\n}\n","// Computes the decimal coefficient and exponent of the specified number x with\n// significant digits p, where x is positive and p is in [1, 21] or undefined.\n// For example, formatDecimal(1.23) returns [\"123\", 0].\nexport default function(x, p) {\n  if ((i = (x = p ? x.toExponential(p - 1) : x.toExponential()).indexOf(\"e\")) < 0) return null; // NaN, ±Infinity\n  var i, coefficient = x.slice(0, i);\n\n  // The string returned by toExponential either has the form \\d\\.\\d+e[-+]\\d+\n  // (e.g., 1.2e+3) or the form \\de[-+]\\d+ (e.g., 1e+3).\n  return [\n    coefficient.length > 1 ? coefficient[0] + coefficient.slice(2) : coefficient,\n    +x.slice(i + 1)\n  ];\n}\n","import formatDecimal from \"./formatDecimal\";\n\nexport default function(x) {\n  return x = formatDecimal(Math.abs(x)), x ? x[1] : NaN;\n}\n","import formatDecimal from \"./formatDecimal\";\n\nexport default function(x, p) {\n  var d = formatDecimal(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1];\n  return exponent < 0 ? \"0.\" + new Array(-exponent).join(\"0\") + coefficient\n      : coefficient.length > exponent + 1 ? coefficient.slice(0, exponent + 1) + \".\" + coefficient.slice(exponent + 1)\n      : coefficient + new Array(exponent - coefficient.length + 2).join(\"0\");\n}\n","import formatDefault from \"./formatDefault\";\nimport formatPrefixAuto from \"./formatPrefixAuto\";\nimport formatRounded from \"./formatRounded\";\n\nexport default {\n  \"\": formatDefault,\n  \"%\": function(x, p) { return (x * 100).toFixed(p); },\n  \"b\": function(x) { return Math.round(x).toString(2); },\n  \"c\": function(x) { return x + \"\"; },\n  \"d\": function(x) { return Math.round(x).toString(10); },\n  \"e\": function(x, p) { return x.toExponential(p); },\n  \"f\": function(x, p) { return x.toFixed(p); },\n  \"g\": function(x, p) { return x.toPrecision(p); },\n  \"o\": function(x) { return Math.round(x).toString(8); },\n  \"p\": function(x, p) { return formatRounded(x * 100, p); },\n  \"r\": formatRounded,\n  \"s\": formatPrefixAuto,\n  \"X\": function(x) { return Math.round(x).toString(16).toUpperCase(); },\n  \"x\": function(x) { return Math.round(x).toString(16); }\n};\n","export default function(x, p) {\n  x = x.toPrecision(p);\n\n  out: for (var n = x.length, i = 1, i0 = -1, i1; i < n; ++i) {\n    switch (x[i]) {\n      case \".\": i0 = i1 = i; break;\n      case \"0\": if (i0 === 0) i0 = i; i1 = i; break;\n      case \"e\": break out;\n      default: if (i0 > 0) i0 = 0; break;\n    }\n  }\n\n  return i0 > 0 ? x.slice(0, i0) + x.slice(i1 + 1) : x;\n}\n","export default function(x) {\n  return x;\n}\n","import formatLocale from \"./locale\";\n\nvar locale;\nexport var format;\nexport var formatPrefix;\n\ndefaultLocale({\n  decimal: \".\",\n  thousands: \",\",\n  grouping: [3],\n  currency: [\"$\", \"\"]\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  format = locale.format;\n  formatPrefix = locale.formatPrefix;\n  return locale;\n}\n","import exponent from \"./exponent\";\nimport formatGroup from \"./formatGroup\";\nimport formatNumerals from \"./formatNumerals\";\nimport formatSpecifier from \"./formatSpecifier\";\nimport formatTypes from \"./formatTypes\";\nimport {prefixExponent} from \"./formatPrefixAuto\";\nimport identity from \"./identity\";\n\nvar prefixes = [\"y\",\"z\",\"a\",\"f\",\"p\",\"n\",\"µ\",\"m\",\"\",\"k\",\"M\",\"G\",\"T\",\"P\",\"E\",\"Z\",\"Y\"];\n\nexport default function(locale) {\n  var group = locale.grouping && locale.thousands ? formatGroup(locale.grouping, locale.thousands) : identity,\n      currency = locale.currency,\n      decimal = locale.decimal,\n      numerals = locale.numerals ? formatNumerals(locale.numerals) : identity,\n      percent = locale.percent || \"%\";\n\n  function newFormat(specifier) {\n    specifier = formatSpecifier(specifier);\n\n    var fill = specifier.fill,\n        align = specifier.align,\n        sign = specifier.sign,\n        symbol = specifier.symbol,\n        zero = specifier.zero,\n        width = specifier.width,\n        comma = specifier.comma,\n        precision = specifier.precision,\n        type = specifier.type;\n\n    // Compute the prefix and suffix.\n    // For SI-prefix, the suffix is lazily computed.\n    var prefix = symbol === \"$\" ? currency[0] : symbol === \"#\" && /[boxX]/.test(type) ? \"0\" + type.toLowerCase() : \"\",\n        suffix = symbol === \"$\" ? currency[1] : /[%p]/.test(type) ? percent : \"\";\n\n    // What format function should we use?\n    // Is this an integer type?\n    // Can this type generate exponential notation?\n    var formatType = formatTypes[type],\n        maybeSuffix = !type || /[defgprs%]/.test(type);\n\n    // Set the default precision if not specified,\n    // or clamp the specified precision to the supported range.\n    // For significant precision, it must be in [1, 21].\n    // For fixed precision, it must be in [0, 20].\n    precision = precision == null ? (type ? 6 : 12)\n        : /[gprs]/.test(type) ? Math.max(1, Math.min(21, precision))\n        : Math.max(0, Math.min(20, precision));\n\n    function format(value) {\n      var valuePrefix = prefix,\n          valueSuffix = suffix,\n          i, n, c;\n\n      if (type === \"c\") {\n        valueSuffix = formatType(value) + valueSuffix;\n        value = \"\";\n      } else {\n        value = +value;\n\n        // Perform the initial formatting.\n        var valueNegative = value < 0;\n        value = formatType(Math.abs(value), precision);\n\n        // If a negative value rounds to zero during formatting, treat as positive.\n        if (valueNegative && +value === 0) valueNegative = false;\n\n        // Compute the prefix and suffix.\n        valuePrefix = (valueNegative ? (sign === \"(\" ? sign : \"-\") : sign === \"-\" || sign === \"(\" ? \"\" : sign) + valuePrefix;\n        valueSuffix = valueSuffix + (type === \"s\" ? prefixes[8 + prefixExponent / 3] : \"\") + (valueNegative && sign === \"(\" ? \")\" : \"\");\n\n        // Break the formatted value into the integer “value” part that can be\n        // grouped, and fractional or exponential “suffix” part that is not.\n        if (maybeSuffix) {\n          i = -1, n = value.length;\n          while (++i < n) {\n            if (c = value.charCodeAt(i), 48 > c || c > 57) {\n              valueSuffix = (c === 46 ? decimal + value.slice(i + 1) : value.slice(i)) + valueSuffix;\n              value = value.slice(0, i);\n              break;\n            }\n          }\n        }\n      }\n\n      // If the fill character is not \"0\", grouping is applied before padding.\n      if (comma && !zero) value = group(value, Infinity);\n\n      // Compute the padding.\n      var length = valuePrefix.length + value.length + valueSuffix.length,\n          padding = length < width ? new Array(width - length + 1).join(fill) : \"\";\n\n      // If the fill character is \"0\", grouping is applied after padding.\n      if (comma && zero) value = group(padding + value, padding.length ? width - valueSuffix.length : Infinity), padding = \"\";\n\n      // Reconstruct the final output based on the desired alignment.\n      switch (align) {\n        case \"<\": value = valuePrefix + value + valueSuffix + padding; break;\n        case \"=\": value = valuePrefix + padding + value + valueSuffix; break;\n        case \"^\": value = padding.slice(0, length = padding.length >> 1) + valuePrefix + value + valueSuffix + padding.slice(length); break;\n        default: value = padding + valuePrefix + value + valueSuffix; break;\n      }\n\n      return numerals(value);\n    }\n\n    format.toString = function() {\n      return specifier + \"\";\n    };\n\n    return format;\n  }\n\n  function formatPrefix(specifier, value) {\n    var f = newFormat((specifier = formatSpecifier(specifier), specifier.type = \"f\", specifier)),\n        e = Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3,\n        k = Math.pow(10, -e),\n        prefix = prefixes[8 + e / 3];\n    return function(value) {\n      return f(k * value) + prefix;\n    };\n  }\n\n  return {\n    format: newFormat,\n    formatPrefix: formatPrefix\n  };\n}\n","export default function(grouping, thousands) {\n  return function(value, width) {\n    var i = value.length,\n        t = [],\n        j = 0,\n        g = grouping[0],\n        length = 0;\n\n    while (i > 0 && g > 0) {\n      if (length + g + 1 > width) g = Math.max(1, width - length);\n      t.push(value.substring(i -= g, i + g));\n      if ((length += g + 1) > width) break;\n      g = grouping[j = (j + 1) % grouping.length];\n    }\n\n    return t.reverse().join(thousands);\n  };\n}\n","export default function(numerals) {\n  return function(value) {\n    return value.replace(/[0-9]/g, function(i) {\n      return numerals[+i];\n    });\n  };\n}\n","import exponent from \"./exponent\";\n\nexport default function(step) {\n  return Math.max(0, -exponent(Math.abs(step)));\n}\n","import interval from \"./interval\";\n\nvar millisecond = interval(function() {\n  // noop\n}, function(date, step) {\n  date.setTime(+date + step);\n}, function(start, end) {\n  return end - start;\n});\n\n// An optimized implementation for this simple case.\nmillisecond.every = function(k) {\n  k = Math.floor(k);\n  if (!isFinite(k) || !(k > 0)) return null;\n  if (!(k > 1)) return millisecond;\n  return interval(function(date) {\n    date.setTime(Math.floor(date / k) * k);\n  }, function(date, step) {\n    date.setTime(+date + step * k);\n  }, function(start, end) {\n    return (end - start) / k;\n  });\n};\n\nexport default millisecond;\nexport var milliseconds = millisecond.range;\n","export var durationSecond = 1e3;\nexport var durationMinute = 6e4;\nexport var durationHour = 36e5;\nexport var durationDay = 864e5;\nexport var durationWeek = 6048e5;\n","import interval from \"./interval\";\nimport {durationDay, durationMinute} from \"./duration\";\n\nvar day = interval(function(date) {\n  date.setHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setDate(date.getDate() + step);\n}, function(start, end) {\n  return (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationDay;\n}, function(date) {\n  return date.getDate() - 1;\n});\n\nexport default day;\nexport var days = day.range;\n","import interval from \"./interval\";\nimport {durationSecond} from \"./duration\";\n\nvar second = interval(function(date) {\n  date.setTime(Math.floor(date / durationSecond) * durationSecond);\n}, function(date, step) {\n  date.setTime(+date + step * durationSecond);\n}, function(start, end) {\n  return (end - start) / durationSecond;\n}, function(date) {\n  return date.getUTCSeconds();\n});\n\nexport default second;\nexport var seconds = second.range;\n","import interval from \"./interval\";\nimport {durationMinute} from \"./duration\";\n\nvar minute = interval(function(date) {\n  date.setTime(Math.floor(date / durationMinute) * durationMinute);\n}, function(date, step) {\n  date.setTime(+date + step * durationMinute);\n}, function(start, end) {\n  return (end - start) / durationMinute;\n}, function(date) {\n  return date.getMinutes();\n});\n\nexport default minute;\nexport var minutes = minute.range;\n","import interval from \"./interval\";\nimport {durationHour, durationMinute} from \"./duration\";\n\nvar hour = interval(function(date) {\n  var offset = date.getTimezoneOffset() * durationMinute % durationHour;\n  if (offset < 0) offset += durationHour;\n  date.setTime(Math.floor((+date - offset) / durationHour) * durationHour + offset);\n}, function(date, step) {\n  date.setTime(+date + step * durationHour);\n}, function(start, end) {\n  return (end - start) / durationHour;\n}, function(date) {\n  return date.getHours();\n});\n\nexport default hour;\nexport var hours = hour.range;\n","import interval from \"./interval\";\n\nvar year = interval(function(date) {\n  date.setMonth(0, 1);\n  date.setHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setFullYear(date.getFullYear() + step);\n}, function(start, end) {\n  return end.getFullYear() - start.getFullYear();\n}, function(date) {\n  return date.getFullYear();\n});\n\n// An optimized implementation for this simple case.\nyear.every = function(k) {\n  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : interval(function(date) {\n    date.setFullYear(Math.floor(date.getFullYear() / k) * k);\n    date.setMonth(0, 1);\n    date.setHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setFullYear(date.getFullYear() + step * k);\n  });\n};\n\nexport default year;\nexport var years = year.range;\n","import interval from \"./interval\";\n\nvar month = interval(function(date) {\n  date.setDate(1);\n  date.setHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setMonth(date.getMonth() + step);\n}, function(start, end) {\n  return end.getMonth() - start.getMonth() + (end.getFullYear() - start.getFullYear()) * 12;\n}, function(date) {\n  return date.getMonth();\n});\n\nexport default month;\nexport var months = month.range;\n","import interval from \"./interval\";\nimport {durationMinute} from \"./duration\";\n\nvar utcMinute = interval(function(date) {\n  date.setUTCSeconds(0, 0);\n}, function(date, step) {\n  date.setTime(+date + step * durationMinute);\n}, function(start, end) {\n  return (end - start) / durationMinute;\n}, function(date) {\n  return date.getUTCMinutes();\n});\n\nexport default utcMinute;\nexport var utcMinutes = utcMinute.range;\n","import interval from \"./interval\";\nimport {durationHour} from \"./duration\";\n\nvar utcHour = interval(function(date) {\n  date.setUTCMinutes(0, 0, 0);\n}, function(date, step) {\n  date.setTime(+date + step * durationHour);\n}, function(start, end) {\n  return (end - start) / durationHour;\n}, function(date) {\n  return date.getUTCHours();\n});\n\nexport default utcHour;\nexport var utcHours = utcHour.range;\n","import interval from \"./interval\";\nimport {durationDay} from \"./duration\";\n\nvar utcDay = interval(function(date) {\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCDate(date.getUTCDate() + step);\n}, function(start, end) {\n  return (end - start) / durationDay;\n}, function(date) {\n  return date.getUTCDate() - 1;\n});\n\nexport default utcDay;\nexport var utcDays = utcDay.range;\n","import interval from \"./interval\";\n\nvar utcYear = interval(function(date) {\n  date.setUTCMonth(0, 1);\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCFullYear(date.getUTCFullYear() + step);\n}, function(start, end) {\n  return end.getUTCFullYear() - start.getUTCFullYear();\n}, function(date) {\n  return date.getUTCFullYear();\n});\n\n// An optimized implementation for this simple case.\nutcYear.every = function(k) {\n  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : interval(function(date) {\n    date.setUTCFullYear(Math.floor(date.getUTCFullYear() / k) * k);\n    date.setUTCMonth(0, 1);\n    date.setUTCHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setUTCFullYear(date.getUTCFullYear() + step * k);\n  });\n};\n\nexport default utcYear;\nexport var utcYears = utcYear.range;\n","import interval from \"./interval\";\n\nvar utcMonth = interval(function(date) {\n  date.setUTCDate(1);\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCMonth(date.getUTCMonth() + step);\n}, function(start, end) {\n  return end.getUTCMonth() - start.getUTCMonth() + (end.getUTCFullYear() - start.getUTCFullYear()) * 12;\n}, function(date) {\n  return date.getUTCMonth();\n});\n\nexport default utcMonth;\nexport var utcMonths = utcMonth.range;\n","import formatLocale from \"./locale\";\n\nvar locale;\nexport var timeFormat;\nexport var timeParse;\nexport var utcFormat;\nexport var utcParse;\n\ndefaultLocale({\n  dateTime: \"%x, %X\",\n  date: \"%-m/%-d/%Y\",\n  time: \"%-I:%M:%S %p\",\n  periods: [\"AM\", \"PM\"],\n  days: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"],\n  shortDays: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"],\n  months: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\n  shortMonths: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"]\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  timeFormat = locale.format;\n  timeParse = locale.parse;\n  utcFormat = locale.utcFormat;\n  utcParse = locale.utcParse;\n  return locale;\n}\n","import {utcFormat} from \"./defaultLocale\";\n\nexport var isoSpecifier = \"%Y-%m-%dT%H:%M:%S.%LZ\";\n\nfunction formatIsoNative(date) {\n  return date.toISOString();\n}\n\nvar formatIso = Date.prototype.toISOString\n    ? formatIsoNative\n    : utcFormat(isoSpecifier);\n\nexport default formatIso;\n","import registry from '../utils/registry';\n\nimport { numberFormat as d3NumberFormatter, timeFormat as d3TimeFormatter } from './d3';\n\nconst formatterRegistry = registry();\n\nformatterRegistry('d3-number', d3NumberFormatter);\nformatterRegistry('d3-time', d3TimeFormatter);\n\nexport {\n  formatterRegistry as default\n};\n","import {isoSpecifier} from \"./isoFormat\";\nimport {utcParse} from \"./defaultLocale\";\n\nfunction parseIsoNative(string) {\n  var date = new Date(string);\n  return isNaN(date) ? null : date;\n}\n\nvar parseIso = +new Date(\"2000-01-01T00:00:00.000Z\")\n    ? parseIsoNative\n    : utcParse(isoSpecifier);\n\nexport default parseIso;\n","import { formatLocale } from 'd3-format';\n\nexport default function formatter(pattern, thousand, decimal) {\n  let locale,\n    d3format;\n\n  /**\n   * Format a value according to the specified pattern created at construct\n   * @private\n   *\n   * @param  {Number} value   The number to be formatted\n   * @return {String}         [description]\n   */\n  function format(value) {\n    return d3format(value);\n  }\n\n   /**\n    * Set the locale for the formatter\n    *\n    * @param  {Object} args   Locale object for formatting\n    * @return {Undefined}      Returns nothing\n    */\n  format.locale = function localeFn(settings) {\n    locale = formatLocale(settings);\n    d3format = locale.format(pattern);\n\n    return this;\n  };\n\n  /**\n   * Resets the formatter using format.locale\n   * @ignore\n   */\n  function reset() {\n    format.locale({\n      decimal: decimal || '.',\n      thousands: thousand || ',',\n      grouping: [3],\n      currency: ['$', '']\n    });\n  }\n  reset();\n\n   /**\n    * Format a value according to a specific pattern\n    * that is not the one specified in the constructor\n    *\n    * @param  {String} p   Pattern\n    * @param  {Number} v   Value\n    * @param  {String} t   Thousand\n    * @param  {String} d   Decimal\n    * @return {String}     Formatted value\n    */\n  format.format = function formatFn(p, v, t, d) {\n    if (t || d) {\n      thousand = t;\n      decimal = d;\n      reset();\n    }\n    return locale.format(p)(v);\n  };\n\n   /**\n   * Change the pattern on existing formatter\n   *\n   * @param  {String} p     Pattern (optional)\n   * @return {String}       Returns the pattern\n   */\n  format.pattern = function patternFn(p) {\n    if (p) {\n      pattern = p;\n      d3format = locale.format(p);\n    }\n    return pattern;\n  };\n\n  return format;\n}\n","import { timeFormatLocale } from 'd3-time-format';\n\nexport default function formatter(pattern) { // eslint-disable-line import/prefer-default-export\n  let locale = timeFormatLocale({\n    dateTime: '%x, %X',\n    date: '%-m/%-d/%Y',\n    time: '%-I:%M:%S %p',\n    periods: ['AM', 'PM'],\n    days: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],\n    shortDays: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],\n    months: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],\n    shortMonths: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']\n  });\n\n  let d3format = locale.format(pattern);\n\n  /**\n   * Format a value according to the specified pattern created at construct\n   *\n   * @param  {Date} value   The number to be formatted\n   * @return {String}         [description]\n   * @private\n   */\n  function format(value) {\n    return d3format(value);\n  }\n\n   /**\n    * Format a value according to a specific pattern\n    * that is not the one specified in the constructor\n    *\n    * @param  {String} p   Pattern\n    * @param  {Date} v   Value\n    * @return {String}     Formatted value\n    */\n  format.format = function formatFn(p, v) {\n    return locale.format(p)(v);\n  };\n\n  /**\n   * Set the locale for the formatter\n   *\n   * @param  {Object} args   Locale object for formatting\n   * @return {Undefined}      Returns nothing\n   */\n  format.locale = function localeFn(...args) {\n    locale = timeFormatLocale(...args);\n    d3format = locale.format(pattern);\n\n    return this;\n  };\n\n  /**\n   * Parse a string to a date according to a pattern\n   *\n   * @param  {String} p   Pattern\n   * @param  {String} v   Value\n   * @return {Date}     Date\n   */\n  format.parse = function parse(p, v) {\n    return locale.parse(p)(v);\n  };\n\n  /**\n   * Returns a parser that parses strings to date according to the pattern\n   *\n   * @param  {String} p   Pattern\n   * @return {Function}   Parser\n   */\n  format.parsePattern = function parsePattern(p) {\n    return locale.parse(p);\n  };\n\n  return format;\n}\n","export default function(series, order) {\n  if (!((n = series.length) > 1)) return;\n  for (var i, j = 0, d, dy, yp, yn, n, m = series[order[0]].length; j < m; ++j) {\n    for (yp = yn = 0, i = 0; i < n; ++i) {\n      if ((dy = (d = series[order[i]][j])[1] - d[0]) >= 0) {\n        d[0] = yp, d[1] = yp += dy;\n      } else if (dy < 0) {\n        d[1] = yn, d[0] = yn += dy;\n      } else {\n        d[0] = yp;\n      }\n    }\n  }\n}\n","import none from \"./none\";\n\nexport default function(series, order) {\n  if (!((n = series.length) > 0)) return;\n  for (var j = 0, s0 = series[order[0]], n, m = s0.length; j < m; ++j) {\n    for (var i = 0, y = 0; i < n; ++i) y += series[i][j][1] || 0;\n    s0[j][1] += s0[j][0] = -y / 2;\n  }\n  none(series, order);\n}\n","import none from \"./none\";\n\nexport default function(series, order) {\n  if (!((n = series.length) > 0)) return;\n  for (var i, n, j = 0, m = series[0].length, y; j < m; ++j) {\n    for (y = i = 0; i < n; ++i) y += series[i][j][1] || 0;\n    if (y) for (i = 0; i < n; ++i) series[i][j][1] /= y;\n  }\n  none(series, order);\n}\n","import none from \"./none\";\n\nexport default function(series, order) {\n  if (!((n = series.length) > 0) || !((m = (s0 = series[order[0]]).length) > 0)) return;\n  for (var y = 0, j = 1, s0, m, n; j < m; ++j) {\n    for (var i = 0, s1 = 0, s2 = 0; i < n; ++i) {\n      var si = series[order[i]],\n          sij0 = si[j][1] || 0,\n          sij1 = si[j - 1][1] || 0,\n          s3 = (sij0 - sij1) / 2;\n      for (var k = 0; k < i; ++k) {\n        var sk = series[order[k]],\n            skj0 = sk[j][1] || 0,\n            skj1 = sk[j - 1][1] || 0;\n        s3 += skj0 - skj1;\n      }\n      s1 += sij0, s2 += s3 * sij0;\n    }\n    s0[j - 1][1] += s0[j - 1][0] = y;\n    if (s1) y -= s2 / s1;\n  }\n  s0[j - 1][1] += s0[j - 1][0] = y;\n  none(series, order);\n}\n","import none from \"./none\";\nimport {sum} from \"./ascending\";\n\nexport default function(series) {\n  var n = series.length,\n      i,\n      j,\n      sums = series.map(sum),\n      order = none(series).sort(function(a, b) { return sums[b] - sums[a]; }),\n      top = 0,\n      bottom = 0,\n      tops = [],\n      bottoms = [];\n\n  for (i = 0; i < n; ++i) {\n    j = order[i];\n    if (top < bottom) {\n      top += sums[j];\n      tops.push(j);\n    } else {\n      bottom += sums[j];\n      bottoms.push(j);\n    }\n  }\n\n  return bottoms.reverse().concat(tops);\n}\n","import none from \"./none\";\n\nexport default function(series) {\n  return none(series).reverse();\n}\n","export default function(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","import ascending from \"./ascending\";\nimport bisector from \"./bisector\";\n\nvar ascendingBisect = bisector(ascending);\nexport var bisectRight = ascendingBisect.right;\nexport var bisectLeft = ascendingBisect.left;\nexport default bisectRight;\n","import ascending from \"./ascending\";\n\nexport default function(compare) {\n  if (compare.length === 1) compare = ascendingComparator(compare);\n  return {\n    left: function(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n      while (lo < hi) {\n        var mid = lo + hi >>> 1;\n        if (compare(a[mid], x) < 0) lo = mid + 1;\n        else hi = mid;\n      }\n      return lo;\n    },\n    right: function(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n      while (lo < hi) {\n        var mid = lo + hi >>> 1;\n        if (compare(a[mid], x) > 0) hi = mid;\n        else lo = mid + 1;\n      }\n      return lo;\n    }\n  };\n}\n\nfunction ascendingComparator(f) {\n  return function(d, x) {\n    return ascending(f(d), x);\n  };\n}\n","export default function(start, stop, step) {\n  start = +start, stop = +stop, step = (n = arguments.length) < 2 ? (stop = start, start = 0, 1) : n < 3 ? 1 : +step;\n\n  var i = -1,\n      n = Math.max(0, Math.ceil((stop - start) / step)) | 0,\n      range = new Array(n);\n\n  while (++i < n) {\n    range[i] = start + i * step;\n  }\n\n  return range;\n}\n","var array = Array.prototype;\n\nexport var map = array.map;\nexport var slice = array.slice;\n","export var deg2rad = Math.PI / 180;\nexport var rad2deg = 180 / Math.PI;\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import {rgb as colorRgb} from \"d3-color\";\nimport basis from \"./basis\";\nimport basisClosed from \"./basisClosed\";\nimport nogamma, {gamma} from \"./color\";\n\nexport default (function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb(start, end) {\n    var r = color((start = colorRgb(start)).r, (end = colorRgb(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function(t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n\n  return rgb;\n})(1);\n\nfunction rgbSpline(spline) {\n  return function(colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i, color;\n    for (i = 0; i < n; ++i) {\n      color = colorRgb(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function(t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nexport var rgbBasis = rgbSpline(basis);\nexport var rgbBasisClosed = rgbSpline(basisClosed);\n","export default function(a, b) {\n  return a = +a, b -= a, function(t) {\n    return a + b * t;\n  };\n}\n","import value from \"./value\";\n\nexport default function(a, b) {\n  var i = {},\n      c = {},\n      k;\n\n  if (a === null || typeof a !== \"object\") a = {};\n  if (b === null || typeof b !== \"object\") b = {};\n\n  for (k in b) {\n    if (k in a) {\n      i[k] = value(a[k], b[k]);\n    } else {\n      c[k] = b[k];\n    }\n  }\n\n  return function(t) {\n    for (k in i) c[k] = i[k](t);\n    return c;\n  };\n}\n","import number from \"./number\";\n\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n    reB = new RegExp(reA.source, \"g\");\n\nfunction zero(b) {\n  return function() {\n    return b;\n  };\n}\n\nfunction one(b) {\n  return function(t) {\n    return b(t) + \"\";\n  };\n}\n\nexport default function(a, b) {\n  var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b\n      am, // current match in a\n      bm, // current match in b\n      bs, // string preceding current number in b, if any\n      i = -1, // index in s\n      s = [], // string constants and placeholders\n      q = []; // number interpolators\n\n  // Coerce inputs to strings.\n  a = a + \"\", b = b + \"\";\n\n  // Interpolate pairs of numbers in a & b.\n  while ((am = reA.exec(a))\n      && (bm = reB.exec(b))) {\n    if ((bs = bm.index) > bi) { // a string precedes the next number in b\n      bs = b.slice(bi, bs);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n    if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match\n      if (s[i]) s[i] += bm; // coalesce with previous string\n      else s[++i] = bm;\n    } else { // interpolate non-matching numbers\n      s[++i] = null;\n      q.push({i: i, x: number(am, bm)});\n    }\n    bi = reB.lastIndex;\n  }\n\n  // Add remains of b.\n  if (bi < b.length) {\n    bs = b.slice(bi);\n    if (s[i]) s[i] += bs; // coalesce with previous string\n    else s[++i] = bs;\n  }\n\n  // Special optimization for only a single match.\n  // Otherwise, interpolate each of the numbers and rejoin the string.\n  return s.length < 2 ? (q[0]\n      ? one(q[0].x)\n      : zero(b))\n      : (b = q.length, function(t) {\n          for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n          return s.join(\"\");\n        });\n}\n","import {color} from \"d3-color\";\nimport rgb from \"./rgb\";\nimport array from \"./array\";\nimport date from \"./date\";\nimport number from \"./number\";\nimport object from \"./object\";\nimport string from \"./string\";\nimport constant from \"./constant\";\n\nexport default function(a, b) {\n  var t = typeof b, c;\n  return b == null || t === \"boolean\" ? constant(b)\n      : (t === \"number\" ? number\n      : t === \"string\" ? ((c = color(b)) ? (b = c, rgb) : string)\n      : b instanceof color ? rgb\n      : b instanceof Date ? date\n      : Array.isArray(b) ? array\n      : typeof b.valueOf !== \"function\" && typeof b.toString !== \"function\" || isNaN(b) ? object\n      : number)(a, b);\n}\n","export default function(a, b) {\n  var d = new Date;\n  return a = +a, b -= a, function(t) {\n    return d.setTime(a + b * t), d;\n  };\n}\n","import value from \"./value\";\n\nexport default function(a, b) {\n  var nb = b ? b.length : 0,\n      na = a ? Math.min(nb, a.length) : 0,\n      x = new Array(na),\n      c = new Array(nb),\n      i;\n\n  for (i = 0; i < na; ++i) x[i] = value(a[i], b[i]);\n  for (; i < nb; ++i) c[i] = b[i];\n\n  return function(t) {\n    for (i = 0; i < na; ++i) c[i] = x[i](t);\n    return c;\n  };\n}\n","export default function(a, b) {\n  return a = +a, b -= a, function(t) {\n    return Math.round(a + b * t);\n  };\n}\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","export default function(x) {\n  return +x;\n}\n","import {tickStep} from \"d3-array\";\nimport {format, formatPrefix, formatSpecifier, precisionFixed, precisionPrefix, precisionRound} from \"d3-format\";\n\nexport default function(domain, count, specifier) {\n  var start = domain[0],\n      stop = domain[domain.length - 1],\n      step = tickStep(start, stop, count == null ? 10 : count),\n      precision;\n  specifier = formatSpecifier(specifier == null ? \",f\" : specifier);\n  switch (specifier.type) {\n    case \"s\": {\n      var value = Math.max(Math.abs(start), Math.abs(stop));\n      if (specifier.precision == null && !isNaN(precision = precisionPrefix(step, value))) specifier.precision = precision;\n      return formatPrefix(specifier, value);\n    }\n    case \"\":\n    case \"e\":\n    case \"g\":\n    case \"p\":\n    case \"r\": {\n      if (specifier.precision == null && !isNaN(precision = precisionRound(step, Math.max(Math.abs(start), Math.abs(stop))))) specifier.precision = precision - (specifier.type === \"e\");\n      break;\n    }\n    case \"f\":\n    case \"%\": {\n      if (specifier.precision == null && !isNaN(precision = precisionFixed(step))) specifier.precision = precision - (specifier.type === \"%\") * 2;\n      break;\n    }\n  }\n  return format(specifier);\n}\n","import exponent from \"./exponent\";\n\nexport default function(step, value) {\n  return Math.max(0, Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3 - exponent(Math.abs(step)));\n}\n","import exponent from \"./exponent\";\n\nexport default function(step, max) {\n  step = Math.abs(step), max = Math.abs(max) - step;\n  return Math.max(0, exponent(max) - exponent(step)) + 1;\n}\n","export default function(s) {\n  return s.match(/.{6}/g).map(function(x) {\n    return \"#\" + x;\n  });\n}\n","import colors from \"./colors\";\n\nexport default colors(\"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf\");\n","import colors from \"./colors\";\n\nexport default colors(\"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6\");\n","import colors from \"./colors\";\n\nexport default colors(\"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9\");\n","import colors from \"./colors\";\n\nexport default colors(\"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5\");\n","import {cubehelix} from \"d3-color\";\nimport {interpolateCubehelixLong} from \"d3-interpolate\";\n\nexport default interpolateCubehelixLong(cubehelix(300, 0.5, 0.0), cubehelix(-240, 0.5, 1.0));\n","import {cubehelix} from \"d3-color\";\nimport {interpolateCubehelixLong} from \"d3-interpolate\";\n\nexport var warm = interpolateCubehelixLong(cubehelix(-100, 0.75, 0.35), cubehelix(80, 1.50, 0.8));\n\nexport var cool = interpolateCubehelixLong(cubehelix(260, 0.75, 0.35), cubehelix(80, 1.50, 0.8));\n\nvar rainbow = cubehelix();\n\nexport default function(t) {\n  if (t < 0 || t > 1) t -= Math.floor(t);\n  var ts = Math.abs(t - 0.5);\n  rainbow.h = 360 * t - 100;\n  rainbow.s = 1.5 - 1.5 * ts;\n  rainbow.l = 0.8 - 0.9 * ts;\n  return rainbow + \"\";\n}\n","import { scaleThreshold, scaleLinear } from 'd3-scale';\nimport { notNumber } from '../../utils/is-number';\nimport minmax from '../../utils/min-max';\nimport sequential from './sequential';\nimport resolveSettings from '../settings-resolver';\n\n// const DEFAULT_COLORS = ['rgb(180,221,212)', 'rgb(34, 83, 90)'];\n\nconst DEFAULT_SETTINGS = {\n  domain: [],\n  range: [],\n  invert: false,\n  min: NaN,\n  max: NaN,\n  nice: false\n};\n\nfunction generateDomain(range, min, max) {\n  const len = range.length;\n  if (len === 2) {\n    return [min + ((max - min) / 2)];\n  }\n  const domain = [];\n  const part = (max - min) / len;\n\n  for (let i = 1; i < len; i++) {\n    domain.push(min + (part * i));\n  }\n  return domain;\n}\n\nfunction getBreaks(domain) {\n  const ret = [];\n  for (let i = 0; i < domain.length - 1; i++) {\n    ret.push((domain[i] + domain[i + 1]) / 2);\n  }\n  return ret;\n}\n\nfunction generateRange(domain, colors, min, max) {\n  min = domain[0];\n  max = domain && domain.length >= 2 ? domain[domain.length - 1] : max;\n  const seq = sequential().domain([min, max]).range(colors);\n  const values = [min, ...getBreaks(domain), max];\n  return values.map(v => seq(v));\n}\n\nfunction generateNiceDomain(range, min, max) {\n  const numPoints = range.length === 2 ? 10 : Math.max(1, range.length);\n  const lin = scaleLinear().domain([min, max]).nice(numPoints);\n  const domain = lin.ticks(numPoints);\n\n  if (!range || !range.length) {\n    return domain;\n  }\n\n  // remove values from endpoints\n  const num = Math.max(0, range.length - 1);\n  while (domain.length > num) {\n    if (domain[0] - min <= max - domain[domain.length - 1]) {\n      domain.shift();\n    } else {\n      domain.pop();\n    }\n  }\n\n  return domain;\n}\n\n/**\n * @typedef {object} scale--threshold-color\n * @property {string} [type='threshold-color']\n * @property {number[]} [domain] Values defining the thresholds\n * @property {string[]} [range] - CSS color values of the output range\n * @property {boolean} [invert=false] - Invert range\n * @property {number} [min] - Set an explicit minimum value\n * @property {number} [max] - Set an explicit maximum value\n * @property {boolean} [nice=false] If set to true, will generate 'nice' domain values. Ignored if domain is set.\n */\n\n/**\n * @alias scaleThresholdColor\n * @private\n * @param { object } [settings] Settings for this scale. If both domain and range are specified, they have to fulfill domain.length === range.length + 1,  otherwise they will be overriden.\n * @param { number[] } [settings.domain] Values defining the thresholds.\n * @param { color[] } [settings.range] CSS color values of the output range.\n * @param { boolean } [settings.nice=false] If set to true, will generate 'nice' domain values. Ignored if domain is set.\n * @param { number } [settings.min] Minimum value to generate domain extent from. Ignored if domain is set.\n * @param { number } [settings.max] Maximum value to generate domain extend from. Ignored if domain is set.\n * @param { field[] } [fields] Fields to dynamically calculate the domain extent from. Ignored if min/max are set.\n * @return { thresholdColor }\n *\n * @example\n * let t = threshold({\n *   range: ['black', 'white'],\n *   domain: [25,50,75],\n *   max: 100,\n *   min: 0\n * });\n * t.domain(); // [25,50,75]\n * t.range(); // Generates from colors and domain: ['rgb(0,0,0)','rgb(85,85,85)','rgb(170,170,170)','rgb(255,255,255)']\n */\n\nexport default function scaleThresholdColor(settings = {}, data = {}, resources = {}) {\n  const d3Scale = scaleThreshold();\n  const stgns = resolveSettings(settings, DEFAULT_SETTINGS, { data, resources });\n  const isDomain = Array.isArray(stgns.domain) && stgns.domain.length;\n  const isRange = Array.isArray(stgns.range) && stgns.range.length;\n\n  /**\n   * @alias thresholdColor\n   * @private\n   * @param { object } v Object literal containing a 'value' property.\n   * @return { string } A CSS color from the scale's range.\n   */\n  function fn(v) {\n    if (notNumber(v)) {\n      return NaN;\n    }\n    return d3Scale(v);\n  }\n\n  Object.keys(d3Scale).forEach(key => (fn[key] = d3Scale[key]));\n\n  const fields = data.fields;\n\n  const [min, max] = minmax(stgns, fields);\n  const num = isDomain ? stgns.domain.length : -1;\n  const DEFAULT_COLORS = resources.theme ? resources.theme.palette('sequential', num > 0 ? num : 2) : [];\n\n  let range = isRange ? stgns.range : DEFAULT_COLORS;\n  let domain = [];\n\n  if (isDomain) {\n    domain = stgns.domain;\n  } else if (stgns.nice) {\n    domain = generateNiceDomain(range, min, max);\n  } else {\n    domain = [min + ((max - min) / 2)];\n  }\n\n  if (range.length > domain.length + 1) {\n    // Generate limits from range\n    domain = generateDomain(range, min, max);\n  } else if (range.length < domain.length + 1) {\n    // Generate additional colors\n    range = generateRange(domain, range, min, max);\n  }\n\n  fn.data = () => data;\n\n  fn.range(stgns.invert ? range.slice().reverse() : range);\n  fn.domain(domain);\n\n  return fn;\n}\n","import {\n  scaleOrdinal\n} from 'd3-scale';\nimport extend from 'extend';\nimport resolveSettings from './settings-resolver';\n\nconst DEFAULT_SETTINGS = {\n  domain: [],\n  range: []\n};\n\n /**\n * @alias scaleOrdinal\n * @private\n * @param { Object } settings\n * @param { field[] } [fields]\n * @param { dataset } data\n * @return { ordinal }\n */\nexport default function ordinal(settings = {}, data = {}, resources = {}) {\n  /**\n   * An augmented {@link https://github.com/d3/d3-scale#_ordinal|d3 ordinal scale}\n   * @private\n   * @alias ordinal\n   * @param { Object }\n   * @return { number }\n   */\n  const fn = scaleOrdinal();\n\n  const ctx = { data, resources };\n  const stgns = resolveSettings(settings, DEFAULT_SETTINGS, ctx);\n\n  const valueFn = typeof settings.value === 'function' ? settings.value : d => d.datum.value;\n  const labelFn = typeof settings.label === 'function' ? settings.label : d => d.datum.label;\n  const items = data.items || [];\n  const domainToDataMapping = {};\n  const values = [];\n  const labels = [];\n\n  for (let i = 0; i < items.length; i++) {\n    const arg = extend({ datum: items[i] }, ctx);\n    const v = valueFn(arg, i);\n    if (values.indexOf(v) === -1) {\n      values.push(v);\n      labels.push(labelFn(arg, i));\n      domainToDataMapping[v] = i;\n    }\n  }\n\n  fn.data = () => data;\n\n  fn.labels = () => labels;\n\n  fn.label = domainValue => labels[values.indexOf(domainValue)];\n\n  fn.datum = domainValue => items[domainToDataMapping[domainValue]];\n\n  fn.range(stgns.range);\n\n  if (Array.isArray(stgns.domain) && stgns.domain.length) {\n    fn.domain(stgns.domain);\n  } else {\n    fn.domain(values);\n  }\n  return fn;\n}\n","import ordinal from '../ordinal';\nimport resolveSettings from '../settings-resolver';\n\nconst DEFAULT_SETTINGS = {\n  domain: [],\n  range: [],\n  unknown: undefined\n};\n\nconst DEFAULT_EXPLICIT_SETTINGS = {\n  domain: [],\n  range: []\n};\n\n/**\n * @typedef {object} scale--categorical-color\n * @property {string} [type='categorical-color']\n * @property {string[]} [range=false] - CSS color values of the output range\n * @property {string} [unknown] - {@link https://github.com/d3/d3-scale#ordinal_unknown}\n * @property {object} [explicit] - Explicitly bind values to an output\n * @property {object[]} [explicit.domain[]] - Values to bind\n * @property {string[]} [explicit.range[]] - Output range\n */\n\n /**\n * An ordinal scale with the output range set to default colors, as defined by *scaleCategorical.range*\n * @alias scaleCategorical\n * @private\n * @param { Object } settings\n * @param { field[] } [fields]\n * @param { dataset } [dataset]\n * @return { ordinal }\n */\nexport default function scaleCategorical(settings = {}, data = {}, resources = {}) {\n  const s = ordinal(settings, data, resources);\n  const theme = resources.theme;\n  const stgns = resolveSettings(settings, DEFAULT_SETTINGS, { data, resources });\n  stgns.explicit = resolveSettings(settings.explicit, DEFAULT_EXPLICIT_SETTINGS, { data, resources });\n\n  let range;\n  if (!Array.isArray(stgns.range) || stgns.range.length === 0) {\n    range = theme ? theme.palette('categorical', s.domain().length).slice() : [];\n  } else {\n    range = stgns.range.slice();\n  }\n\n  if (stgns.unknown) {\n    s.unknown(stgns.unknown);\n  } else if (theme && theme.palette('unknown')) {\n    let un = theme.palette('unknown');\n    s.unknown(un[0]);\n  }\n\n  if (Array.isArray(stgns.explicit.domain) && stgns.explicit.domain.length) {\n    const domain = s.domain().slice();\n    const explicitDomain = stgns.explicit.domain;\n    // duplicate range values to cover entire domain\n    const numCopies = Math.floor(domain.length / range.length);\n    for (let i = 1; i < numCopies + 1; i *= 2) {\n      range = range.concat(range);\n    }\n    // inject explicit colors\n    const explicitRange = Array.isArray(stgns.explicit.range) ? stgns.explicit.range : [];\n    const order = explicitDomain.map((d, i) => [domain.indexOf(d), d, explicitRange[i]]).sort((a, b) => a[0] - b[0]);\n    order.forEach((v) => {\n      const idx = domain.indexOf(v[1]);\n      if (idx !== -1) {\n        range.splice(idx, 0, v[2]);\n      }\n    });\n    // cutoff excess range values\n    range.length = domain.length;\n  }\n  s.range(range);\n\n  return s;\n}\n","import EventEmitter from 'node-event-emitter';\n\nexport default {\n  /**\n   * Function used to add event handling to objects passed in.\n   * @private\n   * @param {Object} obj Object instance that will get event handling.\n   */\n  mixin(obj) {\n    Object.keys(EventEmitter.prototype).forEach((key) => {\n      obj[key] = EventEmitter.prototype[key];\n    });\n    EventEmitter.init(obj);\n    return obj;\n  }\n};\n","import brush from './brush';\nimport registry from '../utils/registry';\n\nconst reg = registry();\n\nexport function register(type, b) {\n  if (b) {\n    reg.add(type, b);\n  }\n  return reg.get(type);\n}\n\nexport default brush;\n","var tau = 2 * Math.PI,\n    amplitude = 1,\n    period = 0.3;\n\nexport var elasticIn = (function custom(a, p) {\n  var s = Math.asin(1 / (a = Math.max(1, a))) * (p /= tau);\n\n  function elasticIn(t) {\n    return a * Math.pow(2, 10 * --t) * Math.sin((s - t) / p);\n  }\n\n  elasticIn.amplitude = function(a) { return custom(a, p * tau); };\n  elasticIn.period = function(p) { return custom(a, p); };\n\n  return elasticIn;\n})(amplitude, period);\n\nexport var elasticOut = (function custom(a, p) {\n  var s = Math.asin(1 / (a = Math.max(1, a))) * (p /= tau);\n\n  function elasticOut(t) {\n    return 1 - a * Math.pow(2, -10 * (t = +t)) * Math.sin((t + s) / p);\n  }\n\n  elasticOut.amplitude = function(a) { return custom(a, p * tau); };\n  elasticOut.period = function(p) { return custom(a, p); };\n\n  return elasticOut;\n})(amplitude, period);\n\nexport var elasticInOut = (function custom(a, p) {\n  var s = Math.asin(1 / (a = Math.max(1, a))) * (p /= tau);\n\n  function elasticInOut(t) {\n    return ((t = t * 2 - 1) < 0\n        ? a * Math.pow(2, 10 * t) * Math.sin((s - t) / p)\n        : 2 - a * Math.pow(2, -10 * t) * Math.sin((s + t) / p)) / 2;\n  }\n\n  elasticInOut.amplitude = function(a) { return custom(a, p * tau); };\n  elasticInOut.period = function(p) { return custom(a, p); };\n\n  return elasticInOut;\n})(amplitude, period);\n","var exponent = 3;\n\nexport var polyIn = (function custom(e) {\n  e = +e;\n\n  function polyIn(t) {\n    return Math.pow(t, e);\n  }\n\n  polyIn.exponent = custom;\n\n  return polyIn;\n})(exponent);\n\nexport var polyOut = (function custom(e) {\n  e = +e;\n\n  function polyOut(t) {\n    return 1 - Math.pow(1 - t, e);\n  }\n\n  polyOut.exponent = custom;\n\n  return polyOut;\n})(exponent);\n\nexport var polyInOut = (function custom(e) {\n  e = +e;\n\n  function polyInOut(t) {\n    return ((t *= 2) <= 1 ? Math.pow(t, e) : 2 - Math.pow(2 - t, e)) / 2;\n  }\n\n  polyInOut.exponent = custom;\n\n  return polyInOut;\n})(exponent);\n","var overshoot = 1.70158;\n\nexport var backIn = (function custom(s) {\n  s = +s;\n\n  function backIn(t) {\n    return t * t * ((s + 1) * t - s);\n  }\n\n  backIn.overshoot = custom;\n\n  return backIn;\n})(overshoot);\n\nexport var backOut = (function custom(s) {\n  s = +s;\n\n  function backOut(t) {\n    return --t * t * ((s + 1) * t + s) + 1;\n  }\n\n  backOut.overshoot = custom;\n\n  return backOut;\n})(overshoot);\n\nexport var backInOut = (function custom(s) {\n  s = +s;\n\n  function backInOut(t) {\n    return ((t *= 2) < 1 ? t * t * ((s + 1) * t - s) : (t -= 2) * t * ((s + 1) * t + s) + 2) / 2;\n  }\n\n  backInOut.overshoot = custom;\n\n  return backInOut;\n})(overshoot);\n","import { normalizeSettings, resolveForItem } from '../chart-components/property-resolver';\nimport { updateScaleSize } from '../scales';\n\nconst externals = {\n  normalizeSettings,\n  resolveForItem,\n  updateScaleSize\n};\n\nexport default function (resources, deps = externals) {\n  let cache = {};\n\n  function resolve({\n    data,\n    settings,\n    defaults = {},\n    scaled\n  }) {\n    const norm = cache.norm = deps.normalizeSettings(settings, defaults, resources.chart);\n\n    const res = {\n      scale: resources.chart.scale,\n      formatter: resources.chart.formatter\n    };\n\n    if (scaled) {\n      Object.keys(scaled).forEach((key) => {\n        if (norm[key]) {\n          deps.updateScaleSize(norm, key, scaled[key]);\n        }\n      });\n    }\n\n    const resolved = [];\n\n    if (data && Array.isArray(data.items)) {\n      for (let i = 0, len = data.items.length; i < len; i++) {\n        const context = {\n          datum: data.items[i],\n          data,\n          resources: res\n        };\n        let obj = deps.resolveForItem(context, cache.norm);\n        obj.data = data.items[i];\n        resolved.push(obj);\n      }\n    } else {\n      const context = {\n        data,\n        resources: res\n      };\n      let obj = deps.resolveForItem(context, cache.norm);\n      return {\n        settings: cache.norm,\n        item: obj\n      };\n    }\n\n    return {\n      settings: cache.norm,\n      items: resolved\n    };\n  }\n\n  return {\n    resolve\n  };\n}\n","import registry from '../utils/registry';\n\nconst rendererRegistry = (reg) => {\n  let f = registry(reg);\n  f.prio = p => (p ? f.default(p[0]) : [f.default()]);\n  f.types = () => f.getKeys();\n  return f;\n};\n\nexport {\n  rendererRegistry as default\n};\n","// import * as mixins from './component-mixins';\nimport registry from '../utils/registry';\n\nconst componentRegistry = registry();\n\n// TODO - mixins?\n\nexport {\n  componentRegistry as default\n};\n\n// export default function componentFactory(parentRegistry) {\n//   const reg = registry(parentRegistry);\n\n//   function component(name, definition) {\n//     if (definition) {\n//       reg.register(name, definition);\n//     }\n//     return reg.get(name);\n//   }\n//   component.mixin = mixins.add;\n\n//   return component;\n// }\n","import registry from '../utils/registry';\nimport dataset from './dataset';\n\nconst dataRegistry = registry();\n\ndataRegistry.default('matrix');\n\ndataRegistry('matrix', dataset);\n\ndataRegistry('default', dataset); // deprecated\n\nexport {\n  dataRegistry as default\n};\n","import registry from '../utils/registry';\nimport native from '../../web/interactions/native';\n\nconst reg = registry();\n\nreg('native', native);\n\nexport default reg;\n","\n/**\n * Manages event handlers for native events\n * @private\n */\nfunction native(chart, mediator, element) {\n  let instance = { chart, mediator, element };\n  let nativeEvents = [];\n  let settings;\n  let itKey;\n  let isOn = true;\n\n  /**\n   * Set default settings\n   * @private\n   */\n  function setDefaultSettings(newSettings) {\n    itKey = newSettings.key;\n    settings = newSettings;\n    settings.events = settings.events || [];\n    if (settings.enable === undefined) {\n      settings.enable = true;\n    }\n  }\n\n  /**\n   * Add native events based on settings\n   * @private\n   */\n  function addEvents() {\n    if (typeof settings.enable === 'function') {\n      settings.enable = settings.enable.bind(instance)();\n    }\n    if (!settings.enable) {\n      return; // interaction is disabled\n    }\n    Object.keys(settings.events).forEach((key) => {\n      const listener = settings.events[key].bind(instance);\n      element.addEventListener(key, listener);\n      nativeEvents.push({ key, listener });\n    });\n  }\n\n  /**\n   * Removes all added native events\n   * @private\n   */\n  function removeAddedEvents() {\n    // remove added native events\n    nativeEvents.forEach(({ key, listener }) => {\n      element.removeEventListener(key, listener);\n    });\n    nativeEvents = [];\n  }\n\n  return {\n    /**\n     * Getter for the key.\n     * @private\n     */\n    get key() {\n      return itKey;\n    },\n    /**\n     * Updates this with new settings\n     * @private\n     * @param {object} newSettings\n     * @param {string} [newSettings.type] - The interaction type. Is 'native' for this component\n     * @param {boolean|function} [newSettings.enable=true] - Should the interactions defined here be enabled or not.\n     * This is only run when adding event handlers. In effect at startup, update or during on/off.\n     * It does not run during every event loop.\n     * @param {array} [newSettings.gestures] - The keys in this object is the names of native events\n     * that should be added to the chart element and they should all point to function which\n     * will be the corresponding event handler.\n     */\n    set(newSettings) {\n      setDefaultSettings(newSettings);\n      removeAddedEvents();\n      if (isOn) {\n        addEvents();\n      }\n    },\n    /**\n     * Turns off interactions\n     * @private\n     */\n    off() {\n      isOn = false;\n      removeAddedEvents();\n    },\n    /**\n     * Turns off interactions\n     * @private\n     */\n    on() {\n      isOn = true;\n      if (nativeEvents.length === 0) {\n        addEvents();\n      }\n    },\n    /**\n     * Destroys and unbinds all event handlers\n     * @private\n     */\n    destroy() {\n      removeAddedEvents();\n      instance = null;\n      settings = null;\n    }\n  };\n}\n\nexport {\n  native as default\n};\n","import { path2dPolyfill } from 'path2d-polyfill';\n\nif (typeof window !== 'undefined') {\n  path2dPolyfill(window);\n}\n","import { buildShapes } from './box-shapes';\nimport complexResolver from './box-resolver';\n\nconst DEFAULT_DATA_SETTINGS = {\n  line: {\n    show: true,\n    stroke: '#000',\n    strokeWidth: 1\n  },\n  median: {\n    show: true,\n    stroke: '#000',\n    strokeWidth: 1\n  },\n  whisker: {\n    show: true,\n    stroke: '#000',\n    strokeWidth: 1,\n    fill: '',\n    type: 'line',\n    width: 1\n  },\n  box: {\n    show: true,\n    fill: '#fff',\n    stroke: '#000',\n    strokeWidth: 1,\n    width: 1,\n    maxWidthPx: undefined,\n    minWidthPx: 1,\n    minHeightPx: 1\n  }\n};\n\nconst dataKeys = Object.keys(DEFAULT_DATA_SETTINGS);\n\nconst component = {\n  require: ['chart', 'resolver'],\n  defaultSettings: {\n    settings: {},\n    data: {},\n    style: {\n      box: '$shape',\n      line: '$shape-guide',\n      whisker: '$shape-guide',\n      median: '$shape-guide--inverted'\n    }\n  },\n  created() {\n    this.rect = { x: 0, y: 0, width: 0, height: 0 };\n    this.state = {};\n  },\n  beforeRender(opts) {\n    this.rect = opts.size;\n  },\n  render({ data }) {\n    const { width, height } = this.rect;\n\n    const flipXY = this.settings.settings.orientation === 'horizontal';\n\n    const { style, resolver } = this;\n\n    const resolved = complexResolver({\n      keys: dataKeys,\n      data,\n      defaultSettings: DEFAULT_DATA_SETTINGS,\n      style,\n      settings: this.settings.settings,\n      width,\n      height,\n      resolver\n    });\n\n    const { settings, items } = resolved;\n\n    const shapes = buildShapes({\n      items,\n      settings,\n      width,\n      height,\n      flipXY,\n      resolved,\n      keys: dataKeys\n    });\n\n    return shapes;\n  }\n};\n\nexport default component;\n","import extend from 'extend';\n\n/**\n * Resolve a complex object using the built-in resolver from this.resolver in component\n * @ignore\n */\nexport default function complexResolver({ keys, data, defaultSettings, style, settings, width, height, resolver }) {\n  const defaults = extend(true, {}, defaultSettings || {}, style || {});\n  const scaled = {\n    major: settings.orientation === 'horizontal' ? height : width,\n    minor: settings.orientation === 'horizontal' ? width : height\n  };\n\n  const majorSettings = settings.major;\n\n  let majorResolved;\n\n  if (typeof majorSettings === 'object' && typeof majorSettings.ref === 'object' && (typeof majorSettings.ref.start !== 'undefined' && typeof majorSettings.ref.end !== 'undefined')) {\n    // temporary backwards compatibility\n    majorResolved = resolver.resolve({\n      data,\n      defaults: {\n        start: 0,\n        end: 1\n      },\n      scaled,\n      settings: extend(true, {}, {\n        binStart: { scale: settings.major.scale, ref: settings.major.ref.start },\n        binEnd: { scale: settings.major.scale, ref: settings.major.ref.end }\n      })\n    });\n  } else if (typeof majorSettings === 'object' && (typeof majorSettings.binStart !== 'undefined' && typeof majorSettings.binEnd !== 'undefined')) {\n    majorResolved = resolver.resolve({\n      data,\n      defaults: {\n        start: 0,\n        end: 1\n      },\n      scaled,\n      settings: extend(true, {}, {\n        binStart: { scale: settings.major.scale, ref: 'binStart' },\n        binEnd: { scale: settings.major.scale, ref: 'binEnd' }\n      }, settings.major)\n    });\n  } else {\n    majorResolved = resolver.resolve({\n      data,\n      scaled,\n      defaults: {\n        major: 0.5\n      },\n      settings: {\n        major: settings.major\n      }\n    });\n  }\n\n  const minorSettings = settings.minor || {};\n\n  const minorResolved = resolver.resolve({\n    data,\n    defaults: {\n      start: 0,\n      end: 1\n    },\n    scaled,\n    settings: extend(true, {}, {\n      start: { scale: minorSettings.scale, ref: 'start' },\n      end: { scale: minorSettings.scale, ref: 'end' },\n      min: { scale: minorSettings.scale, ref: 'min' },\n      max: { scale: minorSettings.scale, ref: 'max' },\n      med: { scale: minorSettings.scale, ref: 'med' }\n    }, minorSettings)\n  });\n\n  let key;\n  let ext = {\n    major: majorResolved,\n    minor: minorResolved\n  };\n\n  for (let ki = 0, len = keys.length; ki < len; ki++) {\n    key = keys[ki];\n    ext[key] = resolver.resolve({\n      data,\n      defaults: defaults[key],\n      settings: settings[key],\n      scaled\n    });\n  }\n\n  return ext;\n}\n","/**\n * A list of supported attributes in lower camelCase notation mapped to corresponding kebab-case notation.\n * The kebab-case notations are a sub-set of SVG attributes (https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute).\n * @ignore\n */\nconst mappedAttributes = {\n  fill: 'fill',\n  stroke: 'stroke',\n  opacity: 'opacity',\n  strokeWidth: 'stroke-width',\n  fontFamily: 'font-family',\n  fontSize: 'font-size',\n  baseline: 'dominant-baseline', // Special case where we have defined our own attribute name\n  dominantBaseline: 'dominant-baseline',\n  anchor: 'text-anchor', // Special case where we have defined our own attribute name\n  textAnchor: 'text-anchor',\n  maxWidth: 'maxWidth',\n  transform: 'transform',\n  strokeDasharray: 'stroke-dasharray',\n  id: 'id'\n};\n\n/**\n * Takes a target object and assign each supported attribute from a source object to that target.\n * Each supported attributes is converted to a mapped kebab-case notation.\n * @ignore\n *\n * @param {object} target - Target object on which to assign mapped attribute values\n * @param {object} source - Source object\n */\nfunction assignMappedAttribute(target, source) {\n  Object.keys(mappedAttributes).forEach((key) => {\n    const sourceValue = source[key];\n    if (typeof sourceValue !== 'undefined') {\n      const mappedKey = mappedAttributes[key];\n      target[mappedKey] = sourceValue;\n    }\n  });\n}\n\nexport { mappedAttributes, assignMappedAttribute };\n\n","import pointsToPath from '../utils/points-to-path';\nimport { rotate } from '../math/vector';\nimport { toRadians } from '../math/angles';\n\nconst DIRECTION_TO_ANGLE = {\n  up: 0,\n  down: 180,\n  left: 90,\n  right: -90\n};\n\n/**\n * @extends symbol-config\n * @typedef {object} symbol--triangle\n * @property {string} [direction='up'] - Direction of the triangle ('up'|'down'|'left'|'right')\n */\nfunction triangle(options) {\n  const size = options.size;\n  const p = { x: options.x, y: options.y };\n  const directionAngle = DIRECTION_TO_ANGLE[options.direction] || 0;\n  const halfSize = (size / 2);\n  const left = options.x - halfSize;\n  const top = options.y - halfSize;\n  let points = [\n    { x: left, y: top + size },\n    { x: left + halfSize, y: top },\n    { x: left + size, y: top + size },\n    { x: left, y: top + size }\n  ];\n\n  const radians = toRadians(directionAngle);\n  points = points.map(pp => rotate(pp, radians, p));\n\n  return {\n    type: 'path',\n    fill: 'black',\n    d: pointsToPath(points)\n  };\n}\n\nexport {\n  triangle as default\n};\n","/**\n * @extends symbol-config\n * @typedef {object} symbol--circle\n */\nfunction circle(options) {\n  return {\n    type: 'circle',\n    fill: 'black',\n    cx: options.x,\n    cy: options.y,\n    r: options.size / 2,\n    collider: {\n      type: 'circle'\n    }\n  };\n}\n\nexport {\n  circle as default\n};\n","import pointsToPath from '../utils/points-to-path';\n\n/**\n * @extends symbol-config\n * @typedef {object} symbol--diamond\n */\nfunction diamond(options) {\n  const size = options.size;\n  const left = options.x - (size / 2);\n  const top = options.y - (size / 2);\n  const points = [\n    { x: left, y: top + (size / 2) },\n    { x: left + (size / 2), y: top },\n    { x: left + size, y: top + (size / 2) },\n    { x: left + (size / 2), y: top + size },\n    { x: left, y: top + (size / 2) }\n  ];\n\n  return {\n    type: 'path',\n    fill: 'black',\n    d: pointsToPath(points)\n  };\n}\n\nexport {\n  diamond as default\n};\n","import { generateCrossPoints } from './cross';\nimport { toRadians } from '../math/angles';\nimport { rotate } from '../math/vector';\nimport pointsToPath from '../utils/points-to-path';\n\n/**\n * @extends symbol-config\n * @typedef {object} symbol--saltire\n * @property {number} [width] - Width of the diagonals\n */\nfunction saltire(options) {\n  const radians = toRadians(45);\n  const r = options.size / 2;\n  const width = isNaN(options.width) ? r / 2 : options.width;\n  const barWidth = Math.min(width, r);\n  let adjustedSize = options.size;\n\n  // Adjust for the barwidth and rotation angle, so that the visual part is always inside the symbol area\n  const h = Math.sin(Math.asin(-radians)) * (barWidth / 2);\n  const c = r / Math.sin(-radians);\n  adjustedSize += (c - r) * 2;\n  adjustedSize -= h * 2;\n\n  const centroid = { x: options.x, y: options.y };\n  const points = generateCrossPoints(options.x, options.y, adjustedSize, barWidth)\n    .map(p => rotate(p, radians, centroid));\n\n  return {\n    type: 'path',\n    fill: 'black',\n    d: pointsToPath(points)\n  };\n}\n\nexport {\n  saltire as default\n};\n","/**\n * @extends symbol-config\n * @typedef {object} symbol--square\n */\nfunction square(options) {\n  const size = options.size;\n\n  return {\n    type: 'rect',\n    fill: 'black',\n    x: options.x - (size / 2),\n    y: options.y - (size / 2),\n    width: size,\n    height: size\n  };\n}\n\nexport {\n  square as default\n};\n","/**\n * @extends symbol-config\n * @typedef {object} symbol--line\n * @property {string} [direction='horizontal'] - Direction of line ('horizontal'|'vertical').\n */\nfunction line(options) {\n  const isVertical = options.direction === 'vertical';\n  const r = options.size / 2;\n  const x = options.x;\n  const y = options.y;\n\n  return {\n    type: 'line',\n    stroke: 'black',\n    strokeWidth: 1,\n    x1: x - (isVertical ? 0 : r),\n    y1: y - (isVertical ? r : 0),\n    x2: x + (isVertical ? 0 : r),\n    y2: y + (isVertical ? r : 0)\n  };\n}\n\nexport {\n  line as default\n};\n","import pointsToPath from '../utils/points-to-path';\nimport { toRadians } from '../math/angles';\n\n/**\n * @extends symbol-config\n * @typedef {object} symbol--star\n * @property {number} [points=5] - Number of points on the star\n * @property {number} [startAngle=90] - Start drawing angle\n * @property {number} [innerRadius=size/2] - Size of the star core. My not exceed size of symbol.\n */\nfunction star(options) {\n  const size = options.size;\n  const points = [];\n  const outerRadius = size / 2;\n  const drawPoints = options.points || 5;\n  const innerRadius = (Math.min(options.innerRadius || size / 2, size) / 2);\n  const startAngle = isNaN(options.startAngle) ? 90 : options.startAngle;\n  const angle = 360 / drawPoints;\n\n  for (let i = 1; i <= drawPoints; i++) {\n    const pAngle = (angle * i) + startAngle;\n    const radians = toRadians(pAngle);\n    const innerRadians = toRadians(pAngle + (angle / 2));\n    const y = Math.sin(radians);\n    const x = Math.cos(radians);\n    const iy = Math.sin(innerRadians);\n    const ix = Math.cos(innerRadians);\n\n    points.push({\n      x: options.x + (x * outerRadius),\n      y: options.y + (y * outerRadius)\n    });\n\n    points.push({\n      x: options.x + (ix * innerRadius),\n      y: options.y + (iy * innerRadius)\n    });\n  }\n\n  return {\n    type: 'path',\n    fill: 'black',\n    d: pointsToPath(points)\n  };\n}\n\nexport {\n  star as default\n};\n","import pointsToPath from '../utils/points-to-path';\nimport { toRadians } from '../math/angles';\n\n/**\n * @extends symbol-config\n * @typedef {object} symbol--n-polygon\n * @property {object} [sides=6] - Number of sides on the regular polygon\n * @property {object} [startAngle=0] - Start drawing angle\n */\nfunction nPolygon(options) {\n  const points = [];\n  const radius = options.size / 2;\n  const drawPoints = Math.max(isNaN(options.sides) ? 6 : options.sides, 3);\n  const angle = 360 / drawPoints;\n  const startAngle = isNaN(options.startAngle) ? 0 : options.startAngle;\n\n  for (let i = 1; i <= drawPoints; i++) {\n    const radians = toRadians((angle * i) + startAngle);\n    const y = Math.sin(radians);\n    const x = Math.cos(radians);\n    points.push({\n      x: options.x + (x * radius),\n      y: options.y + (y * radius)\n    });\n  }\n\n  return {\n    type: 'path',\n    fill: 'black',\n    d: pointsToPath(points)\n  };\n}\n\nexport {\n  nPolygon as default\n};\n","import { rotate } from '../math/vector';\nimport { pointsToRect } from '../geometry/util';\nimport { toRadians } from '../math/angles';\n\n/**\n * @extends symbol-config\n * @typedef {object} symbol--bar\n * @property {string} [direction='horizontal'] - Direction of bar ('horizontal'|'vertical').\n */\nfunction bar(options) {\n  const p = { x: options.x, y: options.y };\n  const isVertical = options.direction === 'vertical';\n  const r = options.size / 2;\n  const width = r / 2;\n  const halfWidth = width / 2;\n\n  let points = [\n    { x: p.x - r, y: p.y + halfWidth },\n    { x: p.x - r, y: p.y - halfWidth },\n    { x: p.x + r, y: p.y - halfWidth },\n    { x: p.x + r, y: p.y + halfWidth }\n  ];\n\n  if (isVertical) {\n    const radians = toRadians(90);\n    points = points.map(pp => rotate(pp, radians, p));\n  }\n\n  const rect = pointsToRect(points);\n  rect.type = 'rect';\n  rect.fill = 'black';\n  rect.collider = { type: 'rect' };\n\n  return rect;\n}\n\nexport {\n  bar as default\n};\n","import pointMarkerComponent from './point';\n\n/**\n * @typedef {object} component--point\n */\n\n/**\n * @type {string}\n * @memberof component--point\n */\nconst type = 'point';\n\nexport default function pointMarker(picasso) {\n  picasso.component(type, pointMarkerComponent);\n\n  picasso.component('point-marker', pointMarkerComponent); // temporary backwards compatibility - DEPRECATED\n}\n\n","import constant from \"./constant\";\nimport descending from \"./descending\";\nimport identity from \"./identity\";\nimport {tau} from \"./math\";\n\nexport default function() {\n  var value = identity,\n      sortValues = descending,\n      sort = null,\n      startAngle = constant(0),\n      endAngle = constant(tau),\n      padAngle = constant(0);\n\n  function pie(data) {\n    var i,\n        n = data.length,\n        j,\n        k,\n        sum = 0,\n        index = new Array(n),\n        arcs = new Array(n),\n        a0 = +startAngle.apply(this, arguments),\n        da = Math.min(tau, Math.max(-tau, endAngle.apply(this, arguments) - a0)),\n        a1,\n        p = Math.min(Math.abs(da) / n, padAngle.apply(this, arguments)),\n        pa = p * (da < 0 ? -1 : 1),\n        v;\n\n    for (i = 0; i < n; ++i) {\n      if ((v = arcs[index[i] = i] = +value(data[i], i, data)) > 0) {\n        sum += v;\n      }\n    }\n\n    // Optionally sort the arcs by previously-computed values or by data.\n    if (sortValues != null) index.sort(function(i, j) { return sortValues(arcs[i], arcs[j]); });\n    else if (sort != null) index.sort(function(i, j) { return sort(data[i], data[j]); });\n\n    // Compute the arcs! They are stored in the original data's order.\n    for (i = 0, k = sum ? (da - n * pa) / sum : 0; i < n; ++i, a0 = a1) {\n      j = index[i], v = arcs[j], a1 = a0 + (v > 0 ? v * k : 0) + pa, arcs[j] = {\n        data: data[j],\n        index: i,\n        value: v,\n        startAngle: a0,\n        endAngle: a1,\n        padAngle: p\n      };\n    }\n\n    return arcs;\n  }\n\n  pie.value = function(_) {\n    return arguments.length ? (value = typeof _ === \"function\" ? _ : constant(+_), pie) : value;\n  };\n\n  pie.sortValues = function(_) {\n    return arguments.length ? (sortValues = _, sort = null, pie) : sortValues;\n  };\n\n  pie.sort = function(_) {\n    return arguments.length ? (sort = _, sortValues = null, pie) : sort;\n  };\n\n  pie.startAngle = function(_) {\n    return arguments.length ? (startAngle = typeof _ === \"function\" ? _ : constant(+_), pie) : startAngle;\n  };\n\n  pie.endAngle = function(_) {\n    return arguments.length ? (endAngle = typeof _ === \"function\" ? _ : constant(+_), pie) : endAngle;\n  };\n\n  pie.padAngle = function(_) {\n    return arguments.length ? (padAngle = typeof _ === \"function\" ? _ : constant(+_), pie) : padAngle;\n  };\n\n  return pie;\n}\n","/**\n * Create a crispifier\n * @ignore\n *\n * @param  {Object} [crispMap] Optional crispmap if you need custom crisping.\n * @return {Function}          crispItem function\n *\n * @example\n * import { crispifierFactory } from \"core/crispifier\";\n *\n * let crispify = crispifierFactory(customCrispMap);\n *\n * // For a single item\n * crispify(myItem);\n *\n * // For multiple items\n * crispify.multiple(myArrayOfItems);\n */\nexport function crispifierFactory(crispMap) {\n  // Define the crispMap\n  if (crispMap === undefined) {\n    crispMap = {};\n\n    crispMap.line = {\n      append: ['x1', 'x2', 'y1', 'y2'],\n      round: [],\n      condition: item => (item.x1 === item.x2 || item.y1 === item.y2),\n      conditionAppend: item => item.strokeWidth % 2 !== 0\n    };\n\n    crispMap.rect = {\n      append: ['x', 'y'],\n      round: ['width', 'height'],\n      condition: () => true,\n      conditionAppend: item => item.strokeWidth % 2 !== 0\n    };\n  }\n\n  // Re-map the crispmap\n  Object.keys(crispMap).forEach((type) => {\n    const self = crispMap[type];\n\n    self.items = [];\n\n    self.append.forEach((toAppend) => {\n      self.items.push({\n        key: toAppend,\n        type: 'append'\n      });\n    });\n\n    self.round.forEach((toAppend) => {\n      self.items.push({\n        key: toAppend,\n        type: 'round'\n      });\n    });\n  });\n\n  /**\n   * Crispify a single item\n   * @ignore\n   * @param  {Object} item  Item with renderer variables such as X, Y, and type.\n   * @return {Undefined}    Returns nothing, modifies the original item instead\n   */\n  function crispItem(item) {\n    if (crispMap[item.type] && crispMap[item.type].condition(item)) {\n      const self = crispMap[item.type];\n      const doAppend = self.conditionAppend === undefined || self.conditionAppend(item);\n\n      self.items.forEach((i) => {\n        const rounded = Math.round(item[i.key]);\n        const diff = item[i.key] - rounded;\n        item[i.key] = rounded;\n\n        if (doAppend && i.type === 'append') {\n          if (diff > 0) {\n            item[i.key] += 0.5;\n          } else {\n            item[i.key] -= 0.5;\n          }\n        }\n      });\n    }\n  }\n\n  /**\n   * Crispify multiple items\n   * @ignore\n   *\n   * @param  {Array} items  Array of objects to crispify\n   * @return {Undefined}    Returns nothing, modifies the original item instead\n   */\n  crispItem.multiple = items => items.forEach(item => crispItem(item));\n\n  return crispItem;\n}\n\nconst crispifier = crispifierFactory();\n\nexport default crispifier;\n","/**\n * Return a D property for a SVG path to get a direction marker\n *\n * @param {number} x - X coordinate\n * @param {number} y - Y coordinate\n * @param {number} r - Radius\n * @param {string} [d='bottom'] - Direction\n * @returns {string} - Finished D property\n * @ignore\n */\nexport function directionMarker(x, y, r, d = 'bottom') {\n  r *= 0.8;\n  if (d === 'left' || d === 'right') {\n    let right = d === 'right';\n    return `\n      M ${x} ${y - r}\n      A ${r * 1.25} ${r * 1.25}, 0, 1, ${right ? 0 : 1}, ${x} ${y + r}\n      L ${right ? x + r : x - r} ${y} Z\n    `;\n  }\n  let bottom = d === 'bottom';\n  return `\n    M ${x - r} ${y}\n    A ${r * 1.25} ${r * 1.25}, 0, 1, ${bottom ? 1 : 0}, ${x + r} ${y}\n    L ${x} ${bottom ? y + r : y - r} Z\n  `;\n}\n\nfunction directionTriangle(x, y, r, d = 'bottom') {\n  r *= 0.75;\n  if (d === 'left' || d === 'right') {\n    let right = d === 'right';\n    x += (right ? r * 1.5 : -(r * 1.5));\n    return `\n      M ${x} ${y - r}\n      L ${x} ${y + r}\n      L ${right ? x + r : x - r} ${y} Z\n    `;\n  }\n  let bottom = d === 'bottom';\n  y += (bottom ? r * 1.5 : -(r * 1.5));\n  return `\n    M ${x - r} ${y}\n    L ${x + r} ${y}\n    L ${x} ${bottom ? y + r : y - r} Z\n  `;\n}\n\n/**\n * Handle out of bound shapes\n * Does not return anything, modifies \"items\" property instead (should be re-considered)\n *\n * @param {object} oob - Out of bounds object from parent\n * @param {object} settings - Settings object from parent\n * @param {object[]} items - Array of all items (for collision detection)\n * @ignore\n */\nexport function oobManager({ blueprint, oob, settings, items }) {\n  const oobKeys = Object.keys(oob);\n  let style = settings.style.oob || {};\n\n  for (let i = 0, len = oobKeys.length; i < len; i++) {\n    const key = oobKeys[i];\n    const value = oob[key];\n\n    if (value.length > 0) {\n      let position = (key.charAt(1));\n      let flipXY = key.charAt(0) === 'y';\n\n      let xPadding = style.padding.x + (style.width);\n      let yPadding = style.padding.y + style.width;\n      let direction = 'bottom';\n\n      if (flipXY) {\n        direction = (position === '1' ? 'bottom' : 'top');\n      } else {\n        direction = (position === '1' ? 'right' : 'left');\n      }\n\n      let indicator = blueprint.processItem({\n        fn: ({ width, height }) => { /* eslint no-loop-func: 0 */\n          let x = (position * width) + (position === '1' ? -xPadding : xPadding);\n          let y = flipXY ? yPadding : height - yPadding;\n\n          if (style.type === 'arc') {\n            return {\n              type: 'path',\n              d: directionMarker(flipXY ? y : x, flipXY ? x : y, style.width, direction),\n              x,\n              y,\n              stroke: style.stroke,\n              fill: style.fill,\n              strokeWidth: style.strokeWidth || 0\n            };\n          }\n\n          return {\n            type: 'circle',\n            cx: x,\n            cy: y,\n            r: style.width,\n            stroke: style.stroke,\n            fill: style.fill,\n            strokeWidth: style.strokeWidth || 0,\n            opacity: style.opacity,\n            data: value\n          };\n        },\n        flipXY\n      });\n\n      let x = indicator.cx || indicator.x;\n      let y = indicator.cy || indicator.y;\n\n      let text = {\n        type: 'text',\n        text: value.length || '',\n        x: x - (style.width * 0.4),\n        y: y + (style.width * 0.4),\n        fontFamily: style.text.fontFamily,\n        fontSize: `${style.width * 1.3}px`,\n        stroke: style.text.stroke,\n        fill: style.text.fill,\n        strokeWidth: style.text.strokeWidth || 0,\n        opacity: style.text.opacity\n      };\n\n      let triangle = {\n        type: 'path',\n        d: directionTriangle(x, y, style.width, direction),\n        x,\n        y,\n        stroke: style.triangle.stroke,\n        fill: style.triangle.fill,\n        strokeWidth: style.triangle.strokeWidth || 0,\n        opacity: style.triangle.opacity\n      };\n\n      items.push(indicator, text, triangle);\n    }\n  }\n}\n","// const DEFAULT_LAYOUT_SETTINGS = { // TODO create dis and con specific settings\n//   anchor: 'auto', // TODO re-name from align..\n//   // orientation: 'auto', // TODO impl. v/h/auto\n//   // direction: 'auto', // TODO impl. left/right/top/bottom/auto\n//   padding: { // TODO use dock layout margin instead..\n//     start: 0,\n//     end: 10\n//   },\n//   maxGlyphCount: NaN,\n//   maxEdgeBleed: Infinity\n//   // labelMode: 'auto' // TODO move here? auto, horizontal, layered\n// };\n\n/**\n * Discrete axis settings\n * @typedef {object}\n * @alias component--axis-discrete\n */\nconst DEFAULT_DISCRETE_SETTINGS = {\n  /**\n   * @typedef {object}\n   */\n  labels: {\n    /** Toggle labels on/off\n    * @type {boolean=} */\n    show: true,\n    /** Tilting angle in degrees. Capped between -90 and 90. Only applicable when labels are in `tilted` mode.\n    * @type {number=} */\n    tiltAngle: 40,\n    /** Control the amount of space (in pixels) that labes can occupy outside their docking area. Only applicable when labels are in `tilted` mode.\n    * @type {number=} */\n    maxEdgeBleed: Infinity,\n    /** Space in pixels between the tick and label.\n    * @type {number=} */\n    margin: 4,\n    /** Max length of labels in pixels\n    * @type {number=} */\n    maxLengthPx: 150,\n    /** Min length of labels in pixels. Labels will always at least require this much space\n    * @type {number=} */\n    minLengthPx: 0,\n    /** Control how labels arrange themself. Availabe modes are `auto`, `horizontal`, `layered` and `tilted`. When set to `auto` the axis determines the best possible layout in the current context.\n    * @type {string=} */\n    mode: 'auto',\n    /** When only a sub-set of data is available, ex. when paging. This property can be used to let the axis estimate how much space the labels will consume, allowing it to give a consistent space estimate over the entire dataset when paging.\n    * @type {number=} */\n    maxGlyphCount: NaN,\n    /** Align act as a slider for the text bounding rect over the item bandwidth, given that the item have a bandwidth. Except when labels are tilted, then the align is a pure align that shifts the position of the label anchoring point.\n    * @type {number=} */\n    align: 0.5,\n    /** Offset in pixels along the axis direction.\n    * @type {number=} */\n    offset: 0\n  },\n  /**\n   * @typedef {object}\n   */\n  ticks: {\n    /** Toggle ticks on/off\n    * @type {boolean=} */\n    show: false,\n    /** Space in pixels between the ticks and the line.\n    * @type {number=} */\n    margin: 0,\n    /** Size of the ticks in pixels.\n    * @type {number=} */\n    tickSize: 4\n  },\n  /**\n   * @typedef {object}\n   */\n  line: {\n    /** Toggle line on/off\n    * @type {boolean=} */\n    show: false\n  },\n  /** Padding in direction perpendicular to the axis\n    * @type {number=} */\n  paddingStart: 0,\n  /** Padding in direction perpendicular to the axis\n    * @type {number=} */\n  paddingEnd: 10,\n  /** Set the anchoring point of the axis. Avaialable options are `auto/left/right/bottom/top`. In `auto` the axis determines the best option. The options are restricted based on the axis orientation, a vertical axis may only anchor on `left` or `right`\n    * @type {string=} */\n  align: 'auto'\n};\n\n/**\n * Continuous axis settings\n * @typedef {object}\n * @alias component--axis-continuous\n */\nconst DEFAULT_CONTINUOUS_SETTINGS = {\n  /**\n   * @typedef {object}\n   */\n  labels: {\n    /** Toggle labels on/off\n    * @type {boolean=} */\n    show: true,\n    /** Space in pixels between the tick and label.\n    * @type {number=} */\n    margin: 4,\n    /** Max length of labels in pixels\n    * @type {number=} */\n    maxLengthPx: 150,\n    /** Min length of labels in pixels. Labels will always at least require this much space\n    * @type {number=} */\n    minLengthPx: 0,\n    /** Align act as a slider for the text bounding rect over the item bandwidth, given that the item have a bandwidth.\n    * @type {number=} */\n    align: 0.5,\n    /** Offset in pixels along the axis direction.\n    * @type {number=} */\n    offset: 0\n  },\n  /**\n   * @typedef {object}\n   */\n  ticks: {\n    /** Toggle ticks on/off\n    * @type {boolean=} */\n    show: true,\n    /** Space in pixels between the ticks and the line.\n    * @type {number=} */\n    margin: 0,\n    /** Size of the ticks in pixels.\n    * @type {number=} */\n    tickSize: 8\n  },\n  /**\n   * @typedef {object}\n   */\n  minorTicks: {\n    /** Toggle minor-ticks on/off\n    * @type {boolean=} */\n    show: false,\n    /** Size of the ticks in pixels.\n    * @type {number=} */\n    tickSize: 3,\n    /** Space in pixels between the ticks and the line.\n    * @type {number=} */\n    margin: 0\n  },\n  /**\n   * @typedef {object}\n   */\n  line: {\n    /** Toggle line on/off\n    * @type {boolean=} */\n    show: true\n  },\n  /** Padding in direction perpendicular to the axis\n    * @type {number=} */\n  paddingStart: 0,\n  /** Padding in direction perpendicular to the axis\n    * @type {number=} */\n  paddingEnd: 10,\n  /** Set the anchoring point of the axis. Avaialable options are `auto/left/right/bottom/top`. In `auto` the axis determines the best option. The options are restricted based on the axis orientation, a vertical axis may only anchor on `left` or `right`\n    * @type {string=} */\n  align: 'auto'\n};\n\nexport {\n  DEFAULT_DISCRETE_SETTINGS,\n  DEFAULT_CONTINUOUS_SETTINGS\n};\n","import extend from 'extend';\n\nimport nodeBuilder from './axis-node-builder';\nimport {\n  DEFAULT_CONTINUOUS_SETTINGS,\n  DEFAULT_DISCRETE_SETTINGS\n} from './axis-default-settings';\nimport calcRequiredSize from './axis-size-calculator';\nimport crispify from '../../transposer/crispifier';\nimport { scaleWithSize } from '../../scales';\n\nfunction alignTransform({ align, inner }) {\n  if (align === 'left') {\n    return { x: inner.width + inner.x };\n  } else if (align === 'right' || align === 'bottom') {\n    return inner;\n  }\n  return { y: inner.y + inner.height };\n}\n\nfunction resolveAlign(align, dock) {\n  const horizontal = ['top', 'bottom'];\n  const vertical = ['left', 'right'];\n  if (horizontal.indexOf(align) !== -1 && vertical.indexOf(dock) === -1) {\n    return align;\n  } else if (vertical.indexOf(align) !== -1 && horizontal.indexOf(dock) === -1) {\n    return align;\n  }\n  return dock; // Invalid align, return current dock as default\n}\n\n/**\n * @ignore\n * @param {object} context - The component context\n */\nfunction resolveLocalSettings({\n    state,\n    style,\n    settings\n  }) {\n  const defaultStgns = extend(true, {}, state.isDiscrete ? DEFAULT_DISCRETE_SETTINGS : DEFAULT_CONTINUOUS_SETTINGS, style);\n  const localStgns = extend(true, {}, defaultStgns, settings.settings);\n\n  const dock = settings.dock || state.defaultDock;\n  localStgns.dock = dock;\n  localStgns.align = resolveAlign(settings.settings.align, dock);\n  localStgns.labels.tiltAngle = Math.max(-90, Math.min(localStgns.labels.tiltAngle, 90));\n\n  return localStgns;\n}\n\nfunction updateActiveMode(state, settings, isDiscrete) {\n  const mode = settings.labels.mode;\n\n  if (!isDiscrete || !state.isHorizontal) {\n    return 'horizontal';\n  }\n\n  if (mode === 'auto') {\n    return state.labels.activeMode;\n  } else if (['layered', 'tilted'].indexOf(settings.labels.mode) !== -1 && ['top', 'bottom'].indexOf(settings.dock) !== -1) {\n    return mode;\n  }\n  return 'horizontal';\n}\n\nconst axisComponent = {\n  require: ['chart', 'renderer', 'dockConfig'],\n  defaultSettings: {\n    displayOrder: 0,\n    prioOrder: 0,\n    settings: {},\n    style: {\n      labels: '$label',\n      ticks: '$guide-line',\n      minorTicks: '$guide-line--minor',\n      line: '$guide-line'\n    }\n  },\n  created() {\n    // State is a representation of properties that are private to this component defintion and may be modified by only in this context.\n    this.state = {\n      isDiscrete: !!this.scale.bandwidth,\n      isHorizontal: false,\n      labels: {\n        activeMode: 'horizontal'\n      },\n      ticks: [],\n      innerRect: { width: 0, height: 0, x: 0, y: 0 },\n      outerRect: { width: 0, height: 0, x: 0, y: 0 },\n      defaultDock: undefined,\n      concreteNodeBuilder: undefined,\n      settings: undefined\n    };\n\n    if (this.state.isDiscrete) {\n      this.state.defaultDock = 'bottom';\n    } else {\n      this.state.defaultDock = 'left';\n    }\n\n    this.setState(this.settings);\n  },\n  setState() {\n    this.state.isDiscrete = !!this.scale.bandwidth;\n    this.state.settings = resolveLocalSettings(this);\n\n    this.state.concreteNodeBuilder = nodeBuilder(this.state.isDiscrete);\n\n    this.dockConfig.dock = this.state.settings.dock; // Override the dock setting (TODO should be removed)\n\n    this.state.isHorizontal = this.state.settings.align === 'top' || this.state.settings.align === 'bottom';\n    this.state.labels.activeMode = updateActiveMode(this.state, this.state.settings, this.state.isDiscrete);\n  },\n  preferredSize(opts) {\n    const {\n      formatter,\n      state,\n      scale\n    } = this;\n\n    const distance = this.state.isHorizontal ? opts.inner.width : opts.inner.height;\n\n    this.state.pxScale = scaleWithSize(scale, distance);\n\n    const reqSize = calcRequiredSize({\n      isDiscrete: this.state.isDiscrete,\n      rect: opts.inner,\n      formatter,\n      measureText: this.renderer.measureText,\n      scale: this.state.pxScale,\n      settings: this.state.settings,\n      state\n    });\n\n    return reqSize;\n  },\n  beforeUpdate(opts = {}) {\n    const {\n      settings\n    } = opts;\n    this.setState(settings);\n  },\n  resize(opts) {\n    const {\n      inner,\n      outer\n    } = opts;\n\n    const extendedInner = extend({}, inner, alignTransform({\n      align: this.state.settings.align,\n      inner\n    }));\n\n    const finalOuter = outer || extendedInner;\n    extend(this.state.innerRect, extendedInner);\n    extend(this.state.outerRect, finalOuter);\n\n    return outer;\n  },\n  beforeRender() {\n    const {\n      scale,\n      formatter\n    } = this;\n\n    const distance = this.state.isHorizontal ? this.state.innerRect.width : this.state.innerRect.height;\n\n    this.state.pxScale = scaleWithSize(scale, distance);\n    this.state.ticks = this.state.pxScale.ticks({\n      distance,\n      formatter\n    });\n  },\n  render() {\n    const {\n      state\n    } = this;\n\n    const nodes = [];\n    nodes.push(...this.state.concreteNodeBuilder.build({\n      settings: this.state.settings,\n      scale: this.state.pxScale,\n      innerRect: this.state.innerRect,\n      outerRect: this.state.outerRect,\n      measureText: this.renderer.measureText,\n      textBounds: this.renderer.textBounds,\n      ticks: this.state.ticks,\n      state\n    }));\n\n    crispify.multiple(nodes);\n\n    return nodes;\n  }\n};\n\nexport default axisComponent;\n","import getLabelSize from './axis-label-size';\n\nexport default function calcRequiredSize({\n  isDiscrete,\n  rect,\n  formatter,\n  measureText,\n  scale,\n  settings,\n  state\n}) {\n  let size = 0;\n\n  const { size: labelSize, edgeBleed, isToLarge } = getLabelSize({\n    isDiscrete,\n    rect,\n    formatter,\n    measureText,\n    scale,\n    settings,\n    state\n  });\n\n  size += labelSize;\n\n  if (isToLarge) {\n    return { size };\n  }\n\n  if (settings.ticks.show) {\n    size += settings.ticks.margin;\n    size += settings.ticks.tickSize;\n  }\n  if (settings.minorTicks && settings.minorTicks.show) {\n    const minorTicksSize = settings.minorTicks.margin + settings.minorTicks.tickSize;\n    if (minorTicksSize > size) {\n      size = minorTicksSize;\n    }\n  }\n  if (settings.line.show) {\n    size += settings.line.strokeWidth;\n  }\n  size += settings.paddingStart;\n  size += settings.paddingEnd;\n\n  return { size, edgeBleed };\n}\n","import axisComponent from './axis';\n\n/**\n * @typedef {object} component--axis\n */\n\n/**\n * @type {string}\n * @memberof component--axis\n */\n\nconst type = 'axis';\n\nexport default function axis(picasso) {\n  picasso.component(type, axisComponent);\n}\n","const TARGET_SIZE = 5;\nconst VERTICAL = 0;\nconst HORIZONTAL = 1;\n\nexport {\n  TARGET_SIZE,\n  VERTICAL,\n  HORIZONTAL\n};\n","import {\n  bars\n} from './strategies';\n\nconst strategies = {\n  bar: bars\n};\n\n/**\n * @typedef {object} component--labels\n * @property {string} [type='labels']\n */\n\n/**\n * @typedef {object} component--labels.settings\n * @property {Array<object>} sources\n * @property {string} sources[].component\n * @property {string} sources[].selector\n * @property {component--labels~label-strategy} sources[].strategy\n */\n\nexport function strategy({\n  chart,\n  source,\n  rect,\n  renderer,\n  style\n}, fn) {\n  const component = chart.component(source.component);\n  if (!component) {\n    return [];\n  }\n  const nodes = chart.findShapes(source.selector).filter(n => n.key === source.component);\n\n  return fn({\n    chart,\n    settings: source.strategy.settings,\n    nodes,\n    rect: {\n      x: 0,\n      y: 0,\n      width: rect.width,\n      height: rect.height\n    },\n    renderer,\n    style\n  });\n}\n\nconst labelsComponent = {\n  require: ['chart', 'renderer', 'settings'],\n  defaultSettings: {\n    settings: {},\n    style: {\n      label: '$label'\n    }\n  },\n  created() {\n    this.rect = { x: 0, y: 0, width: 0, height: 0 };\n  },\n  beforeRender(opts) {\n    this.rect = opts.size;\n  },\n  render() {\n    const stngs = this.settings.settings;\n    const labels = [];\n\n    (stngs.sources || []).forEach((source) => {\n      if (source.strategy && strategies[source.strategy.type] && source.component) {\n        labels.push(...strategy({\n          chart: this.chart,\n          rect: this.rect,\n          renderer: this.renderer,\n          source,\n          style: this.style\n        }, strategies[source.strategy.type]));\n      }\n    });\n\n    return labels;\n  }\n};\n\nexport default labelsComponent;\n","import extend from 'extend';\n\nfunction itemize({\n  resolved\n}, legend) {\n  if (resolved.title.item.show === false) {\n    return null;\n  }\n  const t = extend({}, resolved.title.item, {\n    type: 'text'\n  });\n\n  if (resolved.layout.item.direction === 'rtl') {\n    if (!t.anchor || t.anchor === 'start') {\n      t.anchor = 'end';\n    } else if (t.anchor === 'end') {\n      t.anchor = 'start';\n    }\n  }\n\n  if (typeof resolved.title.settings.text === 'undefined') {\n    const fields = legend.scale.data().fields;\n    t.text = fields && fields[0] ? fields[0].title() : '';\n  }\n\n  return {\n    displayObject: t,\n    bounds: legend.renderer.textBounds(t)\n  };\n}\n\nfunction render({\n  rect\n}, renderer, itemized) {\n  if (!renderer) {\n    return;\n  }\n  const nodes = [];\n  renderer.size(rect);\n  if (itemized) {\n    const align = {\n      start: 0,\n      end: rect.width,\n      middle: rect.width / 2\n    };\n    nodes.push(extend({}, itemized.displayObject, {\n      x: align[itemized.displayObject.anchor] || 0,\n      y: 0,\n      baseline: 'hanging'\n    }));\n  }\n  renderer.render(nodes);\n}\n\nexport default function (legend) {\n  let itemized;\n\n  const api = {\n    itemize: (obj) => {\n      itemized = itemize(obj, legend);\n    },\n    render: (obj) => {\n      render(obj, api.renderer, itemized);\n    },\n    spread: () => (itemized ? itemized.bounds.height * 1.25 : 0),\n    extent: () => (itemized ? itemized.bounds.width : 0)\n  };\n\n  return api;\n}\n\n","import component from './legend-cat';\n\n/**\n * @typedef {object} component--legend-cat\n * @property {string} scale\n */\n\n/**\n * @type {string}\n * @memberof component--legend-cat\n */\nconst type = 'legend-cat';\n\nexport default function categoricalLegend(picasso) {\n  picasso.component(type, component);\n}\n","import component from './line';\n\n/**\n * @typedef {object} component--line\n */\n\n/**\n * @type {string}\n * @memberof component--line\n */\nconst type = 'line';\n\nexport default function pointMarker(picasso) {\n  picasso.component(type, component);\n}\n\n","import component from './box';\n\nexport default function box(picasso) {\n  picasso.component('box', component);\n  picasso.component('box-marker', component); // temporary backwards compatibility - DEPRECATED\n}\n\n/**\n * @typedef {object} component--box\n * @property {string} type - \"box\"\n * @property {component--box~data} data - Box data\n * @property {component--box~settings} settings - Box settings\n * @example\n * {\n *   type: \"box\",\n *   data: {\n *    mapTo: {\n *      min: { source: \"/qHyperCube/qMeasureInfo/0\" },\n *      start: { source: \"/qHyperCube/qMeasureInfo/1\" },\n *      med: { source: \"/qHyperCube/qMeasureInfo/2\" },\n *      end: { source: \"/qHyperCube/qMeasureInfo/3\" },\n *      max: { source: \"/qHyperCube/qMeasureInfo/4\" },\n *    },\n *    groupBy: {\n *      source: \"/qHyperCube/qDimensionInfo/0\"\n *    }\n *  },\n *  settings: {\n *    major: {\n *      scale: { source: \"/qHyperCube/qDimensionInfo/0\" }\n *    },\n *    minor: {\n *      scale: { source: [\"/qHyperCube/qMeasureInfo/0\",\n *               \"/qHyperCube/qMeasureInfo/1\",\n *               \"/qHyperCube/qMeasureInfo/2\",\n *               \"/qHyperCube/qMeasureInfo/3\",\n *               \"/qHyperCube/qMeasureInfo/4\"] }\n *    }\n *  }\n * }\n */\n\n/**\n * @typedef {object} component--box~settings\n * @property {object} major\n * @property {string} major.scale - The scale to use along the major axis\n * @property {string|component--box~settings~majorReference} [major.ref='self'] - Reference to the data property along the major axis\n * @property {object} minor\n * @property {string} minor.scale - The scale to use along the minor axis\n * @property {string} [orientation='vertical']\n * @property {object} [box]\n * @property {boolean} [box.show=true]\n * @property {string} [box.fill='#fff']\n * @property {string} [box.stroke='#000']\n * @property {number} [box.strokeWidth=1]\n * @property {number} [box.width=1]\n * @property {number} [box.maxWidthPx=100]\n * @property {number} [box.minWidthPx=1]\n * @property {number} [box.minHeightPx=1]\n * @property {object} [line]\n * @property {boolean} [line.show=true]\n * @property {string} [stroke='#000']\n * @property {number} [strokeWidth=1]\n * @property {object} [whisker]\n * @property {boolean} [whisker.show=true]\n * @property {string} [whisker.stroke='#000']\n * @property {number} [whisker.strokeWidth=1]\n * @property {number} [whisker.width=1]\n * @property {object} [median]\n * @property {number} [median.show=true]\n * @property {number} [median.stroke='#000']\n * @property {number} [median.strokeWidth=1]\n */\n\n/**\n * @typedef {object} component--box~settings~majorReference\n * @property {string} start - Reference to the data property of the start value along the major axis\n * @property {string} end - Reference to the data property of the end value along the major axis\n */\n\n/**\n * @typedef {object} component--box~data\n * @property {number} [min] - min\n * @property {number} [max] - max\n * @property {number} [start] - start\n * @property {number} [end] - end\n * @property {number} [med] - med\n */\n","import pieComponent from './pie';\n\nexport default function pie(picasso) {\n  picasso.component('pie', pieComponent);\n}\n\n","import gridLineComponent from './line';\n\n/**\n * @typedef {object} component--grid-line-settings\n * @property {object} x\n * @property {string} x.scale - The scale to use along x\n * @property {object} y\n * @property {string} y.scale - The scale to use along y\n * @property {object} [ticks]\n * @property {boolean} [ticks.show=true]\n * @property {string} [ticks.stroke='black']\n * @property {number} [ticks.strokeWidth='1']\n * @property {object} [minorTicks]\n * @property {boolean} [minorTicks.show=true]\n * @property {string} [minorTicks.stroke='black']\n * @property {number} [minorTicks.strokeWidth='1']\n */\n\nexport default function gridLine(picasso) {\n  picasso.component('grid-line', gridLineComponent);\n}\n","import refLineComponent from './refline';\n\nexport default function refLine(picasso) {\n  picasso.component('ref-line', refLineComponent);\n}\n","import textComponent from './text';\n\nexport default function text(picasso) {\n  picasso.component('text', textComponent);\n}\n","import rangeBrushComponent from './brush-range';\nimport brushAreaDirectionalComponent from './brush-area-dir';\n\nexport default function rangeBrush(picasso) {\n  picasso.component('brush-range', rangeBrushComponent);\n  picasso.component('brush-area-dir', brushAreaDirectionalComponent);\n}\n","import rangeBrushComponent from './range';\n\nexport default function rangeBrush(picasso) {\n  picasso.component('range', rangeBrushComponent);\n}\n","import lassoBrushComponent from './brush-lasso';\n\nexport default function lassoBrush(picasso) {\n  picasso.component('brush-lasso', lassoBrushComponent);\n}\n","import labelsComponent from './labels';\n\nexport default function labels(picasso) {\n  picasso.component('labels', labelsComponent);\n}\n\n","import legendSeq from './legend-seq';\n\nexport default function sequentialLegend(picasso) {\n  picasso.component('legend-seq', legendSeq);\n}\n","import definition from './brush-area';\n\nexport default function areaBrush(picasso) {\n  picasso.component('brush-area', definition);\n}\n","class Node {\n  /**\n   * @private\n   */\n  constructor(type) {\n    this._parent = null;\n    this._children = [];\n    this._ancestors = null;\n    this.type = type;\n    this.data = null;\n  }\n\n  /**\n   * Detaches this node from its parent, if such exists.\n   * @returns {Node}\n   */\n  detach() {\n    if (this._parent) {\n      this._parent.removeChild(this);\n    }\n    return this;\n  }\n\n  /**\n   * Parent of this node.\n   * @readonly\n   * @type {Node}\n   */\n  get parent() {\n    return this._parent;\n  }\n\n  /**\n   * Checks whether this node is a branch.\n   *\n   * True if this node has children, false otherwise.\n   * @readonly\n   * @type {Boolean}\n   */\n  get isBranch() {\n    return this._children && this._children.length;\n  }\n\n  /**\n   * Children of this node.\n   * @readonly\n   * @type {Node[]}\n   */\n  get children() {\n    return this._children;\n  }\n\n  /**\n   * Ancestors of this node, including parent.\n   * @readonly\n   * @type {Node[]}\n   */\n  get ancestors() {\n    if (!this._ancestors) {\n      const p = this._parent;\n      this._ancestors = p ? [p].concat(p.ancestors) : [];\n    }\n\n    return this._ancestors;\n  }\n\n  /**\n   * Descendants of this node.\n   * @readonly\n   * @type {Node[]}\n   */\n  get descendants() {\n    let r = [],\n      i,\n      len,\n      c;\n\n    for (i = 0, len = this._children.length; i < len; i++) {\n      c = this._children[i];\n      r.push(c);\n\n      if (c._children.length) {\n        r = r.concat(c.descendants);\n      }\n    }\n    return r;\n  }\n\n  /**\n   *\n   * @returns {Boolean}\n   */\n  equals(n) {\n    const children = this.children;\n    const nChildren = n.children;\n    if (children.length !== nChildren.length) {\n      return false;\n    }\n    // Requires deterministic child order\n    for (let i = 0; i < children.length; i++) {\n      if (!children[i].equals(nChildren[i])) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  toJSON() {\n    return {\n      type: this.type,\n      children: this.children.map(ch => ch.toJSON())\n    };\n  }\n}\n\nexport default Node;\n","import {\n  pointsToLine,\n  pointsToRect\n} from '../geometry/util';\nimport NarrowPhaseCollision from '../math/narrow-phase-collision';\n\n/**\n * Construct a new GeoRect instance\n * @private\n */\nclass GeoRect {\n  constructor({ x = 0, y = 0, width = 0, height = 0, minWidth = 0, minHeight = 0 } = {}) {\n    this.set({ x, y, width, height, minWidth, minHeight });\n  }\n\n  set({ x = 0, y = 0, width = 0, height = 0, minWidth = 0, minHeight = 0 } = {}) {\n    this.type = 'rect';\n\n    if (width >= 0) {\n      this.x = x;\n      this.width = Math.max(width, minWidth);\n    } else {\n      this.x = x + Math.min(width, -minWidth);\n      this.width = -Math.min(width, -minWidth);\n    }\n\n    if (height >= 0) {\n      this.y = y;\n      this.height = Math.max(height, minHeight);\n    } else {\n      this.y = y + Math.min(height, -minHeight);\n      this.height = -Math.min(height, -minHeight);\n    }\n  }\n\n  /**\n   * @param {point} p\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  containsPoint(p) {\n    return NarrowPhaseCollision.testRectPoint(this, p);\n  }\n\n  /**\n   * @param {point[]} points - Line start and end point as an array of points\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsLine(points) {\n    const line = pointsToLine(points);\n    return NarrowPhaseCollision.testRectLine(this, line);\n  }\n\n  /**\n   * @param {point[]} points - Rect vertices as an array of points\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsRect(points) {\n    const rect = pointsToRect(points);\n    return NarrowPhaseCollision.testRectRect(this, rect);\n  }\n\n  /**\n   * @param {circle} c\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsCircle(c) {\n    return NarrowPhaseCollision.testCircleRect(c, this);\n  }\n\n  /**\n   * @param {GeoPolygon} polygon\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsPolygon(polygon) {\n    return NarrowPhaseCollision.testPolygonRect(polygon, this);\n  }\n\n  /**\n   * Get the points\n   * @returns {point[]}\n   */\n  points() {\n    return [\n      { x: this.x, y: this.y },\n      { x: this.x + this.width, y: this.y },\n      { x: this.x + this.width, y: this.y + this.height },\n      { x: this.x, y: this.y + this.height }\n    ];\n  }\n}\n\nfunction create(...args) {\n  return new GeoRect(...args);\n}\n\nexport {\n  GeoRect as default,\n  create\n};\n","import { pointsToLine, pointsToRect } from '../geometry/util';\nimport NarrowPhaseCollision from '../math/narrow-phase-collision';\n\n/**\n * Construct a new GeoCircle instance\n * @private\n */\nclass GeoCircle {\n  constructor({ cx = 0, cy = 0, r = 0, minRadius = 0 } = {}) {\n    this.set({ cx, cy, r, minRadius });\n  }\n\n  set({ cx = 0, cy = 0, r = 0, minRadius = 0 } = {}) {\n    this.type = 'circle';\n    this.cx = cx;\n    this.cy = cy;\n    this.r = Math.max(r, minRadius);\n    this.vector = { x: this.cx, y: this.cy };\n  }\n\n  /**\n   * @param {point} p\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  containsPoint(p) {\n    return NarrowPhaseCollision.testCirclePoint(this, p);\n  }\n\n  /**\n   * @param {point[]} points - Line start and end point as an array of points\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsLine(points) {\n    const line = pointsToLine(points);\n\n    return NarrowPhaseCollision.testCircleLine(this, line);\n  }\n\n  /**\n   * @param {point[]} points - Rect vertices as an array of points\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsRect(points) {\n    const rect = pointsToRect(points);\n\n    return NarrowPhaseCollision.testCircleRect(this, rect);\n  }\n\n  /**\n   * @param {circle} c\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsCircle(c) {\n    return NarrowPhaseCollision.testCircleCircle(this, c);\n  }\n\n  /**\n   * @param {GeoPolygon} polygon\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsPolygon(polygon) {\n    return NarrowPhaseCollision.testCirclePolygon(this, polygon);\n  }\n\n  /**\n   * Get the points\n   * @returns {point[]}\n   */\n  points() {\n    return [\n      {\n        x: this.cx,\n        y: this.cy\n      }\n    ];\n  }\n}\n\nfunction create(...args) {\n  return new GeoCircle(...args);\n}\n\nexport {\n  GeoCircle as default,\n  create\n};\n","import { pointsToLine, pointsToRect } from '../geometry/util';\nimport NarrowPhaseCollision from '../math/narrow-phase-collision';\n\n/**\n * Construct a new GeoLine instance\n * @private\n */\nclass GeoLine {\n  constructor({ x1 = 0, y1 = 0, x2 = 0, y2 = 0, tolerance = 0 } = {}) {\n    this.set({ x1, y1, x2, y2, tolerance });\n  }\n\n  set({ x1 = 0, y1 = 0, x2 = 0, y2 = 0, tolerance = 0 } = {}) {\n    this.type = 'line';\n    this.x1 = x1;\n    this.y1 = y1;\n    this.x2 = x2;\n    this.y2 = y2;\n    this.tolerance = Math.max(0, Math.round(tolerance));\n\n    this.vectors = this.points();\n    this.zeroSize = x1 === x2 && y1 === y2;\n  }\n\n  /**\n   * @param {point} p\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  containsPoint(p) {\n    if (this.tolerance > 0) {\n      const c = { cx: p.x, cy: p.y, r: this.tolerance };\n      return NarrowPhaseCollision.testCircleLine(c, this);\n    }\n    return NarrowPhaseCollision.testLinePoint(this, p);\n  }\n\n  /**\n   * @param {point[]} points - Line start and end point as an array of points\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsLine(points) {\n    const line = pointsToLine(points);\n    return NarrowPhaseCollision.testLineLine(this, line);\n  }\n\n  /**\n   * @param {point[]} points - Rect vertices as an array of points\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsRect(points) {\n    const rect = pointsToRect(points);\n    return NarrowPhaseCollision.testRectLine(rect, this);\n  }\n\n  /**\n   * @param {circle} c\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsCircle(c) {\n    return NarrowPhaseCollision.testCircleLine(c, this);\n  }\n\n  /**\n   * @param {GeoPolygon} polygon\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsPolygon(polygon) {\n    return NarrowPhaseCollision.testPolygonLine(polygon, this);\n  }\n\n  /**\n   * Get the points\n   * @returns {point[]}\n   */\n  points() {\n    return [\n      { x: this.x1, y: this.y1 },\n      { x: this.x2, y: this.y2 }\n    ];\n  }\n}\n\nfunction create(...args) {\n  return new GeoLine(...args);\n}\n\nexport {\n  GeoLine as default,\n  create\n};\n","import { create as factory } from './index';\n\n/**\n * Construct a new GeometryCollection instance\n * @private\n  */\nclass GeometryCollection {\n  constructor(collection = []) {\n    this.set(collection);\n  }\n\n  set(collection = []) {\n    this.geometries = [];\n    collection.forEach((geo) => {\n      const geoInstance = factory(geo.type, geo);\n      if (geoInstance) {\n        this.geometries.push(geoInstance);\n      }\n    });\n  }\n\n  /**\n   * @param {point} p\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  containsPoint(p) {\n    return this.geometries.some(geo => geo.containsPoint(p));\n  }\n\n  /**\n   * @param {point[]} points - Line start and end point as an array of points\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsLine(points) {\n    return this.geometries.some(geo => geo.intersectsLine(points));\n  }\n\n  /**\n   * @param {point[]} points - Rect vertices as an array of points\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsRect(points) {\n    return this.geometries.some(geo => geo.intersectsRect(points));\n  }\n\n  /**\n   * @param {circle} c\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsCircle(c) {\n    return this.geometries.some(geo => geo.intersectsCircle(c));\n  }\n\n  /**\n   * @param {GeoPolygon} polygon\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsPolygon(polygon) {\n    return this.geometries.some(geo => geo.intersectsPolygon(polygon));\n  }\n}\n\nfunction create(...args) {\n  return new GeometryCollection(...args);\n}\n\nexport {\n  GeometryCollection as default,\n  create\n};\n","class Matrix {\n  /**\n   * Creates a matrix with identity values.\n   * @private\n   */\n  constructor() {\n    this._elements = [\n      [1, 0, 0],\n      [0, 1, 0],\n      [0, 0, 1]\n    ];\n\n    this._stack = [];\n  }\n\n  /**\n   * Creates a new matrix with a copy of the current values.\n   */\n  clone() {\n    const mt = new Matrix();\n    return mt.multiply(this);\n  }\n\n  /**\n  * Sets the matrix values\n  * @param {Number[][]} arr A 3x3 array.\n  */\n  set(arr) {\n    this._elements = arr;\n    return this;\n  }\n\n  /**\n  * Saves the current matrix values to a stack.\n  */\n  save() {\n    this._stack.push(this.elements);\n    return this;\n  }\n\n  /**\n  * Sets the current matrix values to the last ones saved on to the stack.\n  */\n  restore() {\n    if (this._stack.length) {\n      this._elements = this._stack.pop(); // TODO - use a copy instead\n    }\n    return this;\n  }\n\n  /**\n  * Adds a scalar value to each element in the matrix.\n  * @param {Number} value\n  */\n  add(value) { // assume scalar\n    let i,\n      j;\n    for (i = 0; i < this._elements.length; i++) {\n      for (j = 0; j < this._elements[i].length; j++) {\n        this._elements[i][j] += value;\n      }\n    }\n    return this;\n  }\n\n  /**\n  * Translates the current matrix along the x and y axis.\n  * @param {Number} x\n  * @param {Number} y\n  */\n  translate(x, y) {\n    this.multiply([[1, 0, x], [0, 1, y], [0, 0, 1]]);\n    return this;\n  }\n\n  /**\n  * Rotates the current matrix.\n  * @param {Number} radianAngle Angle in radians.\n  */\n  rotate(radianAngle) {\n    let cos = Math.cos(-radianAngle),\n      sin = Math.sin(-radianAngle);\n    this.multiply([[cos, sin, 0], [-sin, cos, 0], [0, 0, 1]]);\n    return this;\n  }\n\n  /**\n  *\n  * If value is a number; multiplies each element in the matrix by the given value.\n  * If value is a matrix; multiplies the two matrices.\n  * @param {Number|Array|Matrix} value\n  */\n  multiply(value) {\n    let i,\n      j,\n      m,\n      k;\n    if (value instanceof Matrix) {\n      value = value._elements;\n    }\n    if (Array.isArray(value)) { // matrix multiplication\n      m = [\n            [0, 0, 0],\n            [0, 0, 0],\n            [0, 0, 0]\n      ];\n      for (i = 0; i < this._elements.length; i++) { // row\n        for (j = 0; j < this._elements[i].length; j++) { // column\n          for (k = 0; k < 3; k++) { // row\n            m[i][j] += this._elements[i][k] * value[k][j];\n          }\n        }\n      }\n      this._elements = m;\n    } else { // scalar multiplication\n      for (i = 0; i < this._elements.length; i++) {\n        for (j = 0; j < this._elements[i].length; j++) {\n          this._elements[i][j] *= value;\n        }\n      }\n    }\n    return this;\n  }\n\n  /**\n  * Scales the matrix along x and y axis.\n  * @param {Number} x The value to scale the matrix with along the x direction\n  * @param {Number} [y=x] The value to scale the matrix with along the y direction.\n  */\n  scale(x, y = x) {\n    // if ( arguments.length < 2 || typeof y === \"undefined\" ) {\n    //  y = x;\n    // }\n\n    this.multiply([[x, 0, 0], [0, y, 0], [0, 0, 1]]);\n    return this;\n  }\n\n  /**\n   * Multiples the matrix with the supplied transformation values\n   * @param {Number} a Horizontal scaling\n   * @param {Number} b Horizontal skewing\n   * @param {Number} c Vertical skewing\n   * @param {Number} d Vertical scaling\n   * @param {Number} e Horizontal moving\n   * @param {Number} f Vertical scaling\n   */\n  transform(a, b, c, d, e, f) {\n    this.multiply([[a, c, e], [b, d, f], [0, 0, 1]]);\n\n    return this;\n  }\n\n  /**\n  * Gets the value of the determinant.\n  * @return {Number}\n  */\n  determinant() {\n    let a = this._elements[0][0],\n      b = this._elements[0][1],\n      c = this._elements[0][2],\n      d = this._elements[1][0],\n      e = this._elements[1][1],\n      f = this._elements[1][2],\n      g = this._elements[2][0],\n      h = this._elements[2][1],\n      i = this._elements[2][2],\n      p = 0;\n\n    p = ((a * e * i) + (b * f * g) + (c * d * h)) - (c * e * g) - (b * d * i) - (a * f * h);\n\n    return p;\n  }\n\n  /**\n  * Inverts the matrix.\n  */\n  invert() {\n    let dt = this.determinant(),\n      a = this._elements[0][0],\n      b = this._elements[0][1],\n      c = this._elements[0][2],\n      d = this._elements[1][0],\n      e = this._elements[1][1],\n      f = this._elements[1][2],\n      g = this._elements[2][0],\n      h = this._elements[2][1],\n      k = this._elements[2][2];\n\n    this._elements = [\n      [(e * k) - (f * h), (c * h) - (b * k), (b * f) - (c * e)],\n      [(f * g) - (d * k), (a * k) - (c * g), (c * d) - (a * f)],\n      [(d * h) - (e * g), (g * b) - (a * h), (a * e) - (b * d)]\n    ];\n\n    this.multiply(1 / dt); // TODO - handle when dt === 0 ?\n    return this;\n  }\n\n  /**\n  * Transposes the elements of the matrix.\n  */\n  transpose() {\n    const m = Object.create(this._elements); // ?\n    this._elements = [\n      [m[0][0], m[1][0], m[2][0]],\n      [m[0][1], m[1][1], m[2][1]],\n      [m[0][2], m[1][2], m[2][2]]\n    ];\n    return this;\n  }\n\n  /**\n  * Resets the inner elements of the matrix to identity values.\n  */\n  identity() {\n    this._elements = [\n      [1, 0, 0],\n      [0, 1, 0],\n      [0, 0, 1]\n    ];\n    return this;\n  }\n\n  toString() {\n    return `${this._elements.map(r => r.join('\\t')).join('\\n')}`;\n  }\n\n  isIdentity() {\n    const m = this._elements;\n    return m[0][0] === 1 && m[0][1] === 0 && m[0][2] === 0\n      && m[1][0] === 0 && m[1][1] === 1 && m[1][2] === 0\n      && m[2][0] === 0 && m[2][1] === 0 && m[2][2] === 1;\n  }\n\n  /**\n   * Transforms the given point by this matrix and returns a new point\n   */\n  transformPoint(p) {\n    let vec = [p.x, p.y, 1],\n      i,\n      j,\n      e = this._elements,\n      m = [0, 0, 0];\n    for (i = 0; i < this._elements.length; i++) { // row\n      for (j = 0; j < this._elements[i].length; j++) { // column\n        m[i] += vec[j] * e[i][j];\n      }\n    }\n\n    return { x: m[0], y: m[1] };\n  }\n\n  /**\n   * Transforms the given points by this matrix and returns the new points\n   */\n  transformPoints(array) {\n    let vec,\n      i,\n      j,\n      k,\n      m,\n      e = this._elements,\n      ret = [];\n\n    for (k = 0; k < array.length; k++) {\n      vec = [array[k].x, array[k].y, 1];\n      m = [0, 0, 0];\n\n      for (i = 0; i < this._elements.length; i++) { // row\n        for (j = 0; j < this._elements[i].length; j++) { // column\n          m[i] += vec[j] * e[i][j];\n        }\n      }\n      ret.push({ x: m[0], y: m[1] });\n    }\n    return ret;\n  }\n\n  get elements() {\n    const m = this._elements;\n    return [\n      [m[0][0], m[0][1], m[0][2]],\n      [m[1][0], m[1][1], m[1][2]],\n      [m[2][0], m[2][1], m[2][2]]\n    ];\n  }\n}\n\nexport default Matrix;\n","/* eslint-disable no-useless-escape */\n\nconst SELECTOR_MAPS = {\n  type: /^\\w[\\w-]+/,\n  attr: /^\\[\\w(?:[\\w\\._-]+)?(?:[!]?=['\\\"][\\w\\s*#_-]*['\\\"])?\\]/,\n  universal: /^(\\*)/,\n  tag: /^\\.(\\w+)/\n};\n\nconst FILTERS = {\n  type: (c, objects) => { // eslint-disable-line arrow-body-style\n    return objects.filter((o) => {\n      const type = o.type;\n\n      if (type) {\n        return type.toLowerCase() === c.toLowerCase();\n      }\n      return false;\n    });\n  },\n\n  attr: (attr, operator, value, objects) => { // eslint-disable-line arrow-body-style\n    return objects.filter((o) => {\n      const v = o.attrs[attr];\n\n      if (!operator) { // TODO handle undefined differently for != operator? As display object may very well have a default rendering color\n        return typeof v !== 'undefined';\n      } else if (typeof v === 'undefined') {\n        return false;\n      }\n\n      switch (operator) {\n        case '=':\n          return value === String(v);\n        case '!=':\n          return value !== String(v);\n        default:\n          return false;\n      }\n    });\n  },\n\n  universal: objects => objects,\n\n  tag: (c, objects) => { // eslint-disable-line arrow-body-style\n    return objects.filter((o) => {\n      const tag = o.tag;\n      if (tag) {\n        return tag.indexOf(c.replace('.', '')) !== -1;\n      }\n      return false;\n    });\n  }\n};\n\n/**\n* Filters out objects of given type and value\n* @ignore\n* @example\n* filter(\n*   {type:'type', value:'Circle'},\n*   [new Circle(), new Rectangle()]\n* )\n* // [Circle]\n* @param {Object} token\n* @param {Array} objects\n* @returns {Object[]} Objects that fulfill the type and value\n*/\nexport function filter(token, objects) {\n  if (!objects || !objects.length || !token || (typeof FILTERS[token.type] !== 'function')) {\n    return [];\n  }\n\n  switch (token.type) {\n    case 'type':\n      return FILTERS[token.type](token.value, objects);\n    case 'attr':\n      return FILTERS[token.type](token.attribute, token.operator, token.attributeValue, objects);\n    case 'universal':\n      return FILTERS[token.type](objects);\n    case 'tag':\n      return FILTERS[token.type](token.value, objects);\n    default:\n      return [];\n  }\n}\n\n/**\n* Tokenizes a string into supported selectors\n* @ignore\n*\n* @example\n* tokenize(\"Circle[color='red']\")\n*\n* @param {String} s\n*/\nexport function tokenize(s) {\n  const groups = [];\n  let sub;\n  let info;\n  let match;\n  let validSelector;\n\n  s.split(/\\s*,\\s*/).forEach((group) => {\n    group = group.trim();\n    sub = [];\n    const selectorMapsIterator = (key) => {\n      match = group.match(SELECTOR_MAPS[key]);\n      if (match) {\n        validSelector = true;\n        group = group.slice(match[0].length);\n        info = {\n          type: key,\n          value: match[0]\n        };\n\n        if (key === 'attr') {\n          // extract parts of attribute from e.g. [color='red'] => (color, =, red)\n          match = match[0].match(/\\[(\\w[\\w\\._-]+)?(?:([!]?=)['\\\"]([\\w\\s#_-]*)['\\\"])?\\]/);\n          info.attribute = match[1];\n          info.operator = match[2];\n          info.attributeValue = match[3];\n        }\n        sub.push(info);\n      }\n    };\n    while (group) {\n      validSelector = false;\n\n      match = group.match(/^\\s*([>+~]|\\s)\\s*/);\n      if (match) {\n        validSelector = true;\n        sub.push({\n          type: ' ',\n          value: match[0]\n        });\n        group = group.slice(match[0].length);\n      }\n\n      Object.keys(SELECTOR_MAPS).forEach(selectorMapsIterator);\n\n      if (sub && sub.length && groups.indexOf(sub) < 0) {\n        groups.push(sub);\n      }\n\n      if (!validSelector) {\n        break;\n      }\n    }\n  });\n  return groups;\n}\n\nfunction find(s, object) {\n  const result = [];\n  const groupResults = [];\n  let groups;\n  let descendants;\n\n  if (object.isBranch) {\n    groups = tokenize(s);\n    descendants = object.descendants;\n\n    let tokens;\n\n    for (let gi = 0, glen = groups.length; gi < glen; gi++) {\n      tokens = groups[gi];\n\n      const levels = [];\n      let filtered = descendants.slice();\n      let hasRemainder = false;\n      tokens.reverse().forEach((token) => {\n        if (token.type === ' ') {\n          levels.push(filtered);\n          filtered = descendants.slice();\n          hasRemainder = false;\n          return;\n        }\n\n        filtered = filter(token, filtered);\n        hasRemainder = true;\n      });\n\n      if (hasRemainder) {\n        levels.push(filtered);\n      }\n\n      const selected = levels[0].filter((node) => {\n        let ancestor = node.parent;\n        let idx;\n\n        for (let i = 1; i < levels.length; i++) {\n          idx = levels[i].indexOf(ancestor);\n          while (ancestor && idx < 0) {\n            ancestor = ancestor.parent;\n            idx = levels[i].indexOf(ancestor);\n          }\n          if (idx < 0) {\n            return false;\n          }\n        }\n        return true;\n      });\n\n      groupResults.push(selected);\n    }\n\n    for (let i = 0, len = groupResults.length; i < len; i++) {\n      for (let ni = 0, nlen = groupResults[i].length; ni < nlen; ni++) {\n        if (result.indexOf(groupResults[i][ni]) < 0) {\n          result.push(groupResults[i][ni]);\n        }\n      }\n    }\n  }\n\n  return result || [];\n}\n\nexport default {\n  find\n};\n","import extend from 'extend';\nimport Node from '../node';\nimport { create as geometry } from '../../geometry';\nimport { create as geometryCollection } from '../../geometry/geometry-collection';\nimport Matrix from '../../math/matrix';\nimport resolveTransform from './../transform-resolver';\nimport nodeSelector from './../node-selector';\nimport createSceneNode from './../scene-node';\nimport { resolveCollionsOnNode, hasCollisionOnNode } from '../collision-resolver';\nimport { assignMappedAttribute } from '../attributes';\n\n/**\n * @typedef {object} node-def\n * @property {string} type\n * @property {string|gradient-def} [fill] - {@link https://www.w3.org/TR/fill-stroke-3/#fill-shorthand}\n * @property {string|gradient-def} [stroke] - {@link https://www.w3.org/TR/fill-stroke-3/#propdef-stroke}\n * @property {number} [strokeWidth] - {@link https://www.w3.org/TR/fill-stroke-3/#propdef-stroke-width}\n * @property {string|number[]} [strokeDasharray] - {@link https://www.w3.org/TR/fill-stroke-3/#propdef-stroke-dasharray}\n * @property {number} [opacity] - {@link https://www.w3.org/TR/css-color-4/#propdef-opacity}\n * @property {string} [transform] - {@link https://www.w3.org/TR/SVG/coords.html#TransformAttribute}\n * @property {object} [data] - Data object, may contain any properties\n * @property {object} [desc] - Meta-data object, may contain any properties\n * @property {string} [tag] - White-space seperated list of tags\n * @property {string} [id] - Unique identifier of the node\n * @property {object} [collider]\n */\n\nclass DisplayObject extends Node {\n  constructor(type) {\n    super(type);\n    this._stage = null;\n    this._collider = null;\n    this._attrs = {};\n    this._node = null;\n  }\n\n  set(v = {}) {\n    this.node = v;\n\n    const {\n      data,\n      desc,\n      tag\n    } = v;\n\n    assignMappedAttribute(this.attrs, v);\n\n    if (typeof data !== 'undefined') {\n      this.data = data;\n    }\n\n    if (typeof desc === 'object') {\n      this.desc = extend(true, {}, desc);\n    }\n\n    if (typeof tag === 'string') {\n      this.tag = tag;\n    }\n  }\n\n  collider(opts) {\n    if (typeof opts === 'undefined') {\n      return this._collider;\n    }\n\n    if (Array.isArray(opts)) {\n      this._collider = {\n        fn: geometryCollection(opts),\n        type: 'collection'\n      };\n      return this._collider;\n    }\n\n    const { type = null } = opts;\n    const c = { type };\n\n    if (!type) {\n      this._collider = null;\n    } else if (this._collider && this._collider.type === type) {\n      this._collider.fn.set(opts);\n    } else if (type === 'frontChild') {\n      this._collider = c;\n    } else if (type === 'bounds') {\n      c.fn = geometry('rect', opts);\n      this._collider = c;\n    } else if (['line', 'rect', 'circle', 'polygon', 'polyline'].indexOf(type) !== -1) {\n      c.fn = geometry(type, opts);\n      this._collider = c;\n    }\n\n    return this._collider;\n  }\n\n  findShapes(selector) {\n    return nodeSelector.find(selector, this).map(node => createSceneNode(node));\n  }\n\n  getItemsFrom(shape) {\n    return resolveCollionsOnNode(this, shape);\n  }\n\n  containsPoint(p) {\n    return hasCollisionOnNode(this, p);\n  }\n\n  intersectsLine(line) {\n    return hasCollisionOnNode(this, line);\n  }\n\n  intersectsRect(rect) {\n    return hasCollisionOnNode(this, rect);\n  }\n\n  intersectsCircle(circle) {\n    return hasCollisionOnNode(this, circle);\n  }\n\n  intersectsPolygon(polygon) {\n    return hasCollisionOnNode(this, polygon);\n  }\n\n  resolveLocalTransform(m = new Matrix()) {\n    if (typeof this.attrs.transform !== 'undefined') { resolveTransform(this.attrs.transform, m); }\n    this.modelViewMatrix = m.clone();\n  }\n\n  resolveGlobalTransform(m = new Matrix()) {\n    const a = this.ancestors;\n\n    if (a.length > 0) {\n      for (let i = a.length - 1; i >= 0; i--) {\n        a[i].resolveLocalTransform(m);\n        m = a[i].modelViewMatrix;\n      }\n    }\n\n    this.resolveLocalTransform(m);\n  }\n\n  /**\n   * Returns the value of attribute a.\n   * @private\n   * @param a\n   * @returns {*} The value of attribute a.\n   */\n  attr(a) {\n    return this.attrs[a];\n  }\n\n  equals(d) {\n    const attrs = this.attrs;\n    const attrKeys = Object.keys(attrs);\n    const dAttrs = d.attrs;\n    const dAttrKeys = Object.keys(dAttrs);\n    if (attrKeys.length !== dAttrKeys.length) {\n      return false;\n    }\n    for (let i = 0; i < attrKeys.length; i++) {\n      const key = attrKeys[i];\n      if (!Object.hasOwnProperty.call(dAttrs, key)) {\n        return false;\n      }\n      if (attrs[key] !== dAttrs[key]) {\n        return false;\n      }\n    }\n\n    return super.equals(d);\n  }\n\n  toJSON() {\n    const json = super.toJSON();\n    json.attrs = this.attrs;\n    return json;\n  }\n\n  get attrs() {\n    return this._attrs;\n  }\n\n  get stage() {\n    if (this._parent && !this._stage) { // lazy evaluation\n      this._stage = this._parent.stage;\n    } else if (!this._parent && this._stage !== this) {\n      this._stage = null;\n    }\n    return this._stage;\n  }\n\n  set modelViewMatrix(m) {\n    this._mvm = m;\n    this._imvm = null;\n  }\n\n  get modelViewMatrix() {\n    return this._mvm;\n  }\n\n  get inverseModelViewMatrix() {\n    this._imvm = this._imvm ? this._imvm : this._mvm.clone().invert();\n    return this._imvm;\n  }\n\n  set node(n) {\n    this._node = n;\n  }\n\n  get node() {\n    return this._node;\n  }\n}\n\nexport default DisplayObject;\n","import Node from './node';\n\nclass NodeContainer extends Node {\n  addChild(c) {\n    if (!c || !(c instanceof Node)) {\n      throw new TypeError(`Expecting a Node as argument, but got ${c}`);\n    }\n\n    if (c === this) {\n      throw new Error('Can not add itself as child!');\n    }\n\n    if (c._children && c._children.length && this.ancestors.indexOf(c) >= 0) {\n      throw new Error('Can not add an ancestor as child!');\n    }\n\n    if (c._parent && c._parent !== this) {\n      c._parent.removeChild(c);\n    }\n\n    // *\n    // really expensive for large arrays\n    const indx = this._children.indexOf(c); // if child already exists -> remove it, and the push it in last\n    if (indx >= 0) {\n      this._children.splice(indx, 1);\n    }\n    // * /\n\n    this._children.push(c);\n    c._parent = this;\n    c._ancestors = null;\n\n    return this;\n  }\n\n  addChildren(children) {\n    let i,\n      num = children ? children.length : 0;\n    for (i = 0; i < num; i++) {\n      this.addChild(children[i]);\n    }\n    return this;\n  }\n\n  /**\n   * Removes given child node from this node.\n   * @private\n   * @param {Node} c\n   * @returns {Node} This object, for chaining purposes.\n   */\n  removeChild(c) {\n    const indx = this._children.indexOf(c);\n    if (indx >= 0) {\n      this._children.splice(indx, 1);\n      c._parent = null;\n      c._ancestors = null;\n    }\n    return this;\n  }\n\n  removeChildren(children) {\n    let i,\n      num;\n    if (!this._children) {\n      return this;\n    }\n    if (children) {\n      num = children.length;\n      for (i = 0; i < num; i++) {\n        this.removeChild(children[i]);\n      }\n    } else {\n      while (this._children.length) {\n        this.removeChild(this._children[0]);\n      }\n    }\n    return this;\n  }\n}\n\nexport default NodeContainer;\n","import Container from './container';\n\nexport default class Stage extends Container {\n  constructor(dpi) {\n    super('stage');\n    this._stage = this;\n    this._dpiRatio = dpi || 1;\n  }\n\n  get dpi() {\n    return this._dpiRatio;\n  }\n}\n\nexport function create(...a) {\n  return new Stage(...a);\n}\n","import extend from 'extend';\nimport DisplayObject from './display-object';\nimport {\n  rectToPoints,\n  getMinMax\n} from '../../geometry/util';\n\n/**\n * @extends node-def\n * @typedef {object} node--rect-def\n * @property {number} x - {@link https://www.w3.org/TR/SVG/shapes.html#RectElementXAttribute}\n * @property {number} y - {@link https://www.w3.org/TR/SVG/shapes.html#RectElementYAttribute}\n * @property {number} width - {@link https://www.w3.org/TR/SVG/shapes.html#RectElementWidthAttribute}\n * @property {number} height- {@link https://www.w3.org/TR/SVG/shapes.html#RectElementHeightAttribute}\n */\n\nexport default class Rect extends DisplayObject {\n  constructor(...s) {\n    super('rect');\n    this.set(...s);\n  }\n\n  set(v = {}) {\n    const { x = 0, y = 0, width = 0, height = 0, collider } = v;\n    const opts = extend({ type: 'rect', x, y, width, height }, collider);\n\n    super.set(v);\n    super.collider(opts);\n\n    if (width >= 0) {\n      this.attrs.x = x;\n      this.attrs.width = width;\n    } else {\n      this.attrs.x = x + width;\n      this.attrs.width = -width;\n    }\n\n    if (height >= 0) {\n      this.attrs.y = y;\n      this.attrs.height = height;\n    } else {\n      this.attrs.y = y + height;\n      this.attrs.height = -height;\n    }\n  }\n\n  boundingRect(includeTransform = false) {\n    const p = rectToPoints(this.attrs);\n    const pt = includeTransform && this.modelViewMatrix ? this.modelViewMatrix.transformPoints(p) : p;\n    const [xMin, yMin, xMax, yMax] = getMinMax(pt);\n\n    return {\n      x: xMin,\n      y: yMin,\n      width: xMax - xMin,\n      height: yMax - yMin\n    };\n  }\n\n  bounds(includeTransform = false) {\n    const rect = this.boundingRect(includeTransform);\n\n    return [\n      { x: rect.x, y: rect.y },\n      { x: rect.x + rect.width, y: rect.y },\n      { x: rect.x + rect.width, y: rect.y + rect.height },\n      { x: rect.x, y: rect.y + rect.height }\n    ];\n  }\n}\n\nexport function create(...s) {\n  return new Rect(...s);\n}\n","import extend from 'extend';\nimport DisplayObject from './display-object';\nimport { getMinMax } from '../../geometry/util';\n\n/**\n * @extends node-def\n * @typedef {object} node--circle-def\n * @property {number} cx - {@link https://www.w3.org/TR/SVG/shapes.html#CircleElementCXAttribute}\n * @property {number} cy - {@link https://www.w3.org/TR/SVG/shapes.html#CircleElementCYAttribute}\n * @property {number} r - {@link https://www.w3.org/TR/SVG/shapes.html#CircleElementRAttribute}\n */\n\nexport default class Circle extends DisplayObject {\n  constructor(...s) {\n    super('circle');\n    this.set(...s);\n  }\n\n  set(v = {}) {\n    const { cx = 0, cy = 0, r = 0, collider } = v;\n    const opts = extend({ type: 'circle', cx, cy, r }, collider);\n\n    super.set(v);\n    super.collider(opts);\n\n    this.attrs.cx = cx;\n    this.attrs.cy = cy;\n    this.attrs.r = r;\n  }\n\n  boundingRect(includeTransform = false) {\n    // TODO Handle Circle bounds correctly for a circle transformed to an non axis aligned ellipse/circle\n    // Current solution only rotate the bounds, giving a larger boundingRect if rotated\n    const p = this.bounds(includeTransform);\n\n    return {\n      x: p[0].x,\n      y: p[0].y,\n      width: p[2].x - p[0].x,\n      height: p[2].y - p[0].y\n    };\n  }\n\n  bounds(includeTransform = false) {\n    // TODO Handle Circle bounds correctly for a circle transformed to an non axis aligned ellipse/circle\n    const { cx, cy, r: rX, r: rY } = this.attrs;\n    const x = cx - rX;\n    const y = cy - rY;\n    let w = rX * 2;\n    let h = rY * 2;\n    let p = [\n      { x, y },\n      { x: x + w, y },\n      { x: x + w, y: y + h },\n      { x, y: y + h }\n    ];\n\n    if (includeTransform && this.modelViewMatrix) {\n      p = this.modelViewMatrix.transformPoints(p);\n      const [xMin, yMin, xMax, yMax] = getMinMax(p);\n      w = xMax - xMin;\n      h = yMax - yMin;\n\n      return [\n        { x: xMin, y: yMin },\n        { x: xMin + w, y: yMin },\n        { x: xMin + w, y: yMin + h },\n        { x: xMin, y: yMin + h }\n      ];\n    }\n\n    return p;\n  }\n}\n\nexport function create(...s) {\n  return new Circle(...s);\n}\n","import extend from 'extend';\nimport DisplayObject from './display-object';\nimport {\n  lineToPoints,\n  getMinMax\n} from '../../geometry/util';\n\n/**\n * @extends node-def\n * @typedef {object} node--line-def\n * @property {number} x1 - {@link https://www.w3.org/TR/SVG/shapes.html#LineElementX1Attribute}\n * @property {number} y1 - {@link https://www.w3.org/TR/SVG/shapes.html#LineElementY1Attribute}\n * @property {number} x2 - {@link https://www.w3.org/TR/SVG/shapes.html#LineElementX2Attribute}\n * @property {number} y2 - {@link https://www.w3.org/TR/SVG/shapes.html#LineElementY2Attribute}\n */\n\nexport default class Line extends DisplayObject {\n  constructor(...s) {\n    super('line');\n    this.set(...s);\n  }\n\n  set(v = {}) {\n    const { x1 = 0, y1 = 0, x2 = 0, y2 = 0, collider } = v;\n    super.set(v);\n    this.attrs.x1 = x1;\n    this.attrs.y1 = y1;\n    this.attrs.x2 = x2;\n    this.attrs.y2 = y2;\n\n    const defaultCollider = {\n      type: 'line',\n      x1,\n      y1,\n      x2,\n      y2\n    };\n    super.collider(extend(defaultCollider, collider));\n  }\n\n  boundingRect(includeTransform = false) {\n    let p = lineToPoints(this.attrs);\n\n    if (includeTransform && this.modelViewMatrix) {\n      p = this.modelViewMatrix.transformPoints(p);\n    }\n\n    const [xMin, yMin, xMax, yMax] = getMinMax(p);\n    const hasSize = xMin !== xMax || yMin !== yMax;\n\n    return {\n      x: xMin,\n      y: yMin,\n      width: hasSize ? Math.max(1, xMax - xMin) : 0,\n      height: hasSize ? Math.max(1, yMax - yMin) : 0\n    };\n  }\n\n  bounds(includeTransform = false) {\n    const rect = this.boundingRect(includeTransform);\n    return [\n      { x: rect.x, y: rect.y },\n      { x: rect.x + rect.width, y: rect.y },\n      { x: rect.x + rect.width, y: rect.y + rect.height },\n      { x: rect.x, y: rect.y + rect.height }\n    ];\n  }\n}\n\nexport function create(...s) {\n  return new Line(...s);\n}\n","import DisplayObject from './display-object';\nimport { getMinMax } from '../../geometry/util';\nimport pathToSegments from '../parse-path-d';\nimport flatten from '../../utils/flatten-array';\n\n/**\n * @extends node-def\n * @typedef {object} node--path-def\n * @property {string} d - {@link https://www.w3.org/TR/SVG/paths.html#DAttribute}\n */\n\nfunction isClosed(points) {\n  if (points.length < 2) {\n    return false;\n  }\n  const p0 = points[0];\n  const p1 = points[points.length - 1];\n\n  return p0.x === p1.x && p0.y === p1.y;\n}\n\nexport default class Path extends DisplayObject {\n  constructor(...s) {\n    super('path');\n    this.set(...s);\n  }\n\n  set(v = {}) {\n    super.set(v);\n    this.segments = [];\n    this.points = [];\n    this.attrs.d = v.d;\n\n    if (v.collider) {\n      super.collider(v.collider);\n    } else if (v.d) {\n      const col = [];\n      this.segments = pathToSegments(v.d);\n      this.segments.forEach((segment) => {\n        if (segment.length <= 1) {\n          // Omit empty and single point segments\n        } else if (isClosed(segment)) {\n          col.push({\n            type: 'polygon',\n            vertices: segment\n          });\n        } else {\n          col.push({\n            type: 'polyline',\n            points: segment\n          });\n        }\n      });\n\n      super.collider(col);\n    }\n  }\n\n  boundingRect(includeTransform = false) {\n    if (!this.points.length) {\n      this.segments = this.segments.length ? this.segments : pathToSegments(this.attrs.d);\n      this.points = flatten(this.segments);\n    }\n\n    const pt = includeTransform && this.modelViewMatrix ? this.modelViewMatrix.transformPoints(this.points) : this.points;\n    const [xMin, yMin, xMax, yMax] = getMinMax(pt);\n\n    return {\n      x: xMin || 0,\n      y: yMin || 0,\n      width: (xMax - xMin) || 0,\n      height: (yMax - yMin) || 0\n    };\n  }\n\n  bounds(includeTransform = false) {\n    const rect = this.boundingRect(includeTransform);\n\n    return [\n      { x: rect.x, y: rect.y },\n      { x: rect.x + rect.width, y: rect.y },\n      { x: rect.x + rect.width, y: rect.y + rect.height },\n      { x: rect.x, y: rect.y + rect.height }\n    ];\n  }\n}\n\nexport function create(...s) {\n  return new Path(...s);\n}\n","export default function flatten2d(ary) {\n  const newAry = [];\n  let a;\n  let len = ary.length;\n  for (let i = 0; i < len; i++) {\n    a = ary[i];\n    for (let k = 0; k < a.length; k++) {\n      newAry.push(a[k]);\n    }\n  }\n\n  return newAry;\n}\n","import DisplayObject from './display-object';\nimport {\n  rectToPoints,\n  getMinMax\n} from '../../geometry/util';\n\n/**\n * @extends node-def\n * @typedef {object} node--text-def\n * @property {string} text\n * @property {number} x - {@link https://www.w3.org/TR/SVG/text.html#TextElementXAttribute}\n * @property {number} y - {@link https://www.w3.org/TR/SVG/text.html#TextElementYAttribute}\n * @property {number} [dx] - {@link https://www.w3.org/TR/SVG/text.html#TextElementDXAttribute}\n * @property {number} [dy] - {@link https://www.w3.org/TR/SVG/text.html#TextElementDYAttribute}\n * @property {string} [fontSize] - {@link https://www.w3.org/TR/SVG/text.html#FontPropertiesUsedBySVG}\n * @property {string} [fontFamily] - {@link https://www.w3.org/TR/SVG/text.html#FontPropertiesUsedBySVG}\n * @property {rect} [boundingRect] - Explicitly set the bounding rectangle of the node. Has predence over textBoundsFn\n * @property {function} [textBoundsFn] - Implicitly set the bounding rectangle of the node, the function must return an object with x, y, width and height attributes\n * @property {string} [baseline] - Alias for dominantBaseline\n * @property {string} [dominantBaseline] - {@link https://www.w3.org/TR/SVG/text.html#BaselineAlignmentProperties}\n * @property {string} [anchor] - Alias for textAnchor\n * @property {string} [textAnchor] - {@link https://www.w3.org/TR/SVG/text.html#TextAnchorProperty}\n * @property {string} [wordBreak] - Word-break option\n * @property {number} [maxWidth] - Maximum allowed text width\n * @property {number} [maxHeight] - Maximum allowed text height. If both maxLines and maxHeight are set, the property that results in the fewest number of lines is used\n * @property {number} [maxLines] - Maximum number of lines allowed\n * @property {number} [lineHeight=1.2] - Line height\n */\n\nexport default class Text extends DisplayObject {\n  constructor(...s) {\n    super('text');\n    this.set(...s);\n  }\n\n  set(v = {}) {\n    const {\n      x = 0,\n      y = 0,\n      dx = 0,\n      dy = 0,\n      textBoundsFn,\n      text,\n      collider,\n      boundingRect\n    } = v;\n\n    super.set(v);\n    super.collider(collider);\n    this.attrs.x = x;\n    this.attrs.y = y;\n    this.attrs.dx = dx;\n    this.attrs.dy = dy;\n    this.attrs.text = text;\n    if (boundingRect) {\n      this._boundingRect = boundingRect;\n    } else if (typeof textBoundsFn === 'function') {\n      this._boundingRect = textBoundsFn(this.attrs);\n    }\n  }\n\n  boundingRect(includeTransform = false) {\n    if (!this._boundingRect) {\n      return {\n        x: 0,\n        y: 0,\n        width: 0,\n        height: 0\n      };\n    }\n\n    const p = rectToPoints(this._boundingRect);\n    const pt = includeTransform && this.modelViewMatrix ? this.modelViewMatrix.transformPoints(p) : p;\n    const [xMin, yMin, xMax, yMax] = getMinMax(pt);\n\n    return {\n      x: xMin,\n      y: yMin,\n      width: xMax - xMin,\n      height: yMax - yMin\n    };\n  }\n\n  bounds(includeTransform = false) {\n    const rect = this.boundingRect(includeTransform);\n\n    return [\n      { x: rect.x, y: rect.y },\n      { x: rect.x + rect.width, y: rect.y },\n      { x: rect.x + rect.width, y: rect.y + rect.height },\n      { x: rect.x, y: rect.y + rect.height }\n    ];\n  }\n}\n\nexport function create(...s) {\n  return new Text(...s);\n}\n","import extend from 'extend';\n\n/**\n * Creates a context. Input an array of strings that should be inherited by the context.\n * @private\n *\n * @param  {Array}  [whitelist=[]]  An array of whitelisted string keys to inherit\n * @return {Function}               A context function\n */\nfunction contextFactory(whitelist = []) {\n  const states = [{}];\n\n  /**\n   * Returns the current context as an object. The object is mutable.\n   * @private\n   *\n   * @return {Object}   Current context\n   */\n  function context() {\n    // Returns the current context, the last in the stack.\n    const item = states[states.length - 1];\n    return item;\n  }\n\n  /**\n   * Call context.save() to save the current context and move down the stack.\n   *\n   * @param  {Object} [item={}]   Optional item to save.\n   * @return {Object}             The current context, just as context()\n   */\n  context.save = function save(item = {}) {\n    const current = context();\n    const obj = {};\n    let key = '';\n\n    // Only inherit whitelisted properties\n    for (let i = 0; i < whitelist.length; i++) {\n      key = whitelist[i];\n      if (typeof current[key] !== 'undefined') { obj[key] = current[key]; }\n    }\n\n    // Extend the new object with the saved item\n    extend(obj, item);\n\n    // Push it to the stack\n    states.push(obj);\n\n    // Return the new current context\n    return context();\n  };\n\n  /**\n   * Restore the previous context. Returns the context.\n   *\n   * @return {Undefined}   Returns nothing\n   */\n  context.restore = function restore() {\n    // Remove the last element from the stack\n    states.splice(states.length - 1, 1);\n  };\n\n  return context;\n}\n\nexport {\n  contextFactory as default\n};\n","const DEFAULT_LINE_HEIGHT = 1.2;\nconst HYPHENS_CHAR = '\\u2010';\nconst ELLIPSIS_CHAR = '…';\n\nexport {\n  DEFAULT_LINE_HEIGHT,\n  HYPHENS_CHAR,\n  ELLIPSIS_CHAR\n};\n","import { renderer, register } from './canvas-renderer';\nimport rect from './shapes/rect';\nimport circle from './shapes/circle';\nimport line from './shapes/line';\nimport text from './shapes/text';\nimport path from './shapes/path';\n\nregister('rect', rect);\nregister('circle', circle);\nregister('line', line);\nregister('path', path);\nregister('text', text);\n\nexport default renderer;\n\nexport function rendererComponent(picasso) {\n  picasso.renderer('canvas', renderer);\n}\n","export default function render(rect, { g, doFill, doStroke }) {\n  g.beginPath();\n  g.rect(rect.x, rect.y, rect.width, rect.height);\n  if (doFill) {\n    g.fill();\n  }\n  if (doStroke) {\n    g.stroke();\n  }\n}\n","export default function render(circle, { g, doFill, doStroke }) {\n  g.beginPath();\n  g.moveTo(circle.cx + circle.r, circle.cy);\n  g.arc(circle.cx, circle.cy, circle.r, 0, Math.PI * 2, false);\n  if (doFill) {\n    g.fill();\n  }\n  if (doStroke) {\n    g.stroke();\n  }\n}\n","export default function render(line, { g, doStroke }) {\n  g.beginPath();\n  g.moveTo(line.x1, line.y1);\n  g.lineTo(line.x2, line.y2);\n  if (doStroke) {\n    g.stroke();\n  }\n}\n","export default function render(path, { g, doStroke, doFill }) {\n  const p = new Path2D(path.d);\n  if (doFill) {\n    g.fill(p);\n  }\n  if (doStroke) {\n    g.stroke(p);\n  }\n}\n","import { ellipsText, measureText } from '../../../text-manipulation';\nimport baselineHeuristic from '../../../text-manipulation/baseline-heuristic';\nimport { detectTextDirection, flipTextAnchor } from '../../../../core/utils/rtl-util';\n\nexport default function render(t, { g }) {\n  const text = ellipsText(t, measureText);\n\n  g.font = `${t['font-size']} ${t['font-family']}`;\n  g.canvas.dir = detectTextDirection(t.text);\n  const textAlign = t['text-anchor'] === 'middle' ? 'center' : t['text-anchor'];\n  g.textAlign = flipTextAnchor(textAlign, g.canvas.dir);\n\n  const bdy = baselineHeuristic(t);\n\n  g.fillText(text, t.x + t.dx, t.y + t.dy + bdy);\n}\n","import { ellipsText, measureText } from '../../text-manipulation';\nimport baselineHeuristic from '../../text-manipulation/baseline-heuristic';\nimport { detectTextDirection, flipTextAnchor } from '../../../core/utils/rtl-util';\n\nconst svgNs = 'http://www.w3.org/2000/svg';\n\nconst creator = (type, parent) => {\n  if (!type || typeof type !== 'string') {\n    throw new Error(`Invalid type: ${type}`);\n  }\n\n  const el = parent.ownerDocument.createElementNS(svgNs, type === 'container' ? 'g' : type);\n\n  parent.appendChild(el);\n  return el;\n};\n\nconst destroyer = (el) => {\n  if (el.parentNode) {\n    el.parentNode.removeChild(el);\n  }\n};\n\nconst maintainer = (element, item) => {\n  for (const attr in item.attrs) {\n    if (attr === 'text') {\n      element.setAttribute('style', 'white-space: pre');\n      element.textContent = ellipsText(item.attrs, measureText);\n      const dir = detectTextDirection(item.attrs.text);\n      if (dir === 'rtl') {\n        element.setAttribute('direction', 'rtl');\n        element.setAttribute('dir', 'rtl');\n        element.setAttribute('text-anchor', flipTextAnchor(element.getAttribute('text-anchor'), dir));\n      }\n    } else if (item.type === 'text' && (attr === 'dy' || attr === 'dominant-baseline')) {\n      const dy = +element.getAttribute(attr) || 0;\n      let val = 0;\n      if (attr === 'dominant-baseline') {\n        val = baselineHeuristic(item.attrs);\n      } else {\n        val = item.attrs[attr];\n      }\n      element.setAttribute('dy', val + dy);\n    } else {\n      element.setAttribute(attr, item.attrs[attr]);\n    }\n  }\n\n  if (typeof item.data === 'string' || typeof item.data === 'number' || typeof item.data === 'boolean') {\n    element.setAttribute('data', item.data);\n  } else if (typeof item.data === 'object' && item.data !== null) {\n    for (const d in item.data) {\n      if (typeof item.data[d] === 'string' || typeof item.data[d] === 'number' || typeof item.data[d] === 'boolean') {\n        element.setAttribute(`data-${d}`, item.data[d]);\n      }\n    }\n  }\n};\n\nexport {\n  svgNs,\n  creator,\n  maintainer,\n  destroyer\n};\n","module.exports = function(sel, data, children, text, elm) {\n  var key = data === undefined ? undefined : data.key;\n  return {sel: sel, data: data, children: children,\n          text: text, elm: elm, key: key};\n};\n","module.exports = {\n  array: Array.isArray,\n  primitive: function(s) { return typeof s === 'string' || typeof s === 'number'; },\n};\n","function createElement(tagName){\n  return document.createElement(tagName);\n}\n\nfunction createElementNS(namespaceURI, qualifiedName){\n  return document.createElementNS(namespaceURI, qualifiedName);\n}\n\nfunction createTextNode(text){\n  return document.createTextNode(text);\n}\n\n\nfunction insertBefore(parentNode, newNode, referenceNode){\n  parentNode.insertBefore(newNode, referenceNode);\n}\n\n\nfunction removeChild(node, child){\n  node.removeChild(child);\n}\n\nfunction appendChild(node, child){\n  node.appendChild(child);\n}\n\nfunction parentNode(node){\n  return node.parentElement;\n}\n\nfunction nextSibling(node){\n  return node.nextSibling;\n}\n\nfunction tagName(node){\n  return node.tagName;\n}\n\nfunction setTextContent(node, text){\n  node.textContent = text;\n}\n\nmodule.exports = {\n  createElement: createElement,\n  createElementNS: createElementNS,\n  createTextNode: createTextNode,\n  appendChild: appendChild,\n  removeChild: removeChild,\n  insertBefore: insertBefore,\n  parentNode: parentNode,\n  nextSibling: nextSibling,\n  tagName: tagName,\n  setTextContent: setTextContent\n};\n","import snabbdom from 'snabbdom';\nimport snabbdomAttributes from 'snabbdom/modules/attributes';\nimport snabbdomClass from 'snabbdom/modules/class';\nimport snabbdomStyle from 'snabbdom/modules/style';\nimport snabbdomEventlisteners from 'snabbdom/modules/eventlisteners';\nimport h from 'snabbdom/h';\n\nconst patch = snabbdom.init([\n  snabbdomAttributes,\n  snabbdomClass,\n  snabbdomStyle,\n  snabbdomEventlisteners\n]);\n\nexport {\n  h,\n  patch\n};\n","import renderer from './dom-renderer';\n\nexport default renderer;\n\nexport function rendererComponent(picasso) {\n  picasso.renderer('dom', renderer);\n}\n\n","const LOG_LEVEL = {\n  OFF: 0,\n  ERROR: 1,\n  WARN: 2,\n  INFO: 3,\n  DEBUG: 4\n};\n\nconst loggerFn = ({\n  level = LOG_LEVEL.OFF,\n  pipe = console\n} = {}) => {\n  let currentlevel = level;\n\n  const LOG_FN = {\n    [LOG_LEVEL.OFF]: () => {},\n    [LOG_LEVEL.ERROR]: (...args) => pipe.error(...args),\n    [LOG_LEVEL.WARN]: (...args) => pipe.warn(...args),\n    [LOG_LEVEL.INFO]: (...args) => pipe.info(...args),\n    [LOG_LEVEL.DEBUG]: (...args) => pipe.log(...args)\n  };\n\n  const log = (lev, ...args) => {\n    if (!lev || currentlevel < lev) { return; }\n\n    (LOG_FN[lev] || LOG_FN[LOG_LEVEL.DEBUG])(...args);\n  };\n\n  /**\n   * @typedef {object} logger\n   * @private\n   */\n\n  return /** @lends logger */ {\n    /**\n     * Log a message\n     * @param {number} lev - The log level\n     * @param {...any} args\n     * @kind function\n     */\n    log,\n\n    /**\n     * Log an error message\n     * @param {...any} args\n     */\n    error: (...args) => log(LOG_LEVEL.ERROR, ...args),\n\n    /**\n     * Log a warning message\n     * @param {...any} args\n     */\n    warn: (...args) => log(LOG_LEVEL.WARN, ...args),\n\n    /**\n     * Log an info message\n     * @param {...any} args\n     */\n    info: (...args) => log(LOG_LEVEL.INFO, ...args),\n\n    /**\n     * Log a debug message\n     * @param {...any} args\n     */\n    debug: (...args) => log(LOG_LEVEL.DEBUG, ...args),\n\n    /**\n     * Set the current log level\n     * @param {number} lev - The log level\n     */\n    level: (lev) => {\n      if (typeof lev === 'number') {\n        currentlevel = lev;\n      }\n      return currentlevel;\n    },\n\n    LOG_LEVEL\n  };\n};\n\nexport {\n  loggerFn as default\n};\n","const palettes = [\n  {\n    key: 'categorical',\n    colors: [\n      ['#a54343', '#d76c6c', '#ec983d', '#ecc43d', '#f9ec86', '#cbe989', '#70ba6e', '#578b60', '#79d69f', '#26a0a7', '#138185', '#65d3da'] // breeze colors\n    ]\n  },\n  {\n    key: 'diverging',\n    colors: [\n      ['#3d52a1', '#3a89c9', '#77b7e5', '#b4ddf7', '#e6f5fe', '#ffe3aa', '#f9bd7e', '#ed875e', '#d24d3e', '#ae1c3e']\n    ]\n  },\n  {\n    key: 'sequential',\n    colors: [\n      ['rgb(180,221,212)', 'rgb(34, 83, 90)']\n    ]\n  }\n];\n\n/* eslint quote-props: 0 */\nconst style = {\n  // -- FOUNDATION --\n  // fonts\n  '$font-family': \"'Source Sans Pro', Arial, sans-serif\",\n  '$font-size': '12px',\n  '$line-height': '16px',\n  '$font-size--l': '16px',\n\n  // base grays\n  '$gray-100': '#ffffff',\n  '$gray-98': '#f9f9f9',\n  '$gray-95': '#f2f2f2',\n  '$gray-90': '#e6e6e6',\n  '$gray-35': '#595959',\n  '$gray-30': '#4d4d4d',\n  '$gray-25': '#404040',\n  '$gray-20': '#333333',\n\n  // borders\n  '$border-95': 'rgba(255, 255, 255, 0.05)',\n  '$border-90': 'rgba(255, 255, 255, 0.1)',\n  '$border-80': 'rgba(255, 255, 255, 0.2)',\n  '$border-20': 'rgba(0, 0, 0, 0.2)',\n  '$border-10': 'rgba(0, 0, 0, 0.1)',\n  '$border-5': 'rgba(0, 0, 0, 0.05)',\n\n  // primary colors\n  '$primary-blue': '#3F8AB3',\n  '$primary-green': '#6CB33F',\n  '$primary-red': '#DC423F',\n  '$primary-orange': '#EF960F',\n\n  // spacing\n  '$spacing--s': 4,\n  '$spacing': 8,\n  '$spacing--l': 12,\n  // -------------------------\n\n  // -- ALIASES --\n  '$font-color': '$gray-35',\n  '$font-color--inverted': '$gray-90',\n  '$guide-color': '$gray-90',\n  '$guide-color--inverted': '$gray-35',\n  '$border': '$border-80',\n  '$border--inverted': '$border-10',\n  // -------------------------\n\n  // -- MIXINS --\n  // data points\n  '$shape': { // data shape\n    fill: '$primary-blue',\n    strokeWidth: 1,\n    stroke: '$border'\n  },\n\n  '$shape-outline': { // data shape which usually does not have a fill, e.g. the line in a linechart\n    stroke: '$primary-blue',\n    strokeWidth: 2\n  },\n\n  '$shape-guide': { // lines that somehow belongs to a data shape, e.g. whiskers in a boxplot\n    stroke: '$guide-color',\n    strokeWidth: 1\n  },\n\n  '$shape-guide--inverted': {\n    '@extend': '$shape-guide',\n    stroke: '$guide-color--inverted'\n  },\n\n  '$label': {\n    fontSize: '$font-size',\n    fontFamily: '$font-family',\n    fill: '$font-color'\n  },\n\n  '$label--inverted': {\n    '$extend': '$label',\n    fill: '$font-color--inverted'\n  },\n\n  // user interface\n  '$label-overlay': { // e.g. selection range bubble\n    fontSize: '$font-size--l',\n    fontFamily: '$font-family',\n    fill: '$gray-100', // background fill\n    color: '$font-color',\n    stroke: '$guide-color--inverted',\n    strokeWidth: 1,\n    borderRadius: 4\n  },\n\n  '$title': {\n    '@extend': '$label',\n    fontSize: '$font-size--l'\n  },\n\n  '$guide-line': {\n    strokeWidth: 1,\n    stroke: '$guide-color'\n  },\n\n  '$guide-line--minor': {\n    strokeWidth: 1,\n    stroke: '$gray-95' // needs alias\n  },\n\n  '$padding--s': {\n    left: '$spacing--s',\n    right: '$spacing--s',\n    top: '$spacing--s',\n    bottom: '$spacing--s'\n  },\n\n  '$padding': {\n    left: '$spacing',\n    right: '$spacing',\n    top: '$spacing',\n    bottom: '$spacing'\n  },\n\n  '$selection-area-target': {\n    fill: '$primary-green',\n    strokeWidth: 0,\n    opacity: 0.2\n  }\n};\n\nexport {\n  style,\n  palettes\n};\n"],"names":["roundRect","rect","x","Math","ceil","y","width","height","resolveLayout","container","settings","containerRect","logicalContainerRect","getBoundingClientRect","boundingRect","size","isNaN","logicalSize","align","min","max","preserveAspectRatio","getRect","resolveSettings","s","center","minWidthRatio","minHeightRatio","minWidth","minHeight","isNumber","v","notNumber","value","getMinMax","points","num","length","xMin","NaN","xMax","yMin","yMax","i","lineToPoints","line","x1","y1","x2","y2","rectToPoints","pointsToRect","pointsToLine","getShapeType","shape","cy","r","vertices","cx","Array","isArray","cacheSize","c","reducedRect","cachedSize","config","requiredSize","edgeBleed","reduceDocRect","dock","addEdgeBleed","currentEdgeBleed","left","right","top","bottom","reduceEdgeBleed","reducedRectRightBoundary","reducedRectBottomBoundary","reduceSingleLayoutRect","newReduceRect","extend","newEdgeBeed","minReduceWidth","minReduceHeight","validateReduceRect","boundingBox","rects","concat","map","positionComponents","components","vRect","hRect","referencedComponents","sort","a","b","test","displayOrder","forEach","outerRect","d","refs","split","replace","filter","key","scaleRatio","margin","xLessThenY","minRatio","area","spread","instance","resize","undefined","dockLayout","initialSettings","hiddenComponents","docker","addComponent","component","p","Error","removeComponent","push","dockConfig","prioOrder","minimumLayoutMode","show","fn","calcFn","this","order","idx","indexOf","splice","layout","layoutModes","reduced","sortedComponents","slice","filteredUnsortedComps","reduceLayoutRect","isTouchEvent","e","changedTouches","Path","_x0","_y0","_x1","_y1","_","path","asin","halfPi","arcInnerRadius","innerRadius","arcOuterRadius","outerRadius","arcStartAngle","startAngle","arcEndAngle","endAngle","arcPadAngle","padAngle","cornerTangents","x0","y0","r1","rc","cw","x01","y01","lo","sqrt","ox","oy","x11","y11","x10","y10","x00","y00","dx","dy","d2","D","cx0","cy0","cx1","cy1","dx0","dy0","dx1","dy1","Linear","context","_context","point","that","bezierCurveTo","Basis","_k","_x2","_y2","Cardinal","tension","CatmullRom","alpha","_alpha","sign","slope3","h0","h1","s0","s1","abs","slope2","t","h","t0","t1","MonotoneX","MonotoneY","ReflectContext","Natural","controlPoints","m","n","Step","_t","stackValue","sum","series","registryFactory","parentRegistry","add","TypeError","reg","get","parent","registry","defaultValue","default","has","remove","getKeys","Object","keys","getValues","register","formatSpecifier","specifier","FormatSpecifier","match","re","exec","fill","symbol","zero","comma","precision","type","formatTypes","newInterval","floori","offseti","count","field","interval","date","Date","floor","round","d0","d1","offset","step","range","start","stop","previous","setTime","end","every","isFinite","weekday","setDate","getDate","getDay","setHours","getTimezoneOffset","durationMinute","durationWeek","utcWeekday","setUTCDate","getUTCDate","getUTCDay","setUTCHours","localDate","H","M","S","L","setFullYear","utcDate","UTC","setUTCFullYear","newYear","formatLocale","locale","newFormat","formats","pad","format","string","j","charCodeAt","pads","charAt","join","newParse","newDate","week","day","parseSpecifier","Q","V","w","utcMonday","utcDay","getUTCFullYear","getUTCMonth","timeMonday","timeDay","getFullYear","getMonth","u","W","U","Z","parse","parses","locale_dateTime","dateTime","locale_date","locale_time","time","locale_periods","periods","locale_weekdays","days","locale_shortWeekdays","shortDays","locale_months","months","locale_shortMonths","shortMonths","periodRe","formatRe","periodLookup","formatLookup","weekdayRe","weekdayLookup","shortWeekdayRe","shortWeekdayLookup","monthRe","monthLookup","shortMonthRe","shortMonthLookup","A","B","formatDayOfMonth","f","formatMicroseconds","formatHour24","I","formatHour12","formatDayOfYear","formatMilliseconds","formatMonthNumber","formatMinutes","getHours","formatUnixTimestamp","formatUnixTimestampSeconds","formatSeconds","formatWeekdayNumberMonday","formatWeekNumberSunday","formatWeekNumberISO","formatWeekdayNumberSunday","formatWeekNumberMonday","X","formatYear","Y","formatFullYear","formatZone","%","formatLiteralPercent","utcFormats","formatUTCDayOfMonth","formatUTCMicroseconds","formatUTCHour24","formatUTCHour12","formatUTCDayOfYear","formatUTCMilliseconds","formatUTCMonthNumber","formatUTCMinutes","getUTCHours","formatUTCSeconds","formatUTCWeekdayNumberMonday","formatUTCWeekNumberSunday","formatUTCWeekNumberISO","formatUTCWeekdayNumberSunday","formatUTCWeekNumberMonday","formatUTCYear","formatUTCFullYear","formatUTCZone","toLowerCase","parseDayOfMonth","parseMicroseconds","parseHour24","parseDayOfYear","parseMilliseconds","parseMonthNumber","parseMinutes","parseUnixTimestamp","parseUnixTimestampSeconds","parseSeconds","parseWeekdayNumberMonday","parseWeekNumberSunday","parseWeekNumberISO","parseWeekdayNumberSunday","parseWeekNumberMonday","parseYear","parseFullYear","parseZone","parseLiteralPercent","toString","utcFormat","utcParse","requote","requoteRe","names","RegExp","numberRe","percentRe","timeYear","getMilliseconds","getMinutes","getSeconds","timeSunday","timeThursday","z","utcYear","getUTCMilliseconds","getUTCMinutes","getUTCSeconds","dow","utcSunday","utcThursday","data","id","accessors","tags","title","values","label","formatter","extract","dataConfig","extracted","logger","items","String","collection","source","dataset","valueFn","labelFn","groupBy","mapTo","warn","hierarchy","root","extractionsConfigs","sourceFields","cfg","fields","amend","obj","stack","ds","stackIds","stackFn","stackKey","startProp","endProp","valueRef","maxStackCount","valueFields","sourceField","ff","sid","apply","Number","call","matrix","ORDERS","OFFSETS","d3Stack","serie","item","stackedFields","dSource","fieldFn","create","options","deps","extractor","extractData","formatterType","tickIncrement","power","log","LN10","error","pow","e10","e5","e2","Map","object","each","set","o","Set","ordinal","scale","index","unknown","implicit","domain","arguments","copy","band","rescale","reverse","paddingInner","paddingOuter","bandwidth","sequence","ordinalRange","rangeRound","padding","definition","prototype","Color","color","trim","reHex3","parseInt","Rgb","reHex6","rgbn","reRgbInteger","reRgbPercent","reRgbaInteger","rgba","reRgbaPercent","reHslPercent","hsla","reHslaPercent","named","hasOwnProperty","g","rgbConvert","rgb","opacity","l","Hsl","hsl2rgb","m1","m2","labConvert","Lab","Hcl","deg2rad","cos","sin","rgb2xyz","xyz2lab","Xn","Yn","Zn","t3","t2","lab2xyz","xyz2rgb","cubehelix","Cubehelix","BC_DA","ED","EB","bl","k","E","C","atan2","rad2deg","cubehelixConvert","linear","gamma","nogamma","exponential","constant","hue","cubehelixGamma","colorCubehelix","deinterpolateLinear","bimap","deinterpolate","reinterpolate","r0","polymap","bisect","piecewise","output","input","clamp","deinterpolateClamp","interpolate","unit","interpolateValue","invert","reinterpolateClamp","number","interpolateRound","continuous","target","ticks","tickFormat","nice","i0","i1","linearish","threshold","invertExtent","applyFormat","val","isObject","minorTicksGenerator","appendMinorTicks","majorTicks","minorCount","looseDistanceBasedGenerator","distance","unitDivider","ticksFormatted","tick","position","tightDistanceBasedGenerator","generateContinuousTicks","minorTicks","ary","ticksByValue","tight","forceBounds","ticksP","isMinor","lastTick","ticksByCount","defaultSettings","stngs","initNormScale","normScale","scaleLinear","d3Scale","resources","d3ScaleLinear","ctx","stgns","DEFAULT_SETTINGS","DEFAULT_TICKS_SETTINGS","DEFAULT_MINORTICKS_SETTINGS","tickCache","cachedTicks","clearTicksCache","func","classify","segments","valueRange","samplePos","lastVal","calIntervalPos","sampleColValue","pop","cop","norm","normInvert","fieldMin","fieldMax","minValues","maxValues","expand","include","mini","maxi","scaleBand","augmentScaleBand","datum","domainToDataMapping","domainValue","labels","dataItems","generateDiscreteTicks","trackBy","d3ScaleBand","pxScale","maxPxStep","sizeRelativeToStep","newBand","arg","keyGen","node","ancestors","scaleHierarchicalBand","bandInstance","bandScale","rootNode","ticksDepth","depth","expando","eachAfter","leaves","isBranch","children","spill","flattenTree","hBand","strVal","rightEdge","leftEdge","bw","isLeaf","leafCount","stepSize","orgPxScale","minmax","arr","definedMin","definedMax","arrMin","minAccessor","numericFilter","arrMax","maxAccessor","scaleSequentialColor","interpolateRgb","isDomain","isRange","DEFAULT_COLORS","theme","palette","len","part","generateDomain","dataSourceConfig","getTypeFromMeta","deduceScaleTypeFromData","EventEmitter","init","scrollApi","viewSize","moveTo","newStart","emit","triggerUpdate","mixin","createOrUpdate","oldApi","update","boundaries","after","rangeCollection","args","before","clear","containsValue","contains","containsRange","toggle","ranges","valueCollection","vc","changedMap","changed","collectUnique","filteredSet","createValueCollection","diff","old","current","changedValues","filterFn","intercept","handlers","aliases","its","applyAliases","reduce","interceptor","toCamelCase","$1","toUpperCase","updateRange","action","interceptors","brush","activated","isActive","removed","brushes","hasChanged","result","addValue","addValues","added","setValues","vCollection","addedMap","oldMap","vcKeys","createValueCollectionFn","fsKeys","removeValue","removeValues","addAndRemoveValues","addItems","removeItems","addIts","removeIts","toggleValue","toggleValues","toggled","removedMap","fs","setKeys","addedKeys","removedKeys","addRange","addRanges","removeRange","removeRanges","setRange","setRanges","toggleRange","toggleRanges","containsRangeValue","containsMappedData","props","mode","status","bool","some","name","ic","removeInterceptor","removeAllInterceptors","toRemove","toSnakeCase","handler","addKeyAlias","alias","removeKeyAlias","cubicInOut","isPrimitive","updateScaleSize","scaleWithSize","reduceToLeafNodes","brushFromSceneNodes","nodes","chart","trigger","dataPoints","nodeData","dataProps","rangeBrush","valueBrush","actionFn","dataPoint","it","contexts","resolveEvent","collisions","brushCollisions","resolved","propagation","resolveCollisions","renderer","element","clientX","clientY","touchSingleContactPoint","singleContactPoint","touchRadius","itemsAt","resolveAction","def","prepareContext","opts","require","mediatorSettings","mediator","style","registries","resolver","defineProperty","isReservedProperty","bind","req","eventName","on","updateDockConfig","setUpEmitter","emitter","event","eventListeners","listener","componentFactory","createCallback","method","defaultMethod","inDefinition","inConfig","returnValue","definitionContext","instanceContext","settingsResolver","brushArgs","brushTriggers","brushStylers","componentMixins","mixins","typeMixins","listMixins","mixinName","preferredSize","inner","created","beforeMount","mounted","beforeUnmount","beforeUpdate","updated","beforeRender","beforeDestroy","destroyed","render","addBrushStylers","consume","brusher","active","inactive","styleProps","activeNodes","globalActivation","globalChanged","__style","activeIdx","ss","onStart","onEnd","onUpdate","removeListener","brushStyler","addBrushTriggers","over","tap","rendString","rend","outer","dataCollection","babelHelpers.typeof","newSize","getRenderArgs","renderArgs","currentNodes","hide","unmount","currentTween","cleanUp","bs","animations","enabled","ticker","toBeUpdated","entered","ips","exited","stages","text","tweener","ids","interpolateObject","easeCubic","easeElasticOut","started","now","window","requestAnimationFrame","currentStage","duration","tweenedNodes","tweens","ip","easing","shift","cancelAnimationFrame","tween","destroy","updateNodes","getBrushedShapes","shapes","sceneNodes","findShapes","selector","shapesAt","brushFromShapes","mount","appendTo","onBrushTap","resolveTapEvent","globalPropagation","toggleBrushing","onBrushOver","resolveOverEvent","v1","v2","sub","scalarMultiply","distanceX","distanceY","sqrDistance","dot","rotate","radians","origin","closestPointToLine","projectOnto","isPointOnLine","EPSILON","lineHasNoLength","rectHasNoSize","circleHasNoSize","circle","toFewEdges","polygon","edges","throwCyclical","res","references","VARIABLE_RX","computed","EXTEND","extendFrom","pext","themeFn","pals","colors","sizes","getPalette","styleResolver","addComponentDelta","containerBounds","componentBounds","deltaShape","chartFn","setInteractions","interactions","newKeys","cit","intSettings","intDefinition","interaction","palettes","chartMixins","listeners","mediatorFactory","currentComponents","visibleComponents","currentScales","currentFormatters","currentScrollApis","currentInteractions","stopBrushing","createComponent","compSettings","findComponent","componentInstance","findComponentIndexByKey","currComp","hasKey","createDockLayout","visible","hidden","_data","_settings","partialData","formatters","scales","scroll","dataSources","types","sets","datasetFactory","datasources","collections","coll","filtered","dataCollections","buildScales","buildFormatters","oldScrollApis","scrollApis","buildScroll","componentsFromPoint","br","tp","ret","NarrowPhaseCollision","testRectPoint","newProps","comp","updateWith","toUpdate","toRender","el","childNodes","insertBefore","moveToPosition","removeEventListener","getAffectedShapes","comps","compKeys","stopPropagation","configKeys","conf","configIndex","compShapes","getOrCreateScrollApi","getOrCreateScale","getOrCreateFormatter","off","innerHTML","addEventListener","eventInfo","onTapDown","touches","multiTouch","preventDefault","isTouch","ee","dt","button","isValidTapEvent","brushEventList","detectTouchSupport","resolve","substring","subpath","carr","normalizeProperties","dataProperties","main","mainField","pConfig","prop","reducers","getPropsInfo","collect","trackedItems","propsArr","mainFormatter","propsFormatters","mainValues","mainReduce","track","itemData","tracker","trackId","trackType","trackedItem","datumExtract","propCfg","cell","cache","query","findField","sourceKey","mapped","mainCell","propCell","headers","content","numericValues","filters","numeric","isMeasure","SEGMENT_PATTERN","command","numbers","NUMBER","parseValues","ARG_LENGTH","rotatePoint","angle","nx","ny","translatePoint","cap","box","boxWidth","boxPadding","rendwidth","rendheight","calcwidth","calcheight","flipXY","minPx","maxPx","high","low","highModified","lowModified","wantedDiff","actualDiff","startModifier","resolveDiff","minHeightPx","actualLow","major","verticalLine","from","to","boxCenter","horizontalLine","halfWidth","pointsToPath","close","generateCrossPoints","barWidth","innerLeft","innerTop","toRadians","PI","degreesToPoints","diagonal","op","angleToPoints","collider","createRectCollider","mappedAttributes","getPxSpaceFromScale","space","createDisplayPies","arcData","slices","arcGen","arc","cornerRadius","or","ir","centroid","vx","vy","vlen","offsetSlice","transform","arcValue","transposer","Transposer","lineGen","alignmentToNumber","createOobData","filterUndefinedValue","buildLine","buildOpts","struct","innerRect","strokeWidth","appendCollider","layered","tilted","startAnchor","anchor","em","sp","rotateVector","leftPoint","rightPoint","orderedPoints","leftBoundary","topBoundary","widthClip","heightClip","wiggle","isVertical","textRect","buildNode","checkText","maxWidth","maxHeight","baseline","rightBoundary","textWidth","leftTextBoundary","rightTextBoundary","bottomBoundary","textHeight","topTextBoundary","bottomTextBoundary","paddingEnd","textBounds","tickSize","isMajorTick","isToLarge","state","measure","horizontal","measureText","activeMode","isHorizontalLabelOverlapping","isVerticalLabelOverlapping","getClampedValue","maxValue","minValue","modifier","getSize","isDiscrete","maxLengthPx","minLengthPx","fontSize","fontFamily","glyphCount","maxGlyphCount","ellipsCharSize","prev","curr","Infinity","shouldAutoTilt","sizeFromTextRect","tiltAngle","tickMeasures","labelSizes","textSize","extendLeft","bleedSize","maxEdgeBleed","pos","absAngle","reciprocal","isTiltedLabelOverlapping","tickSpacing","spacing","paddingStart","labelsSpacing","tickBuilder","buildTick","tickBandwidth","discreteCalcMaxTextRect","continuousCalcMaxTextRect","nodeBuilder","discrete","build","minor","majorTickNodes","tickFn","maxSize","calcMaxTextRectFn","calcActualTextRect","getStepSizeFn","labelNodes","buildLabel","labelBuilder","padding2","layer","layeredLabelBuilder","filterLabels","isOverlapping","l1","l2","rect1","rect2","testRectRect","tickMinorSpacing","parseTitle","_scrollbar","lengthAttr","currentMove","scrollState","getState","scrollPoint","startScroll","swipe","startOffset","scrollMove","scrollStart","getLocalPos","borderHit","isAlignStart","alignStyle","targetRect","bubbles","elm","backgroundColor","stroke","buildBubble","otherValue","isOutside","placement","outside","bubbleDock","bubble","borderRadius","buildRange","els","vStart","vEnd","targetOffset","hasScale","targetFillRect","targetSize","targetStart","targetEnd","targetHeight","targetTop","targetArea","buildArea","getMoveDelta","posDelta","limitHigh","negDelta","limitLow","delta","direction","VERTICAL","TARGET_SIZE","rangelimits","areaLimits","findActive","limits","rs","activeRange","sourceData","sources","findClosest","minDist","halfBandwidth","rangesOverlap","r2","resolveNodeBounds","targetNodes","bounds","otherSize","setup","teardown","getPoint","rendererBounds","eventOffsetX","eventOffsetY","withinThreshold","snapIndicator","appendToPath","setSnapIndictor","showSnapIndicator","cbContext","placeTextInRect","textMetrics","wiggleHor","LINE_HEIGHT","wiggleVert","justify","wiggleWidth","wiggleHeight","getBarRect","bar","view","PADDING","minY","maxY","minX","maxX","findBestPlacement","fitsHorizontally","lblStngs","measured","orientation","placementSettings","barRect","largest","testBounds","localBounds","placeInBars","collectiveOrientation","findPlacement","placer","texts","bestPlacement","labelSettings","measurements","placements","createRenderItem","globalMetrics","symbolFn","symbolFactory","displayObject","labelBounds","symbolItem","meta","rtl","labelRect","maxLabelBounds","maxSymbolSize","wiggled","wiggleSymbol","maxItemBounds","extent","itemized","parallels","property","btn","nav","attrs","class","border","background","attrsMerged","disabled","DIR","display","itemRenderer","navigationRenderer","titleRenderer","isPreliminary","navigation","paddedRect","availableExtentForItems","availableSpreadForItems","parallelize","navigationSize","navigationSpread","next","shapeSettings","symbols","itemize","legend","contentItems","getItemsToRender","views","applyAlignJustify","cmd","resolveAnchor","valid","initRect","initState","titleStgns","fillScale","majorScale","tickValues","parseFloat","getTicks","tickAnchor","resolveTickAnchor","titleTextMetrics","titleTextBounds","maxLines","wordBreak","hyphens","lineHeight","resolveTitleAnchor","mw","fnPos","createDisplayLayer","generator","calculateVisibleLayers","coordinates","SETTINGS","layerIds","numLines","lid","layerId","firstPoint","metaLayers","layersData","layers","curve","lines","areas","visibleLayers","ix","layerObj","pData","missingMinor0","minor0","median","getLocalPoint","localX","localY","localToChartPoint","toRect","p0","p1","GeoPolygon","pointsAreNotEqual","resolveRotateCmd","translate","resolveScaleCmd","resolveTranslateCmd","resolveMatrixCmd","resolveTransform","transforms","commands","transformRegEx","argsStr","parseTransform","geometryToDef","geometry","dpi","mvm","transformPoints","pointsToCircle","SceneNode","Collision","appendParentNode","collision","createCollision","pp","resolveCollision","intersectionType","_collider","descendants","desc","resolveFrontChildCollision","transformedInput","createPolygon","resolveBoundsCollision","modelViewMatrix","inverseModelViewMatrix","transformPoint","resolveGeometryCollision","findAllCollisions","hasCollision","resolveShape","ratio","_shape","vertex","hasCollisionOnNode","reCalcBoundingRect","child","includeTransform","p2","_xMax","_boundingRect","_yMax","GradientItem","mid","cp1","cp2","td","toPoints","flatness","m0","q0","q1","cp","toCubic","cubicToPoints","arcToPoints","startX","startY","largeArcFlag","sweepFlag","rotation","endX","endY","rx","ry","sweepAngle","radiusRatio","rad","hdx","hdy","x1d","y1d","rxry","rxy1d","ryx1d","den","frac","cxd","cyd","ux","uy","PI_X2","arcToCenter","resAngle","pathToPoints","parsePath","cpx","cpy","qcpx","qcpy","pathType","cubicCurveToPoints","quadCurveToPoints","doEvent","updateState","traverse","styleContext","save","displayNode","isIdentity","clone","addChild","restore","scene","stage","Matrix","includesLineBreak","search","LINEBREAK_REGEX","includesWhiteSpace","WHITESPACE_REGEX","hyphenationAllowed","HYPHEN_REGEX","stringTokenizer","peek","peekAt","chunk","chunks","textMeasure","opportunity","mandatory","noBreakAllowed","MANDATORY","NO_BREAK","BREAK_ALLOWED","resolveBreakOpportunity","mandatoryBreakIdentifiers","noBreakAllowedIdentifiers","suppressIdentifier","hyphenationIdentifiers","separator","jumpToPosition","condition","done","measuredLineHeight","calcLineHeight","DEFAULT_LINE_HEIGHT","resolveMaxAllowedLines","HYPHENS_CHAR","newLine","appendToLine","token","insertHyphenAndJump","iterator","startIndex","pairToken","hyphenation","metrics","char","breakSequence","charTokenIterator","charToken","breakOpportunity","breakAll","suppress","breakWord","resolveLineBreakAlgorithm","onLineBreak","_lineBreak","shouldLineBreak","wordBreakFn","tm","wrappedMeasureText","currentY","ELLIPSIS_CHAR","generateLineNodes","ellipsText","reduceIndex","substr","baselineHeuristic","textNode","measureTextWidth","widthMeasureCache","canvasCache","document","createElement","getContext","font","heightMeasureCache","measureTextHeight","calcTextBounds","measureFn","calWidth","lineBreakFn","resolvedLineBreaks","nodeCopy","widestLine","createCanvasGradient","gradient","degree","stops","newGradient","theX","theY","createRadialGradient","createLinearGradient","addColorStop","createRendererBox","toLineDash","resolveMatrix","setTransform","applyContext","shapeToCanvasMap","computedKeys","shapeCmd","canvasCmd","convertCmd","renderShapes","fillStyle","strokeStyle","elements","sceneFn","sceneFactory","hasChangedRect","canvasRenderer","ownerDocument","pointerEvents","appendChild","dpiRatio","devicePixelRatio","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","backingStorePixelRatio","dpiScale","scaleX","scaleY","sceneContainer","newScene","hasChangedScene","equals","doRender","getItemsFrom","newRect","JSON","stringify","parentElement","removeChild","renderFn","isLtrChar","rangesOfLRgExp","isRtlChar","rangesOfRRgExp","rangesOfALRgExp","detectTextDirection","flipTextAnchor","dir","textAnchorRTLMap","updatedNew","updatedOld","fromIds","toIds","idMapper","nodeMapper","isTree","createNodes","destroyNodes","creator","maintainer","destroyer","createTree","oldItems","newItems","tree","TreeItemRenderer","checkGradient","attr","url","gradientHash","hash","hashObject","gradientId","gradientHashMap","onGradient","location","href","treeFn","treeFactory","ns","svgNs","group","svg","createElementNS","setAttribute","gradients","cloneNode","replaceChild","isUndef","isDef","sameVnode","vnode1","vnode2","sel","createKeyToOldIdx","beginIdx","endIdx","updateAttrs","oldVnode","vnode","cur","namespaceSplit","oldAttrs","booleanAttrsDict","removeAttribute","NamespaceURIs","setAttributeNS","updateClass","oldClass","klass","classList","setNextFrame","nextFrame","updateStyle","oldStyle","oldHasDel","delayed","invokeHandler","createListener","handleEvent","updateEventListeners","oldOn","oldListener","oldElm","addNS","dom","first","firstChild","pic","picassojs","regis","loggerFn","prio","use","plugin","usePlugin","version","about","hasOwn","toStr","isPlainObject","hasOwnConstructor","hasIsPrototypeOf","constructor","src","copyIsArray","deep","pi","tau","tauEpsilon","closePath","lineTo","quadraticCurveTo","arcTo","x21","y21","l01_2","x20","y20","l21_2","l20_2","l21","l01","tan","acos","t01","t21","a0","a1","ccw","da","epsilon","buffer","a01","a11","a00","a10","da0","da1","ap","rp","padRadius","rc0","rc1","oc","x3","y3","x32","y32","intersect","ax","ay","bx","by","kc","lc","areaStart","_line","areaEnd","lineStart","_point","lineEnd","defined0","defined","pointX","pointY","curveLinear","x0z","y0z","arealine","lineX0","lineY0","lineY1","lineX1","custom","cardinal","_l01_a","_l12_a","_l23_a","_l01_2a","_l12_2a","_l23_2a","x23","y23","catmullRom","_t0","_x","_y","px","py","prefixExponent","oz","kz","sz","sij","ki","si","orderNone","offsetNone","toExponential","coefficient","formatDecimal","exponent","out","toPrecision","toFixed","formatRounded","formatPrefix","prefixes","valuePrefix","prefix","valueSuffix","suffix","formatType","valueNegative","maybeSuffix","decimal","numerals","currency","percent","grouping","thousands","formatGroup","identity","formatNumerals","defaultLocale","millisecond","sunday","monday","thursday","year","setMonth","setUTCSeconds","setUTCMinutes","setUTCMonth","-","0","isoSpecifier","formatterRegistry","toISOString","pattern","thousand","d3format","reset","timeFormatLocale","parsePattern","formatterFn","yp","yn","stackOffsetNone","none","s2","sij0","s3","sk","sums","tops","bottoms","stackOrderNone","bisectRight","compare","ascending","ascendingComparator","hi","bisector","entries","empty","proto","array","factory","reI","reN","reP","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","define","displayable","brighter","darker","hslConvert","hclConvert","cosh","sinh","rgbGamma","colorRgb","reA","reB","am","bm","bi","lastIndex","q","one","nb","na","valueOf","cubehelix$1","cubehelixLong","step0","step1","tickStep","precisionPrefix","precisionRound","precisionFixed","interpolateCubehelixLong","DEFAULT_EXPLICIT_SETTINGS","scaleRegistry","sequential","scaleThreshold","numPoints","generateNiceDomain","seq","getBreaks","generateRange","scaleOrdinal","explicit","un","explicitDomain","numCopies","explicitRange","util","isUndefined","isFunction","_events","_maxListeners","defaultMaxListeners","setMaxListeners","er","addListener","newListener","warned","console","trace","once","fired","list","removeAllListeners","listenerCount","polyIn","polyOut","polyInOut","backIn","overshoot","backOut","backInOut","elasticOut","elasticIn","amplitude","period","GLOBAL_DEFAULTS","elasticInOut","REF_RX","externals","defaults","composition","defs","vType","defaultType","ref","normalized","fallbackData","dataContext","normalizedProp","exists","hasExplicitDataProp","hasImplicitDataProp","propData","scaled","normalizeSettings","resolveForItem","rX","rY","rcX","rcY","dX","dY","testCirclePoint","pointOnLine","circle1","circle2","testPolygonPoint","edge","testCircleLine","even","rayStart","testLineLine","testRectLine","p3","p4","rectEdges","line1","line2","dx2","dy2","dx3","dy3","ub","uat","ubt","ua","rendererRegistry","componentRegistry","unfilteredReducers","dataRegistry","addEvents","enable","events","removeAddedEvents","nativeEvents","itKey","isOn","newSettings","Path2D","buildPath","canvas","endPoint","centerPoint","currentPoint","beginPath","lineWidth","getImageData","supportsSvgPathArgument","cp1x","cp1y","cp2x","cp2y","_fill","CanvasRenderingContext2D","_stroke","fillRule","DEFAULT_DATA_SETTINGS","dataKeys","majorSettings","majorResolved","binStart","binEnd","minorSettings","ext","complexResolver","majorVal","majorEndVal","maxMajorWidth","maxWidthPx","med","whisker","whiskerWidth","buildShapes","DIRECTION_TO_ANGLE","adjustedSize","directionAngle","halfSize","drawPoints","pAngle","innerRadians","iy","radius","sides","DEFAULT_ERROR_SETTINGS","SIZE_LIMITS","sizeLimits","pointSize","xSpacePx","ySpacePx","maxSizePx","isBandwidth","minSizePx","maxGlobal","minGlobal","getPointSizeLimits","shapeFn","errorShape","shapeSpec","strokeDasharray","createDisplayPoints","shapeFactory","pieComponent","arcValues","pieGen","pie","arcs","pa","sortValues","descending","crispifier","crispMap","crispItem","self","doAppend","conditionAppend","rounded","append","toAppend","multiple","crispifierFactory","coordinate","firstChar","storage","newItem","crisp","objectKeys","kl","evaluateKey","nkey","nval","transposeCoordinate","processItem","rest","gridLineComponent","blueprint","_this","refLineComponent","oob","doesNotCollide","measuredValue","valueString","scaleData","measuredLabel","labelPadding","vAlign","calcWidth","calcHeight","rectWidth","rectHeight","curItem","oobKeys","xPadding","yPadding","indicator","directionMarker","triangle","directionTriangle","DEFAULT_DISCRETE_SETTINGS","DEFAULT_CONTINUOUS_SETTINGS","axisComponent","defaultDock","setState","defaultStgns","localStgns","vertical","resolveAlign","resolveLocalSettings","concreteNodeBuilder","isHorizontal","updateActiveMode","getLabelSize","labelSize","minorTicksSize","calcRequiredSize","extendedInner","alignTransform","finalOuter","textComponent","definitionSettings","getTextAnchor","paddingLeft","paddingRight","generateTitle","scrollbarComponent","startPos","deltaX","deltaY","thumbStart","thumbRange","thumbColor","brushRangeComponent","move","targetFillNodes","fillSelector","fillBounds","resolveTarget","brushInstance","multi","cssCoord","fauxBrushInstance","findValues","findClosestLabel","brushFactory","rangesValues","scaleRange","startIdx","valueRanges","elementFromPoint","tempState","relX","relY","startPoint","coord","relStart","hasAttribute","getAttribute","pxStart","pxEnd","Collisions","rel","ordRS","oldValues","addedValues","removedValues","brushAreaDirectionalComponent","shapeAt","labelShape","bounds0","bounds1","compConfig","c0","c1","getBubbleLabel","brushRange","shapesFromRange","newShapes","rangeComponent","brushLassoComponent","cancel","initPath","lasso","initSnapIndicator","initStartPoint","componentDelta","chartBounds","getComponentDelta","brushConfig","getBrushConfig","lineBrushShape","strategies","labelSetting","labelStruct","hasHorizontalDirection","lblStng","precalculate","labelsComponent","strategy","onScroll","viewRect","overflow","api","sourceItems","sourceSymbols","sourceLabels","maxLabelWidth","maxLabelHeight","getContentOverflow","offsetProperty","legendItems","renderItems","fixedHeight","fixedWidth","rowHeight","columnWidth","renderItem","availableExtent","availableSpread","extentProperty","extentInPx","numNeeded","spreadProperty","numAllowed","numInput","getNextSize","getPrevSize","isRtl","hasNext","hasPrev","renderElement","itemRendererFactory","navigationRendererFactory","titleRendererFactory","tempLayout","legendDef","prefSize","paddings","requiredWidth","titleNode","isTickLeft","isTickTop","textAnchor","createTitleNode","rectNode","requiredHeight","createLegendRectNode","generateStopNodes","targetNode","legendNode","rangeSelectorRect","createTickNodes","CURVES","curveCardinal","curveCatmullRom","lineMarkerComponent","lineObj","areaObj","areaGenerator","lineGenerator","secondaryLineGenerator","temp","createDisplayLayers","picasso","pointMarkerComponent","rangeBrushComponent","lassoBrushComponent","legendSeq","Node","_parent","_children","_ancestors","nChildren","ch","toJSON","GeoRect","testCircleRect","testPolygonRect","GeoCircle","minRadius","vector","testCircleCircle","testCirclePolygon","GeoLine","tolerance","vectors","zeroSize","testLinePoint","testPolygonLine","v0","last","_bounds","intersects","GeoPolyline","_points","testLine","GeometryCollection","geometries","geo","geoInstance","containsPoint","intersectsLine","intersectsRect","intersectsCircle","intersectsPolygon","_elements","_stack","multiply","radianAngle","determinant","vec","SELECTOR_MAPS","FILTERS","objects","operator","tag","groupResults","groups","info","validSelector","selectorMapsIterator","attribute","attributeValue","tokenize","tokens","gi","glen","levels","hasRemainder","selected","ancestor","ni","nlen","withTransform","_attrs","_type","_dpi","colliderToShape","_desc","_tag","_element","_key","_node","createSceneNode","_input","DisplayObject","_stage","sourceValue","mappedKey","geometryCollection","nodeSelector","find","resolveCollionsOnNode","resolveLocalTransform","attrKeys","dAttrs","dAttrKeys","json","_mvm","_imvm","NodeContainer","indx","NC","Container","addChildren","removeChildren","Stage","_dpiRatio","allowedAttrs","attrKey","Rect","Circle","Line","defaultCollider","hasSize","col","pathToSegments","segment","isClosed","newAry","flatten","Text","textBoundsFn","gradientitem","states","whitelist","contextFactory","doFill","doStroke","textAlign","bdy","fillText","parentNode","textContent","treeCreator","nodeCreator","nodeMaintainer","nodeDestroyer","primitive","tagName","namespaceURI","qualifiedName","createTextNode","newNode","referenceNode","nextSibling","setTextContent","emptyNode","VNode","hooks","modules","createRmCb","childElm","createElm","insertedVnodeQueue","hook","hashIdx","dotIdx","className","is","cbs","insert","addVnodes","parentElm","vnodes","invokeDestroyHook","removeVnodes","rm","patchVnode","prepatch","oldCh","newCh","oldKeyToIdx","idxInOld","elmToMove","oldStartIdx","newStartIdx","oldEndIdx","oldStartVnode","oldEndVnode","newEndIdx","newStartVnode","newEndVnode","updateChildren","postpatch","domApi","pre","emptyNodeAt","post","xlink","booleanAttrs","raf","setTimeout","amount","applied","getComputedStyle","ev","patch","snabbdom","snabbdomAttributes","snabbdomClass","snabbdomStyle","snabbdomEventlisteners","LOG_LEVEL","level","OFF","pipe","currentlevel","LOG_FN","ERROR","WARN","INFO","DEBUG","lev","interactionRegistry","renderers"],"mappings":"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"}
